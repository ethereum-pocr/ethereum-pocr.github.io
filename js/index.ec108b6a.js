(function(e){function t(t){for(var n,s,i=t[0],c=t[1],u=t[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(p.length)p.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],n=!0,i=1;i<r.length;i++){var c=r[i];0!==a[c]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={index:0},o=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var l=c;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},18:function(e,t){},19:function(e,t){},2:function(e,t){},20:function(e,t){},21:function(e,t){},22:function(e,t){},23:function(e,t){},24:function(e,t){},25:function(e,t){},26:function(e,t){},27:function(e,t){},28:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",{attrs:{id:"inspire"}},[r("v-container",[r("app-menu"),r("v-app-bar",{attrs:{app:"","clipped-left":"",flat:"",color:"teal lighten-2"}},[r("v-toolbar-title",[e._v("Proof of Carbon Reduction")])],1),r("v-main",[r("v-container",{staticClass:"py-8"},[r("router-view")],1)],1)],1),r("v-overlay",{attrs:{value:e.mmIsOpen}},[r("v-progress-circular",{attrs:{indeterminate:""}})],1),r("v-snackbar",{attrs:{"multi-line":"",color:e.snackbarColor,right:""},model:{value:e.displaySnackbar,callback:function(t){e.displaySnackbar=t},expression:"displaySnackbar"}},[e._v(" "+e._s(e.snackbarMessage)+" ")]),r("wallet-authentication-dialog",{ref:"walletAuthenticationDialog"})],1)},o=[],s=r("5530"),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-navigation-drawer",{attrs:{app:"",clipped:"",flat:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[r("v-divider"),r("v-list",[r("v-list-item-group",{attrs:{value:e.$route.name,mandatory:"",color:"primary"}},[e._l(e.sidenav,(function(t,n){var a=t.icon,o=t.label,s=t.route,i=t.disabled,c=t.subheader;return[c&&""!==o&&0!==n?r("v-divider",{key:o+"-divider"}):e._e(),c&&""!==o?r("v-subheader",{key:o},[e._v(e._s(o))]):r("v-list-item",{key:s,attrs:{value:s,disabled:i(),link:""},on:{click:function(t){return e.goTo(s)}}},[r("v-list-item-icon",[r("v-icon",[e._v(e._s(a))])],1),r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(o))])],1)],1)]}))],2)],1)],1)},c=[],u=r("b85c"),l=(r("d81d"),r("4de4"),r("d3b7"),r("b0c0"),r("fb6a"),r("caad"),r("7ffd")),d=r("8c4f"),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._v("Install MetaMask and then reload this application.")])},f=[],h={},v=h,m=r("2877"),b=Object(m["a"])(v,p,f,!1,null,null,null),g=b.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.hasProviderMetamask?r("v-btn",{attrs:{color:"teal",dark:""},on:{click:e.openMetaMaskConnectionDialog}},[e._v("Connect Metamask Wallet")]):e._e(),r("br"),r("br"),e.hasProviderDirect?r("div",[r("v-btn",{attrs:{color:"teal",dark:""},on:{click:e.prepareOpenWeb3DirectConnectionDialog}},[e._v("Connect with below configuration")]),e._v(" "),r("br"),r("br"),r("v-select",{attrs:{hint:"node: "+e.selectedNetwork.nodeUrl+"; custody: "+e.selectedNetwork.walletCustodyAPIBaseUrl,items:e.networks,"item-text":"name","item-value":"nodeUrl","persistent-hint":"","return-object":"","single-line":""},model:{value:e.selectedNetwork,callback:function(t){e.selectedNetwork=t},expression:"selectedNetwork"}}),e.hasCustodyApi?r("div",[r("br"),r("v-combobox",{attrs:{label:"Enter the wallet address",placeholder:"capture your wallet address",outlined:"",counter:"",clearable:"","search-input":e.wallet,items:e.wallets},on:{"update:search-input":e.updateWallet}}),r("v-text-field",{attrs:{label:"Enter the wallet password",placeholder:"capture your wallet password",outlined:"",type:e.show?"text":"password"},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1):e._e()],1):e._e()],1)},k=[],x=r("1da1"),y=(r("96cf"),r("33d1"),r("ea98"),r("d9e2"),r("99af"),r("ac1f"),r("1276"),r("e9c4"),r("a15b"),r("a434"),r("99e5")),O=r.n(y),A=r("cde1"),R=r("a086"),_=r("602f"),j=r("b955"),C=r.n(j),N=r("2f62"),P=l["b"];l["b"].options.mapping="simple";r("8a79"),r("3ca3"),r("ddb0"),r("2b3d"),r("9861"),r("2532"),r("7db0");function I(e,t){if(t&&!Array.isArray(t)&&(t=[t]),t&&(t=t.map((function(e){return(e.endsWith(":")?e:e+":").toLowerCase()}))),e)try{var r=new URL(e);if(t&&!t.includes(r.protocol))return;return r}catch(n){return}}function M(e){return S.apply(this,arguments)}function S(){return S=Object(x["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:Array.isArray(t.networks)||(t.networks=[]),r=Object(u["a"])(t.networks);try{for(r.s();!(n=r.n()).done;)a=n.value,I(a.nodeUrl,["http","https","ws","wss"])||delete a.nodeUrl,I(a.walletCustodyAPIBaseUrl,["http","https"])||delete a.walletCustodyAPIBaseUrl}catch(o){r.e(o)}finally{r.f()}return 0==t.networks.length&&t.networks.push({name:"No network defined in the configuration"}),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function B(e){var t=e.networks.find((function(e){return e.default}));return!t&&e.networks.length>0&&(t=e.networks[0]),t}function F(e,t){var r,n=Object(u["a"])(e.networks);try{for(n.s();!(r=n.n()).done;){var a=r.value;a.nodeUrl==t?a.default=!0:a.default=!1}}catch(o){n.e(o)}finally{n.f()}return e}function T(e){return e.networks}var V=r("2909"),D=(r("25eb"),r("a9e3"),r("4e82"),r("07ac"),r("2ca0"),r("c35a"),r("4c53"),r("86b4")),U=30,E=function(){return{nbOfNodes:0,totalFootprint:0,totalCrypto:0,sealers:[],chainUpdateSubscription:null,blocks:[]}},H=function(e){return e.reduce((function(e,t){return e+t}),0)/e.length},W={rewardsByBlock:function(e){var t=e.blocks.map((function(e){return e.sealer.lastReward}));return t.unshift(0),t},averageReward:function(e){if(0===e.blocks.length)return 0;var t=e.blocks.map((function(e){return e.sealer.lastReward}));return H(t)},averageDelaySec:function(e){if(e.blocks.length<2)return 0;var t=e.blocks[e.blocks.length-2],r=e.blocks[e.blocks.length-1];return(r.receivedAt-t.receivedAt)/1e3},lastBlock:function(e){return 0===e.blocks.length?null:e.blocks[e.blocks.length-1]},lastBlockNumber:function(e,t){var r;return null===(r=t.lastBlock)||void 0===r?void 0:r.block.number}},$=l["d"].mutations(E);function L(e,t){return G.apply(this,arguments)}function G(){return G=Object(x["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,s,i,c,u,l,d,p,f,h;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Ke(Se.get("auth/provider")),a=Se.get("auth/contract"),o={block:r,sealer:void 0},e.prev=3,"string"!==typeof r.difficulty||r.difficulty.startsWith("0x")||(r.difficulty=Number.parseInt(r.difficulty)),o.sealer=Object(D["poaBlockHashToSealerInfo"])(r),s="string"===typeof r.number?Number.parseInt(r.number):r.number,e.t0=t.utils,e.next=10,t.eth.getBalance(o.sealer.address,s);case 10:return e.t1=e.sent,i=e.t0.toBN.call(e.t0,e.t1),e.t2=t.utils,e.next=15,t.eth.getBalance(a.deployedAt,s);case 15:return e.t3=e.sent,c=e.t2.toBN.call(e.t2,e.t3),e.t4=t.utils,e.next=20,t.eth.getBalance(a.deployedAt,s-1);case 20:return e.t5=e.sent,u=e.t4.toBN.call(e.t4,e.t5),l=Number.parseFloat(t.utils.fromWei(c.sub(u))),d=Number.parseFloat(t.utils.fromWei(i,"ether")),e.next=26,a.footprint(n.call(),o.sealer.address);case 26:return p=e.sent,e.next=29,a.totalFootprint(n.call());case 29:return f=e.sent,e.next=32,a.nbNodes(n.call());case 32:h=e.sent,o.sealer.footprint=Number.parseFloat(p),o.sealer.balance=d,o.totalFootprint=Number.parseInt(f),o.totalCrypto=Number.parseFloat(t.utils.fromWei(c,"ether")),o.nbNodes=Number.parseInt(h),o.sealer.lastReward=l,o.receivedAt=Date.now(),e.next=45;break;case 42:e.prev=42,e.t6=e["catch"](3),console.warn("Error in preparing block",e.t6);case 45:return e.abrupt("return",o);case 46:case"end":return e.stop()}}),e,null,[[3,42]])}))),G.apply(this,arguments)}var J={fetchAllValues:function(e){var t=e.dispatch;t("fetchNumberOfNodes"),t("fetchTotalFootprint"),t("fetchNodeInformations")},fetchNumberOfNodes:function(){return Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ye("nbNodes");case 2:t=e.sent,Se.set("nodes/nbOfNodes",Number.parseInt(t));case 4:case"end":return e.stop()}}),e)})))()},fetchTotalFootprint:function(){return Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ye("totalFootprint");case 2:t=e.sent,Se.set("nodes/totalFootprint",Number.parseInt(t));case 4:case"end":return e.stop()}}),e)})))()},subscribeToChainUpdates:function(e){var t=e.state,r=e.rootState,n=e.dispatch;null!==t.chainUpdateSubscription&&t.chainUpdateSubscription.unsubscribe(),n("fetchChainInformations");var a=new O.a(r.auth.provider),o=a.eth.subscribe("newBlockHeaders");o.on("data",(function(e){return n("insertNewBlock",e)})),Se.set("nodes/chainUpdateSubscription",o)},unsubscribeToChainUpdates:function(){null!==E.chainUpdateSubscription&&E.chainUpdateSubscription.unsubscribe()},insertNewBlock:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.state,a=new O.a(Se.get("auth/provider")),o=Object(V["a"])(n.blocks),o.length>=U&&o.shift(),r.t0=o,r.next=7,L(a,t);case 7:r.t1=r.sent,r.t0.push.call(r.t0,r.t1),Se.set("nodes/blocks",o);case 10:case"end":return r.stop()}}),r)})))()},fetchChainInformations:function(e){var t=this;return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.rootState,a=new O.a(n.auth.provider),o=[],r.next=5,a.eth.getBlockNumber();case 5:s=r.sent,t.blockNumber=s,i=Math.max(0,s-U),console.log("From block",i,"to",s);case 9:if(!(i<s)){r.next=21;break}return r.next=12,a.eth.getBlock(i,!1);case 12:return c=r.sent,r.t0=o,r.next=16,L(a,c);case 16:r.t1=r.sent,r.t0.push.call(r.t0,r.t1);case 18:i++,r.next=9;break;case 21:Se.set("nodes/blocks",o);case 22:case"end":return r.stop()}}),r)})))()},fetchNodeInformations:function(e){return Object(x["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o,s,i,c,u,l,d,p,f,h;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.rootState,n=new O.a(r.auth.provider),t.next=4,n.eth.getBlockNumber();case 4:a=t.sent,o={},s={},i=0,c=0;case 9:if(!(c<=2)){t.next=26;break}return l=a-i,t.next=13,n.eth.getBlock(l,!1);case 13:return d=t.sent,t.next=16,L(n,d);case 16:p=t.sent,console.log("block",p.block.number,"sealer",p.sealer),0===i&&(console.log("data",p),Se.set("nodes/totalCrypto",p.totalCrypto)),f=p.sealer.address,o[f]||(o[f]=p.sealer),s[f]=(null!==(u=s[f])&&void 0!==u?u:0)+1,c=Math.max(c,s[f]),i++,t.next=9;break;case 26:h=Object.values(o).sort((function(e,t){return e.footprint<t.footprint})),Se.set("nodes/sealers",h);case 28:case"end":return t.stop()}}),t)})))()},updateFootprint:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.dispatch,a=t.sealerAddress,o=t.footprint,r.next=4,nt(et("setFootprint",a,o));case 4:n("fetchNodeInformations");case 5:case"end":return r.stop()}}),r)})))()}},z={state:E,getters:W,mutations:$,actions:J,namespaced:!0},q=r("4c41"),K=r.n(q),Y=function(){return{provider:null,providerMetamask:null,providerDirect:null,providerModel:null,custodyModel:null,custodyApiUrl:null,wallet:null,contract:null,registered:!1,isNode:!1,isAuditor:!1,walletAuthenticationFunction:null}},Q={},X=l["d"].mutations(Y);function Z(){return ee.apply(this,arguments)}function ee(){return ee=Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,K()();case 2:if(t=e.sent,!t){e.next=8;break}return t.on("accountsChanged",(function(){return window.location.reload()})),e.abrupt("return",{providerModel:"metamask",provider:t,custodyModel:"metamask",custodyApiUrl:null});case 8:return e.abrupt("return",void 0);case 9:case"end":return e.stop()}}),e)}))),ee.apply(this,arguments)}function te(){return re.apply(this,arguments)}function re(){return re=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=Se.get("config"),r=B(t),!r.nodeUrl){e.next=8;break}return n={providerModel:"direct",provider:De(r.nodeUrl),custodyModel:null,custodyApiUrl:null},r.walletCustodyAPIBaseUrl?(n.custodyModel="api",n.custodyApiUrl=r.walletCustodyAPIBaseUrl):console.log("Note: No company's wallet custody configured"),e.abrupt("return",n);case 8:return console.log("Note: No direct web3 access configured"),e.abrupt("return",void 0);case 10:case"end":return e.stop()}}),e)}))),re.apply(this,arguments)}var ne={fetchRole:function(){return Object(x["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Se.set("auth/isAuditor",!1),Se.set("auth/isNode",!1),t=Se.get("auth/wallet"),!t){e.next=12;break}return e.next=6,Ye("auditorRegistered",t);case 6:return r=e.sent,e.next=9,Ye("canActAsSealerNode",t);case 9:n=e.sent,Se.set("auth/isAuditor",r),Se.set("auth/isNode",n);case 12:case"end":return e.stop()}}),e)})))()},detectProvider:function(){return Object(x["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Before detecting providers"),e.prev=1,e.next=4,Se.dispatch("fetchConfig");case 4:return t=0,e.next=7,Z();case 7:return r=e.sent,r&&t++,e.next=11,te();case 11:if(n=e.sent,n&&t++,0!=t){e.next=15;break}return e.abrupt("return");case 15:Se.set("auth/providerMetamask",r),Se.set("auth/providerDirect",n),t>1?Se.set("auth/providerModel","both"):(a=n||r,Se.set("auth/provider",a.provider),Se.set("auth/providerModel",a.providerModel)),e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](1),console.error("Fail detecting a valid provider",e.t0.message);case 23:case"end":return e.stop()}}),e,null,[[1,20]])})))()},attemptToConnectWallet:function(){return Object(x["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=[],r=Se.get("auth/providerMetamask"),n=Se.get("auth/providerDirect"),!r){e.next=7;break}return e.next=6,window.ethereum.request({method:"eth_accounts"});case 6:t=e.sent;case 7:if(!n||0!=t.length){e.next=11;break}return e.next=10,ze();case 10:t=e.sent;case 11:if(console.log("attemptToConnectWallet",t),a=t.length>0?t[0]:null,a){e.next=15;break}return e.abrupt("return");case 15:return Se.set("auth/wallet",a),e.abrupt("return",a);case 17:case"end":return e.stop()}}),e)})))()},openMetaMaskConnectionDialog:function(e){return Object(x["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.dispatch,Se.set("auth/wallet",null),t.next=4,window.ethereum.request({method:"eth_requestAccounts"});case 4:if(n=t.sent,0!==n.length){t.next=7;break}return t.abrupt("return");case 7:Se.set("auth/wallet",n[0]),a=Se.get("auth/providerMetamask"),Se.set("auth/provider",a.provider),Se.set("auth/providerModel",a.providerModel),r("fetchRole"),Xt.push({name:"dashboard"});case 13:case"end":return t.stop()}}),t)})))()},openWeb3DirectConnectionDialog:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,o,s,i,c,u;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.dispatch,a=t.wallet,o=t.password,s=t.nodeUrl,Se.set("auth/wallet",null),i=Se.get("config"),i=F(i,s),Se.set("config",i),r.next=8,te();case 8:if(c=r.sent,Se.set("auth/provider",c.provider),Se.set("auth/providerModel",c.providerModel),"api"!=c.custodyModel){r.next=16;break}return r.next=14,Ge(a,o);case 14:u=r.sent,u&&Se.set("auth/wallet",a);case 16:n("fetchRole"),Xt.push({name:"dashboard"});case 18:case"end":return r.stop()}}),r)})))()},fetchIsRegistered:function(e){return Object(x["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.state,t.next=3,nt(Ye("auditorRegistered",r.wallet));case 3:n=t.sent,Se.set("auth/registered",n);case 5:case"end":return t.stop()}}),t)})))()},selfRegister:function(e){return Object(x["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.dispatch,t.next=3,nt(rt("selfRegisterAuditor",{maxGas:18e4}));case 3:r("fetchIsRegistered"),r("status/fetchIsApproved",null,{root:!0}),r("fetchRole");case 6:case"end":return t.stop()}}),t)})))()}},ae={state:Y,getters:Q,mutations:X,actions:ne,namespaced:!0},oe=r("901e"),se=Math.pow(10,9),ie=Math.pow(10,18);function ce(e){return new oe["BigNumber"](e)}function ue(e){return ce(e).div(ce(ie))}function le(e,t){var r=ce(e);return"ether"===t?r.multipliedBy(ie):"gwei"===t?r.multipliedBy(se):r}r("4dd0c");var de=function(){return{pledgeHistory:[],footprintHistory:[]}},pe={},fe=Object(s["a"])(Object(s["a"])({},l["d"].mutations(de)),{},{appendFootprint:function(e,t){e.footprintHistory.push(t)},appendPledge:function(e,t){e.pledgeHistory.push(t)}}),he={fetchAllValues:function(e){var t=e.dispatch,r=new A["Web3FunctionProvider"](Se.get("auth/provider"),(function(){return Promise.resolve(Se.get("auth/wallet"))})),n=C.a.get("Governance").at(He);t("fetchFootprintHistory",{contract:n,prov:r}),t("fetchPledgeHistory",{contract:n,prov:r})},fetchFootprintHistory:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:n=e.commit,a=t.contract,o=t.prov,Se.set("history/footprintHistory",[]),a.events.CarbonFootprintUpdate(o.get({fromBlock:1}),{}).on("log",(function(e){var t={blockNumber:e.blockNumber,node:e.returnValues.node,footprint:e.returnValues.footprint};n("appendFootprint",t)}));case 4:case"end":return r.stop()}}),r)})))()},fetchPledgeHistory:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n,a,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.commit,a=t.contract,o=t.prov,Se.set("history/pledgeHistory",[]),r.t0=a.events,r.t1=o.get({fromBlock:1}),r.next=7,o.account();case 7:r.t2=r.sent,r.t3={from:r.t2},r.t0.AmountPledged.call(r.t0,r.t1,r.t3).on("log",(function(e){var t={blockNumber:e.blockNumber,node:e.returnValues.from,pledge:ue(e.returnValues.amount),total:ue(e.returnValues.total)};n("appendPledge",t)}));case 10:case"end":return r.stop()}}),r)})))()}},ve={state:de,getters:pe,mutations:fe,actions:he,namespaced:!0},me=function(){return{balance:0,minPledgeAmount:0,pledgedAmount:0,redeemBool:!1}},be={},ge=l["d"].mutations(me),we={fetchAllValues:function(e){var t=e.dispatch;t("fetchBalance"),t("fetchMinPledgeAmount"),t("fetchPledgedAmount"),t("fetchCanTransferPledge")},fetchBalance:function(e){return Object(x["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.rootState,t.next=3,Ue(r.auth.wallet);case 3:n=t.sent,Se.set("pledge/balance",n);case 5:case"end":return t.stop()}}),t)})))()},fetchCanTransferPledge:function(){return Object(x["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Se.get("auth/wallet"),e.next=3,Ye("canTransferPledge",t,"1");case 3:r=e.sent,console.log("just trying",r),Se.set("pledge/redeemBool",r);case 6:case"end":return e.stop()}}),e)})))()},fetchMinPledgeAmount:function(){return Object(x["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Se.get("auth/wallet"),e.next=3,Ye("minPledgeAmountToAuditNode",t);case 3:r=e.sent,Se.set("pledge/minPledgeAmount",r);case 5:case"end":return e.stop()}}),e)})))()},fetchPledgedAmount:function(){return Object(x["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Se.get("auth/wallet"),e.next=3,Ye("pledgedAmount",t);case 3:r=e.sent,Se.set("pledge/pledgedAmount",ue(r));case 5:case"end":return e.stop()}}),e)})))()},addToPledge:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.dispatch,console.log("Pledging",t),r.next=4,nt(rt("pledge",{amount:le(t,"ether")}));case 4:n("fetchPledgedAmount");case 5:case"end":return r.stop()}}),r)})))()},redeemPledge:function(e){return Object(x["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.dispatch,n=Se.get("auth/wallet"),a=Se.get("pledge/pledgedAmount"),t.next=5,nt(et("transferPledge",n,a));case 5:r("fetchPledgedAmount");case 6:case"end":return t.stop()}}),t)})))()}},ke={state:me,getters:be,mutations:ge,actions:we,namespaced:!0},xe=function(){return{approved:!1,approbationVotes:0}},ye={},Oe=l["d"].mutations(xe),Ae={fetchIsApproved:function(){return Object(x["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Se.get("auth/wallet"),e.next=3,Ye("auditorApproved",t);case 3:r=e.sent,Se.set("status/approved",r);case 5:case"end":return e.stop()}}),e)})))()},fetchApprobationVotes:function(){return Object(x["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=Se.get("auth/wallet"),e.next=3,Ye("auditorVotes",t);case 3:r=e.sent,Se.set("status/approbationVotes",Number(r));case 5:case"end":return e.stop()}}),e)})))()}},Re={state:xe,getters:ye,mutations:Oe,actions:Ae,namespaced:!0},_e=function(){return{nbAuditors:0,auditors:[]}},je={},Ce=l["d"].mutations(_e),Ne={fetchAllAuditorsValues:function(e){return Object(x["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.dispatch,t.next=3,r("fetchNbAuditors");case 3:return t.next=5,r("fetchAuditorsInfos");case 5:case"end":return t.stop()}}),t)})))()},fetchNbAuditors:function(){return Object(x["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ye("nbAuditors");case 2:t=e.sent,Se.set("nodeGovernance/nbAuditors",t);case 4:case"end":return e.stop()}}),e)})))()},fetchAuditorsInfos:function(){return Object(x["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a,o,s,i,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ye("nbAuditors");case 2:return t=e.sent,r=Se.get("auth/wallet"),e.t0=Math,e.next=7,Ye("nbNodes");case 7:e.t1=e.sent,e.t2=e.t1/2,e.t3=e.t0.floor.call(e.t0,e.t2),n=e.t3+1,a=[],o=0;case 13:if(!(o<t)){e.next=30;break}return e.next=16,Ye("auditorAddress",o);case 16:return s=e.sent,e.next=19,Ye("auditorVotes",s);case 19:return i=e.sent,e.next=22,Ye("currentAuditorVote",s,r);case 22:return c=e.sent,e.next=25,Ye("auditorApproved",s);case 25:u=e.sent,a[o]={address:s,nbVotes:i,minVotes:n,currentVote:c,isApproved:u};case 27:o++,e.next=13;break;case 30:Se.set("nodeGovernance/auditors",a);case 31:case"end":return e.stop()}}),e)})))()},voteAuditor:function(e,t){return Object(x["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.auditorAddress,n=t.accept,e.abrupt("return",nt(rt("voteAuditor",{maxGas:12e4},r,n)));case 2:case"end":return e.stop()}}),e)})))()}},Pe={state:_e,getters:je,mutations:Ce,actions:Ne,namespaced:!0};n["default"].use(N["a"]);var Ie={tryingToConnect:!1,mmIsOpen:!1,displaySnackbar:!1,snackbarMessage:"",snackbarColor:"error",config:void 0},Me=new N["a"].Store({modules:{nodes:z,auth:ae,history:ve,pledge:ke,status:Re,nodeGovernance:Pe},plugins:[P.plugin],state:Ie,mutations:l["d"].mutations(Ie),actions:{errorFlash:function(e,t){var r=e.commit;r("snackbarMessage",t),r("snackbarColor","error"),r("displaySnackbar",!0)},fetchConfig:function(e){return Object(x["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,t.prev=1,t.next=4,fetch("./config.json");case 4:if(n=t.sent,200!==n.status){t.next=14;break}return t.next=8,n.json();case 8:return a=t.sent,t.t0=r,t.next=12,M(a);case 12:t.t1=t.sent,(0,t.t0)("config",t.t1);case 14:t.next=19;break;case 16:t.prev=16,t.t2=t["catch"](1),r("config",void 0);case 19:case"end":return t.stop()}}),t,null,[[1,16]])})))()}}}),Se=Me,Be=r("d4ec"),Fe=r("bee2"),Te=(r("b64b"),function(){function e(t){Object(Be["a"])(this,e),this.keyList=t||[]}return Object(Fe["a"])(e,[{key:"getItem",value:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(this.keyList.includes(t)||this.keyList.push(t),r=window.localStorage.getItem(t),r){e.next=6;break}return e.abrupt("return",void 0);case 6:return e.abrupt("return",JSON.parse(r));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setItem",value:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return this.keyList.includes(t)||this.keyList.push(t),r?window.localStorage.setItem(t,JSON.stringify(r)):window.localStorage.removeItem(t),e.abrupt("return");case 5:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getAll",value:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={},r=Object(u["a"])(this.keyList),e.prev=2,r.s();case 4:if((n=r.n()).done){e.next=11;break}return a=n.value,e.next=8,this.getItem(a);case 8:t[a]=e.sent;case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](2),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"setAll",value:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=0,n=Object.keys(t);case 1:if(!(r<n.length)){e.next=8;break}return a=n[r],e.next=5,this.setItem(a,t[a]);case 5:r++,e.next=1;break;case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}()),Ve=new Te;function De(e){var t=new O.a(e);return t.currentProvider}function Ue(e){return Ee.apply(this,arguments)}function Ee(){return Ee=Object(x["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new O.a(Se.get("auth/provider")).eth.getBalance(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),Ee.apply(this,arguments)}var He="0x0000000000000000000000000000000000000100";function We(e){var t=C.a.get(e),r=t.at(He);return console.log("Instance",r),r}function $e(){return We("Governance")}function Le(){var e=Se.get("auth/providerDirect").custodyApiUrl,t=new _["WalletCustodyApiImpl"](e,"eth");return t}function Ge(e,t){return Je.apply(this,arguments)}function Je(){return Je=Object(x["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ve.getItem("custody.wallets");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return n=e.t0,n.unshift(t),Ve.setItem("custody.wallets",n),a=Le(),e.next=11,nt(a.authenticate(t,r));case 11:return o=e.sent,e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)}))),Je.apply(this,arguments)}function ze(){return qe.apply(this,arguments)}function qe(){return qe=Object(x["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Ve.getItem("custody.wallets");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),qe.apply(this,arguments)}function Ke(e){if(e||(e=Se.get("auth/provider")),!e)throw new Error("Should not be calling the api functions without a provider connected");var t=Se.get("auth/providerModel");if("metamask"==t)return new A["Web3FunctionProvider"](e,(function(e){return Promise.resolve(e[0])}));if("direct"==t){var r=Se.get("auth/wallet");if(r){var n=Le(),a=Se.state.auth.walletAuthenticationFunction,o=new R["Web3CustodyFunctionProvider"](e,n,r,a);return o}return new A["Web3FunctionProvider"](e,(function(){return Promise.resolve(He)}))}throw new Error("should not be calling the api functions without deciding the provider (metamask or direct)")}function Ye(e){return Qe.apply(this,arguments)}function Qe(){return Qe=Object(x["a"])(regeneratorRuntime.mark((function e(t){var r,n,a,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r=o.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=o[a];return e.abrupt("return",Xe.apply(void 0,[t,{maxGas:1e7}].concat(n)));case 2:case"end":return e.stop()}}),e)}))),Qe.apply(this,arguments)}function Xe(e,t){return Ze.apply(this,arguments)}function Ze(){return Ze=Object(x["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,o,s,i,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=Se.get("auth/provider"),a=Se.get("auth/contract"),t in a){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("Method ".concat(t," does not exists in contract"))));case 4:for(o=c.length,s=new Array(o>2?o-2:0),i=2;i<o;i++)s[i-2]=c[i];return e.abrupt("return",a[t].apply(a,[Ke(n).call(r)].concat(s)));case 6:case"end":return e.stop()}}),e)}))),Ze.apply(this,arguments)}function et(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return rt.apply(void 0,[e,{}].concat(r))}function tt(e){"string"!==typeof e&&(e='\n {"message":"invalid error message"}');var t=e.split("\n");1==t.length&&(t="\n ".concat(JSON.stringify({message:e})).split("\n"));try{var r=JSON.parse(t.splice(1).join(" "));return r}catch(n){return{message:"invalid JSON message"}}}function rt(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];var o=Se.get("auth/wallet");if(!o)return Promise.reject(new Error("You are not authenticated with a wallet, you cannot update the blockchain"));var s=Se.get("auth/provider"),i=Se.get("auth/contract");return e in i?new Promise((function(r,a){Xe.apply(void 0,[e,t].concat(n)).then(function(){var a=Object(x["a"])(regeneratorRuntime.mark((function a(o){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("Tested call",t,o),a.t0=r,a.next=4,i[e].apply(i,[Ke(s).send(t)].concat(n));case 4:a.t1=a.sent,(0,a.t0)(a.t1);case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){var t=tt(e.message);a(t)}))})):Promise.reject(new Error("Method ".concat(e," does not exists in contract")))}function nt(e,t){return at.apply(this,arguments)}function at(){return at=Object(x["a"])(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=null,e.prev=1,Se.set("mmIsOpen",!0),e.next=5,t;case 5:n=e.sent,e.next=13;break;case 8:e.prev=8,e.t0=e["catch"](1),console.warn("Submitted transaction failed with error:",e.t0),Se.dispatch("errorFlash",e.t0.message),r&&r(e.t0);case 13:return e.prev=13,Se.set("mmIsOpen",!1),e.finish(13);case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,null,[[1,8,13,16]])}))),at.apply(this,arguments)}var ot={data:function(){return{wallet:void 0,wallets:[],networks:[],selectedNetwork:{name:"undefined"},password:void 0,show:!1}},mounted:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ze();case 2:r=t.sent,r.length>0&&(e.wallet=r[0]),e.wallets=r,n=e.$store.get("config"),e.networks=T(n),e.selectedNetwork=B(n);case 8:case"end":return t.stop()}}),t)})))()},computed:{hasProviderMetamask:function(){return!!this.$store.state.auth.providerMetamask},hasProviderDirect:function(){return!!this.$store.state.auth.providerDirect},hasCustodyApi:function(){return!(!this.$store.state.auth.providerDirect||"api"!=this.$store.state.auth.providerDirect.custodyModel)}},methods:Object(s["a"])(Object(s["a"])({},Object(l["a"])("auth",["openMetaMaskConnectionDialog","openWeb3DirectConnectionDialog"])),{},{updateWallet:function(e){this.wallet=e},prepareOpenWeb3DirectConnectionDialog:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.openWeb3DirectConnectionDialog({wallet:e.wallet,password:e.password,nodeUrl:e.selectedNetwork.nodeUrl});case 2:return t.next=4,ze();case 4:e.wallets=t.sent;case 5:case"end":return t.stop()}}),t)})))()}})},st=ot,it=Object(m["a"])(st,w,k,!1,null,null,null),ct=it.exports,ut=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{row:"",wrap:""}},[r("v-row",[r("v-col",{attrs:{cols:"4"}},[r("v-card",{staticClass:"ma-6",attrs:{height:"200",width:"200"}},[r("v-card-subtitle",[e._v("Block")]),r("v-card-title",{staticClass:"align-center"},[r("span",{staticClass:"text-h3 ma-auto"},[e._v(e._s(e.lastBlock&&e.lastBlock.block.number))])]),r("v-card-subtitle",[e._v(e._s(e.averageDelaySec.toFixed(2))+" sec")]),r("v-card-subtitle",[e._v("Total CTC: "+e._s(e.totalCrypto.toFixed(4)))])],1)],1),r("v-col",{attrs:{cols:"4"}},[r("v-card",{staticClass:"ma-6",attrs:{height:"200",width:"200"}},[r("v-card-subtitle",[e._v("Nodes")]),r("v-card-title",{staticClass:"align-center"},[r("span",{staticClass:"text-h2 ma-auto"},[e._v(e._s(e.nbOfNodes))])])],1)],1),r("v-col",{attrs:{cols:"4"}},[r("v-card",{staticClass:"ma-6",attrs:{height:"200",width:"200"}},[r("v-card-subtitle",[e._v("Total footprint")]),r("v-card-title",{staticClass:"align-center"},[r("span",{staticClass:"text-h2 ma-auto"},[e._v(e._s(e.totalFootprint))])]),r("v-card-subtitle",[e._v("Average: "+e._s((e.totalFootprint/e.nbOfNodes).toFixed(2)))])],1)],1),e.lastBlock?r("v-col",{staticClass:"pa-8",attrs:{cols:"12"}},[r("v-card-title",[e._v("Footprint for each of the nodes")]),r("v-card-subtitle",[e._v(" Last block sealer: "+e._s(e.lastBlock.sealer.address)+" / "+e._s(e.lastBlock.sealer.vanity.custom)+". Footprint: "+e._s(e.lastBlock.sealer.footprint)+" ")]),r("v-sparkline",{attrs:{"auto-draw":"",type:"bar","auto-draw-duration":500,"auto-line-width":"",value:e.sealersFootprint,"label-size":"3",gradient:["#f72047","#ffd200","#1feaea"],padding:"8"},scopedSlots:e._u([{key:"label",fn:function(t){return[e._v(" "+e._s(e.sealersLabels[t.index])+" - "+e._s(t.value)+" ")]}}],null,!1,328237270)})],1):e._e(),e.lastBlock?r("v-col",{staticClass:"pa-8",attrs:{cols:"12"}},[r("v-card-title",[e._v("Block reward per node")]),r("v-card-subtitle",[e._v(" Last block sealer: "+e._s(e.lastBlock.sealer.address)+" / "+e._s(e.lastBlock.sealer.vanity.custom)+". Footprint: "+e._s(e.lastBlock.sealer.footprint)+" ")]),r("v-sparkline",{attrs:{"auto-draw":"",type:"bar","auto-draw-duration":500,"auto-line-width":"",value:e.sealersReward,"label-size":"3",gradient:["#42b3f4"],padding:28},scopedSlots:e._u([{key:"label",fn:function(t){return[e._v(" "+e._s(e.lastBlock.sealer.address==e.sealersAddress[t.index]?"[":"")+" "+e._s(e.sealersAddress[t.index])+" "+e._s(e.lastBlock.sealer.address==e.sealersAddress[t.index]?"]":"")+" - "+e._s(Number.parseFloat(t.value).toFixed(2))+" ")]}}],null,!1,2512685418)})],1):e._e(),r("v-col",{staticClass:"pa-8",attrs:{cols:"12"}},[r("v-card-title",[e._v("CTC Creation by block ")]),r("v-card-subtitle",[e._v("Last reward: "+e._s(e.rewardsByBlock[e.rewardsByBlock.length-1].toFixed(4))+" CTC; Average: "+e._s(e.averageReward.toFixed(4))+" CTC; Last "+e._s(e.rewardsByBlock.length-1)+" blocks")]),r("v-sparkline",{attrs:{"auto-draw":"",type:"trend","auto-draw-duration":0,"line-width":.3,value:e.rewardsByBlock,"label-size":"3",gradient:["#42b3f4"]}})],1)],1)],1)},lt=[],dt=(r("4ec9"),{data:function(){return{nbBlocksToKeep:100,sealerMap:new Map,blocks:[],sealersReward:[]}},mounted:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.fetchAllValues(),e.fetchChainInformations().then(e.subscribeToChainUpdates);case 2:case"end":return t.stop()}}),t)})))()},computed:Object(s["a"])(Object(s["a"])({},Object(l["c"])("nodes",["sealers","nbOfNodes","lastBlock","totalFootprint","totalCrypto","rewardsByBlock","averageReward","averageDelaySec","lastBlock"])),{},{sealersFootprint:function(){return this.sealers.map((function(e){return e.footprint}))},sealersAddress:function(){return this.sealers.map((function(e){return e.address}))},sealersLabels:function(){return this.sealers.map((function(e){return e.vanity.custom}))}}),methods:Object(s["a"])(Object(s["a"])({},Object(l["a"])("nodes",["fetchAllValues","fetchChainInformations","subscribeToChainUpdates"])),{},{processBlockData:function(e){var t=this,r=this.blocks.filter((function(r){return r.block.number>e.block.number-t.nbBlocksToKeep&&r.block.number!=e.block.number}));r=r.sort((function(e,t){return e.block.number-t.block.number})),r.push(e),this.blocks=r;var n={address:e.sealer.address,info:e.sealer.vanity.custom,footprint:e.sealer.footprint,balance:e.sealer.balance,reward:e.sealer.lastReward};this.sealerMap.set(n.address,n),this.totalFootprint=e.totalFootprint,this.totalCrypto=e.totalCrypto,this.nbOfNodes=e.nbOfNodes,this.blockNumber=e.block.number,this.updateSealersArrays()},updateSealersArrays:function(){var e,t=[],r=Object(u["a"])(this.sealerMap.keys());try{for(r.s();!(e=r.n()).done;){var n=e.value,a=this.sealerMap.get(n);t.push(a)}}catch(o){r.e(o)}finally{r.f()}t=t.sort((function(e,t){return e.footprint-t.footprint})),this.sealersLabels=t.map((function(e){return e.info})),this.sealersAddress=t.map((function(e){return e.address})),this.sealersFootprint=t.map((function(e){return e.footprint})),this.sealersReward=t.map((function(e){return e.reward}))}})}),pt=dt,ft=Object(m["a"])(pt,ut,lt,!1,null,null,null),ht=ft.exports,vt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",[r("v-col",[r("v-card",[r("v-card-title",[e._v("Number of Auditors")]),r("v-card-text",[e._v(e._s(e.nbAuditors))])],1)],1),r("v-col",{attrs:{cols:"12"}},[r("v-card",[r("v-card-title",[e._v("Auditors")]),r("v-card-text",[r("v-data-table",{attrs:{items:e.auditors,headers:e.tableHeadersAuditors,"items-per-page":-1,"hide-default-footer":""},scopedSlots:e._u([{key:"item.status",fn:function(t){var n=t.item;return[r("div",[e._v(e._s(n.isApproved?"Oui":"Non"))])]}},{key:"item.votes",fn:function(t){var n=t.item;return[r("div",[e._v(e._s(n.nbVotes)+" / "+e._s(n.minVotes)+" avant "+e._s(n.isApproved?"Révocation":"Approbation"))])]}},{key:"item.actions",fn:function(t){var n=t.item;return[r("v-btn",{attrs:{color:"primary",small:""},on:{click:function(t){return e.nodeVote(n)}}},[e._v(" "+e._s(e.computeLabel(n))+" ")])]}}])})],1)],1)],1)],1)},mt=[],bt={data:function(){return{tableHeadersAuditors:[{text:"Auditor",value:"address"},{text:"Approuvé",value:"status"},{text:"Votes courants",value:"votes"},{text:"Actions",value:"actions",sortable:!1}],switchState:!1}},computed:Object(s["a"])({},Object(l["c"])("nodeGovernance",["nbAuditors","auditors"])),mounted:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchAllAuditorsValues();case 2:case"end":return t.stop()}}),t)})))()},methods:Object(s["a"])(Object(s["a"])({},Object(l["a"])("nodeGovernance",["fetchAllAuditorsValues","voteAuditor"])),{},{computeLabel:function(e){return e.isApproved?e.currentVote?"Voter pour révoquer":"Retirer mon vote de révocation":e.currentVote?"Retirer mon vote d'approbation":"Voter pour approuver"},nodeVote:function(e){var t=this;return Object(x["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log("address : ".concat(e.address," / vote value : ").concat(!e.currentVote)),r.prev=1,r.next=4,t.voteAuditor({auditorAddress:e.address,accept:!e.currentVote});case 4:return r.next=6,t.fetchAllAuditorsValues();case 6:r.next=14;break;case 8:return r.prev=8,r.t0=r["catch"](1),console.log(r.t0),r.next=13,t.fetchAllAuditorsValues();case 13:throw r.t0;case 14:case"end":return r.stop()}}),r,null,[[1,8]])})))()}})},gt=bt,wt=Object(m["a"])(gt,vt,mt,!1,null,null,null),kt=wt.exports,xt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",[r("v-col",[r("v-card",[r("v-card-title",[e._v("Number of Nodes")]),r("v-card-text",[e._v(e._s(e.nbOfNodes))])],1)],1),r("v-col",[r("v-card",[r("v-card-title",[e._v("Total Footprint")]),r("v-card-text",[e._v(e._s(e.totalFootprint)+" ")])],1)],1),r("v-col",{attrs:{cols:"12"}},[r("v-card",[r("v-card-title",[e._v("Nodes")]),r("v-card-text",[r("v-data-table",{attrs:{items:e.sealers,headers:e.tableHeaders,"items-per-page":-1,"hide-default-footer":""},scopedSlots:e._u([{key:"item.vanity",fn:function(t){var n=t.item;return[r("div",[e._v("Address: "+e._s(n.address))]),r("div",[e._v("Name: "+e._s(n.vanity.custom))])]}},{key:"item.actions",fn:function(t){var n=t.item;return[r("v-btn",{attrs:{color:"primary",small:""},on:{click:function(t){return e.openUpdateFootprintDialog(n)}}},[e._v(" Update footprint ")])]}}])}),r("v-dialog",{attrs:{width:"500"},model:{value:e.footprintDialog,callback:function(t){e.footprintDialog=t},expression:"footprintDialog"}},[e.selectedSealer?r("v-card",[r("v-card-title",[e._v(" Update Footprint for "+e._s(e.selectedSealer.address)+" ")]),r("v-card-text",[r("v-row",[r("v-col",{staticClass:"pb-0",attrs:{cols:"6"}},[r("v-text-field",{attrs:{type:"number",outlined:"",dense:""},model:{value:e.newFootprintValue,callback:function(t){e.newFootprintValue=t},expression:"newFootprintValue"}})],1),r("v-col",{staticClass:"pb-0"},[r("v-btn",{on:{click:function(t){e.footprintDialog=!1}}},[e._v("Cancel")])],1),r("v-col",{staticClass:"pb-0"},[r("v-btn",{attrs:{color:"primary"},on:{click:e.submitNewFootprint}},[e._v(" Submit ")])],1)],1)],1)],1):e._e()],1)],1)],1)],1)],1)},yt=[],Ot={data:function(){return{tableHeaders:[{text:"Node",value:"vanity"},{text:"Footprint",value:"footprint"},{text:"Actions",value:"actions",sortable:!1}],tableHeadersAuditors:[{text:"Auditor",value:"address"},{text:"Votes courants",value:"votes"},{text:"Mon Vote",value:"actions",sortable:!1}],footprintDialog:!1,selectedSealer:null,newFootprintValue:0}},computed:Object(s["a"])({},Object(l["c"])("nodes",["nbOfNodes","totalFootprint","sealers"])),mounted:function(){this.fetchAllValues()},methods:Object(s["a"])(Object(s["a"])({},Object(l["a"])("nodes",["fetchAllValues","updateFootprint"])),{},{openUpdateFootprintDialog:function(e){this.selectedSealer=e,this.newFootprintValue=e.footprint,this.footprintDialog=!0},submitNewFootprint:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.footprintDialog=!1,t.next=3,e.updateFootprint({sealerAddress:e.selectedSealer.address,footprint:e.newFootprintValue});case 3:case"end":return t.stop()}}),t)})))()}})},At=Ot,Rt=Object(m["a"])(At,xt,yt,!1,null,null,null),_t=Rt.exports,jt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",[r("v-tabs",{attrs:{centered:"","slider-color":"primary"},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[r("v-tab",{attrs:{href:"#footprints"}},[e._v(" Footprints ")]),r("v-tab",{attrs:{href:"#pledges"}},[e._v(" Pledges ")])],1),r("v-tabs-items",{staticStyle:{width:"100%"},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[r("v-tab-item",{attrs:{value:"footprints"}},[r("v-card",[r("v-card-text",[r("v-data-table",{attrs:{items:e.footprintHistory,headers:e.footprintTableHeaders,"items-per-page":-1,"hide-default-footer":""}})],1)],1)],1),r("v-tab-item",{attrs:{value:"pledges"}},[r("v-card",[r("v-card-text",[r("v-data-table",{attrs:{items:e.pledgeHistory,headers:e.pledgeTableHeaders,"items-per-page":-1,"hide-default-footer":""}})],1)],1)],1)],1)],1)},Ct=[],Nt={data:function(){return{currentTab:"footprints",footprintTableHeaders:[{text:"Block N°",value:"blockNumber"},{text:"Node address",value:"node"},{text:"Assigned Footprint",value:"footprint"}],pledgeTableHeaders:[{text:"Block N°",value:"blockNumber"},{text:"Auditor address",value:"node"},{text:"Pledge",value:"pledge"}]}},computed:Object(s["a"])({},Object(l["c"])("history",["footprintHistory","pledgeHistory"])),mounted:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.fetchAllValues();case 1:case"end":return t.stop()}}),t)})))()},methods:Object(s["a"])({},Object(l["a"])("history",["fetchAllValues"]))},Pt=Nt,It=Object(m["a"])(Pt,jt,Ct,!1,null,null,null),Mt=It.exports,St=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-row",{attrs:{wrap:""}},[r("v-col",{attrs:{cols:"12"}},[r("v-card",[r("v-card-title",[e._v("Current Wallet Balance")]),r("v-card-text",[e._v(" "+e._s(e.toEther(e.balance))+" CRC ")])],1)],1),r("v-col",{attrs:{cols:"8"}},[r("v-card",[r("v-card-title",[e._v("Pledge Informations")]),r("v-card-text",[r("div",[e._v(" Min pledge to start audit: "+e._s(e.toEther(e.minPledgeAmount))+" CRC ")]),r("div",[e._v("Current pledged amount: "+e._s(e.pledgedAmount)+" CRC")]),r("v-btn",{attrs:{small:"",disabled:0===e.pledgedAmount||!e.redeemBool},on:{click:e.redeemPledge}},[e._v("Redeem Pledge")])],1)],1)],1),r("v-col",[r("v-card",[r("v-card-title",[e._v("Pledge Actions")]),r("v-card-text",[r("v-row",[r("v-col",{staticClass:"pb-0",attrs:{cols:"12"}},[r("v-text-field",{attrs:{dense:"","hide-details":"",outlined:"",type:"number",min:0,placeholder:"Amount to add to the pledge"},model:{value:e.amountToAdd,callback:function(t){e.amountToAdd=t},expression:"amountToAdd"}})],1),r("v-col",{attrs:{cols:"12"}},[r("v-btn",{staticStyle:{width:"100%"},attrs:{small:""},on:{click:e.pledgeMore}},[e._v("Pledge more")])],1)],1)],1)],1)],1)],1)},Bt=[],Ft={data:function(){return{intervalId:null,amountToAdd:0}},computed:Object(s["a"])({},Object(l["c"])("pledge",["balance","minPledgeAmount","pledgedAmount","redeemBool"])),mounted:function(){this.fetchAllValues(),this.intervalId=setInterval(this.fetchAllValues,6e4)},beforeRouteLeave:function(e,t,r){clearInterval(this.intervalId),r()},methods:Object(s["a"])(Object(s["a"])({toEther:ue},Object(l["a"])("pledge",["fetchAllValues","addToPledge","redeemPledge"])),{},{pledgeMore:function(){var e=this;return Object(x["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.addToPledge(e.amountToAdd);case 2:e.amountToAdd=0;case 3:case"end":return t.stop()}}),t)})))()}})},Tt=Ft,Vt=Object(m["a"])(Tt,St,Bt,!1,null,null,null),Dt=Vt.exports,Ut=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-card",{staticClass:"pa-md-4 mx-lg-auto"},[r("v-card-title",[e._v(" Status ")]),e.registered&&e.approved?r("v-card-subtitle",{staticStyle:{color:"Green"}},[e._v(" APPROVED ")]):e._e(),e.registered&&!e.approved?r("v-card-subtitle",{staticStyle:{color:"red"}},[e._v(" AWAITING APPROVAL ")]):e._e(),e.registered?e._e():r("v-card-text",[r("p",[e._v(" If you wish to become an auditor you must register here "),r("v-btn",{staticClass:"mx-2",attrs:{small:"",disabled:e.mmIsOpen},on:{click:e.selfRegister}},[e._v(" Self register ")])],1)]),e.registered&&!e.approved?r("v-card-text",[r("p",{staticStyle:{color:"black"}},[e._v(" You have the total vote of "+e._s(e.approbationVotes)+" ")])]):e._e()],1)},Et=[],Ht={computed:Object(s["a"])(Object(s["a"])({mmIsOpen:Object(l["c"])("mmIsOpen")},Object(l["c"])("auth",["registered"])),Object(l["c"])("status",["approved","approbationVotes"])),mounted:function(){this.fetchIsRegistered(),this.fetchIsApproved(),this.fetchApprobationVotes()},methods:Object(s["a"])(Object(s["a"])({},Object(l["a"])("auth",["fetchIsRegistered","selfRegister"])),Object(l["a"])("status",["fetchIsApproved","fetchApprobationVotes"]))},Wt=Ht,$t=Object(m["a"])(Wt,Ut,Et,!1,null,null,null),Lt=$t.exports;n["default"].use(d["a"]);var Gt=function(e){var t=e.store;return t.state.status.approved},Jt=function(e){var t=e.store;return t.state.auth.isNode},zt=function(e){var t=e.store;return!Jt({store:t})},qt=function(e){var t=e.store;return!t.state.auth.wallet},Kt=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){var r,n=Object(u["a"])(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(a(e))return!0}}catch(o){n.e(o)}finally{n.f()}return!1}},Yt=[{name:"dashboard",path:"/dashboard",component:ht,meta:{displayInSidenav:""}},{name:"installMetaMask",path:"/installmetamask",component:g},{name:"authentication",path:"/auth",component:ct,meta:{displayInSidenav:"",hidden:function(e){var t=e.store;return!qt({store:t})}}},{name:"auditors",path:"/auditors",component:kt,meta:{displayInSidenav:"Governance",restricted:Jt,forceRedirectTo:"dashboard",hidden:Kt(qt,zt)}},{name:"status",path:"/status",component:Lt,meta:{displayInSidenav:"Audit",restricted:function(e){var t=e.store;return!Jt({store:t})},forceRedirectTo:"dashboard",hidden:Kt(qt,Jt)}},{name:"pledge",path:"/pledge",component:Dt,meta:{displayInSidenav:"Audit",restricted:Gt,forceRedirectTo:"status",hidden:Kt(qt,Jt)}},{name:"audit",path:"/audit",component:_t,meta:{displayInSidenav:"Audit",restricted:Gt,forceRedirectTo:"status",hidden:Kt(qt,Jt)}},{name:"history",path:"/history",component:Mt,meta:{displayInSidenav:"Audit",restricted:Gt,forceRedirectTo:"status",hidden:Kt(qt,Jt)}},{path:"*",redirect:"dashboard"}],Qt=new d["a"]({routes:Yt,base:""}),Xt=Qt,Zt={data:function(){return{drawer:null}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(l["c"])(["mmIsOpen"])),Object(l["c"])("auth",["registered"])),Object(l["c"])("status",["approved"])),{},{sidenav:function(){var e,t=this,r=Yt.filter((function(e){var t;return void 0!==(null===e||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.displayInSidenav)})).map((function(e){return{icon:"mdi-wallet",label:e.name.charAt(0).toUpperCase()+e.name.slice(1),route:e.name,meta:e.meta,restricted:e.meta.restricted,disabled:function(){return t.mmIsOpen||e.meta.restricted&&!e.meta.restricted({store:t.$store})},hidden:e.meta.hidden}})),n=[],a=[],o=Object(u["a"])(r);try{for(o.s();!(e=o.n()).done;){var s=e.value;s.hidden&&s.hidden({store:this.$store})||(s.meta&&""!==s.meta.displayInSidenav&&!a.includes(s.meta.displayInSidenav)&&(n.push({subheader:!0,label:s.meta.displayInSidenav}),a.push(s.meta.displayInSidenav)),n.push(s))}}catch(i){o.e(i)}finally{o.f()}return n}}),mounted:function(){console.log("routes",Yt)},methods:{goTo:function(e){this.$route.name!==e&&this.$router.push({name:e})}}},er=Zt,tr=Object(m["a"])(er,i,c,!1,null,null,null),rr=tr.exports,nr=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{width:"500",persistent:""},model:{value:e.display,callback:function(t){e.display=t},expression:"display"}},[r("v-card",[r("v-card-title",[e._v("Transaction authentication")]),r("v-card-text",[e._v(" Enter the password for the wallet "+e._s(e.walletAddress)+" : "),r("v-text-field",{attrs:{type:"password"},model:{value:e.walletPassword,callback:function(t){e.walletPassword=t},expression:"walletPassword"}}),r("div",{staticStyle:{color:"red"}},[e._v(e._s(e.errorMessage))])],1),r("v-card-actions",[r("v-btn",{on:{click:e.cancel}},[e._v("Cancel")]),r("v-btn",{attrs:{loading:e.loading,disabled:""===e.walletPassword||e.loading},on:{click:e.submit}},[e._v(" Confirm ")])],1)],1)],1)},ar=[],or={data:function(){return{walletAddress:null,errorMessage:null,display:!1,loading:!1,walletPassword:"",submit:function(){},cancel:function(){}}},methods:{authenticate:function(e,t){var r=this;return Object(x["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e&&t){n.next=2;break}throw new Error("Invalid call to the authenticate function, missing parameters");case 2:return r.walletAddress=e,r.display=!0,n.prev=4,n.next=7,new Promise((function(e,n){function a(){return o.apply(this,arguments)}function o(){return o=Object(x["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!this.walletAddress||!this.walletPassword){r.next=19;break}return this.loading=!0,r.prev=2,r.next=5,t.authenticate(this.walletAddress,this.walletPassword);case 5:if(a=r.sent,a){r.next=8;break}throw new Error("Missing token from authenticate without real error");case 8:e(a),r.next=14;break;case 11:r.prev=11,r.t0=r["catch"](2),this.errorMessage=r.t0.message;case 14:return r.prev=14,this.loading=!1,r.finish(14);case 17:r.next=20;break;case 19:n(new Error("No wallet address or password"));case 20:case"end":return r.stop()}}),r,this,[[2,11,14,17]])}))),o.apply(this,arguments)}function s(){n(new Error("Authentication cancelled by user"))}r.submit=a.bind(r),r.cancel=s.bind(r)}));case 7:return a=n.sent,n.abrupt("return",a);case 9:return n.prev=9,r.walletPassword="",r.errorMessage=null,r.display=!1,n.finish(9);case 14:case"end":return n.stop()}}),n,null,[[4,,9,14]])})))()}}},sr=or,ir=Object(m["a"])(sr,nr,ar,!1,null,null,null),cr=ir.exports,ur={components:{AppMenu:rr,WalletAuthenticationDialog:cr},data:function(){return{}},computed:Object(s["a"])(Object(s["a"])({},Object(l["e"])(["displaySnackbar","snackbarMessage","snackbarColor"])),Object(l["c"])(["mmIsOpen"])),methods:Object(s["a"])({},Object(l["a"])("auth",["detectProvider"])),mounted:function(){Se.set("auth/walletAuthenticationFunction",this.$refs.walletAuthenticationDialog.authenticate)}},lr=ur,dr=Object(m["a"])(lr,a,o,!1,null,null,null),pr=dr.exports,fr=r("ce5b"),hr=r.n(fr);r("bf40");n["default"].use(hr.a);var vr=new hr.a({theme:{themes:{light:{primary:"#607d8b",secondary:"#009688",accent:"#4caf50",error:"# e91e63",warning:"#cddc39",info:"#3f51b5",success:"#8bc34"}}}});r("d5e8"),r("5363");function mr(e,t){e.beforeEach(function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(r,n,a){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("routing ",n.name,r.name),"installMetaMask"!==r.name){e.next=3;break}return e.abrupt("return",a());case 3:if(t.state.auth.providerModel){e.next=12;break}return console.log("no auth provider yet"),e.next=7,t.dispatch("auth/detectProvider");case 7:if(console.log("Didn't find any provider in the app, trying to detect one. Provider found?",t.state.auth.providerModel,t.state.auth.provider),"both"!=t.state.auth.providerModel){e.next=10;break}return e.abrupt("return",a({name:"authentication"}));case 10:if(t.state.auth.provider){e.next=12;break}return e.abrupt("return",a({name:"installMetaMask"}));case 12:if(t.state.auth.contract||t.commit("auth/contract",$e()),r.meta&&r.meta.restricted){e.next=15;break}return e.abrupt("return",a());case 15:if(t.state.auth.wallet){e.next=21;break}return console.log("Didn't find the wallet in the app. Trying to fetch it..."),e.next=19,t.dispatch("auth/attemptToConnectWallet");case 19:o=e.sent,console.log("Found a connected wallet.",o);case 21:if(r.meta.restricted({store:t})){e.next=28;break}return console.log("Didn't find the proper authorizations to go to this route. Checking again with the smart contract..."),e.next=25,Promise.all([t.dispatch("auth/fetchIsRegistered"),t.dispatch("status/fetchIsApproved"),t.dispatch("auth/fetchRole")]);case 25:if(r.meta.restricted({store:t})){e.next=27;break}return e.abrupt("return",a({name:r.meta.forceRedirectTo}));case 27:console.log("Found the proper authorizations.");case 28:return e.abrupt("return",a());case 29:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}())}n["default"].config.productionTip=!1,mr(Xt,Se),new n["default"]({vuetify:vr,store:Se,router:Xt,render:function(e){return e(pr)}}).$mount("#app")},6:function(e,t){},7:function(e,t){},8:function(e,t){},9:function(e,t){}});
//# sourceMappingURL=index.ec108b6a.js.map