{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib/bigint-polyfill.js","webpack:///./src/App.vue?6b0d","webpack:///./src/components/AppMenu.vue?42fe","webpack:///./src/pages/InstallMetaMask.page.vue?bedb","webpack:///./src/lib/config-file.js","webpack:///src/pages/InstallMetaMask.page.vue","webpack:///./src/pages/InstallMetaMask.page.vue?4233","webpack:///./src/pages/InstallMetaMask.page.vue","webpack:///./src/pages/Auth.page.vue?c4e6","webpack:///./src/plugins/pathify.js","webpack:///./src/lib/const.js","webpack:///./src/store/nodes.js","webpack:///./src/store/auth.js","webpack:///./src/lib/numbers.js","webpack:///./src/store/history.js","webpack:///./src/store/pledge.js","webpack:///./src/store/status.js","webpack:///./src/store/nodeGovernance.js","webpack:///./src/store/index.js","webpack:///./src/lib/async-local-storage.js","webpack:///./src/lib/api.js","webpack:///src/pages/Auth.page.vue","webpack:///./src/pages/Auth.page.vue?c349","webpack:///./src/pages/Auth.page.vue","webpack:///./src/pages/Dashboard.page.vue?6499","webpack:///./src/lib/colors.js","webpack:///./src/components/ExplorerRedirect.vue?0ec0","webpack:///src/components/ExplorerRedirect.vue","webpack:///./src/components/ExplorerRedirect.vue?5534","webpack:///./src/components/ExplorerRedirect.vue","webpack:///src/pages/Dashboard.page.vue","webpack:///./src/pages/Dashboard.page.vue?384f","webpack:///./src/pages/Dashboard.page.vue","webpack:///./src/pages/Auditors.page.vue?7e08","webpack:///src/pages/Auditors.page.vue","webpack:///./src/pages/Auditors.page.vue?2562","webpack:///./src/pages/Auditors.page.vue","webpack:///./src/pages/Audit.page.vue?b3cc","webpack:///src/pages/Audit.page.vue","webpack:///./src/pages/Audit.page.vue?8ac8","webpack:///./src/pages/Audit.page.vue","webpack:///./src/pages/History.page.vue?cb05","webpack:///src/pages/History.page.vue","webpack:///./src/pages/History.page.vue?d2e4","webpack:///./src/pages/History.page.vue","webpack:///./src/pages/Pledge.page.vue?6280","webpack:///src/pages/Pledge.page.vue","webpack:///./src/pages/Pledge.page.vue?6915","webpack:///./src/pages/Pledge.page.vue","webpack:///./src/pages/Status.page.vue?69e6","webpack:///src/pages/Status.page.vue","webpack:///./src/pages/Status.page.vue?bae4","webpack:///./src/pages/Status.page.vue","webpack:///./src/pages/ConfiscatedPledge.page.vue?b37d","webpack:///src/pages/ConfiscatedPledge.page.vue","webpack:///./src/pages/ConfiscatedPledge.page.vue?e160","webpack:///./src/pages/ConfiscatedPledge.page.vue","webpack:///./src/pages/Improvements.page.vue?4042","webpack:///src/pages/Improvements.page.vue","webpack:///./src/pages/Improvements.page.vue?28f9","webpack:///./src/pages/Improvements.page.vue","webpack:///./src/router.js","webpack:///src/components/AppMenu.vue","webpack:///./src/components/AppMenu.vue?55d1","webpack:///./src/components/AppMenu.vue","webpack:///./src/components/WalletAuthenticationDialog.vue?b67c","webpack:///src/components/WalletAuthenticationDialog.vue","webpack:///./src/components/WalletAuthenticationDialog.vue?3cad","webpack:///./src/components/WalletAuthenticationDialog.vue","webpack:///src/App.vue","webpack:///./src/App.vue?60d0","webpack:///./src/App.vue","webpack:///./src/plugins/vuetify.js","webpack:///./src/lib/auth.js","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","nativeBigInt","global","BigInt","supportsNative","_BigInt","require","nativeFunction","operator","a","b","this","Proxy","obj","field","equals","toString","radix","littleEndian","elements","arr","ArrayBuffer","view","DataView","setBigUint64","Uint8Array","uint8arr","intarr","toArray","set","reverse","_toUint8ArrayNative","_toUint8Array","array","detectSupport","buffer","getBigUint64","Array","from","fromArray","_vm","_h","$createElement","_c","_self","attrs","model","callback","$$v","drawerDisplayed","expression","_e","on","showDrawer","_v","staticClass","_s","walletRole","disconnect","wallet","currentBlockNumber","chainName","mmIsOpen","snackbarColor","displaySnackbar","snackbarMessage","ref","staticRenderFns","drawerChange","drawer","$route","_l","index","icon","label","route","disabled","subheader","$event","goTo","providerModel","_m","network","chainId","title","activateOrInstall","parseUrl","url","acceptedProtocols","isArray","map","endsWith","toLowerCase","u","URL","includes","protocol","error","cleanUpConfig","config","networks","explorers","nodeUrl","walletCustodyAPIBaseUrl","explorerUrl","chainID","getDefaultNetwork","find","default","changeDefaultNetwork","getNetworkList","getExplorerUrl","computed","mounted","fetch","res","all","methods","ethereum","method","params","rpcUrls","nativeCurrency","blockExplorerUrls","component","openMetaMaskConnectionDialog","prepareOpenWeb3DirectConnectionDialog","selectedNetwork","wallets","updateWallet","show","password","pathify","options","mapping","ROLES","VISITOR","AUDITED_NODE","NEW_NODE","APPROVED_AUDITOR","PENDING_AUDITOR","USER_CONNECTED","CRIPBaseUrl","governanceAddress","totalCRCAddress","sessionVariableTotalPocRCoins","GeneratedCRCTotalHash","web3","utils","keccak256","MAX_BLOCKS_TO_KEEP","state","nbOfNodes","totalFootprint","totalCrypto","sealers","chainUpdateSubscription","blocks","currentWalletBalanceWei","backupLoop","timeSinceLastBlock","average","reduce","getters","rewardsByBlock","rewards","sealer","lastReward","unshift","averageReward","averageDelaySec","minIndex","Math","min","delays","previousBlock","lastBlock","receivedAt","sum","v","lastBlockNumber","block","number","mutations","make","updateSealerDetails","carbonFootprint","$store","intf","_intf","eth","getBalance","address","balance","toBN","bal","Number","parseFloat","fromWei","footprint","processBlock","console","log","Date","toTimeString","undefined","difficulty","startsWith","parseInt","blockNumber","getStorageAt","totalCryptoB4","poaBlockHashToSealerInfo","delta","sub","nbNodes","now","isSealer","warn","Error","logicOnNewBloc","pop","si","findIndex","sealedBlocks","actions","fetchAllValues","dispatch","initBackupLoop","commit","clearInterval","setInterval","location","reload","fetchNumberOfNodes","readOnlyCall","fetchTotalFootprint","updateNodesStatus","isActive","subscribeToChainUpdates","rootState","unsubscribe","auth","subscription","subscribeNewBlocks","blockProcessing","blocksWaiting","processingFunc","baseFeePerGas","getBlock","unsubscribeToChainUpdates","insertNewBlock","getWalletBalance","discoverNotRunningSealers","contract","prov","Web3FunctionProvider","provider","Promise","resolve","deployedAt","events","CarbonFootprintUpdate","fromBlock","found","returnValues","node","vanity","custom","setTimeout","fetchChainInformations","nodes","lastBlockInMemory","getBlockNumber","max","fetchOneNodeInfo","updateFootprint","sealerAddress","handleMMResponse","writeCall","namespaced","providerMetamask","providerDirect","custodyModel","custodyApiUrl","delegatedWallet","registered","isNode","isVoterNode","isAuditor","isAuditorApproved","walletAuthenticationFunction","detectMetamask","detectEthereumProvider","chaininfo","pathname","origin","href","detectDirectAccess","defaultNetwork","getWeb3ProviderFromUrl","checkNetworkProofOfCarbonReduction","message","fetchRole","sealerNode","delegateOf","setConnection","store","Web3","ens","myWeb3","detectProvider","nbProviders","attemptToConnectWallet","addresses","request","getCustodyLastWallets","accounts","router","openWeb3DirectConnectionDialog","verifyCustodyAuthentication","token","fetchIsRegistered","selfRegister","writeCallWithOptions","maxGas","root","GWEI_FACTOR","pow","ETH_FACTOR","toWebBigInt","bi","BigNumber","toNumber","toGWei","div","toEther","toWei","multipliedBy","toParam","Numberlib","pledgeHistory","footprintHistory","appendFootprint","appendPledge","allContracts","at","fetchFootprintHistory","getTransaction","transactionHash","tx","auditor","txHash","foundSealer","nodeName","auditorName","fetchPledgeHistory","AmountPledged","pledge","amountAdded","amountRemoved","total","minPledgeAmount","pledgedAmount","redeemBool","fetchBalance","fetchCanTransferPledge","fetchMinPledgeAmount","fetchPledgedAmount","addToPledge","amount","redeemPledge","approved","approbationVotes","fetchIsApproved","fetchApprobationVotes","votes","nbAuditors","auditors","fetchAllAuditorsValues","fetchNbAuditors","fetchAuditorsInfos","nodeAdr","floor","minVotes","nbVotes","currentVote","isApproved","fetchConfiscatedPledge","confiscated","voteAuditor","context","auditorAddress","accept","Vue","use","Vuex","tryingToConnect","Store","history","status","nodeGovernance","plugins","plugin","errorFlash","fetchConfig","configUrl","searchParams","has","uConf","delete","json","AsyncLocalStorage","keys","keyList","localStorage","getItem","JSON","parse","setItem","stringify","removeItem","group","LocalStorage","currentProvider","walletAddress","getContractInstanceByName","contractName","instance","getContractInstance","getCustodyApi","custodyUrl","custody","WalletCustodyApiImpl","savedWallets","Set","api","authenticate","list","authFunction","Web3CustodyFunctionProvider","globalTimerList","globalTimerIndex","globalTimerId","globalTimerLastExecution","globalTimerFunction","id","timeout","when","setImmediate","initGlobalTimer","cb","delayMs","startAt","e","clearTimeout","forEach","ev","addEventListener","__id","providerSendAsync","sendAsync","skipCache","send","rej","subs","EventEmitter","captureRejections","timer","runLoop","props","lastCheck","emit","methodName","args","readOnlyCallWithOptions","reject","wrapSend","convertMMErrorMessage","split","join","target","then","catch","err","collectDataFunction","cmd","isTx","getCallData","promise","errorCallback","response","blockHash","gasUsed","handleMM","func","hasProviderMetamask","hasProviderDirect","hasCustodyApi","style","lastBlockNoTurnSealing","toFixed","maxFootprint","gradientGreenToRed","scopedSlots","_u","fn","sealersHeaders","item","totalSealedBlocks","colorGradient","fadeFraction","rgbColor1","rgbColor2","rgbColor3","color1","color2","fade","diffRed","red","diffGreen","green","diffBlue","blue","gradient","highColor","mediumColor","lowColor","open","type","validator","components","Explorer","nbBlocksToKeep","sealerMap","sealersReward","text","align","sealersSorted","sealersFootprint","sealersAddress","sealersLabels","tableHeadersAuditors","nodeVote","computeLabel","sortable","switchState","tableHeaders","openUpdateFootprintDialog","footprintDialog","selectedSealer","newFootprintValue","submitNewFootprint","currentTab","staticStyle","footprintTableHeaders","pledgeTableHeaders","amountToAdd","pledgeMore","intervalId","beforeRouteLeave","to","next","currentWalletBalanceEth","registerDelegateCommandLine","totalPledge","CRIPsUrl","lastCRIPCreated","reserveCRIP","CRIPS","cripsTableHeaders","createdBlock","voteFromContent","voteFromBlock","voteUntilContent","voteUntilBlock","auditorsFor","auditorsAgainst","nodesFor","nodesAgainst","canVote","userVote","$set","userVotes","votesTableHeaders","isConnected","fetchCRIPS","fetchUserVotes","currentBlock","once","count","crip","voter","approval","decision","inVotingPeriod","nbBlocks","funct","VueRouter","walletIsntConnected","hasRole","role","not","f","opts","any","functions","routes","path","Dashboard","meta","displayInSidenav","Status","restricted","forceRedirectTo","hidden","Improvements","InstallMetaMask","Auth","Auditors","ConfiscatedPledge","Pledge","Audit","History","redirect","base","watch","sidenav","filter","el","nav","categories","$emit","routeName","$router","display","walletPassword","errorMessage","cancel","loading","submit","AppMenu","WalletAuthenticationDialog","sync","Vuetify","theme","themes","light","primary","secondary","accent","warning","info","success","setupAuthNavigationGuard","beforeEach","productionTip","vuetify","render","h","App","$mount"],"mappings":"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","file":"js/index.4a3a345f.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"index\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","const nativeBigInt = (typeof global !== 'undefined') && global.BigInt || (typeof window !== 'undefined') && window.BigInt;\nconst supportsNative = typeof nativeBigInt === 'function';\nconst _BigInt = require('big-integer');\n\nconst nativeFunction = function (operator, a) {\n    switch (operator) {\n      // Arithmetic operators\n      case 'add': return (b) => new BigInt(a + b);\n      case 'subtract': return (b) => new BigInt(a - b);\n      case 'multiply': return (b) => new BigInt(a * b);\n      case 'divide': return (b) => new BigInt(a / b);\n      case 'remainder': return (b) => new BigInt(a % b);\n      case 'pow': return (b) => new BigInt(a ** b);\n      // Bitwise shift operators\n      case 'shiftLeft': return (b) => new BigInt(a << b);\n      case 'shiftRight': return (b) => new BigInt(a >> b);\n      // Binary bitwise operators\n      case 'and': return (b) => new BigInt(a & b);\n      case 'or': return (b) => new BigInt(a | b);\n      case 'xor': return (b) => new BigInt(a ^ b);\n      // Relational operators\n      case 'lt': return (b) => a < b;\n      case 'gt': return (b) => a > b;\n      case 'leq': return (b) => a <= b;\n      case 'geq': return (b) => a >= b;\n      case 'eq': return (b) => a === b;\n      case 'neq': return (b) => a !== b;\n      // Unary operators\n      case 'negate': return () => new BigInt(- a);\n      case 'not': return () => new BigInt(~ a);\n      case 'next': return () => new BigInt(++a);\n      case 'prev': return () => new BigInt(--a);\n    }\n    return undefined;\n};\n\n/**\n * A proxy for BigInt that supports both native and polyfill implementations.\n * Also includes convenience functions for conversion to and from uint8 arrays\n * with both big and little endian byte order.\n * \n * Examples:\n *     const biNative = new BigInt(2n ** 63n - 1n));\n *     biNative.toUint8Array()\n * \n *     const biNonNative = new BigInt('9223372036854775807');\n *     biNonNative.toUint8Array()\n */\nclass BigInt {\n    constructor(value) {\n        if (typeof value === 'bigint') {\n            this.value = value;\n        } else if (value instanceof BigInt) {\n            return value; \n        } else {\n            this.value = new _BigInt(value);\n        }\n        // Proxy method calls to _BigInt if possible\n        return new Proxy(this, {\n            get(obj, field) {\n                if (field in obj) return obj[field];\n                if (typeof obj.value === 'bigint') return nativeFunction(field, obj.value);\n                if (typeof obj.value !== 'bigint' && field in obj.value) return obj.value[field].bind(obj.value);\n                return undefined;\n            }\n        });\n    }\n\n    valueOf() {\n        if (typeof this.value === 'bigint') {\n            return this.value;\n        } else {\n            return this;\n            //throw new Error('Cannot implicitly cast polyfilled BigInt into number')\n        }\n    }\n\n    equals(b) {\n        if (typeof this.value === 'bigint') {\n            return this.value === b.value;\n        } else if (b instanceof BigInt) {\n            if (typeof b.value === 'bigint') {\n                return this.value.equals(new _BigInt(b.toString()));\n            } else {\n                return this.value.equals(new _BigInt(b.value));\n            } \n        } else {\n            return this.value.equals(new _BigInt(b));\n        }\n    }\n\n    toString(radix) {\n        return this.value.toString(radix);\n    }\n\n    _toUint8ArrayNative(littleEndian = false, elements = 8) {\n        const arr = new ArrayBuffer(elements);\n        const view = new DataView(arr);\n        view.setBigUint64(0, this.value, littleEndian);\n        return new Uint8Array(arr);\n    }\n\n    _toUint8Array(littleEndian = false, elements = 8) {\n        const arr = new ArrayBuffer(elements);\n        const uint8arr = new Uint8Array(arr);\n        const intarr = this.value.toArray(2**8).value;\n        if (littleEndian) uint8arr.set(intarr.reverse(), 0);\n        else uint8arr.set(intarr, elements - intarr.length);\n        return uint8arr;\n    }\n\n    toUint8Array(littleEndian = false, elements = 8) {\n        if (typeof this.value === 'bigint') {\n            return this._toUint8ArrayNative(littleEndian, elements);\n        } else {\n            return this._toUint8Array(littleEndian, elements);\n        }\n    }\n\n    /**\n     * Get BigInt from a uint8 array in specified endianess.\n     * Uses native BigInt if the environment supports it and detectSupport is true.\n     * \n     * @param {Uint8Array} uint8arr\n     * @param {boolean} littleEndian use little endian byte order, default is false\n     * @param {boolean} detectSupport auto-detect support for native BigInt, default is true\n     */\n    static fromUint8Array(uint8arr, littleEndian = false, detectSupport = true) {\n        if (supportsNative && detectSupport) {\n            const view = new DataView(uint8arr.buffer);\n            return new BigInt(view.getBigUint64(0, littleEndian));\n        }\n        let array;\n        if (littleEndian) {\n            array = Array.from(uint8arr).reverse();\n        } else {\n            array = Array.from(uint8arr);\n        }\n        return new BigInt(_BigInt.fromArray(array, 2**8));\n    }\n}\n\nmodule.exports = BigInt;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{attrs:{\"id\":\"inspire\"}},[_c('v-container',[_c('app-menu',{model:{value:(_vm.drawerDisplayed),callback:function ($$v) {_vm.drawerDisplayed=$$v},expression:\"drawerDisplayed\"}}),_c('v-app-bar',{attrs:{\"app\":\"\",\"clipped-left\":\"\",\"flat\":\"\",\"color\":\"teal lighten-2\"}},[(!_vm.drawerDisplayed)?_c('v-app-bar-nav-icon',{on:{\"click\":_vm.showDrawer}}):_vm._e(),_c('v-toolbar-title',[_vm._v(\"Proof of Carbon Reduction\")]),_c('v-spacer'),_c('v-chip',{staticClass:\"ma-2\",attrs:{\"color\":\"blue\",\"text-color\":\"white\"}},[_vm._v(\" \"+_vm._s(_vm.walletRole)+\" \")]),(_vm.wallet)?_c('v-chip',{staticClass:\"ma-2\",attrs:{\"close\":\"\",\"color\":\"blue\",\"text-color\":\"white\"},on:{\"click:close\":_vm.disconnect}},[_vm._v(\" \"+_vm._s(_vm.wallet)+\" \")]):_vm._e(),_c('v-chip',{staticClass:\"ma-2\",attrs:{\"color\":\"blue\",\"text-color\":\"white\"}},[_vm._v(\" \"+_vm._s(_vm.currentBlockNumber)+\" \")]),_c('v-chip',{staticClass:\"ma-2\",attrs:{\"color\":\"blue\",\"text-color\":\"white\"}},[_vm._v(\" \"+_vm._s(_vm.chainName)+\" \")])],1),_c('v-main',[_c('v-container',{staticClass:\"py-8\"},[_c('router-view')],1)],1)],1),_c('v-overlay',{attrs:{\"value\":_vm.mmIsOpen}},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\"}})],1),_c('v-snackbar',{attrs:{\"multi-line\":\"\",\"color\":_vm.snackbarColor,\"right\":\"\"},model:{value:(_vm.displaySnackbar),callback:function ($$v) {_vm.displaySnackbar=$$v},expression:\"displaySnackbar\"}},[_vm._v(\" \"+_vm._s(_vm.snackbarMessage)+\" \")]),_c('wallet-authentication-dialog',{ref:\"walletAuthenticationDialog\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-navigation-drawer',{attrs:{\"app\":\"\",\"clipped\":\"\",\"flat\":\"\"},on:{\"input\":_vm.drawerChange},model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:\"drawer\"}},[_c('v-divider'),_c('v-list',[_c('v-list-item-group',{attrs:{\"value\":_vm.$route.name,\"mandatory\":\"\",\"color\":\"primary\"}},[_vm._l((_vm.sidenav),function(ref,index){\nvar icon = ref.icon;\nvar label = ref.label;\nvar route = ref.route;\nvar disabled = ref.disabled;\nvar subheader = ref.subheader;\nreturn [(subheader && label !== '' && index !== 0)?_c('v-divider',{key:(label + \"-divider\")}):_vm._e(),(subheader && label !== '')?_c('v-subheader',{key:label},[_vm._v(_vm._s(label))]):_c('v-list-item',{key:route,attrs:{\"value\":route,\"disabled\":disabled(),\"link\":\"\"},on:{\"click\":function($event){return _vm.goTo(route)}}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(_vm._s(icon))])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(label))])],1)],1)]})],2)],1),_c('v-spacer'),_c('img',{attrs:{\"src\":\"PoCR_Logo.png\",\"width\":\"100%\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.providerModel!='metamask')?_c('div',[_c('div',[_vm._v(\"Install MetaMask and then reload this application.\")]),_vm._m(0)]):_vm._e(),(_vm.providerModel=='metamask')?_c('div',[_c('v-row',_vm._l((_vm.networks),function(network){return _c('v-col',{key:network.chainId,attrs:{\"cols\":\"4\"}},[_c('v-card',[_c('v-card-title',[_vm._v(_vm._s(network.name))]),_c('v-card-text',[_c('div',[_vm._v(_vm._s(network.title))]),_c('div',[_vm._v(\"chainID: \"+_vm._s(network.chainId))])]),_c('v-card-actions',[_c('v-btn',{on:{\"click\":function($event){return _vm.activateOrInstall(network)}}},[_vm._v(\"Activate\")])],1)],1)],1)}),1)],1):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"Installation instructions available at \"),_c('a',{attrs:{\"href\":\"https://metamask.io/download/\",\"target\":\"_blank\"}},[_vm._v(\"https://metamask.io/download/\")])])}]\n\nexport { render, staticRenderFns }","\n\nexport function parseUrl(url, acceptedProtocols) {\n  if (acceptedProtocols && !Array.isArray(acceptedProtocols)) acceptedProtocols = [acceptedProtocols];\n  if (acceptedProtocols) acceptedProtocols = acceptedProtocols.map(p=>(p.endsWith(\":\")? p : p+':').toLowerCase());\n  \n  if (!url) return undefined;\n  try {\n      const u = new URL(url)\n      if (acceptedProtocols) {\n          if (!acceptedProtocols.includes(u.protocol)) return undefined\n      }\n      return u;\n  } catch (error) {\n      return undefined;\n  }\n}\n\nexport async function cleanUpConfig(config) {\n  // Configuration of the internal network is optional and may contains no, one or several networks\n\n  // check the url of the server handling the private keys if not metamask\n  if ( !Array.isArray(config.networks)) config.networks = [];\n  const explorers = config.explorers||{};\n  for (const chainId in explorers) {\n    const url = explorers[chainId];\n    if (!parseUrl(url, [\"http\", \"https\"])) {\n      delete explorers[chainId];\n    }\n  }\n  config.explorers = explorers;\n\n  for (const network of config.networks) {\n    if (!parseUrl(network.nodeUrl, [\"http\", \"https\", \"ws\", \"wss\"])) {\n      delete network.nodeUrl;\n    }\n    if (!parseUrl(network.walletCustodyAPIBaseUrl, [\"http\", \"https\"])) {\n        delete network.walletCustodyAPIBaseUrl\n    }\n    if (!parseUrl(network.explorerUrl, [\"http\", \"https\"])) {\n      delete network.explorerUrl;\n    }\n    if (!network.explorerUrl) { // try to find a url in the explorers field\n      if (config.explorers[network.chainID]) {\n        network.explorerUrl = config.explorers[network.chainID];\n      }\n    }\n    // may add later some other verifications like the chain id matches the node \n  }\n  if (config.networks.length==0) {\n    config.networks.push({name: \"No network defined in the configuration\"})\n  }\n  return config;\n}\n\nexport function getDefaultNetwork(config) {\n  let result = config.networks.find( n=>n.default );\n  if (!result && config.networks.length>0) result = config.networks[0];\n  return result;\n}\n\nexport function changeDefaultNetwork(config, url) {\n  for (const network of config.networks) {\n    if (network.nodeUrl == url) {\n      network.default = true;\n    } else {\n      network.default = false;\n    }\n  }\n  return config;\n}\n\nexport function getNetworkList(config) {\n  return config.networks;\n}\n\nexport function getExplorerUrl(config, chainID) {\n  if (!config) return undefined;\n  if (!chainID) { // assume the default config\n    const network = getDefaultNetwork(config)\n    if (network) {\n      if (network.explorerUrl) return network.explorerUrl;\n      else return getExplorerUrl(config, network.chainID);\n    } else {\n      return undefined;\n    }\n  } else { // use the chain ID\n    if (config.explorers[chainID]) {\n      return config.explorers[chainID];\n    } \n  }\n  return undefined;\n}","<template>\n  <div>\n    <div v-if=\"providerModel!='metamask'\">\n      <div>Install MetaMask and then reload this application.</div>\n      <div>Installation instructions available at <a href=\"https://metamask.io/download/\" target=\"_blank\">https://metamask.io/download/</a></div>\n    </div>\n    <div v-if=\"providerModel=='metamask'\">\n      <v-row>\n        <v-col cols=\"4\" v-for=\"network of networks\" :key=\"network.chainId\">\n          <v-card>\n            <v-card-title>{{network.name}}</v-card-title>\n            <v-card-text>\n              <div>{{network.title}}</div>\n              <div>chainID: {{network.chainId}}</div>\n            </v-card-text>\n            <v-card-actions>\n              <v-btn @click=\"activateOrInstall(network)\">Activate</v-btn>\n            </v-card-actions>\n          </v-card>\n        </v-col>\n      </v-row>\n    </div>\n  </div>\n</template>\n<script>\nimport { get, call } from \"vuex-pathify\";\nimport { getExplorerUrl } from '../lib/config-file';\nexport default {\n  data: ()=>({\n    networks: []\n  }),\n  computed: {\n    ...get([\"config\"]),\n    ...get(\"auth\", [\"provider\", \"providerModel\"]),\n  },\n\n  async mounted() {\n    const res = await fetch('https://chainid.network/chains.json')\n    const all = await res.json()\n    this.networks = all.filter(n=>n.chain == 'CRC')\n  },\n\n  methods: {\n    ...call([\"errorFlash\"]),\n    ...call(\"auth\", [\"openMetaMaskConnectionDialog\"]),\n    async activateOrInstall(network) {\n      const ethereum = this.provider;\n      const chainId = '0x'+Number(network.chainId).toString(16);\n      const explorerUrl = getExplorerUrl(this.config, network.chainId);\n      try {\n        await ethereum.request({\n          method: 'wallet_switchEthereumChain',\n          params: [{ chainId }],\n        });\n        await this.openMetaMaskConnectionDialog();\n      } catch (switchError) {\n        // This error code indicates that the chain has not been added to MetaMask.\n        if (switchError.code === 4902) {\n          try {\n            await ethereum.request({\n              method: 'wallet_addEthereumChain',\n              params: [\n                {\n                  chainId,\n                  chainName: network.name,\n                  rpcUrls: [...network.rpc],\n                  nativeCurrency: network.nativeCurrency,\n                  blockExplorerUrls: network.explorers.filter(e=>e.standard=='EIP3091').map(e=>e.url).concat(explorerUrl)\n                },\n              ],\n            });\n            await this.openMetaMaskConnectionDialog();\n          } catch (addError) {\n            // handle \"add\" error\n            this.errorFlash(\"Fail adding the network:\"+addError.message)\n          }\n        }\n        // handle other \"switch\" errors\n        this.errorFlash(\"Fail switching to the network:\"+switchError.message)\n      }\n    }\n  }\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InstallMetaMask.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InstallMetaMask.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InstallMetaMask.page.vue?vue&type=template&id=744e8566&\"\nimport script from \"./InstallMetaMask.page.vue?vue&type=script&lang=js&\"\nexport * from \"./InstallMetaMask.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.hasProviderMetamask)?_c('v-btn',{attrs:{\"color\":\"teal\",\"dark\":\"\"},on:{\"click\":_vm.openMetaMaskConnectionDialog}},[_vm._v(\"Connect Metamask Wallet\")]):_vm._e(),_c('br'),_c('br'),(_vm.hasProviderDirect)?_c('div',[_c('v-btn',{attrs:{\"color\":\"teal\",\"dark\":\"\"},on:{\"click\":_vm.prepareOpenWeb3DirectConnectionDialog}},[_vm._v(\"Connect with below configuration\")]),_vm._v(\" \"),_c('br'),_c('br'),_c('v-select',{attrs:{\"hint\":(\"node: \" + (_vm.selectedNetwork.nodeUrl) + \"; custody: \" + (_vm.selectedNetwork.walletCustodyAPIBaseUrl)),\"items\":_vm.networks,\"item-text\":\"name\",\"item-value\":\"nodeUrl\",\"persistent-hint\":\"\",\"return-object\":\"\",\"single-line\":\"\"},model:{value:(_vm.selectedNetwork),callback:function ($$v) {_vm.selectedNetwork=$$v},expression:\"selectedNetwork\"}}),(_vm.hasCustodyApi)?_c('div',[_c('br'),_c('v-combobox',{attrs:{\"label\":\"Enter the wallet address\",\"placeholder\":\"capture your wallet address\",\"outlined\":\"\",\"counter\":\"\",\"clearable\":\"\",\"search-input\":_vm.wallet,\"items\":_vm.wallets},on:{\"update:search-input\":_vm.updateWallet}}),_c('v-text-field',{attrs:{\"label\":\"Enter the wallet password\",\"placeholder\":\"capture your wallet password\",\"outlined\":\"\",\"type\":_vm.show?'text' : 'password'},on:{\"click:append\":function($event){_vm.show = !_vm.show}},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1):_vm._e()],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import pathify from 'vuex-pathify'\nexport default pathify\n\n// options\npathify.options.mapping = 'simple'\n// pathify.options.deep = false","import web3 from \"web3\";\n\nexport const ROLES = {\n  VISITOR : \"Visitor\",\n  AUDITED_NODE : \"Audited node\",\n  NEW_NODE : \"New node\",\n  APPROVED_AUDITOR : \"Approved auditor\",\n  PENDING_AUDITOR : \"Auditor\",\n  USER_CONNECTED : \"User\",\n}\n\nexport const CRIPBaseUrl = \"https://github.com/ethereum-pocr/CRIPs/blob/main/CRIPS\"\n\n\nexport const governanceAddress = \"0x0000000000000000000000000000000000000100\";\nexport const totalCRCAddress = \"0x0000000000000000000000000000000000000101\";\nconst sessionVariableTotalPocRCoins = \"GeneratedPocRTotal\";\nexport const GeneratedCRCTotalHash = web3.utils.keccak256(sessionVariableTotalPocRCoins);","import { make } from \"vuex-pathify\";\nimport { poaBlockHashToSealerInfo } from \"pocr-utils\";\nimport { Web3FunctionProvider } from \"@saturn-chain/web3-functions\";\nimport { readOnlyCall, intf as _intf, writeCall, handleMMResponse, getWalletBalance, subscribeNewBlocks } from \"@/lib/api\";\nimport { totalCRCAddress, GeneratedCRCTotalHash } from \"@/lib/const\";\nimport $store from \"@/store/index\";\n\nconst MAX_BLOCKS_TO_KEEP = 10;\n\nconst state = () => ({\n    nbOfNodes: 0,\n    totalFootprint: 0,\n    totalCrypto: 0,\n    sealers: [],\n    chainUpdateSubscription: null,\n    blocks: [],\n    currentBlockNumber: 0,\n    currentWalletBalanceWei: 0,\n    backupLoop: null,\n    timeSinceLastBlock: 0\n})\n\nconst average = (arr) => arr.reduce((a, b) => a + b, 0) / arr.length;\n\nconst getters = {\n    rewardsByBlock(state) {\n        const rewards = state.blocks.map((d) => d.sealer.lastReward);\n        rewards.unshift(0);\n        return rewards;\n    },\n    averageReward(state) {\n        if (state.blocks.length === 0) return 0;\n        const rewards = state.blocks.map((d) => d.sealer.lastReward);\n        return average(rewards);\n    },\n    averageDelaySec(state) {\n        if (state.blocks.length < 2) return 0;\n        const minIndex = state.blocks.length-Math.min(state.blocks.length, 11)\n        const delays = [];\n        for (let i=state.blocks.length-1; i>minIndex; i--) {\n            const previousBlock = state.blocks[i - 1];\n            const lastBlock = state.blocks[i];\n            delays.push((lastBlock.receivedAt - previousBlock.receivedAt) / 1000)\n        }\n        // console.log(\"Debug averageDelaySec\", minIndex, state.blocks.length, delays);\n        if (delays.length == 0) return 0;\n        return delays.reduce( (sum, v)=>v+sum, 0) / delays.length;\n    },\n    lastBlock(state) {\n        if (state.blocks.length === 0) return null;\n        return state.blocks[state.blocks.length - 1];\n    },\n    lastBlockNumber(state, getters) {\n        return getters.lastBlock?.block.number;\n    }\n}\n\nconst mutations = make.mutations(state);\n\nasync function updateSealerDetails(web3, sealer) {\n    const carbonFootprint = $store.get(\"auth/contract\");\n    const intf = _intf(web3);\n    const balance = web3.utils.toBN(await web3.eth.getBalance(sealer.address));\n    const bal = Number.parseFloat(web3.utils.fromWei(balance, \"ether\"));\n    const footprint = await carbonFootprint.footprint(intf.call(), sealer.address);\n    sealer.footprint = Number.parseFloat(footprint);\n    sealer.balance = bal;\n    sealer.lastReward = 0; //delta //normalRewardForFootprint(data.sealer.footprint, data.totalFootprint, data.nbNodes);\n\n    return sealer;\n}\n\nasync function processBlock(web3, block) {\n    console.log(\"ProcessBloc\", block.number, new Date().toTimeString());\n    const intf = _intf($store.get(\"auth/provider\"));\n    const carbonFootprint = $store.get(\"auth/contract\");\n\n    const data = { block, sealer: undefined }\n    try {\n        if (typeof block.difficulty === \"string\" && !block.difficulty.startsWith('0x')) block.difficulty = Number.parseInt(block.difficulty);\n        const blockNumber = typeof block.number === \"string\" ? Number.parseInt(block.number) : block.number;\n        // Total and delta\n        const totalCryptoB4 = web3.utils.toBN(await web3.eth.getStorageAt(totalCRCAddress, GeneratedCRCTotalHash, blockNumber -1))\n        const totalCrypto = web3.utils.toBN(await web3.eth.getStorageAt(totalCRCAddress, GeneratedCRCTotalHash, blockNumber))\n        // extract the sealer data\n        data.sealer = poaBlockHashToSealerInfo(block);\n        data.sealer = await updateSealerDetails(web3, data.sealer);\n        const delta = Number.parseFloat(web3.utils.fromWei(totalCrypto.sub(totalCryptoB4), \"ether\"));\n        data.sealer.lastReward = delta;\n        data.block.number = blockNumber;\n\n        const totalFootprint = await carbonFootprint.totalFootprint(intf.call())\n        const nbNodes = await carbonFootprint.nbNodes(intf.call())\n\n        data.totalFootprint = Number.parseInt(totalFootprint)\n        data.totalCrypto = Number.parseFloat(web3.utils.fromWei(totalCrypto, \"ether\"))\n        data.nbNodes = Number.parseInt(nbNodes)\n        data.receivedAt = Date.now();\n\n        // read the sealers from the contract\n        const sealers = []\n        for (let index = 0; index < nbNodes; index++) {\n            const sealer = await carbonFootprint.sealers(intf.call(), index)\n            const isSealer = await carbonFootprint.isSealer(intf.call(), sealer)\n            sealers.push({sealer, isSealer})\n        }\n        // console.log(\"Loaded sealers\", sealers);\n\n    } catch (error) {\n        console.warn(\"Error in preparing block\", error)\n        throw new Error(\"Fail processing block \"+block.number)\n    }\n    return data;\n}\nasync function logicOnNewBloc(web3, blocks, sealers, block) {\n    // we have a block that is before the current block, remove the block up to that block\n    while (blocks.length>0 && blocks[blocks.length-1].block.number >= block.number) {\n        blocks.pop();\n    }\n    const data = await processBlock(web3, block);\n    blocks.push(data);\n    while (blocks.length >= MAX_BLOCKS_TO_KEEP) {\n        blocks.shift();\n    }\n\n    // Update the sealer of the block\n    let si = sealers.findIndex(s=>s.address == data.sealer.address);\n    if (si<0) { // not found\n        const sealer = {...data.sealer,sealedBlocks: 1}\n        console.log(\"Creating new sealer\", sealer);\n        sealers.push(sealer);\n    } else {\n        const sealer = {...sealers[si], ...data.sealer};\n        sealer.sealedBlocks ++;\n        sealers[si] = sealer;\n    }\n    return {blocks, sealers};\n\n}\n\nconst actions = {\n    async fetchAllValues({ dispatch }) {\n        await dispatch(\"fetchNumberOfNodes\");\n        await dispatch(\"fetchTotalFootprint\");\n        await dispatch(\"updateNodesStatus\");\n    },\n\n    async initBackupLoop({state, commit}) {\n        if (state.backupLoop) {clearInterval(this.backupLoop)}\n        commit(\"timeSinceLastBlock\", 0)\n        const backupLoop = setInterval( ()=>{\n            const lastBlock = $store.get(\"nodes/lastBlock\");\n            if (!lastBlock) return;\n            const timeSinceLastBlock = Date.now()-lastBlock.receivedAt;\n            if (timeSinceLastBlock > 60*1000) {\n                console.warn(\"No block update since more than 60 seconds. Force a subscription\");\n                window.location.reload();\n                // dispatch(\"subscribeToChainUpdates\")\n            }\n            commit(\"timeSinceLastBlock\", timeSinceLastBlock)\n        }, 200);\n\n        commit(\"backupLoop\", backupLoop);\n    },\n\n    async fetchNumberOfNodes() {\n        const nbNodes = await readOnlyCall(\"nbNodes\");\n        $store.set(\"nodes/nbOfNodes\", Number.parseInt(nbNodes));\n    },\n\n    async fetchTotalFootprint() {\n        const totalFootprint = await readOnlyCall(\"totalFootprint\");\n        $store.set(\"nodes/totalFootprint\", Number.parseInt(totalFootprint));\n    },\n\n    async updateNodesStatus() {\n        const sealers = $store.get(\"nodes/sealers\")\n        for (const sealer of sealers) {\n            const s = await readOnlyCall(\"isSealer\", sealer.address)\n            // console.log(\"isSealer\", sealer);\n            sealer.isActive = s\n        }\n        $store.set(\"nodes/sealers\", sealers)\n    },\n\n    async subscribeToChainUpdates({ state, rootState, dispatch }) {\n        if (state.chainUpdateSubscription !== null) {\n            state.chainUpdateSubscription.unsubscribe();\n            $store.set(\"nodes/chainUpdateSubscription\", null);\n        }\n        await dispatch(\"fetchChainInformations\");\n\n        const web3 = rootState.auth.web3;\n        const subscription = subscribeNewBlocks(web3) //web3.eth.subscribe(\"newBlockHeaders\");\n        let blockProcessing = false;\n        let blocksWaiting = [];\n        const processingFunc = async (block) => {\n            try {\n                if (block.baseFeePerGas == undefined) block = await web3.eth.getBlock(block.number);\n                await dispatch(\"insertNewBlock\", block);\n            } catch (error) {\n                // some error on the subscription processing\n                // if the error is due to the loss of connection it needs a reset of the connection\n                console.warn(\"Error on receiving a new block\", error);\n                blocksWaiting = []; // clear\n                await dispatch(\"subscribeToChainUpdates\");\n            }\n        }\n        subscription.on(\"data\", async block =>{\n            if (blockProcessing) blocksWaiting.push(block);\n            else try {\n                blockProcessing = true;\n                await processingFunc(block);\n                while( (block = blocksWaiting.shift()) ) {\n                    await processingFunc(block);\n                }\n            } finally {\n                blockProcessing = false;\n            }\n        });\n        $store.set(\"nodes/chainUpdateSubscription\", subscription);\n    },\n\n    unsubscribeToChainUpdates() {\n        if (state.chainUpdateSubscription !== null) state.chainUpdateSubscription.unsubscribe();\n    },\n\n\n\n    async insertNewBlock({ state, rootState, commit, dispatch }, block) {\n        const web3 = $store.get(\"auth/web3\");\n        commit(\"currentBlockNumber\", block.number);\n        if (rootState.auth.wallet) {\n            const bal = await getWalletBalance(rootState.auth.wallet);\n            commit(\"currentWalletBalanceWei\", bal);\n        }\n        try {\n            const {blocks, sealers} = await logicOnNewBloc(web3, [...state.blocks], [...state.sealers], block);\n            \n            $store.set(\"nodes/blocks\", blocks);\n            $store.set(\"nodes/sealers\", sealers);\n            if (blocks.length>0) {\n                $store.set(\"nodes/totalCrypto\", blocks[blocks.length-1].totalCrypto)\n            }\n        } catch (error) {\n            // ignore that block\n        }\n        dispatch(\"fetchAllValues\");\n    },\n\n    discoverNotRunningSealers({rootState, state}) {\n        const web3 = rootState.auth.web3;\n        const contract = rootState.auth.contract;\n        const prov = new Web3FunctionProvider(rootState.auth.provider, ()=>Promise.resolve(contract.deployedAt));\n        const sealers = [...state.sealers]; // make a copy of the sealers from the store\n        contract.events.CarbonFootprintUpdate(prov.get({fromBlock: 1}), {})\n        .on(\"log\", async log=>{\n            // try to find the sealer in the list\n            let found = sealers.find(s=>s.address.toLowerCase() == log.returnValues.node.toLowerCase())\n            if (!found) {\n                const sealer = await updateSealerDetails(web3, {\n                    address: log.returnValues.node.toLowerCase(), \n                    vanity: {custom:\"Unknown innactive node\"},\n                    sealedBlocks: 0\n                })\n                // check again if it not already added, as the above can execute concurrently\n                found = sealers.find(s=>s.address.toLowerCase() == sealer.address)\n                // we have collected the node data, but maybe it is not a node anymore\n                if (sealer.footprint>0 && found===undefined) {\n                    console.log(\"Adding an innactive sealer\", sealer);\n                    // keep in the local array variable \n                    sealers.push(sealer);\n                    // but also update the store with some delay to prevent concurrent race in other state setter\n                    setTimeout( ()=>$store.set(\"nodes/sealers\", sealers), 200);\n                }\n            }\n        })\n    },\n\n    async fetchChainInformations({ rootState, dispatch }) {\n        const web3 = rootState.auth.web3;\n        // gets the eventually already available blocks to only request the new ones\n        let blocks = [...(rootState.nodes.blocks||[])];\n        // the sealers array or create it\n        let sealers = [...(rootState.nodes.sealers||[])];\n        const lastBlockInMemory = blocks.length>0 ? blocks[blocks.length-1].block.number : 0;\n        const blockNumber = await web3.eth.getBlockNumber();\n        this.blockNumber = blockNumber;\n\n        let index = Math.max(lastBlockInMemory+1, blockNumber - MAX_BLOCKS_TO_KEEP);\n        console.log(\"From block\", index, \"to\", blockNumber, \"sealers count\", sealers.length, \"blocks count\", blocks.length);\n\n        for (; index < blockNumber; index++) {\n            const block = await web3.eth.getBlock(index, false);\n            try {\n                const r = await logicOnNewBloc(web3, blocks, sealers, block);\n                blocks = r.blocks;\n                sealers = r.sealers;\n            } catch (error) {\n                // ignore block                \n            }\n        }\n        if (blocks.length>0) {\n            $store.set(\"nodes/totalCrypto\", blocks[blocks.length-1].totalCrypto)\n        }\n        $store.set(\"nodes/blocks\", blocks);\n        $store.set(\"nodes/sealers\", sealers);\n        // We may have nodes that have been receiving a footprint that are not running, let's find them from the event log\n        dispatch(\"discoverNotRunningSealers\");\n        $store.dispatch(\"auth/fetchRole\");\n    },\n    async fetchOneNodeInfo({rootState}, address) {\n        const web3 = rootState.auth.web3;\n        // ensure blocks are loaded, because it needs the blocks to find the node\n        const sealers = rootState.nodes.sealers || [];\n        let found = sealers.findIndex(s=>s.address == address.toLowerCase());\n        if (found>=0) {\n            sealers[found] = await updateSealerDetails(web3, sealers[found]);\n            $store.set(\"nodes/sealers\", sealers);\n            return sealers[found];\n        } else {\n            return undefined; //await updateSealerDetails(web3, {address})\n        }\n    },\n\n    async updateFootprint({dispatch}, { sealerAddress, footprint }) {\n        await handleMMResponse(writeCall(\"setFootprint\", sealerAddress, footprint));\n        dispatch(\"fetchOneNodeInfo\", sealerAddress);\n        dispatch(\"fetchAllValues\")\n    }\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","// import ready from \"document-ready-promise\";\nimport detectEthereumProvider from '@metamask/detect-provider';\nimport Web3 from \"web3\";\nimport { make } from \"vuex-pathify\";\nimport { readOnlyCall, writeCallWithOptions, handleMMResponse, getWeb3ProviderFromUrl, verifyCustodyAuthentication, getCustodyLastWallets } from \"@/lib/api\";\nimport { getDefaultNetwork, changeDefaultNetwork, getExplorerUrl } from \"@/lib/config-file\";\n\nimport $store from \"@/store/index\";\nimport router from \"../router.js\";\nimport {ROLES} from \"../lib/const\"\nimport { poaBlockHashToSealerInfo } from '@root/../pocr-utils/build/index.js';\nimport { intf } from '../lib/api.js';\n\nconst state = () => ({\n    web3: null, // the web3 instance to avoid recreating it each time, because it has a side effect on the events of the provider\n    intf: null, // similarly the intf instance should not be recreated each time\n    provider: null,\n    providerMetamask: null,\n    providerDirect: null,\n    providerModel: null, // \"metamask\" or \"direct\" or \"both\" (if both are available)\n    custodyModel: null, // \"metamask\" or \"api\" or null if not available\n    custodyApiUrl: null, // the url of the custody api when the custody model is \"api\"\n    wallet: null,\n    delegatedWallet: null,\n    contract: null,\n    registered: false,\n    // roles\n    isNode: false,\n    isVoterNode: false,\n    isAuditor: false,\n    isAuditorApproved: false,\n    walletAuthenticationFunction: null\n})\n\nconst getters = {\n    walletRole(state) {\n        if (!state.wallet) return ROLES.VISITOR;\n        if (state.isVoterNode) return ROLES.AUDITED_NODE;\n        if (state.isNode) return ROLES.NEW_NODE;\n        if (state.isAuditorApproved) return ROLES.APPROVED_AUDITOR;\n        if (state.isAuditor) return ROLES.PENDING_AUDITOR;\n\n        return ROLES.USER_CONNECTED;\n    },\n    explorerUrl(state) {\n        if (state.providerModel == \"metamask\") {\n            return state.providerMetamask.explorerUrl;\n        }\n        if (state.providerModel == \"direct\") {\n            return state.providerDirect.explorerUrl;\n        }\n        return undefined;\n    },\n    chainName(state) {\n        let chainId=0;\n        console.log(\"build chainName\")\n        switch (state.providerModel) {\n            case \"direct\": chainId=state.providerDirect.chainID; break;\n            case \"metamask\": chainId=state.providerMetamask.chainID; break;\n        }\n        switch (chainId) {\n            case 1804: return \"Kerleano\";\n            case 2606: return \"PoCRNet\";\n        }\n        return \"Unknown\"\n    }\n}\n\nconst mutations = make.mutations(state);\n\n// function to generalize the web3 provider and signature api options\nasync function detectMetamask() {\n    const config = $store.get(\"config\");\n    const providerMetamask = await detectEthereumProvider();\n    if (providerMetamask) {\n        providerMetamask.on(\"connect\", chaininfo=>{\n            console.log(\"Metamask chain info\", chaininfo);\n        })\n        providerMetamask.on('accountsChanged', () => window.location.reload())\n        providerMetamask.on('chainChanged', () => window.location = new URL(window.location.pathname, window.location.origin).href)\n        const chainID = Number(providerMetamask.chainId)\n        \n        return {\n            providerModel: \"metamask\",\n            provider: providerMetamask,\n            custodyModel: \"metamask\",\n            custodyApiUrl: null,\n            chainID,\n            explorerUrl: getExplorerUrl(config, chainID)\n        }\n    } else return undefined;\n}\n\nasync function detectDirectAccess() {\n    const config = $store.get(\"config\");\n    const defaultNetwork = getDefaultNetwork(config);\n    // if we have a nodeUrl, we can connect to the network\n    if (defaultNetwork.nodeUrl) {\n        // first create a direct provider without the wallet custody\n        const result = {\n            providerModel: \"direct\",\n            provider: getWeb3ProviderFromUrl(defaultNetwork.nodeUrl),\n            custodyModel: null,\n            custodyApiUrl: null,\n            chainID: Number.parseInt(defaultNetwork.chainID),\n            explorerUrl: getExplorerUrl(config) // will use the default network\n        }\n        // if we also have the wallet custody, then add it in the result\n        if (defaultNetwork.walletCustodyAPIBaseUrl) {\n            result.custodyModel = \"api\",\n            result.custodyApiUrl = defaultNetwork.walletCustodyAPIBaseUrl\n        } else {\n            console.log(\"Note: No company's wallet custody configured\");\n        }\n        return result;\n    } else {\n        console.log(\"Note: No direct web3 access configured\");\n        return undefined\n    }\n}\n\nconst actions = {\n\n    async checkNetworkProofOfCarbonReduction() {\n        const web3 = $store.get(\"auth/web3\");\n        const carbonFootprint = $store.get(\"auth/contract\");\n        \n        try {\n            // try getting the blocknumber\n            const blockNumber = await web3.eth.getBlockNumber()\n            // try getting the poaInfo of the block\n            const block = await web3.eth.getBlock(blockNumber);\n            if (typeof block.difficulty === \"string\" && !block.difficulty.startsWith('0x')) block.difficulty = Number.parseInt(block.difficulty);\n            poaBlockHashToSealerInfo(block);\n            // try getting the number of sealers/nodes\n            await carbonFootprint.nbNodes(intf().call())\n            \n        } catch (error) {\n            console.error(\"Fail in checkNetworkProofOfCarbonReduction\", error);\n            return error.message;\n        }\n        return false;\n    },\n\n    async fetchRole() {\n        console.log(\"fetchRole called\");\n        // Possibles roles are simple visitor (no wallet), authenticated visitor, auditor, node operator\n        // Reset the states\n        $store.set(\"auth/isAuditor\", false);\n        $store.set(\"auth/isNode\", false);\n        $store.set(\"auth/isVoterNode\", false);\n\n        // get the current address\n        const wallet = $store.get(\"auth/wallet\");\n        if (wallet) {\n            // check if it's Auditor\n            const isAuditor = await readOnlyCall(\"auditorRegistered\", wallet);\n            const isAuditorApproved = await readOnlyCall(\"auditorApproved\", wallet);\n            // see if the node is a sealer and get the value of the footprint if it exists\n            let sealerNode = await $store.dispatch(\"nodes/fetchOneNodeInfo\", wallet);\n            // console.log(\"sealerNode\", sealerNode);\n            if (!sealerNode) { // wallet is not a node, is the wallet a delegate of a node\n                try {\n                    const delegateOf = await readOnlyCall(\"delegateOf\", wallet);\n                    // console.log(\"retrieved delegateOf\", delegateOf);\n                    sealerNode = await $store.dispatch(\"nodes/fetchOneNodeInfo\", delegateOf);\n                } catch (error) {\n                    // console.log(\"retrieved delegateOf impossible - ealier version of the genesis\");\n                }\n            }\n            if (sealerNode) { // wallet found as sealer or delegate of a sealer\n                $store.set(\"auth/isNode\", true);\n                let isVoterNode = false;\n                try { // to keep compatibility with the old genesis\n                    isVoterNode = await readOnlyCall(\"canActAsSealerNode\", wallet);\n                } catch (error) {\n                    const footprint = await readOnlyCall(\"footprint\", wallet);\n                    isVoterNode = footprint > 0;\n                }\n                $store.set(\"auth/isVoterNode\", isVoterNode);\n                $store.set(\"auth/delegatedWallet\", sealerNode.address);\n            } \n            // set the values to the store\n            $store.set(\"auth/isAuditor\", isAuditor);\n            $store.set(\"auth/isAuditorApproved\", isAuditorApproved);\n\n        }\n    },\n\n    setConnection(store, provider) {\n        $store.set(\"auth/provider\", provider.provider);\n        $store.set(\"auth/providerModel\", provider.providerModel);\n        const web3 = new Web3(provider.provider);\n        web3.eth.ens = null\n        $store.set(\"auth/web3\", web3);\n        window.myWeb3 = web3;\n        $store.set(\"auth/intf\", null); // will created on the fly by the intf() function\n    },\n\n    async detectProvider({dispatch}) {\n        console.log(\"Before detecting providers\");\n        try {\n            await $store.dispatch(\"fetchConfig\");\n            let nbProviders = 0;\n\n            const providerMetamask = await detectMetamask();\n            if (providerMetamask) {\n                nbProviders ++;\n            }\n \n            const providerDirect = await detectDirectAccess();\n            if (providerDirect) {\n                nbProviders ++;\n            } \n            if (nbProviders == 0) {\n                // router.push({ name: \"installMetaMask\" }); \n                return;\n            }\n            \n            $store.set(\"auth/providerMetamask\", providerMetamask);\n            $store.set(\"auth/providerDirect\", providerDirect);\n            if (nbProviders > 1) {\n                $store.set(\"auth/providerModel\", \"both\");\n                // return router.push({ name: \"authentication\" }); \n            } else { // a single provider detected, can skip the decision process\n                const provider = providerDirect || providerMetamask; // will get one that is not null\n                dispatch(\"setConnection\", provider);\n                // $store.set(\"auth/provider\", provider.provider);\n                // $store.set(\"auth/providerModel\", provider.providerModel);\n            }\n        } catch (error) {\n            console.error(\"Fail detecting a valid provider\", error.message)\n        }\n    },\n\n    async attemptToConnectWallet() {\n        let addresses = [];\n        // const providerMetamask = $store.get(\"auth/providerMetamask\");\n        // const providerDirect = $store.get(\"auth/providerDirect\");\n        const model = $store.get(\"auth/providerModel\");\n        if (model == \"metamask\") addresses = await window.ethereum.request({ method: \"eth_accounts\" });\n        if (model == \"direct\" && addresses.length == 0) addresses = await getCustodyLastWallets();\n        console.log(\"attemptToConnectWallet\", addresses);\n        const address = addresses.length > 0 ? addresses[0] : null;\n        if (!address) return;\n        $store.set(\"auth/wallet\", address);\n        // We do it here because stuff breaks if we try to instanciate the interface before we know the address\n        return address;\n    },\n\n    async openMetaMaskConnectionDialog({ dispatch }) {\n        $store.set(\"auth/wallet\", null);\n        const accounts = await window.ethereum.request({ method: \"eth_requestAccounts\" })\n        if (accounts.length === 0) return;\n        $store.set(\"auth/wallet\", accounts[0]);\n        // it's decided, the provider is metamask\n        const provider = $store.get(\"auth/providerMetamask\");\n        dispatch(\"setConnection\", provider);\n        // $store.set(\"auth/provider\", provider.provider);\n        // $store.set(\"auth/providerModel\", provider.providerModel);\n        // TODO: call fetchRole here to do a selective redirect? Or, just assume it's a first connect and don't care.\n        await dispatch(\"fetchRole\");\n        router.push({ name: \"dashboard\" });\n    },\n\n    async openWeb3DirectConnectionDialog({ dispatch }, {wallet, password, nodeUrl}) {\n        // force reset the wallet\n        $store.set(\"auth/wallet\", null);\n        // update the default config\n        let config = $store.get(\"config\");\n        config = changeDefaultNetwork(config, nodeUrl);\n        $store.set(\"config\", config);\n\n        const provider = await detectDirectAccess(); // read again the default config now that it is chaged\n        dispatch(\"setConnection\", provider);\n        // $store.set(\"auth/provider\", provider.provider);\n        // $store.set(\"auth/providerModel\", provider.providerModel);\n        \n        if (provider.custodyModel == \"api\") {\n            const token = await verifyCustodyAuthentication(wallet, password)\n            // console.log(\"openWeb3DirectConnectionDialog\", wallet, password, token);\n            if (token) {\n                $store.set(\"auth/wallet\", wallet);\n            }\n        }\n        await dispatch(\"fetchRole\");\n        router.push({ name: \"dashboard\" });\n    },\n\n    async disconnect() {\n        await router.push({ name: \"authentication\" });\n        $store.set(\"auth/wallet\", null);\n    },\n\n    async fetchIsRegistered({ state }) {\n        const registered = await handleMMResponse(readOnlyCall(\"auditorRegistered\", state.wallet));\n        $store.set(\"auth/registered\", registered);\n    },\n\n    async selfRegister({ dispatch }) {\n        await handleMMResponse(writeCallWithOptions(\"selfRegisterAuditor\", {maxGas:200000}));\n        dispatch(\"fetchIsRegistered\");\n        dispatch(\"status/fetchIsApproved\", null, { root: true });\n        dispatch(\"fetchRole\");\n    }\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","import { BigNumber } from \"bignumber.js\";\nexport const GWEI_FACTOR = Math.pow(10, 9)\nexport const ETH_FACTOR = Math.pow(10, 18)\n/**\n * Convert to BigNumber\n * @param {bigint|string|number} bi \n * @returns BigNumber\n */\nexport function toWebBigInt(bi) {\n  return new BigNumber(bi);\n}\n\n/**\n * Convert to normal number\n * @param {BigNumber} bi \n * @returns Number\n */\nexport function toNumber(bi) {\n  return bi.toNumber();\n}\n\n/**\n * Convert wei to gwei\n * @param {bigint|string|number} bi \n * @returns BigNumber\n */\nexport function toGWei(bi) {\n  return toWebBigInt(bi).div(toWebBigInt(GWEI_FACTOR));\n}\n/**\n * Convert wei to Ether\n * @param {bigint|string|number} bi \n * @returns BigNumber\n */\nexport function toEther(bi) {\n  return toWebBigInt(bi).div(toWebBigInt(ETH_FACTOR));\n}\n\nexport function toWei(bi, from) {\n  const n = toWebBigInt(bi);\n  if(from === \"ether\") return n.multipliedBy(ETH_FACTOR)\n  if(from === \"gwei\") return n.multipliedBy(GWEI_FACTOR)\n  return n\n}\n\n/** Convert a big int to a smart contract parameter call \n * @param {BigNumber} bi\n * @return {string}\n*/\nexport function toParam(bi) {\n  // return bi.toFormat(0, BigNumber.ROUND_DOWN, {groupSeparator:''})\n  return '0x'+bi.toString(16)\n}\n\nwindow.Numberlib = {\n  toWebBigInt,\n  toNumber,\n  toEther,\n  toGWei,\n  toWei,\n  toParam\n}","import { make } from \"vuex-pathify\";\nimport { governanceAddress } from \"@/lib/const\";\nimport { Web3FunctionProvider } from \"@saturn-chain/web3-functions\";\nimport allContracts from \"sc-carbon-footprint\";\nimport { toEther } from \"@/lib/numbers\";\n\n// eslint-disable-next-line \nimport { SmartContractInstance } from \"@saturn-chain/smart-contract\" // needed only for typings resolution in the code\nimport $store from \"@/store/index\";\n\nconst state = () => ({\n    pledgeHistory: [],\n    footprintHistory: []\n})\n\nconst getters = {}\n\nconst mutations = {\n    ...make.mutations(state),\n    appendFootprint: (state, value) => {\n        state.footprintHistory.push(value)\n    },\n    appendPledge: (state, value) => {\n        state.pledgeHistory.push(value)\n    },\n};\n\nconst actions = {\n    fetchAllValues({ dispatch }) {\n        const prov = new Web3FunctionProvider($store.get(\"auth/provider\"), ()=>Promise.resolve($store.get(\"auth/wallet\")))\n        const contract = allContracts.get(\"Governance\").at(governanceAddress);\n\n        dispatch(\"fetchFootprintHistory\", {contract, prov});\n        dispatch(\"fetchPledgeHistory\", {contract, prov});\n    },\n\n    /**\n     * Get the list of setting footprint from the begining.     \n     * TODO: Replace by a pagination scheme \n     * @param {*} empty \n     * @param {{contract:SmartContractInstance, prov:Web3FunctionProvider} param1 \n     */\n    async fetchFootprintHistory({commit, rootState}, {contract, prov}) {\n        const web3 = $store.get(\"auth/web3\");\n        const sealers = rootState.nodes.sealers;\n        const wallet = rootState.auth.wallet;\n        $store.set(\"history/footprintHistory\", []);\n        contract.events.CarbonFootprintUpdate(prov.get({fromBlock: 1}), {})\n        .on(\"log\", async log=>{\n            // console.log(\"get logs \", log);\n            const tx = await web3.eth.getTransaction(log.transactionHash)\n            // console.log('tx=', tx);\n            const footprint = {\n                blockNumber: log.blockNumber,\n                auditor: tx?tx.from.toLowerCase():'no sealer!',\n                node: log.returnValues.node.toLowerCase(),\n                footprint: log.returnValues.footprint,\n                txHash: log.transactionHash\n            };\n            const foundSealer = sealers.find(s=>s.address == footprint.node);\n            if (foundSealer) {\n                footprint.nodeName = foundSealer.vanity.custom;\n            } else {\n                footprint.nodeName = 'Not a node';\n            }\n            if (footprint.auditor == wallet) {\n                footprint.auditorName = \"Me\";\n            } else {\n                footprint.auditorName = footprint.auditor;\n            }\n            commit(\"appendFootprint\", footprint);\n        })\n    },\n\n    /**\n     * Get the list of pledging from the begining.     \n     * TODO: Replace by a pagination scheme \n     * @param {*} empty \n     * @param {{contract:SmartContractInstance, prov:Web3FunctionProvider} param1 \n     */\n    async fetchPledgeHistory({commit, rootState}, {contract, prov}) {\n        const wallet = rootState.auth.wallet;\n        $store.set(\"history/pledgeHistory\", []);\n        // get the logs of the current auditor only\n        contract.events.AmountPledged(prov.get({fromBlock: 1}), {from: wallet})\n        .on(\"log\", async log=>{\n            // console.log(\"get logs \", log, \"filter\", {from: wallet});\n            const pledge = {\n                blockNumber: log.blockNumber,\n                auditor: log.returnValues.from,\n                pledge: toEther(log.returnValues.amountAdded)-toEther(log.returnValues.amountRemoved),\n                total: toEther(log.returnValues.total),\n                txHash: log.transactionHash\n            };\n            commit(\"appendPledge\", pledge)\n        })\n    }\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","import { make } from \"vuex-pathify\";\nimport { readOnlyCall, writeCall, writeCallWithOptions, handleMMResponse } from \"@/lib/api\";\nimport $store from \"@/store/index\";\nimport { toWei, toEther } from \"@/lib/numbers\";\nimport { getWalletBalance } from \"@/lib/api\";\n\nconst state = () => ({\n    balance: 0,\n    minPledgeAmount: 0,\n    pledgedAmount: 0,\n    redeemBool: false,\n})\n\nconst getters = {}\n\nconst mutations = make.mutations(state);\n\nconst actions = {\n    fetchAllValues({ dispatch }) {\n        dispatch(\"fetchBalance\");\n        dispatch(\"fetchMinPledgeAmount\");\n        dispatch(\"fetchPledgedAmount\");\n        dispatch(\"fetchCanTransferPledge\");\n    },\n\n    async fetchBalance({ rootState }) {\n        const balance = await getWalletBalance(rootState.auth.wallet);\n        $store.set(\"pledge/balance\", balance);\n    },\n\n    async fetchCanTransferPledge() {\n        const wallet = $store.get(\"auth/wallet\");\n        const redeemBool = await readOnlyCall(\"canTransferPledge\", wallet,\"1\");\n        console.log(\"just trying\", redeemBool);\n        $store.set(\"pledge/redeemBool\", redeemBool);\n    },\n\n    async fetchMinPledgeAmount() {\n        const wallet = $store.get(\"auth/wallet\");\n        const minPledgeAmount = await readOnlyCall(\"minPledgeAmountToAuditNode\", wallet);\n        $store.set(\"pledge/minPledgeAmount\", minPledgeAmount);\n    },\n\n    async fetchPledgedAmount() {\n        const wallet = $store.get(\"auth/wallet\");\n        const pledgedAmount = await readOnlyCall(\"pledgedAmount\", wallet);\n        $store.set(\"pledge/pledgedAmount\", toEther(pledgedAmount));\n    },\n\n    async addToPledge({ dispatch }, amount) {\n        console.log(\"Pledging\", amount)\n        await handleMMResponse(writeCallWithOptions(\"pledge\", { amount: toWei(amount, \"ether\"), maxGas: 300000}));\n        dispatch(\"fetchPledgedAmount\");\n        dispatch(\"fetchBalance\");\n    },\n\n    async redeemPledge({ dispatch }) {\n        // when the smart contract is redeployed with the getPledgeBack function replace the below code\n        // const wallet = $store.get(\"auth/wallet\");\n        // const amount = $store.get(\"pledge/pledgedAmount\");\n        await handleMMResponse(writeCall(\"getPledgeBack\"));\n        // replace with:\n        // await handleMMResponse(writeCall(\"getPledgeBack\"));\n        dispatch(\"fetchPledgedAmount\");\n        dispatch(\"fetchBalance\");\n    }\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","import { make } from \"vuex-pathify\";\nimport { readOnlyCall } from \"@/lib/api\";\nimport $store from \"@/store/index\";\n\nconst state = () => ({\n    approved: false,\n    approbationVotes: 0\n})\n\nconst getters = {}\n\nconst mutations = make.mutations(state);\n\nconst actions = {\n    async fetchIsApproved() {\n        const wallet = $store.get(\"auth/wallet\");\n        const approved = await readOnlyCall(\"auditorApproved\", wallet);\n\n        $store.set(\"status/approved\", approved);\n    },\n    async fetchApprobationVotes() {\n        const wallet = $store.get(\"auth/wallet\");\n        const votes = await readOnlyCall(\"auditorVotes\", wallet);\n\n        $store.set(\"status/approbationVotes\", Number(votes));\n    }\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","import { make } from \"vuex-pathify\";\nimport { toEther } from \"@/lib/numbers\";\nimport {\n    handleMMResponse,\n    readOnlyCall,\n    writeCallWithOptions,\n} from \"@/lib/api\";\nimport $store from \"@/store/index\";\n\nconst state = () => ({\n    nbAuditors: 0,\n    auditors: [],\n})\n\nconst getters = {}\n\nconst mutations = make.mutations(state);\n\nconst actions = {\n    async fetchAllAuditorsValues({ dispatch }) {\n        await dispatch(\"fetchNbAuditors\");\n        await dispatch(\"fetchAuditorsInfos\");\n    },\n\n    async fetchNbAuditors() {\n        const nbAuditors = await readOnlyCall(\"nbAuditors\");\n        $store.set(\"nodeGovernance/nbAuditors\", nbAuditors);\n    },\n\n    async fetchAuditorsInfos() {\n        const nbAuditors = await readOnlyCall(\"nbAuditors\");\n        const nodeAdr = $store.get(\"auth/wallet\");\n        const minVotes = Math.floor((await readOnlyCall(\"nbNodes\")) / 2) + 1;\n        const auditors = [];\n        for (let i = 0; i < nbAuditors; i++) {\n            const address = await readOnlyCall(\"auditorAddress\", i);\n            const nbVotes = await readOnlyCall(\"auditorVotes\", address);\n            const currentVote = await readOnlyCall(\"currentAuditorVote\", address, nodeAdr);\n            const isApproved = await readOnlyCall(\"auditorApproved\", address);\n            auditors[i] = {\n                address,\n                nbVotes,\n                minVotes,\n                currentVote,\n                isApproved\n            };\n        }\n        $store.set(\"nodeGovernance/auditors\", auditors);\n    },\n\n    async fetchConfiscatedPledge() {\n        const confiscated = await readOnlyCall(\"confiscatedAmount\");\n        console.log(\"confiscated pledge\", confiscated, typeof confiscated);\n        return toEther(confiscated)\n    },\n\n    async voteAuditor(context, {auditorAddress, accept}) {\n        return handleMMResponse(writeCallWithOptions(\"voteAuditor\", {maxGas:200000}, auditorAddress, accept));\n    }\n\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nimport pathify from '@/plugins/pathify'\nimport {cleanUpConfig} from \"@/lib/config-file\"\nimport { make } from \"vuex-pathify\";\n// import createPersistedState from \"vuex-persistedstate\";\n\nimport nodes from \"./nodes\"\nimport auth from \"./auth\"\nimport history from \"./history\";\nimport pledge from \"./pledge\"\nimport status from \"./status\"\nimport nodeGovernance from \"./nodeGovernance\"\n\nVue.use(Vuex);\n\nconst state = {\n    // used for a nicer UX: if this is true, ignore the values above, we probably don't know the actual values yet\n    tryingToConnect: false,\n    mmIsOpen: false,\n\n    displaySnackbar: false,\n    snackbarMessage: \"\",\n    snackbarColor: \"error\",\n    config: undefined\n}\n\nconst store = new Vuex.Store({\n    modules: {\n        nodes,\n        auth,\n        history,\n        pledge,\n        status,\n        nodeGovernance\n    },\n    plugins: [\n        pathify.plugin,\n        // createPersistedState({ key: \"wallets\", paths: [\"wallets\"] })\n    ],\n    state,\n    mutations: make.mutations(state),\n    actions: {\n        errorFlash({ commit }, message) {\n            commit(\"snackbarMessage\", message);\n            commit(\"snackbarColor\", \"error\");\n            commit(\"displaySnackbar\", true);\n        },\n        async fetchConfig({ commit }) {\n            try {\n                let configUrl = \"./config.json\";\n                const url = new URL(window.location.href);\n                if (url.searchParams.has(\"config\")) {\n                    const uConf = new URL(url.searchParams.get(\"config\"));\n                    configUrl = uConf.href;\n                    url.searchParams.delete(\"config\")\n                    // window.history.replaceState(null, null, url);\n                }\n                const res = await fetch(configUrl)\n                if( res.status === 200 ) {\n                    const config = await res.json();\n                    commit(\"config\", await cleanUpConfig(config))\n                }\n            } catch (error) {\n                commit(\"config\", undefined)\n            }\n        }\n    }\n});\nexport default store;","\nexport class AsyncLocalStorage {\n  constructor(keys) {\n    this.keyList = keys || [];\n  }\n  async getItem(key) {\n    if (!key) return;\n    if (!this.keyList.includes(key)) this.keyList.push(key);\n    const v = window.localStorage.getItem(key);\n    if (!v) return undefined;\n    return JSON.parse(v);\n  }\n  async setItem(key, value) {\n    if (!key) return;\n    if (!this.keyList.includes(key)) this.keyList.push(key);\n    if (!value) window.localStorage.removeItem(key)\n    else window.localStorage.setItem(key, JSON.stringify(value));\n    return;\n  }\n  async getAll() {\n    const result = {};\n    for (const key of this.keyList) {\n      result[key] = await this.getItem(key);\n    }\n    return result\n  }\n  async setAll(group) {\n    for (const key of Object.keys(group)) {\n      await this.setItem(key, group[key]);\n    }\n  }\n}\n","import Web3 from \"web3\";\nimport BigInt from \"./bigint-polyfill\";\nimport { Web3FunctionProvider } from \"@saturn-chain/web3-functions\";\nimport { Web3CustodyFunctionProvider } from \"@saturn-chain/web3-custody-functions\";\nimport { WalletCustodyApiImpl } from \"@saturn-chain/wallet-custody-rest-api\";\nimport allContracts from \"sc-carbon-footprint\";\nimport $store from \"@/store/index\";\nimport { AsyncLocalStorage } from \"./async-local-storage\";\n\nimport { EventEmitter } from \"events\";\n\nimport { governanceAddress } from \"./const\";\n\nconst LocalStorage = new AsyncLocalStorage();\n\n\nexport function getWeb3ProviderFromUrl(url) {\n    const web3 = new Web3(url)\n    return web3.currentProvider;\n}\n\nexport async function getWalletBalance(walletAddress) {\n    return await $store.get(\"auth/web3\").eth.getBalance(walletAddress);\n}\n\n\nexport function getContractInstanceByName(contractName) {\n    const contract = allContracts.get(contractName);\n    const instance = contract.at(governanceAddress);\n    console.log(\"Instance\", instance);\n    return instance;\n}\n\nexport function getContractInstance() {\n    return getContractInstanceByName(\"Governance\");\n}\n\nexport function getCustodyApi() {\n    const custodyUrl = $store.get(\"auth/providerDirect\").custodyApiUrl;\n    const custody = new WalletCustodyApiImpl(custodyUrl, \"eth\");\n    return custody;    \n}\n\nexport async function verifyCustodyAuthentication(wallet, password) {\n    let savedWallets = (await LocalStorage.getItem(\"custody.wallets\")) || [];\n    savedWallets.unshift(wallet);\n    savedWallets = [...new Set(savedWallets)];\n    LocalStorage.setItem(\"custody.wallets\", savedWallets)\n    const api = getCustodyApi();\n    const token = await handleMMResponse(api.authenticate(wallet, password));\n    return token\n}\n\nexport async function getCustodyLastWallets() {\n    return (await LocalStorage.getItem(\"custody.wallets\")) || [];\n}\n\nexport function intf(provider) {\n    let result = $store.get(\"auth/intf\");\n    if (result) return result;\n    // TODO (suggestion): This approach work, but why not storing in the \"store\" the intf result instead of the web3 provider ?\n    //      you would save writing the intf(provider)\n    if (!provider) provider = $store.get(\"auth/provider\");\n    if (!provider) throw new Error(\"Should not be calling the api functions without a provider connected\")\n    const model = $store.get(\"auth/providerModel\");\n    if (model == \"metamask\") {\n        const web3 = $store.get(\"auth/web3\");\n        result = new Web3FunctionProvider(web3, (list) => Promise.resolve(list[0]))\n    }\n    if (model == \"direct\") {\n        const wallet = $store.get(\"auth/wallet\");\n        if (wallet) {\n            const custody = getCustodyApi();\n            const authFunction = $store.state.auth.walletAuthenticationFunction;\n            result = new Web3CustodyFunctionProvider(provider, custody, wallet, authFunction );\n        } else {\n            // returns a fake identity using any address. Only read function will be available\n            result = new Web3FunctionProvider(provider, ()=>Promise.resolve(governanceAddress))\n        }\n    }\n    if (result) {\n        // remove the ens that breaks the vue inspector\n        result.web3.eth.ens = null;\n        $store.set(\"auth/intf\", result);\n        return result;\n    } \n\n    throw new Error(\"should not be calling the api functions without deciding the provider (metamask or direct)\")\n}\n\nconst globalTimerList={};\nlet globalTimerIndex=0;\nlet globalTimerId=0;\nlet globalTimerLastExecution=0;\nconst globalTimerFunction = ()=>{\n    //console.log(\"interval\");\n    globalTimerLastExecution = Date.now();\n    for (const id of Object.keys(globalTimerList)) {\n        const timeout = globalTimerList[id];\n        if (timeout.when<=globalTimerLastExecution) setImmediate(timeout.callback);\n    }\n}\nconst initGlobalTimer = ()=>{\n    if (globalTimerId>0) clearInterval(globalTimerId);\n    globalTimerLastExecution = Date.now();\n    globalTimerId = setInterval(globalTimerFunction, 50);\n}\n\n['message', 'online', 'offline', 'pageshow'].forEach(ev=>\nwindow.addEventListener(ev, () => { \n    // console.log(\"Should reset the timer\", Date.now(), globalTimerLastExecution, Date.now() - globalTimerLastExecution > 30*1000);\n    if (Date.now() - globalTimerLastExecution > 30*1000) {\n        console.log(\"Setting the global timer\");\n        initGlobalTimer()\n    }\n}));\n\n// Function that hides the standard setTimeout function to try using a permanent unique interval loop\nfunction setTimeout(cb, delayMs) {\n    let startAt = Date.now();\n    const id=globalTimerIndex++;\n    globalTimerList[id]={when: startAt + delayMs, callback(){ \n        delete globalTimerList[id];\n        try {cb()} catch(e) {\n            console.log(\"timer callback failed - so what?\", e);\n        }\n    }}\n}\nfunction clearTimeout(id) {\n    delete globalTimerList[id];\n}\n\n\n// Function that hides the standard setTimeout function to try using the Window.requestAnimationFrame()\n// function setTimeout(cb, delayMs) {\n//     let startAt = performance.now();\n//     const id={id:0};\n//     function frame(timestamp) {\n//         try {\n//             if (timestamp-startAt>delayMs) cb();\n//             else id.id = window.requestAnimationFrame( frame )\n//         } catch (error) {\n//             id.id = window.requestAnimationFrame( frame )\n//         }\n//     }\n//     id.id = window.requestAnimationFrame( frame )\n//     return id;\n// }\n// function clearTimeout(id) {\n//     if (id && id.id) window.cancelAnimationFrame(id.id)\n// }\n\n\n\n\nlet __id= 1000;\nexport function subscribeNewBlocks(web3) {\n    if (!web3) web3 = $store.get(\"auth/web3\");\n    if (!web3) throw new Error(\"Should not be calling the api functions without a provider connected\")\n    const provider = $store.get(\"auth/provider\");\n    const model = $store.get(\"auth/providerModel\");\n    const providerSendAsync = model == \"metamask\" ? \n    // With metamask the send async exists and the skip cache should be activated to bypass the cached block request\n    (r, cb)=> {\n        provider.sendAsync({...r, skipCache:true}, cb)\n    } \n    // else use the normal provider send method\n    : provider.send.bind(provider);\n    provider.sendAsync? provider.sendAsync.bind(provider) : provider.send.bind(provider);\n\n\n    async function getBlockNumber() {\n        const r = await new Promise( (res, rej)=>{\n            providerSendAsync({method:\"eth_blockNumber\", id: __id++, params:[]}, (e,r)=>{\n                // console.log(\"send Async response\", e, r)\n                if (e) rej(e);\n                else if (r) res(r.result);\n                else rej(new Error('No error or response!'))\n            })\n        })\n        // console.log(\"Request eth_blockNumber\", Number(r));\n        return Number(r);\n    }\n\n    const subs = new EventEmitter({captureRejections: true});\n    subs.unsubscribe = ()=>{\n        if (subs.timer) {\n            clearTimeout(subs.timer);\n            subs.timer = null;\n        }\n    }\n    const delayMs = 1000;\n    \n    async function runLoop() {\n        try {\n            if (!subs.props) {\n                // first execution: initialized the props and loop\n                subs.props = {lastBlock: await getBlockNumber(), lastCheck: Date.now()};\n            } else {\n                let lastBlock = await getBlockNumber();\n    \n                const lastCheck = Date.now();\n                //console.log(\"runLoop:\", subs.props, {lastBlock, lastCheck});\n                if (lastBlock > subs.props.lastBlock) {\n                    for (let b=subs.props.lastBlock+1; b<=lastBlock; b++) {\n                        try {\n                            const block = await web3.eth.getBlock(b, false)\n                            subs.emit(\"data\", block);\n                        } catch (error) {\n                            console.warn(\"Fail getting block \"+b, error.message)\n                        }\n                    }\n                }\n                subs.props = {lastBlock, lastCheck};\n            }\n        } catch (error) {\n            console.warn(\"Something went wront when processing the loop. Ignoring.\", error.message);\n        }    \n\n        // restart the loop after the delay\n        subs.timer = setTimeout( runLoop , delayMs);\n    }\n    // initialize the loop in 10 ms to initialize the props\n    subs.timer = setTimeout( runLoop , 10);\n    return subs\n}\n\n\n\nexport async function readOnlyCall(methodName, ...args) {\n    return readOnlyCallWithOptions(methodName, { maxGas: 10000000 }, ...args)\n}\n\nexport async function readOnlyCallWithOptions(methodName, options, ...args) {\n    const provider = $store.get(\"auth/provider\");\n    const contract = $store.get(\"auth/contract\");\n    if (!(methodName in contract)) return Promise.reject(new Error(`Method ${methodName} does not exists in contract`));\n    return contract[methodName](\n        wrapSend(intf(provider).call(options)), \n        ...args\n    );\n}\n\nexport function writeCall(methodName, ...args) {// return writeCallWithOptions(methodName, {maxGas: 1000000}, ...args);\n    return writeCallWithOptions(methodName, {}, ...args);\n}\n\nfunction convertMMErrorMessage(message) {\n    if(typeof message !== \"string\") message = `\\n {\"message\":\"invalid error message\"}`;\n    let split = message.split(\"\\n\");\n    if(split.length==1) split =  `\\n ${JSON.stringify({message})}`.split('\\n');\n    try {\n        const obj = JSON.parse(split.splice(1).join(\" \"))\n        return obj;\n    } catch (error) {\n        return {\n            message: \"invalid JSON message\"\n        }\n    }\n}\n\nfunction wrapSend(send) {\n    return (target, data) => {\n        //console.log(\"Wrapped sender\", target, data);\n        return send(target, data)\n    }\n}\n\nexport function writeCallWithOptions(methodName, options, ...args) {\n    const wallet = $store.get(\"auth/wallet\");\n    if (!wallet) {\n        return Promise.reject(new Error(\"You are not authenticated with a wallet, you cannot update the blockchain\"));\n    }\n    const provider = $store.get(\"auth/provider\");\n    const contract = $store.get(\"auth/contract\");\n    if (!(methodName in contract)) return Promise.reject(new Error(`Method ${methodName} does not exists in contract`));\n    if (options.amount) options.amount=new BigInt(options.amount.toString(10))\n\n    return new Promise( (resolve, reject)=>{\n        // First test the execution with the node using the call approach\n        readOnlyCallWithOptions(methodName, options, ...args)\n        .then(async v=>{\n            console.log(\"Tested call\", options, v)\n            resolve(\n                // as it succeeded, try executing it as a transaction\n                await contract[methodName](\n                    wrapSend(intf(provider).send(options)),\n                    ...args\n                )\n            )\n        })\n        .catch(e => {\n            const err = convertMMErrorMessage(e.message)\n            reject(err)\n        })\n    });\n}\n\nasync function collectDataFunction(target, data) {\n    const cmd = `eth.sendTransaction({from: eth.coinbase, to:\"${target}\", data:\"${data}\"})`\n    return {isTx: true, result: cmd}\n}\nexport async function getCallData(methodName, ...args) {\n    const contract = $store.get(\"auth/contract\");\n    const cmd = await contract[methodName]( collectDataFunction, ...args)\n    console.log(cmd)\n    return cmd;\n}\n\nexport async function handleMMResponse(promise, errorCallback) {\n    let response = null;\n    try {\n        $store.set(\"mmIsOpen\", true);\n        response = await promise;\n    }\n    catch (err) {\n        let message = err.message;\n        // In some cases of lack of gas in the transaction, the err contains a tx info\n        if (err.blockHash && err.gasUsed && err.status==false) {\n            message = `Not enough gas to complete the transaction: ${err.gasUsed} provided`\n        }\n        console.warn(\"Submitted transaction failed with error:\", message);\n        $store.dispatch(\"errorFlash\", message);\n        errorCallback && errorCallback(err);\n    }\n    finally {\n        $store.set(\"mmIsOpen\", false);\n    }\n    return response;\n}\n\n// Not used currently but lets you run any arbitrary code and the mmIsOpen flag is handled automatically\n// aswell as the error flash production if you decide to trigger an exception.\nexport async function handleMM(func) {\n    try {\n        $store.set(\"mmIsOpen\", true);\n        await func();\n    }\n    catch (err) {\n        console.log(err);\n        $store.dispatch(\"errorFlash\", err.message);\n    }\n    finally {\n        $store.set(\"mmIsOpen\", false);\n    }\n}","<template>\n  <div>\n    <v-btn color=\"teal\" dark @click=\"openMetaMaskConnectionDialog\"\n      v-if=\"hasProviderMetamask\"\n      >Connect Metamask Wallet</v-btn\n    >\n    <br><br>\n    <div v-if=\"hasProviderDirect\">\n      <v-btn color=\"teal\" dark @click=\"prepareOpenWeb3DirectConnectionDialog\"\n        >Connect with below configuration</v-btn\n      > <br><br>\n      <v-select\n          v-model=\"selectedNetwork\"\n          :hint=\"`node: ${selectedNetwork.nodeUrl}; custody: ${selectedNetwork.walletCustodyAPIBaseUrl}`\"\n          :items=\"networks\"\n          item-text=\"name\"\n          item-value=\"nodeUrl\"\n          persistent-hint\n          return-object\n          single-line\n        ></v-select>\n      <div v-if=\"hasCustodyApi\">\n        <br>\n        <v-combobox\n              label=\"Enter the wallet address\"\n              placeholder=\"capture your wallet address\"\n              outlined counter clearable\n              :search-input=\"wallet\"\n              @update:search-input=\"updateWallet\"\n              :items=\"wallets\"\n            ></v-combobox>\n        <v-text-field\n              label=\"Enter the wallet password\"\n              placeholder=\"capture your wallet password\"\n              outlined \n              :type=\"show?'text' : 'password'\"\n              @click:append=\"show = !show\"\n              v-model=\"password\"\n            ></v-text-field>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport { call } from \"vuex-pathify\";\nimport { getCustodyLastWallets } from \"../lib/api\";\nimport { getDefaultNetwork, getNetworkList } from \"../lib/config-file\";\n\nexport default {\n  data() {\n    return {\n      wallet: undefined,\n      wallets: [],\n      networks: [],\n      selectedNetwork: {name: \"undefined\"},\n      password: undefined,\n      show: false,\n    }\n  },\n  async mounted() {\n    const wallets = await getCustodyLastWallets();\n    if (wallets.length>0) this.wallet = wallets[0];\n    this.wallets = wallets;\n\n    const config = this.$store.get(\"config\");\n    this.networks = getNetworkList(config);\n    this.selectedNetwork = getDefaultNetwork(config);\n  },\n  computed: {\n    hasProviderMetamask() {\n      if (this.$store.state.auth.providerMetamask) return true;\n      else return false;\n    },\n    hasProviderDirect() {\n      if (this.$store.state.auth.providerDirect) return true;\n      else return false;\n    },\n    hasCustodyApi() {\n      if (this.$store.state.auth.providerDirect && this.$store.state.auth.providerDirect.custodyModel == \"api\" ) return true;\n      else return false;\n    },\n  },\n  methods: {\n    ...call(\"auth\", [\"openMetaMaskConnectionDialog\", \"openWeb3DirectConnectionDialog\"]),\n    updateWallet(v) {\n      this.wallet = v;\n    },\n    async prepareOpenWeb3DirectConnectionDialog() {\n      await this.openWeb3DirectConnectionDialog({wallet: this.wallet, password: this.password, nodeUrl: this.selectedNetwork.nodeUrl});\n      this.wallets = await getCustodyLastWallets();\n    }\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auth.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auth.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Auth.page.vue?vue&type=template&id=7a5f7692&\"\nimport script from \"./Auth.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Auth.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{attrs:{\"col\":\"\",\"wrap\":\"\"}},[_c('v-card',{staticClass:\"my-6 ma-auto\",attrs:{\"height\":\"200\",\"width\":\"300\"}},[_c('v-card-subtitle',[_vm._v(\"Block \"),_c('explorer',{attrs:{\"type\":\"block\",\"id\":_vm.lastBlock?_vm.lastBlock.block.number:0}})],1),_c('v-card-title',{staticClass:\"align-center\"},[_c('span',{staticClass:\"text-h4 ma-auto\",style:(_vm.lastBlockNoTurnSealing?'color:red':'')},[_vm._v(_vm._s(_vm.lastBlock && _vm.lastBlock.block.number))])]),_c('v-card-subtitle',[_vm._v(\"Total of \"+_vm._s(_vm.totalCrypto.toFixed(2))+\"  created\")]),_c('v-card-subtitle',[_vm._v(_vm._s((_vm.timeSinceLastBlock/1000).toFixed(2))+\" sec. since last update\")])],1),_c('v-card',{staticClass:\"my-6 ma-auto\",attrs:{\"height\":\"200\",\"width\":\"200\"}},[_c('v-card-subtitle',[_vm._v(\"Audited nodes\")]),_c('v-card-title',{staticClass:\"align-center\"},[_c('span',{staticClass:\"text-h2 ma-auto\"},[_vm._v(_vm._s(_vm.nbOfNodes))])])],1),_c('v-card',{staticClass:\"my-6 ma-auto\",attrs:{\"height\":\"200\",\"width\":\"300\"}},[_c('v-card-subtitle',[_vm._v(\"Total footprint (g.CO E)\")]),_c('v-card-title',{staticClass:\"align-center\"},[_c('span',{staticClass:\"text-h4 ma-auto\"},[_vm._v(_vm._s(_vm.totalFootprint))])]),_c('v-card-subtitle',{staticClass:\"mt-3\"},[_vm._v(\"Average: \"+_vm._s((_vm.totalFootprint / _vm.nbOfNodes).toFixed(2))+\" g.CO E per node\")])],1),_c('v-row',[(_vm.lastBlock)?_c('v-col',{staticClass:\"py-8\",attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Carbon Footprint for each of the nodes\")]),_c('v-card-subtitle',[_vm._v(\" Last block sealer: \"+_vm._s(_vm.lastBlock.sealer.address)+\" / \"+_vm._s(_vm.lastBlock.sealer.vanity.custom)+\". Footprint: \"+_vm._s(_vm.lastBlock.sealer.footprint)+\" g.CO \")]),_c('v-card-text',_vm._l((_vm.sealersSorted),function(sealer){return _c('v-progress-linear',{key:sealer.address,staticClass:\"my-1\",attrs:{\"height\":\"2em\",\"value\":sealer.footprint / _vm.maxFootprint * 100,\"color\":_vm.gradientGreenToRed(sealer.footprint / _vm.maxFootprint)},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){return [_vm._v(\" \"+_vm._s(sealer.vanity.custom)+\" - \"),_c('strong',[_vm._v(_vm._s(sealer.footprint))]),_vm._v(\" g.CO \")]}}],null,true)})}),1)],1)],1):_vm._e(),(_vm.lastBlock)?_c('v-col',{staticClass:\"pb-8\",attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Sealers\")]),_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.sealers,\"headers\":_vm.sealersHeaders,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.name\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_c('v-icon',[_vm._v(_vm._s(item.isActive?\"mdi-lock-open-check-outline\":\"mdi-lock-remove\"))]),_vm._v(\" \"+_vm._s(item.vanity.custom))],1),_c('div',[_vm._v(_vm._s(item.address))])]}},{key:\"item.ratio\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s((100 * item.sealedBlocks / _vm.totalSealedBlocks).toFixed(2))+\" %\")]),_c('div',[_vm._v(_vm._s(item.sealedBlocks)+\" / \"+_vm._s(_vm.totalSealedBlocks))])]}},{key:\"item.balance\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.balance.toFixed(4)))])]}},{key:\"item.lastReward\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.lastReward.toFixed(4)))])]}},{key:\"item.lastSealer\",fn:function(ref){\nvar item = ref.item;\nreturn [(item.address==_vm.lastBlock.sealer.address)?_c('v-icon',[_vm._v(\"mdi-seal\")]):_vm._e()]}}],null,false,2192072440)})],1)],1)],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\nexport function colorGradient(fadeFraction, rgbColor1, rgbColor2, rgbColor3) {\n  var color1 = rgbColor1;\n  var color2 = rgbColor2;\n  var fade = fadeFraction;\n\n  // Do we have 3 colors for the gradient? Need to adjust the params.\n  if (rgbColor3) {\n    fade = fade * 2;\n\n    // Find which interval to use and adjust the fade percentage\n    if (fade >= 1) {\n      fade -= 1;\n      color1 = rgbColor2;\n      color2 = rgbColor3;\n    }\n  }\n\n  var diffRed = color2.red - color1.red;\n  var diffGreen = color2.green - color1.green;\n  var diffBlue = color2.blue - color1.blue;\n\n  var gradient = {\n    red: parseInt(Math.floor(color1.red + (diffRed * fade)), 10),\n    green: parseInt(Math.floor(color1.green + (diffGreen * fade)), 10),\n    blue: parseInt(Math.floor(color1.blue + (diffBlue * fade)), 10),\n  };\n\n  return 'rgb(' + gradient.red + ',' + gradient.green + ',' + gradient.blue + ')';\n}\n\nconst highColor = {\n  red: 217,\n  green: 83,\n  blue: 79\n};\nconst mediumColor = {\n  red: 240,\n  green: 173,\n  blue: 78\n};\nconst lowColor = {\n  red: 92,\n  green: 184,\n  blue: 91\n};\n\nexport function gradientGreenToRed(fadeFraction) {\n  return colorGradient(fadeFraction, lowColor, mediumColor, highColor);\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-icon',{attrs:{\"small\":\"\",\"color\":\"blue\"},on:{\"click\":function($event){return _vm.open(_vm.url)}}},[_vm._v(\"mdi-open-in-new\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-icon small color=\"blue\" @click=\"open(url)\">mdi-open-in-new</v-icon>\n</template>\n\n<script>\nimport $store from \"@/store\";\n\nexport default {\n  props: {\n    id: [String, Number],\n    type: { \n      type: String,\n      validator(value) {\n        // The value must match one of these strings\n        return ['block', 'tx', 'token', 'account'].includes(value)\n      }\n    },\n  },\n\n  computed: {\n    url() {\n      let explorerUrl = $store.get(\"auth/explorerUrl\");\n      if (!explorerUrl) return undefined;\n      while (explorerUrl.endsWith('/')) explorerUrl = explorerUrl.slice(0, explorerUrl.length-1)\n      const u = new URL(`${this.type}/${this.id}`, `${explorerUrl}/`)\n      return u.href;\n    }\n  },\n\n  methods: {\n    open(url) {\n      window.open(url, 'POCR-EXPLORER')\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExplorerRedirect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExplorerRedirect.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ExplorerRedirect.vue?vue&type=template&id=6eff6f16&\"\nimport script from \"./ExplorerRedirect.vue?vue&type=script&lang=js&\"\nexport * from \"./ExplorerRedirect.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <v-layout col wrap>\n    <v-card height=\"200\" width=\"300\" class=\"my-6 ma-auto\">\n      <v-card-subtitle>Block <explorer type=\"block\" :id=\"lastBlock?lastBlock.block.number:0\"></explorer></v-card-subtitle>\n      <v-card-title class=\"align-center\">\n        <span class=\"text-h4 ma-auto\" :style=\"lastBlockNoTurnSealing?'color:red':''\">{{\n          lastBlock && lastBlock.block.number\n        }}</span>\n      </v-card-title>\n      <v-card-subtitle>Total of {{ totalCrypto.toFixed(2) }}  created</v-card-subtitle>\n      <v-card-subtitle>{{ (timeSinceLastBlock/1000).toFixed(2) }} sec. since last update</v-card-subtitle>\n    </v-card>\n\n    <v-card height=\"200\" width=\"200\" class=\"my-6 ma-auto\">\n      <v-card-subtitle>Audited nodes</v-card-subtitle>\n      <v-card-title class=\"align-center\">\n        <span class=\"text-h2 ma-auto\">{{ nbOfNodes }}</span>\n      </v-card-title>\n    </v-card>\n    <v-card height=\"200\" width=\"300\" class=\"my-6 ma-auto\">\n      <v-card-subtitle>Total footprint (g.CO E)</v-card-subtitle>\n      <v-card-title class=\"align-center\">\n        <span class=\"text-h4 ma-auto\">{{ totalFootprint }}</span>\n      </v-card-title>\n      <v-card-subtitle class=\"mt-3\"\n        >Average:\n        {{ (totalFootprint / nbOfNodes).toFixed(2) }} g.CO E per node</v-card-subtitle\n      >\n    </v-card>\n    <v-row>\n      <v-col cols=\"12\" class=\"py-8\" v-if=\"lastBlock\">\n        <v-card>\n        <v-card-title>Carbon Footprint for each of the nodes</v-card-title>\n        <v-card-subtitle>\n          Last block sealer: {{ lastBlock.sealer.address }} /\n          {{ lastBlock.sealer.vanity.custom }}. Footprint:\n          {{ lastBlock.sealer.footprint }} g.CO\n        </v-card-subtitle>\n        <v-card-text>\n          <v-progress-linear v-for=\"sealer of sealersSorted\" :key=\"sealer.address\" \n            height=\"2em\" class=\"my-1\"\n            :value=\"sealer.footprint / maxFootprint * 100\"\n            :color=\"gradientGreenToRed(sealer.footprint / maxFootprint)\"\n          >\n            <template v-slot:default=\"{  }\">\n              {{sealer.vanity.custom}} - <strong>{{ sealer.footprint }}</strong>  g.CO\n            </template>\n          </v-progress-linear>\n        </v-card-text>\n        <!-- <v-sparkline\n          auto-draw\n          type=\"bar\"\n          \n          auto-line-width\n          :value=\"sealersFootprint\"\n          label-size=\"3\"\n          :gradient=\"['#f72047', '#ffd200', '#1feaea']\"\n          padding=\"8\"\n        >\n          <template v-slot:label=\"item\">\n            {{ sealersLabels[item.index] }} -\n            {{ item.value }}\n          </template>\n        </v-sparkline> -->\n        </v-card>\n      </v-col>\n\n      <v-col cols=\"12\" class=\"pb-8\" v-if=\"lastBlock\">\n        <v-card>\n          <v-card-title>Sealers</v-card-title>\n          <v-card-text>\n            <v-data-table\n              :items=\"sealers\"\n              :headers=\"sealersHeaders\"\n              :items-per-page=\"-1\"\n              hide-default-footer\n            >\n              <template v-slot:item.name=\"{ item }\">\n                <div><v-icon>{{item.isActive?\"mdi-lock-open-check-outline\":\"mdi-lock-remove\"}}</v-icon> {{ item.vanity.custom }}</div>\n                <div>{{ item.address }}</div>\n              </template>\n              <template v-slot:item.ratio=\"{ item }\">\n                <div>{{ (100 * item.sealedBlocks / totalSealedBlocks).toFixed(2) }} %</div>\n                <div>{{ item.sealedBlocks }} / {{ totalSealedBlocks }}</div>\n              </template>\n              <template v-slot:item.balance=\"{ item }\">\n                <div>{{ item.balance.toFixed(4) }}</div>\n              </template>\n              <template v-slot:item.lastReward=\"{ item }\">\n                <div>{{ item.lastReward.toFixed(4) }}</div>\n              </template>\n              <template v-slot:item.lastSealer=\"{ item }\">\n                <v-icon v-if=\"item.address==lastBlock.sealer.address\">mdi-seal</v-icon>\n              </template>\n            </v-data-table>\n          </v-card-text>\n        </v-card>\n      </v-col>\n<!-- \n      <v-col cols=\"12\" class=\"pa-8\" v-if=\"lastBlock\">\n        <v-card-title>Block reward per node</v-card-title>\n        <v-card-subtitle>\n          Last block sealer: {{ lastBlock.sealer.address }} /\n          {{ lastBlock.sealer.vanity.custom }}. Footprint:\n          {{ lastBlock.sealer.footprint }} g.CO\n        </v-card-subtitle>\n        <v-sparkline\n          auto-draw\n          type=\"bar\"\n          :auto-draw-duration=\"500\"\n          auto-line-width\n          :value=\"sealersReward\"\n          label-size=\"3\"\n          :gradient=\"['#42b3f4']\"\n          :padding=\"28\"\n        >\n          <template v-slot:label=\"item\">\n            {{\n              lastBlock.sealer.address == sealersAddress[item.index] ? \"[\" : \"\"\n            }}\n            {{ sealersAddress[item.index] }}\n            {{\n              lastBlock.sealer.address == sealersAddress[item.index] ? \"]\" : \"\"\n            }}\n            -\n            {{ Number.parseFloat(item.value).toFixed(2) }}\n          </template>\n        </v-sparkline>\n      </v-col> -->\n\n      <!-- <v-col cols=\"12\" class=\"pa-8\">\n        <v-card-title>CRC Creation by block </v-card-title>\n        <v-card-subtitle\n          >Last reward:\n          {{ rewardsByBlock[rewardsByBlock.length - 1].toFixed(4) }} CRC;\n          Average: {{ averageReward.toFixed(4) }} CRC; Last\n          {{ rewardsByBlock.length - 1 }} blocks</v-card-subtitle\n        >\n        <v-sparkline\n          auto-draw\n          type=\"trend\"\n          :auto-draw-duration=\"0\"\n          :line-width=\"0.3\"\n          :value=\"rewardsByBlock\"\n          label-size=\"3\"\n          :gradient=\"['#42b3f4']\"\n        ></v-sparkline>\n      </v-col> -->\n    </v-row>\n  </v-layout>\n</template>\n\n<script>\nimport { get, call } from \"vuex-pathify\";\nimport { handleMM } from '../lib/api';\nimport { gradientGreenToRed } from '../lib/colors'\nimport Explorer from \"../components/ExplorerRedirect.vue\";\n\nexport default {\n  components: {Explorer},\n  data: () => {\n    return {\n      nbBlocksToKeep: 100,\n      sealerMap: new Map(),\n      blocks: [],\n      sealersReward: [],\n      sealersHeaders: [\n      { text: \"Name\", value: \"name\", align:\"left\" },\n      { text: \"Footprint (g.CO)\", value: \"footprint\" , align:\"right\"},\n      { text: \"Reward ()\", value: \"lastReward\" , align:\"right\"},\n      { text: \"Balance ()\", value: \"balance\" , align:\"right\"},\n      { text: \"Sealing ratio\", value: \"ratio\", align:\"center\"},\n      { text: \"Last\", value: \"lastSealer\" },\n    ],\n    };\n  },\n  async mounted() {\n    await handleMM(this.fetchChainInformations)\n    await this.fetchAllValues();\n    await this.subscribeToChainUpdates();\n    await this.initBackupLoop();\n\n  },\n  computed: {\n    ...get(\"nodes\", [\n      \"sealers\",\n      \"nbOfNodes\",\n      \"lastBlock\",\n      \"totalFootprint\",\n      \"totalCrypto\",\n      \"rewardsByBlock\",\n      \"averageReward\",\n      \"averageDelaySec\",\n      \"timeSinceLastBlock\"\n    ]),\n    sealersSorted() {\n      return [...this.sealers].sort( (a,b)=>a.footprint-b.footprint )\n    },\n    maxFootprint() {\n      return this.sealers.reduce( (max, s)=>s.footprint>max?s.footprint:max, 1 )\n    },\n    sealersFootprint() {\n      return this.sealers.map((s) => s.footprint);\n    },\n    sealersAddress() {\n      return this.sealers.map((s) => s.address);\n    },\n    sealersLabels() {\n      return this.sealers.map((s) => s.vanity.custom);\n    },\n    totalSealedBlocks() {\n      return this.sealers.reduce( (total, s)=>total+s.sealedBlocks, 0);\n    },\n    lastBlockNoTurnSealing() {\n      return this.lastBlock && this.lastBlock.block.difficulty==1; // 1 means out of turn ; 2 means in turn\n    },\n  },\n  methods: {\n    gradientGreenToRed,\n    ...call(\"nodes\", [\n      \"fetchAllValues\",\n      \"fetchChainInformations\",\n      \"subscribeToChainUpdates\",\n      \"initBackupLoop\"\n    ]),\n    // ...mapActions([\"goToPage\"]),\n    // processBlockData(data) {\n    //   // console.log(data);\n\n    //   let blocks = this.blocks.filter(\n    //     (d) =>\n    //       d.block.number > data.block.number - this.nbBlocksToKeep &&\n    //       d.block.number != data.block.number\n    //   );\n    //   blocks = blocks.sort((d1, d2) => d1.block.number - d2.block.number);\n    //   blocks.push(data);\n    //   this.blocks = blocks;\n\n    //   const sealerInfo = {\n    //     address: data.sealer.address,\n    //     info: data.sealer.vanity.custom,\n    //     footprint: data.sealer.footprint,\n    //     balance: data.sealer.balance,\n    //     reward: data.sealer.lastReward,\n    //   };\n    //   this.sealerMap.set(sealerInfo.address, sealerInfo);\n    //   this.totalFootprint = data.totalFootprint;\n    //   this.totalCrypto = data.totalCrypto;\n    //   this.nbOfNodes = data.nbOfNodes;\n    //   this.blockNumber = data.block.number;\n    //   this.updateSealersArrays();\n    // },\n    // updateSealersArrays() {\n    //   let sealers = [];\n    //   for (const k of this.sealerMap.keys()) {\n    //     const info = this.sealerMap.get(k);\n    //     sealers.push(info);\n    //   }\n    //   sealers = sealers.sort((i1, i2) => i1.footprint - i2.footprint);\n\n    //   this.sealersLabels = sealers.map((info) => info.info);\n    //   this.sealersAddress = sealers.map((info) => info.address);\n    //   this.sealersFootprint = sealers.map((info) => info.footprint);\n    //   this.sealersReward = sealers.map((info) => info.reward);\n    // },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dashboard.page.vue?vue&type=template&id=0bbfdc51&\"\nimport script from \"./Dashboard.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Dashboard.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-col',[_c('v-card',[_c('v-card-title',[_vm._v(\"Number of Auditors\")]),_c('v-card-text',[_vm._v(_vm._s(_vm.nbAuditors))])],1)],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Auditors\")]),_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.auditors,\"headers\":_vm.tableHeadersAuditors,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.status\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.isApproved ? \"Oui\" : \"Non\"))])]}},{key:\"item.votes\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.nbVotes)+\" / \"+_vm._s(item.minVotes)+\" avant \"+_vm._s(item.isApproved ? \"Rvocation\" : \"Approbation\"))])]}},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-btn',{attrs:{\"color\":\"primary\",\"small\":\"\"},on:{\"click\":function($event){return _vm.nodeVote(item)}}},[_vm._v(\" \"+_vm._s(_vm.computeLabel(item))+\" \")])]}}])})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row>\n\n    <v-col>\n      <v-card>\n        <v-card-title>Number of Auditors</v-card-title>\n        <v-card-text>{{ nbAuditors }}</v-card-text>\n      </v-card>\n    </v-col>\n\n    <v-col cols=\"12\">\n      <v-card>\n        <v-card-title>Auditors</v-card-title>\n        <v-card-text>\n          <v-data-table\n              :items=\"auditors\"\n              :headers=\"tableHeadersAuditors\"\n              :items-per-page=\"-1\"\n              hide-default-footer\n          >\n            <template v-slot:item.status=\"{ item }\">\n              <div>{{ item.isApproved ? \"Oui\" : \"Non\" }}</div>\n            </template>\n            <template v-slot:item.votes=\"{ item }\">\n              <div>{{ item.nbVotes }} / {{ item.minVotes }} avant {{ item.isApproved ? \"Rvocation\" : \"Approbation\" }}</div>\n            </template>\n            <template v-slot:item.actions=\"{ item }\">\n              <v-btn\n                  color=\"primary\"\n                  small\n                  @click=\"nodeVote(item)\"\n              >\n                {{ computeLabel(item) }}\n              </v-btn>\n            </template>\n          </v-data-table>\n        </v-card-text>\n      </v-card>\n    </v-col>\n\n  </v-row>\n</template>\n\n<script>\nimport { get, call } from \"vuex-pathify\";\n\nexport default {\n  data: () => ({\n    tableHeadersAuditors: [\n      { text: \"Auditor\", value: \"address\" },\n      { text: \"Approuv\", value: \"status\" },\n      { text: \"Votes courants\", value: \"votes\" },\n      { text: \"Actions\", value: \"actions\", sortable: false },\n    ],\n    switchState: false,\n\n  }),\n  computed: {\n    ...get(\"nodeGovernance\", [\"nbAuditors\", \"auditors\"]),\n  },\n\n  async mounted() {\n    await this.fetchAllAuditorsValues();\n  },\n  methods: {\n    ...call(\"nodeGovernance\", [\"fetchAllAuditorsValues\", \"voteAuditor\"]),\n\n    computeLabel(item) {\n      // auditor is approved, vote for unapproved\n      if (item.isApproved) {\n        if (item.currentVote) {\n          return \"Voter pour rvoquer\";\n        }\n        return \"Retirer mon vote de rvocation\";\n      }\n      // auditor is not approved, vote for approved\n      if (item.currentVote) {\n        return \"Retirer mon vote d'approbation\";\n      }\n      return \"Voter pour approuver\";\n    },\n\n    async nodeVote(item) {\n      console.log(`address : ${item.address} / vote value : ${!item.currentVote}`);\n      try {\n        await this.voteAuditor({\n          auditorAddress: item.address,\n          accept: !item.currentVote\n        });\n        await this.fetchAllAuditorsValues();\n      } catch (error) {\n        console.log(error);\n        await this.fetchAllAuditorsValues();\n        throw error;\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auditors.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auditors.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Auditors.page.vue?vue&type=template&id=66ef6459&\"\nimport script from \"./Auditors.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Auditors.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-col',[_c('v-card',[_c('v-card-title',[_vm._v(\"Number of Nodes\")]),_c('v-card-text',[_vm._v(_vm._s(_vm.nbOfNodes))])],1)],1),_c('v-col',[_c('v-card',[_c('v-card-title',[_vm._v(\"Total Footprint\")]),_c('v-card-text',[_vm._v(_vm._s(_vm.totalFootprint)+\" \")])],1)],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Nodes\")]),_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.sealers,\"headers\":_vm.tableHeaders,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.vanity\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(\"Address: \"+_vm._s(item.address))]),_c('div',[_vm._v(\"Name: \"+_vm._s(item.vanity.custom))])]}},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-btn',{attrs:{\"color\":\"primary\",\"small\":\"\"},on:{\"click\":function($event){return _vm.openUpdateFootprintDialog(item)}}},[_vm._v(\" Update footprint \")])]}}])}),_c('v-dialog',{attrs:{\"width\":\"500\"},model:{value:(_vm.footprintDialog),callback:function ($$v) {_vm.footprintDialog=$$v},expression:\"footprintDialog\"}},[(_vm.selectedSealer)?_c('v-card',[_c('v-card-title',[_vm._v(\" Update Footprint for \"+_vm._s(_vm.selectedSealer.address)+\" \")]),_c('v-card-text',[_c('v-row',[_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"6\"}},[_c('v-text-field',{attrs:{\"type\":\"number\",\"outlined\":\"\",\"dense\":\"\"},model:{value:(_vm.newFootprintValue),callback:function ($$v) {_vm.newFootprintValue=$$v},expression:\"newFootprintValue\"}})],1),_c('v-col',{staticClass:\"pb-0\"},[_c('v-btn',{on:{\"click\":function($event){_vm.footprintDialog = false}}},[_vm._v(\"Cancel\")])],1),_c('v-col',{staticClass:\"pb-0\"},[_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.submitNewFootprint}},[_vm._v(\" Submit \")])],1)],1)],1)],1):_vm._e()],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row>\n    <v-col>\n      <v-card>\n        <v-card-title>Number of Nodes</v-card-title>\n        <v-card-text>{{ nbOfNodes }}</v-card-text>\n      </v-card>\n    </v-col>\n    <v-col>\n      <v-card>\n        <v-card-title>Total Footprint</v-card-title>\n        <v-card-text>{{ totalFootprint }} </v-card-text>\n      </v-card>\n    </v-col>\n    <v-col cols=\"12\">\n      <v-card>\n        <v-card-title>Nodes</v-card-title>\n        <v-card-text>\n          <v-data-table\n            :items=\"sealers\"\n            :headers=\"tableHeaders\"\n            :items-per-page=\"-1\"\n            hide-default-footer\n          >\n            <template v-slot:item.vanity=\"{ item }\">\n              <div>Address: {{ item.address }}</div>\n              <div>Name: {{ item.vanity.custom }}</div>\n            </template>\n            <!-- \n            <template v-slot:item.footprint=\"{ item }\">\n\t\t\t\t{{ item.footprint }}\n              <v-edit-dialog\n                @update:return-value=\"setFootprint\"\n                large\n                persistent\n              >\n                {{ item.footprint }}\n                <template v-slot:input>\n                  <v-text-field\n                    :value=\"item.footprint\"\n                    label=\"Edit\"\n                    single-line\n                    type=\"number\"\n                  ></v-text-field>\n                </template>\n              </v-edit-dialog>\n            </template> -->\n            <template v-slot:item.actions=\"{ item }\">\n              <v-btn\n                color=\"primary\"\n                small\n                @click=\"openUpdateFootprintDialog(item)\"\n              >\n                Update footprint\n              </v-btn>\n            </template>\n          </v-data-table>\n\n          <v-dialog v-model=\"footprintDialog\" width=\"500\">\n            <v-card v-if=\"selectedSealer\">\n              <v-card-title>\n                Update Footprint for {{ selectedSealer.address }}\n              </v-card-title>\n              <v-card-text>\n                <v-row>\n                  <v-col cols=\"6\" class=\"pb-0\">\n                    <v-text-field\n                      type=\"number\"\n                      outlined\n                      dense\n                      v-model=\"newFootprintValue\"\n                    ></v-text-field>\n                  </v-col>\n                  <v-col class=\"pb-0\">\n                    <v-btn @click=\"footprintDialog = false\">Cancel</v-btn>\n                  </v-col>\n                  <v-col class=\"pb-0\">\n                    <v-btn color=\"primary\" @click=\"submitNewFootprint\">\n                      Submit\n                    </v-btn>\n                  </v-col>\n                </v-row>\n              </v-card-text>\n            </v-card>\n          </v-dialog>\n        </v-card-text>\n      </v-card>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nimport { get, call } from \"vuex-pathify\";\n\nexport default {\n  data: () => ({\n    tableHeaders: [\n      { text: \"Node\", value: \"vanity\" },\n      { text: \"Footprint\", value: \"footprint\" },\n      { text: \"Actions\", value: \"actions\", sortable: false },\n    ],\n    tableHeadersAuditors: [\n      { text: \"Auditor\", value: \"address\" },\n      { text: \"Votes courants\", value: \"votes\" },\n      { text: \"Mon Vote\", value: \"actions\", sortable: false },\n    ],\n    footprintDialog: false,\n    selectedSealer: null,\n    newFootprintValue: 0,\n  }),\n  computed: {\n    ...get(\"nodes\", [\"nbOfNodes\", \"totalFootprint\", \"sealers\"]),\n  },\n\n  mounted() {\n    this.fetchAllValues();\n  },\n  methods: {\n    ...call(\"nodes\", [\"fetchAllValues\", \"updateFootprint\"]),\n    openUpdateFootprintDialog(sealer) {\n      this.selectedSealer = sealer;\n      this.newFootprintValue = sealer.footprint;\n      this.footprintDialog = true;\n    },\n\n    async submitNewFootprint() {\n      this.footprintDialog = false;\n      await this.updateFootprint({\n        sealerAddress: this.selectedSealer.address,\n        footprint: this.newFootprintValue,\n      });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Audit.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Audit.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Audit.page.vue?vue&type=template&id=2ca433a3&\"\nimport script from \"./Audit.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Audit.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-tabs',{attrs:{\"centered\":\"\",\"slider-color\":\"primary\"},model:{value:(_vm.currentTab),callback:function ($$v) {_vm.currentTab=$$v},expression:\"currentTab\"}},[_c('v-tab',{attrs:{\"href\":\"#footprints\"}},[_vm._v(\" Footprints \")]),_c('v-tab',{attrs:{\"href\":\"#pledges\"}},[_vm._v(\" Pledges \")])],1),_c('v-tabs-items',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.currentTab),callback:function ($$v) {_vm.currentTab=$$v},expression:\"currentTab\"}},[_c('v-tab-item',{attrs:{\"value\":\"footprints\"}},[_c('v-card',[_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.footprintHistory,\"headers\":_vm.footprintTableHeaders,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.node\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.node))]),_c('div',[_vm._v(_vm._s(item.nodeName))])]}},{key:\"item.explorer\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('explorer',{attrs:{\"type\":\"tx\",\"id\":item.txHash}})]}}])})],1)],1)],1),_c('v-tab-item',{attrs:{\"value\":\"pledges\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Your pledge history\")]),_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.pledgeHistory,\"headers\":_vm.pledgeTableHeaders,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.explorer\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('explorer',{attrs:{\"type\":\"tx\",\"id\":item.txHash}})]}}])})],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row>\n    <v-tabs v-model=\"currentTab\" centered slider-color=\"primary\">\n      <v-tab href=\"#footprints\"> Footprints </v-tab>\n      <v-tab href=\"#pledges\"> Pledges </v-tab>\n    </v-tabs>\n\n    <v-tabs-items v-model=\"currentTab\" style=\"width: 100%\">\n      <v-tab-item value=\"footprints\">\n        <v-card>\n          <v-card-text>\n            <v-data-table\n              :items=\"footprintHistory\"\n              :headers=\"footprintTableHeaders\"\n              :items-per-page=\"-1\"\n              hide-default-footer\n            >\n              <template v-slot:item.node=\"{ item }\">\n                  <div>{{ item.node }}</div>\n                  <div>{{ item.nodeName }}</div>\n              </template>\n              <template v-slot:item.explorer=\"{ item }\">\n                  <explorer type=\"tx\" :id=\"item.txHash\"></explorer>\n              </template>\n            </v-data-table>\n          </v-card-text>\n        </v-card>\n      </v-tab-item>\n      <v-tab-item value=\"pledges\">\n        <v-card>\n          <v-card-title>Your pledge history</v-card-title>\n          <v-card-text>\n            <v-data-table\n              :items=\"pledgeHistory\"\n              :headers=\"pledgeTableHeaders\"\n              :items-per-page=\"-1\"\n              hide-default-footer\n            >\n              <template v-slot:item.explorer=\"{ item }\">\n                    <explorer type=\"tx\" :id=\"item.txHash\"></explorer>\n              </template>\n            </v-data-table>\n          </v-card-text>\n        </v-card>\n      </v-tab-item>\n    </v-tabs-items>\n  </v-row>\n</template>\n\n<script>\nimport { get, call } from \"vuex-pathify\";\nimport Explorer from \"../components/ExplorerRedirect.vue\";\n\nexport default {\n  components: {Explorer},\n  data: () => ({\n    currentTab: \"footprints\",\n    footprintTableHeaders: [\n      { text: \"Block N\", value: \"blockNumber\" },\n      { text: \"Auditor\", value: \"auditorName\" },\n      { text: \"Node\", value: \"node\" },\n      { text: \"Assigned\", value: \"footprint\" },\n      { text: \"\", value: \"explorer\" },\n    ],\n    pledgeTableHeaders: [\n      { text: \"Block N\", value: \"blockNumber\" },\n      // { text: \"Auditor address\", value: \"auditor\" },\n      { text: \"Pledge\", value: \"pledge\" },\n      { text: \"Total\", value: \"total\" },\n      { text: \"\", value: \"explorer\" },\n    ],\n  }),\n\n  computed: {\n    ...get(\"history\", [\"footprintHistory\", \"pledgeHistory\"]),\n  },\n\n  async mounted() {\n    this.fetchAllValues();\n  },\n\n  methods: {\n    ...call(\"history\", [\"fetchAllValues\"]),\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./History.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./History.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./History.page.vue?vue&type=template&id=3cf9b441&\"\nimport script from \"./History.page.vue?vue&type=script&lang=js&\"\nexport * from \"./History.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',{attrs:{\"wrap\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Current Wallet Balance\")]),_c('v-card-text',[_vm._v(\" \"+_vm._s(_vm.toEther(_vm.balance))+\"CRC \")])],1)],1),_c('v-col',{attrs:{\"cols\":\"8\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Pledge Informations\")]),_c('v-card-text',[_c('div',[_vm._v(\" Min pledge to start audit: \"+_vm._s(_vm.toEther(_vm.minPledgeAmount).toFixed(4))+\"CRC \")]),_c('div',[_vm._v(\"Current pledged amount: \"+_vm._s(_vm.pledgedAmount.toFixed(4))+\"CRC\")]),_c('v-btn',{attrs:{\"small\":\"\",\"disabled\":_vm.pledgedAmount === 0 || !_vm.redeemBool},on:{\"click\":_vm.redeemPledge}},[_vm._v(\"Redeem Pledge\")])],1)],1)],1),_c('v-col',[_c('v-card',[_c('v-card-title',[_vm._v(\"Pledge Actions\")]),_c('v-card-text',[_c('v-row',[_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"12\"}},[_c('v-text-field',{attrs:{\"dense\":\"\",\"hide-details\":\"\",\"outlined\":\"\",\"type\":\"number\",\"min\":0,\"placeholder\":\"Amount to add to the pledge\"},model:{value:(_vm.amountToAdd),callback:function ($$v) {_vm.amountToAdd=$$v},expression:\"amountToAdd\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-btn',{staticStyle:{\"width\":\"100%\"},attrs:{\"small\":\"\"},on:{\"click\":_vm.pledgeMore}},[_vm._v(\"Pledge more\")])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row wrap>\n    <v-col cols=\"12\">\n      <v-card>\n        <v-card-title>Current Wallet Balance</v-card-title>\n        <v-card-text> {{ toEther(balance) }}&nbsp;CRC </v-card-text>\n      </v-card>\n    </v-col>\n    <v-col cols=\"8\">\n      <v-card>\n        <v-card-title>Pledge Informations</v-card-title>\n        <v-card-text>\n          <div>\n            Min pledge to start audit: {{ toEther(minPledgeAmount).toFixed(4) }}&nbsp;CRC\n          </div>\n          <div>Current pledged amount: {{ pledgedAmount.toFixed(4) }}&nbsp;CRC</div>\n          <v-btn\n            small\n            @click=\"redeemPledge\"\n            :disabled=\"pledgedAmount === 0 || !redeemBool\"\n            >Redeem Pledge</v-btn\n          >\n        </v-card-text>\n      </v-card>\n    </v-col>\n    <v-col>\n      <v-card>\n        <v-card-title>Pledge Actions</v-card-title>\n        <v-card-text>\n          <v-row>\n            <v-col cols=\"12\" class=\"pb-0\">\n              <v-text-field\n                v-model=\"amountToAdd\"\n                dense\n                hide-details\n                outlined\n                type=\"number\"\n                :min=\"0\"\n                placeholder=\"Amount to add to the pledge\"\n            /></v-col>\n            <v-col cols=\"12\">\n              <v-btn small style=\"width: 100%\" @click=\"pledgeMore\"\n                >Pledge more</v-btn\n              >\n            </v-col>\n          </v-row>\n        </v-card-text>\n      </v-card>\n    </v-col>\n  </v-row>\n</template>\n<script>\nimport { get, call } from \"vuex-pathify\";\nimport { toEther } from \"@/lib/numbers\";\n\nexport default {\n  data: () => ({\n    intervalId: null,\n    amountToAdd: 0,\n  }),\n  computed: {\n    ...get(\"pledge\", [\n      \"balance\",\n      \"minPledgeAmount\",\n      \"pledgedAmount\",\n      \"redeemBool\",\n    ]),\n  },\n  mounted() {\n    this.fetchAllValues();\n    this.intervalId = setInterval(this.fetchAllValues, 60 * 1000);\n  },\n  beforeRouteLeave(to, from, next) {\n    clearInterval(this.intervalId);\n    next();\n  },\n  methods: {\n    toEther,\n    ...call(\"pledge\", [\"fetchAllValues\", \"addToPledge\", \"redeemPledge\"]),\n    async pledgeMore() {\n      await this.addToPledge(this.amountToAdd);\n      this.amountToAdd = 0;\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pledge.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pledge.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Pledge.page.vue?vue&type=template&id=579c75c3&\"\nimport script from \"./Pledge.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Pledge.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-card',{staticClass:\"pa-md-4 mx-lg-auto\"},[(_vm.walletRole != _vm.ROLES.VISITOR)?_c('v-card-title',[_vm._v(\" \"+_vm._s(_vm.walletRole)+\" \"+_vm._s(_vm.wallet)+\" \"),_c('explorer',{attrs:{\"type\":\"account\",\"id\":_vm.wallet}})],1):_c('v-card-title',[_vm._v(\" Visitor\")]),_c('v-card-subtitle',[_vm._v(\" \"+_vm._s(_vm.currentWalletBalanceEth)+\" CRC \")])],1),(_vm.isAuditor)?_c('v-card',{staticClass:\"pa-md-4 mx-lg-auto\"},[_c('v-card-title',[_vm._v(\" Status \")]),(_vm.registered && _vm.approved)?_c('v-card-subtitle',{staticStyle:{\"color\":\"Green\"}},[_vm._v(\" APPROVED \")]):_vm._e(),(_vm.registered && !_vm.approved)?_c('v-card-subtitle',{staticStyle:{\"color\":\"red\"}},[_vm._v(\" AWAITING APPROVAL \")]):_vm._e(),(_vm.registered && !_vm.approved)?_c('v-card-text',[_c('p',{staticStyle:{\"color\":\"black\"}},[_vm._v(\" You have the total vote of \"+_vm._s(_vm.approbationVotes)+\" \")])]):_vm._e()],1):_vm._e(),(_vm.walletRole == _vm.ROLES.USER_CONNECTED)?_c('v-card',{staticClass:\"pa-md-4 mx-lg-auto\"},[_c('v-card-text',[_c('p',[_vm._v(\" If you wish to become an auditor you must register here \"),_c('v-btn',{staticClass:\"mx-2\",attrs:{\"small\":\"\",\"disabled\":_vm.mmIsOpen},on:{\"click\":_vm.selfRegister}},[_vm._v(\" Self register \")])],1)]),_c('v-card-text',[_c('p',[_vm._v(\" If you need this wallet to acts as a delegate for your node, execute the following command from your node eth console \"),_c('code',[_vm._v(_vm._s(_vm.registerDelegateCommandLine))])])])],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n\n  <v-card class=\"pa-md-4 mx-lg-auto\">\n    <v-card-title v-if=\"walletRole != ROLES.VISITOR\"> {{walletRole}} {{wallet}} <explorer type=\"account\" :id=\"wallet\"></explorer></v-card-title>\n    <v-card-title v-else> Visitor</v-card-title>\n    <v-card-subtitle >\n      {{currentWalletBalanceEth}} CRC\n    </v-card-subtitle>  \n  </v-card>\n\n  <v-card class=\"pa-md-4 mx-lg-auto\" v-if=\"isAuditor\">\n    <v-card-title> Status </v-card-title>\n    <v-card-subtitle style=\"color: Green\" v-if=\"registered && approved\">\n      APPROVED\n    </v-card-subtitle>\n    <v-card-subtitle style=\"color: red\" v-if=\"registered && !approved\">\n      AWAITING APPROVAL\n    </v-card-subtitle>\n    <v-card-text v-if=\"registered && !approved\">\n      <p style=\"color: black\">\n        You have the total vote of {{ approbationVotes }}\n      </p>\n    </v-card-text>\n  </v-card>\n\n  <v-card class=\"pa-md-4 mx-lg-auto\" v-if=\"walletRole == ROLES.USER_CONNECTED\">\n    <v-card-text>\n      <p>\n        If you wish to become an auditor you must register here\n        <v-btn small class=\"mx-2\" @click=\"selfRegister\" :disabled=\"mmIsOpen\">\n          Self register\n        </v-btn>\n      </p>\n    </v-card-text>\n    <v-card-text>\n      <p>\n        If you need this wallet to acts as a delegate for your node, execute the following command from your node eth console\n        <code>{{registerDelegateCommandLine}}</code>\n      </p>\n    </v-card-text>\n  </v-card>\n  </div>\n</template>\n\n<script>\nimport { get, call } from \"vuex-pathify\";\nimport { toEther } from \"../lib/numbers\";\nimport { ROLES } from \"../lib/const\";\nimport { getCallData } from \"../lib/api\"\nimport Explorer from \"../components/ExplorerRedirect.vue\";\n\nexport default {\n  components: {Explorer},\n  data: ()=>({\n    registerDelegateCommandLine: \"\"\n  }),\n  computed: {\n    ROLES: ()=>ROLES,\n    mmIsOpen: get(\"mmIsOpen\"),\n    ...get(\"auth\", [\"registered\", \"walletRole\", \"wallet\"]),\n    ...get(\"status\", [\"approved\", \"approbationVotes\"]),\n    ...get(\"nodes\", [\"currentWalletBalanceWei\"]),\n    currentWalletBalanceEth() {\n      return toEther(this.currentWalletBalanceWei).toFixed(4);\n    },\n    isAuditor() {\n      return [ROLES.APPROVED_AUDITOR, ROLES.PENDING_AUDITOR].includes(this.walletRole);\n    },\n  },\n  async mounted() {\n    this.fetchIsRegistered();\n    this.fetchIsApproved();\n    this.fetchApprobationVotes();\n\n    this.registerDelegateCommandLine = await getCallData(\"allowDelegate\", this.wallet)\n  },\n  methods: {\n    ...call(\"auth\", [\"fetchIsRegistered\", \"selfRegister\"]),\n    ...call(\"status\", [\"fetchIsApproved\", \"fetchApprobationVotes\"]),\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Status.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Status.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Status.page.vue?vue&type=template&id=dfa8cca4&\"\nimport script from \"./Status.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Status.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('h2',[_vm._v(\"Manage the confiscated pledge of the auditors\")])]),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Total confiscated pledge\")]),_c('v-card-text',[_vm._v(_vm._s(_vm.totalPledge)+\" CRC\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row>\n    <v-col cols=\"12\">\n      <h2>Manage the confiscated pledge of the auditors</h2>  \n    </v-col>  \n    <v-col cols=\"12\">\n      <v-card>\n        <v-card-title>Total confiscated pledge</v-card-title>\n        <v-card-text>{{ totalPledge }} CRC</v-card-text>\n      </v-card>\n    </v-col>\n\n    \n  </v-row>\n</template>\n<script>\nimport { call } from \"vuex-pathify\";\n\nexport default {\n  data: ()=>({\n    totalPledge:0\n  }),\n\n  async mounted() {\n    this.totalPledge = await this.fetchConfiscatedPledge()\n  },\n\n  methods: {\n    ...call(\"nodeGovernance\", [\"fetchConfiscatedPledge\"])\n  }\n\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfiscatedPledge.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfiscatedPledge.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConfiscatedPledge.page.vue?vue&type=template&id=7ecbdde9&\"\nimport script from \"./ConfiscatedPledge.page.vue?vue&type=script&lang=js&\"\nexport * from \"./ConfiscatedPledge.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Page to manage PoCR improvement proposals.\")])],1)],1),_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"12\"}},[(_vm.isConnected)?_c('v-card',{staticClass:\"pa-2\"},[_c('v-card-subtitle',[_vm._v(\"Create a new proposal.\")]),_c('v-card-text',[_vm._v(\" this action will be done with your connected wallet and will reserve the ID of the Carbon Reduction Improvement Proposal that you must then create as a document in \"),_c('a',{attrs:{\"href\":_vm.CRIPsUrl}},[_vm._v(_vm._s(_vm.CRIPsUrl))])]),_c('v-card-actions',[(!_vm.lastCRIPCreated)?_c('v-btn',{attrs:{\"color\":\"primary\",\"small\":\"\"},on:{\"click\":_vm.reserveCRIP}},[_vm._v(\" Reserve the next CRIP id \")]):_c('v-card-text',[_vm._v(\" You have reserved the CRIP id \"),_c('code',[_vm._v(_vm._s(_vm.lastCRIPCreated))])])],1)],1):_vm._e()],1),_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"12\"}},[_c('v-card',{staticClass:\"pa-2\"},[_c('v-card-title',[_vm._v(\"List of the improvement proposals\")]),_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.CRIPS,\"headers\":_vm.cripsTableHeaders,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.createdBlock\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.createdBlock)+\" \"),_c('explorer',{attrs:{\"type\":\"block\",\"id\":item.createdBlock}})],1)]}},{key:\"item.documentation\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('a',{attrs:{\"href\":item.url}},[_vm._v(\"crip-\"+_vm._s(item.index)+\".md\")])]}},{key:\"item.voteFromBlock\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(_vm.voteFromContent(item.index)))]),_c('div',[_vm._v(\"at \"+_vm._s(item.voteFromBlock))])]}},{key:\"item.voteUntilBlock\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(_vm.voteUntilContent(item.index)))]),_c('div',[_vm._v(\"at \"+_vm._s(item.voteUntilBlock))])]}},{key:\"item.auditors\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(\"Pro: \"+_vm._s(item.auditorsFor))]),_c('div',[_vm._v(\"Cons: \"+_vm._s(item.auditorsAgainst))])]}},{key:\"item.nodes\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(\"Pro: \"+_vm._s(item.nodesFor))]),_c('div',[_vm._v(\"Cons: \"+_vm._s(item.nodesAgainst))])]}},{key:\"item.useraction\",fn:function(ref){\nvar item = ref.item;\nreturn [(_vm.canVote(item.index))?_c('v-radio-group',{on:{\"change\":function($event){return _vm.userVote(item)}},model:{value:(item.vote),callback:function ($$v) {_vm.$set(item, \"vote\", $$v)},expression:\"item.vote\"}},[_c('v-radio',{attrs:{\"label\":\"agree\",\"value\":true}}),_c('v-radio',{attrs:{\"label\":\"reject\",\"value\":false}})],1):_vm._e()]}}])})],1)],1)],1),_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"12\"}},[_c('v-card',{staticClass:\"pa-2\"},[_c('v-card-title',[_vm._v(\"Your votes\")]),_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.userVotes,\"headers\":_vm.votesTableHeaders,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.block\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.block)+\" \"),_c('explorer',{attrs:{\"type\":\"tx\",\"id\":item.txHash}})],1)]}}])})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row>\n    <v-col cols=\"12\" class=\"pb-0\">\n      <v-card>\n        <v-card-title>Page to manage PoCR improvement proposals.</v-card-title>\n      </v-card>\n    </v-col>\n    <v-col cols=\"12\" class=\"pb-0\">\n      <v-card class=\"pa-2\" v-if=\"isConnected\">\n        <v-card-subtitle>Create a new proposal.</v-card-subtitle>\n        <v-card-text>\n          this action will be done with your connected wallet and will reserve the ID of the Carbon Reduction Improvement Proposal that you must then create as a document in \n          <a :href=\"CRIPsUrl\">{{CRIPsUrl}}</a>\n        </v-card-text>\n        <v-card-actions>\n          <v-btn\n            color=\"primary\"\n            small\n            v-if=\"!lastCRIPCreated\"\n            @click=\"reserveCRIP\"\n          >\n            Reserve the next CRIP id\n          </v-btn>\n          <v-card-text  v-else>\n            You have reserved the CRIP id <code>{{lastCRIPCreated}}</code>\n          </v-card-text>\n        </v-card-actions>\n      </v-card>\n    </v-col>\n    \n    <v-col cols=\"12\" class=\"pb-0\">\n      <v-card class=\"pa-2\">\n        <v-card-title>List of the improvement proposals</v-card-title>\n        <v-card-text>\n          <v-data-table\n            :items=\"CRIPS\"\n            :headers=\"cripsTableHeaders\"\n            :items-per-page=\"-1\"\n            hide-default-footer\n          >\n            <template v-slot:item.createdBlock=\"{ item }\">\n              <div>{{item.createdBlock}} <explorer type=\"block\" :id=\"item.createdBlock\"></explorer></div>\n            </template>\n            <template v-slot:item.documentation=\"{ item }\">\n              <a :href=\"item.url\">crip-{{item.index}}.md</a>\n            </template>\n            <template v-slot:item.voteFromBlock=\"{ item }\">\n              <div>{{voteFromContent(item.index)}}</div>\n              <div>at {{item.voteFromBlock}}</div>\n            </template>\n            <template v-slot:item.voteUntilBlock=\"{ item }\">\n              <div>{{voteUntilContent(item.index)}}</div>\n              <div>at {{item.voteUntilBlock}}</div>\n            </template>\n            <template v-slot:item.auditors=\"{ item }\">\n              <div>Pro: {{item.auditorsFor}}</div>\n              <div>Cons: {{item.auditorsAgainst}}</div>\n            </template>\n            <template v-slot:item.nodes=\"{ item }\">\n              <div>Pro: {{item.nodesFor}}</div>\n              <div>Cons: {{item.nodesAgainst}}</div>\n            </template>\n            <template v-slot:item.useraction=\"{ item }\">\n              <v-radio-group v-model=\"item.vote\" v-if=\"canVote(item.index)\" @change=\"userVote(item)\">\n                <v-radio label=\"agree\" :value=\"true\"></v-radio>\n                <v-radio label=\"reject\" :value=\"false\"></v-radio>\n              </v-radio-group>\n            </template>\n          </v-data-table>\n        </v-card-text>\n      </v-card>\n    </v-col>\n    \n    <v-col cols=\"12\" class=\"pb-0\">\n      <v-card class=\"pa-2\">\n        <v-card-title>Your votes</v-card-title>\n        <v-card-text>\n          <v-data-table\n            :items=\"userVotes\"\n            :headers=\"votesTableHeaders\"\n            :items-per-page=\"-1\"\n            hide-default-footer\n          >\n            <template v-slot:item.block=\"{ item }\">\n              <div>{{item.block}} <explorer type=\"tx\" :id=\"item.txHash\"></explorer></div>\n            </template>\n\n          </v-data-table>\n        </v-card-text>\n      </v-card>\n    </v-col>\n\n  </v-row>\n\n</template>\n<script>\nimport { CRIPBaseUrl, ROLES } from \"../lib/const\";\nimport { Web3FunctionProvider } from \"@saturn-chain/web3-functions\";\nimport $store from \"@/store\";\nimport { writeCallWithOptions, handleMMResponse, readOnlyCall } from \"../lib/api\";\nimport Explorer from \"../components/ExplorerRedirect.vue\";\n\nexport default {\n  components: {Explorer},\n  data: ()=>({\n    lastCRIPCreated: undefined,\n    CRIPS: [],\n    userVotes: [],\n    cripsTableHeaders: [\n      { text: \"Created on\", value: \"createdBlock\" },\n      { text: \"Doc\", value: \"documentation\" },\n      { text: \"Start in\", value: \"voteFromBlock\" },\n      { text: \"Auditors votes\", value: \"auditors\" },\n      { text: \"Nodes votes\", value: \"nodes\" },\n      { text: \"Closes on\", value: \"voteUntilBlock\" },\n      { text: \"Action\", value: \"useraction\" },\n    ],\n    votesTableHeaders: [\n      { text: \"Created on\", value: \"block\" },\n      { text: \"CRIP id\", value: \"index\" },\n      { text: \"Decision\", value: \"decision\" },\n    ],\n  }),\n  computed: {\n    blockNumber() {\n      return $store.get(\"nodes/currentBlockNumber\");\n    },\n    CRIPsUrl() {\n      return CRIPBaseUrl\n    },\n    isConnected() {\n      return !!$store.get(\"auth/wallet\")\n    },\n    isNode() {\n      return $store.get(\"auth/walletRole\") == ROLES.AUDITED_NODE\n    },\n    isAuditor() {\n      return $store.get(\"auth/walletRole\") == ROLES.APPROVED_AUDITOR\n    },\n  },\n\n  mounted() {\n    this.fetchCRIPS()\n    this.fetchUserVotes()\n  },\n\n  methods: {\n    async reserveCRIP() {\n      const prov = new Web3FunctionProvider($store.get(\"auth/provider\"), ()=>Promise.resolve($store.get(\"auth/wallet\")))\n      const contract = $store.get(\"auth/contract\");\n      const currentBlock = this.blockNumber;\n\n      await handleMMResponse(writeCallWithOptions(\"newProposal\", {maxGas: 100000}))\n      contract.events.IPChanged(prov.get({fromBlock: currentBlock}), {status: 0})\n      .once(\"log\", (log)=>{\n        this.lastCRIPCreated = log.returnValues.index;\n        this.fetchCRIPS();\n      })\n    },\n\n    async fetchCRIPS() {\n      const count = await readOnlyCall(\"nbImprovementProposals\");\n      const result = [];\n      for (let index = 0; index < count; index++) {\n        const crip = await readOnlyCall(\"getImprovementProposal\", index)\n        crip.index = Number.parseInt(crip.index)\n        crip.voteFromBlock = Number.parseInt(crip.voteFromBlock)\n        crip.voteUntilBlock = Number.parseInt(crip.voteUntilBlock)\n        const url = new URL(`${CRIPBaseUrl}/crip-${crip.index}.md`)\n        crip.url = url.href;\n        result.push(crip)\n      }\n      this.CRIPS = result\n    },\n\n    async fetchUserVotes() {\n      const wallet = $store.get(\"auth/delegatedWallet\") || $store.get(\"auth/wallet\");\n      const prov = new Web3FunctionProvider($store.get(\"auth/provider\"), ()=>Promise.resolve(wallet))\n      const contract = $store.get(\"auth/contract\");\n      this.userVotes = [];\n      contract.events.IPVote(prov.get({fromBlock: 1}), {voter: wallet})\n      .on(\"log\", (log)=>{\n        console.log(\"Vote log\", log);\n        this.userVotes.push({\n          index: Number.parseInt(log.returnValues.index),\n          approval: Number.parseInt(log.returnValues.vote)>0 ? true : false,\n          decision: Number.parseInt(log.returnValues.vote)>0 ? \"Accepted\" : \"Rejected\",\n          txHash: log.transactionHash,\n          block: log.blockNumber\n        });\n      })\n    },\n\n    canVote(index) {\n      const crip = this.CRIPS.find(c=>c.index == index);\n      if (!crip) return false;\n      const currentBlock = this.blockNumber;\n      const inVotingPeriod = crip.voteFromBlock <= currentBlock && crip.voteUntilBlock >= currentBlock\n      return inVotingPeriod && (this.isNode || this.isAuditor)\n    },\n    voteFromContent(index) {\n      const crip = this.CRIPS.find(c=>c.index == index);\n      if (!crip) return \"N/A\";\n      const nbBlocks = crip.voteFromBlock-this.blockNumber;\n      console.log(\"voteFromContent\", index, crip, nbBlocks);\n      if (nbBlocks<=0) return \"Opened\";\n      else return (nbBlocks*4/(3600*24)).toFixed(2) + \" days\";\n    },\n    voteUntilContent(index) {\n      const crip = this.CRIPS.find(c=>c.index == index);\n      if (!crip) return \"N/A\";\n      const nbBlocks = crip.voteUntilBlock-this.blockNumber;\n      console.log(\"voteFromContent\", index, crip, nbBlocks);\n      if (nbBlocks<=0) return \"Closed\";\n      else return (nbBlocks*4/(3600*24)).toFixed(2) + \" days\";\n    },\n\n    async userVote(crip) {\n      console.log(\"User vote\", crip.index, crip.vote);\n      if (typeof crip.vote !== \"boolean\") return;\n      const funct = crip.vote? \"voteForProposal\" : \"voteAgainstProposal\";\n      const response = await handleMMResponse(writeCallWithOptions(funct, {maxGas:100000}, crip.index));\n      if (response === null) crip.vote = null;\n      this.fetchCRIPS();\n      this.fetchUserVotes();\n    }\n  }\n\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Improvements.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Improvements.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Improvements.page.vue?vue&type=template&id=797fe216&\"\nimport script from \"./Improvements.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Improvements.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport VueRouter from \"vue-router\";\n\nimport InstallMetaMask from \"@/pages/InstallMetaMask.page.vue\";\nimport Auth from \"@/pages/Auth.page.vue\";\n\nimport Dashboard from \"@/pages/Dashboard.page.vue\";\n\nimport Auditors from \"@/pages/Auditors.page.vue\";\n\nimport Audit from \"@/pages/Audit.page.vue\";\nimport History from \"@/pages/History.page.vue\";\nimport Pledge from \"@/pages/Pledge.page.vue\";\nimport Status from \"@/pages/Status.page.vue\";\nimport ConfiscatedPledge from \"@/pages/ConfiscatedPledge.page.vue\";\nimport Improvements from \"@/pages/Improvements.page.vue\";\n\nimport { ROLES } from \"./lib/const\";\n\nVue.use(VueRouter);\n\n\n// const approvedAuditor = ({ store }) => store.state.status.approved;\n// const isNode = ({ store }) => store.state.auth.isNode;\n// const isNotNode = ({ store }) => !isNode({ store });\nconst walletIsntConnected = ({ store }) => !store.state.auth.wallet;\nconst hasRole = (role)=>{\n    return ({store}) => (store.get(\"auth/walletRole\") == role)\n} \nconst not = (f)=>{\n    return (opts)=>{\n        return !f(opts);\n    }\n}\n\nconst any = (...functions) => {\n    return (opts) => {\n        for (const f of functions) {\n            if (f(opts)) return true;\n        }\n        return false;\n    }\n}\n\n// The order actually matter because it will determine the order in the sidenav\nexport const routes = [\n    //Public\n    { name: \"dashboard\", path: \"/dashboard\", component: Dashboard, meta: { displayInSidenav: \"\" } },\n    {\n        name: \"status\", path: \"/status\", component: Status, meta: {\n            displayInSidenav: \"\",\n            restricted: not(hasRole(ROLES.VISITOR)),\n            forceRedirectTo: \"dashboard\",\n            hidden: hasRole(ROLES.VISITOR)\n        }\n    }, \n    {\n        name: \"improvements\", path: \"/improvements\", component: Improvements, meta: {\n            displayInSidenav: \"\",\n            forceRedirectTo: \"dashboard\",\n        }\n    },\n\n       // Auth\n    { name: \"installMetaMask\", path: \"/installmetamask\", component: InstallMetaMask },\n    {\n        name: \"authentication\", path: \"/auth\", component: Auth, meta: {\n            displayInSidenav: \"\",\n            hidden: ({ store }) => !walletIsntConnected({ store })\n        }\n    },\n\n    // Node views\n    {\n        name: \"auditors\", path: \"/auditors\", component: Auditors, meta: {\n            displayInSidenav: \"Governance\",\n            restricted: any(hasRole(ROLES.AUDITED_NODE), hasRole(ROLES.NEW_NODE)),\n            forceRedirectTo: \"dashboard\",\n            hidden: not(any(hasRole(ROLES.AUDITED_NODE), hasRole(ROLES.NEW_NODE)))\n        }\n    },\n    {\n        name: \"confiscated-pledge\", path: \"/confiscated\", component: ConfiscatedPledge, meta: {\n            displayInSidenav: \"Governance\",\n            restricted: any(hasRole(ROLES.AUDITED_NODE), hasRole(ROLES.NEW_NODE)),\n            forceRedirectTo: \"dashboard\",\n            hidden: not(any(hasRole(ROLES.AUDITED_NODE), hasRole(ROLES.NEW_NODE)))\n        }\n    },\n    // Auditors views\n    {\n        name: \"pledge\", path: \"/pledge\", component: Pledge, meta: {\n            displayInSidenav: \"Audit\",\n            restricted: hasRole(ROLES.APPROVED_AUDITOR),\n            forceRedirectTo: \"status\",\n            hidden: not(any(hasRole(ROLES.PENDING_AUDITOR), hasRole(ROLES.APPROVED_AUDITOR)))\n        }\n    },\n    {\n        name: \"audit\", path: \"/audit\", component: Audit, meta: {\n            displayInSidenav: \"Audit\",\n            restricted: hasRole(ROLES.APPROVED_AUDITOR),\n            forceRedirectTo: \"status\",\n            hidden: not(any(hasRole(ROLES.PENDING_AUDITOR), hasRole(ROLES.APPROVED_AUDITOR)))\n        }\n    },\n    {\n        name: \"history\", path: \"/history\", component: History, meta: {\n            displayInSidenav: \"Audit\",\n            restricted: any(hasRole(ROLES.PENDING_AUDITOR), hasRole(ROLES.APPROVED_AUDITOR)),\n            forceRedirectTo: \"status\",\n            hidden: not(any(hasRole(ROLES.PENDING_AUDITOR), hasRole(ROLES.APPROVED_AUDITOR)))\n        }\n    },\n    // GdC: For some unknown reason the redirection should not be 'authentication' directly but it works with dashboard\n    { path: \"*\", redirect: \"dashboard\" }\n]\n\nconst router = new VueRouter({\n    routes,\n    base: \"\",\n    // mode: \"history\"\n})\n\nexport default router;","<template>\n  <v-navigation-drawer v-model=\"drawer\" @input=\"drawerChange\" app clipped flat>\n    <v-divider></v-divider>\n    <v-list>\n      <v-list-item-group :value=\"$route.name\" mandatory color=\"primary\">\n        <template\n          v-for=\"(\n            { icon, label, route, disabled, subheader }, index\n          ) in sidenav\"\n        >\n          <v-divider\n            v-if=\"subheader && label !== '' && index !== 0\"\n            :key=\"`${label}-divider`\"\n          ></v-divider>\n          <v-subheader :key=\"label\" v-if=\"subheader && label !== ''\">{{\n            label\n          }}</v-subheader>\n          <v-list-item\n            v-else\n            :key=\"route\"\n            :value=\"route\"\n            @click=\"goTo(route)\"\n            :disabled=\"disabled()\"\n            link\n          >\n            <v-list-item-icon>\n              <v-icon>{{ icon }}</v-icon>\n            </v-list-item-icon>\n\n            <v-list-item-content>\n              <v-list-item-title>{{ label }}</v-list-item-title>\n            </v-list-item-content>\n          </v-list-item>\n        </template>\n      </v-list-item-group>\n    </v-list>\n    <v-spacer ></v-spacer>\n    <img src=\"PoCR_Logo.png\" width=\"100%\">\n  </v-navigation-drawer>\n</template>\n\n<script>\nimport { get } from \"vuex-pathify\";\nimport { routes } from \"@/router\";\n\nexport default {\n  props: {\n    value: Boolean,\n  },\n  data: () => ({\n    drawer: true,\n  }),\n  watch: {\n    value() {\n      this.drawer = this.value;\n    }\n  },\n  computed: {\n    ...get([\"mmIsOpen\"]),\n    ...get(\"auth\", [\"registered\"]),\n    ...get(\"status\", [\"approved\"]),\n    sidenav() {\n      // Filter the routes to keep the ones that could appear in the sidenav,\n      // and map them to a more usable object\n      const list = routes\n        .filter((r) => r?.meta?.displayInSidenav !== undefined)\n        .map((r) => ({\n          icon: \"mdi-wallet\",\n          label: r.name.charAt(0).toUpperCase() + r.name.slice(1),\n          route: r.name,\n          meta: r.meta,\n          restricted: r.meta.restricted,\n          disabled: () =>\n            this.mmIsOpen ||\n            (r.meta.restricted && !r.meta.restricted({ store: this.$store })),\n          hidden: r.meta.hidden,\n        }));\n\n      const nav = [];\n      const categories = [];\n      for (const el of list) {\n        if (el.hidden && el.hidden({ store: this.$store })) continue;\n        if (\n          el.meta &&\n          el.meta.displayInSidenav !== \"\" &&\n          !categories.includes(el.meta.displayInSidenav)\n        ) {\n          nav.push({ subheader: true, label: el.meta.displayInSidenav });\n          categories.push(el.meta.displayInSidenav);\n        }\n        nav.push(el);\n      }\n      return nav;\n    },\n  },\n\n  mounted() {\n    console.log(\"routes\", routes);\n  },\n\n  methods: {\n    drawerChange() {\n      // console.log(\"Drawer displayed changed\", this.value, this.drawer);\n      this.$emit(\"input\", this.drawer);\n    },\n    goTo(routeName) {\n      if (this.$route.name === routeName) return;\n      this.$router.push({ name: routeName });\n    },\n  },\n};\n</script>\n\n<style></style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AppMenu.vue?vue&type=template&id=70b67c86&\"\nimport script from \"./AppMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./AppMenu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-dialog',{attrs:{\"width\":\"500\",\"persistent\":\"\"},model:{value:(_vm.display),callback:function ($$v) {_vm.display=$$v},expression:\"display\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Transaction authentication\")]),_c('v-card-text',[_vm._v(\" Enter the password for the wallet \"+_vm._s(_vm.walletAddress)+\" : \"),_c('v-text-field',{attrs:{\"type\":\"password\"},model:{value:(_vm.walletPassword),callback:function ($$v) {_vm.walletPassword=$$v},expression:\"walletPassword\"}}),_c('div',{staticStyle:{\"color\":\"red\"}},[_vm._v(_vm._s(_vm.errorMessage))])],1),_c('v-card-actions',[_c('v-btn',{on:{\"click\":_vm.cancel}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"loading\":_vm.loading,\"disabled\":_vm.walletPassword === '' || _vm.loading},on:{\"click\":_vm.submit}},[_vm._v(\" Confirm \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-dialog\n    v-model=\"display\"\n    width=\"500\"\n    persistent\n  >\n    <v-card>\n      <v-card-title>Transaction authentication</v-card-title>\n      <v-card-text>\n        Enter the password for the wallet {{ walletAddress }} :\n        <v-text-field type=\"password\" v-model=\"walletPassword\" />\n        <div style=\"color: red\">{{ errorMessage }}</div>\n      </v-card-text>\n      <v-card-actions>\n        <v-btn @click=\"cancel\">Cancel</v-btn>\n        <v-btn\n          @click=\"submit\"\n          :loading=\"loading\"\n          :disabled=\"walletPassword === '' || loading\"\n        >\n          Confirm\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n<script>\nexport default {\n\n  data: () => ({\n    walletAddress: null,\n    errorMessage: null,\n    display: false,\n    loading: false,\n    walletPassword: \"\",\n    // functions as a data fields to be called by the component\n    submit: ()=>{}, \n    cancel: ()=>{}\n  }),\n\n  methods: {\n    /** This method is to be registered in the central store to be passed into the \n     * new Web3CustodyFunctionProvider(provider, custody, wallet, <here>)\n     * to allow user to interact with the authentication process\n     */\n    async authenticate(address, api) {\n      if (!address || !api) throw new Error(\"Invalid call to the authenticate function, missing parameters\");\n      this.walletAddress = address;\n      this.display = true;\n\n      try {\n        // console.log(\"authenticate function with api\",address, api);\n        // create a promise to wait for the user interactions\n        // the body of the promise links two functions (submit and cancel) to the component to receive \n        // the click events\n        const token = await new Promise( (resolve, reject)=>{\n          // function to receive the submit click event\n          async function submit() {\n            if (this.walletAddress && this.walletPassword) {\n              this.loading = true;\n              try {\n                // calls the api to get the token\n                const token = await api.authenticate(this.walletAddress, this.walletPassword);\n                if (!token) throw new Error(\"Missing token from authenticate without real error\") // should not happen\n                // returns the authentication token\n                resolve(token);\n              } catch (error) {\n                this.errorMessage = error.message;\n              } finally {\n                this.loading = false;\n              }\n            } else {\n              reject(new Error(\"No wallet address or password\"))\n            }\n          }\n          // function to receive the cancel click event\n          function cancel() {\n            reject(new Error(\"Authentication cancelled by user\"));\n          }\n          // link the functions to the component (using data instead of methods works fine :-) )\n          this.submit = submit.bind(this);\n          this.cancel = cancel.bind(this);\n        });\n\n        // returns the token obtained from the promise\n        return token;\n      } finally {\n        // in case of exception, we should clear the fields and close the dialog\n        this.walletPassword = \"\";\n        this.errorMessage = null;\n        this.display = false;\n      }\n\n    }\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WalletAuthenticationDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WalletAuthenticationDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WalletAuthenticationDialog.vue?vue&type=template&id=424a8a38&\"\nimport script from \"./WalletAuthenticationDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./WalletAuthenticationDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <v-app id=\"inspire\">\n    <v-container>\n      <app-menu v-model=\"drawerDisplayed\"></app-menu>\n      <v-app-bar app clipped-left flat color=\"teal lighten-2\">\n        <v-app-bar-nav-icon v-if=\"!drawerDisplayed\" @click=\"showDrawer\"></v-app-bar-nav-icon>\n        <v-toolbar-title>Proof of Carbon Reduction</v-toolbar-title>\n        <v-spacer></v-spacer>\n        <v-chip\n          class=\"ma-2\"\n          color=\"blue\"\n          text-color=\"white\"\n        >\n          {{walletRole}}\n        </v-chip> \n        <v-chip\n          v-if=\"wallet\"\n          class=\"ma-2\"\n          close\n          color=\"blue\"\n          text-color=\"white\"\n          @click:close=\"disconnect\"\n        >\n          {{wallet}}\n        </v-chip>\n        <v-chip\n          class=\"ma-2\"\n          color=\"blue\"\n          text-color=\"white\"\n        >\n          {{currentBlockNumber}}\n        </v-chip> \n        <v-chip\n          class=\"ma-2\"\n          color=\"blue\"\n          text-color=\"white\"\n        >\n          {{chainName}}\n        </v-chip> \n\n      </v-app-bar>\n\n      <v-main>\n        <v-container class=\"py-8\">\n          <router-view></router-view>\n        </v-container>\n      </v-main>\n    </v-container>\n    <v-overlay :value=\"mmIsOpen\">\n      <v-progress-circular indeterminate></v-progress-circular>\n    </v-overlay>\n    <v-snackbar\n      v-model=\"displaySnackbar\"\n      multi-line\n      :color=\"snackbarColor\"\n      right\n    >\n      {{ snackbarMessage }}\n    </v-snackbar>\n    <wallet-authentication-dialog\n      ref=\"walletAuthenticationDialog\"\n    ></wallet-authentication-dialog>\n  </v-app>\n</template>\n\n<script>\nimport AppMenu from \"./components/AppMenu.vue\";\nimport WalletAuthenticationDialog from \"./components/WalletAuthenticationDialog.vue\";\nimport { get, sync, call } from \"vuex-pathify\";\nimport $store from \"@/store/index\";\n\nexport default {\n  components: { AppMenu, WalletAuthenticationDialog },\n  data: () => ({\n    drawerDisplayed: true\n  }),\n\n  computed: {\n    ...sync([\"displaySnackbar\", \"snackbarMessage\", \"snackbarColor\"]),\n    ...get([\"mmIsOpen\"]),\n    ...get(\"auth\", [\"wallet\", \"walletRole\", \"chainName\"]),\n    ...get(\"nodes\", [\"currentBlockNumber\"]),\n  },\n\n  methods: {\n    ...call(\"auth\", [\"detectProvider\", \"disconnect\"]),\n    showDrawer() {\n      this.drawerDisplayed = true;\n    },\n  },\n\n  mounted() {\n    // record the authentication function to make it available in api.js\n    $store.set(\"auth/walletAuthenticationFunction\", this.$refs.walletAuthenticationDialog.authenticate) \n  }\n};\n</script>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=5d00d685&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport Vuetify from \"vuetify\";\nimport \"vuetify/dist/vuetify.min.css\";\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n    theme: {\n        themes: {\n            light: {\n                primary: \"#607d8b\",\n                secondary: \"#009688\",\n                accent: \"#4caf50\",\n                error: \"# e91e63\",\n                warning: \"#cddc39\",\n                info: \"#3f51b5\",\n                success: \"#8bc34\",\n            },\n        },\n    },\n});","import { getContractInstance } from \"./api\";\n\nexport function setupAuthNavigationGuard(router, store) {\n  router.beforeEach(async (to, from, next) => {\n    console.log(\"routing \", from.name, to.name);\n    // first need to control if we have not routed to the metamask missing page\n    if (to.name === \"installMetaMask\") {\n      return next();\n    }\n\n    // Having a provider is considered mandatory. We'll check that you installed Metamask or have a wallet custody configured.\n    if (!store.state.auth.providerModel) {\n      console.log(\"no auth provider yet\");\n      await store.dispatch(\"auth/detectProvider\");\n      console.log(\"Didn't find any provider in the app, trying to detect one. Provider found?\", store.state.auth.providerModel, store.state.auth.provider);\n      if (store.state.auth.providerModel == \"both\") return next({ name: \"authentication\" });\n      // if no provider was available, assume that no direct provider was possible hence we need at least to have metamask\n      if (!store.state.auth.provider) return next({ name: \"installMetaMask\" });\n    }\n    \n    // Just to make sure, if you do not have the smart contract instance yet, we instanciate it.\n    if (!store.state.auth.contract) {\n      store.commit(\"auth/contract\", getContractInstance())\n    }    \n\n    if (to.name === \"authentication\") {\n      return next();\n    }\n    \n    // You seem to have a connected json rpc service, let's verify it is a PoCR network\n    const error = await store.dispatch(\"auth/checkNetworkProofOfCarbonReduction\");\n    if ( error ) {\n      store.dispatch(\"errorFlash\", `The connected network is probably not a Proof of Carbon Reduction network: ${error}`);\n      return next({ name: \"installMetaMask\" });\n    }\n\n    \n    // Good, you have the provider. But have you connected a wallet?\n    if (!store.state.auth.wallet) {\n      console.log(\"Didn't find the wallet in the app. Trying to fetch it...\");\n      const address = await store.dispatch(\"auth/attemptToConnectWallet\");\n    \n      console.log(\"Found a connected wallet.\", address);\n    }\n\n    // You're going to a non-auth route, keep going.\n    if (!to.meta || !to.meta.restricted) return next();\n\n    // await store.dispatch(\"auth/fetchRole\", null, { root: true });\n\n    // Alright, you have the extension, and you've connected a wallet. But do you have the right to\n    // go where you're trying to go?\n    if (!to.meta.restricted({ store })) {\n      // Maybe we don't know it yet but you're actually approved (first navigation). We double-check,\n      // to avoid sending you back to status on first navigation (that would be quite annoying)\n      console.log(\"Didn't find the proper authorizations to go to this route. Checking again with the smart contract...\")\n      await Promise.all([\n        store.dispatch(\"auth/fetchIsRegistered\"),\n        store.dispatch(\"status/fetchIsApproved\"),\n        store.dispatch(\"auth/fetchRole\")\n      ]);\n      // You're actually NOT approved or registered at all. Go back to Status, you shouldn't try to go\n      // anywhere else.\n      if (!to.meta.restricted({ store })) return next({ name: to.meta.forceRedirectTo });\n      console.log(\"Found the proper authorizations.\");\n    }\n\n    // Alright, if you managed to go this far, everything's fine.\n    return next();\n  })\n}","import Vue from 'vue'\nimport App from './App.vue'\nimport vuetify from './plugins/vuetify'\nimport 'roboto-fontface/css/roboto/roboto-fontface.css'\nimport '@mdi/font/css/materialdesignicons.css'\nimport '@mdi/js'\n\nimport store from \"./store/index\"\nimport router from './router'\nimport { setupAuthNavigationGuard } from '@/lib/auth'\n\nVue.config.productionTip = false\n\nsetupAuthNavigationGuard(router, store);\n\nnew Vue({\n  vuetify,\n  store,\n  router,\n  render: h => h(App)\n}).$mount('#app');"],"sourceRoot":""}