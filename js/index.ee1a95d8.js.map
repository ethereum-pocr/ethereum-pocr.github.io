{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?d7de","webpack:///./src/components/AppMenu.vue?8f66","webpack:///./src/pages/InstallMetaMask.page.vue?d0c2","webpack:///src/pages/InstallMetaMask.page.vue","webpack:///./src/pages/InstallMetaMask.page.vue?4233","webpack:///./src/pages/InstallMetaMask.page.vue","webpack:///./src/pages/Auth.page.vue?f20d","webpack:///./src/plugins/pathify.js","webpack:///./src/lib/config-file.js","webpack:///./src/store/nodes.js","webpack:///./src/store/auth.js","webpack:///./src/lib/numbers.js","webpack:///./src/store/history.js","webpack:///./src/store/pledge.js","webpack:///./src/store/status.js","webpack:///./src/store/nodeGovernance.js","webpack:///./src/store/index.js","webpack:///./src/lib/async-local-storage.js","webpack:///./src/lib/api.js","webpack:///src/pages/Auth.page.vue","webpack:///./src/pages/Auth.page.vue?c349","webpack:///./src/pages/Auth.page.vue","webpack:///./src/pages/Dashboard.page.vue?e755","webpack:///src/pages/Dashboard.page.vue","webpack:///./src/pages/Dashboard.page.vue?384f","webpack:///./src/pages/Dashboard.page.vue","webpack:///./src/pages/Auditors.page.vue?d257","webpack:///src/pages/Auditors.page.vue","webpack:///./src/pages/Auditors.page.vue?2562","webpack:///./src/pages/Auditors.page.vue","webpack:///./src/pages/Audit.page.vue?7b78","webpack:///src/pages/Audit.page.vue","webpack:///./src/pages/Audit.page.vue?8ac8","webpack:///./src/pages/Audit.page.vue","webpack:///./src/pages/History.page.vue?12e1","webpack:///src/pages/History.page.vue","webpack:///./src/pages/History.page.vue?d2e4","webpack:///./src/pages/History.page.vue","webpack:///./src/pages/Pledge.page.vue?b7fc","webpack:///src/pages/Pledge.page.vue","webpack:///./src/pages/Pledge.page.vue?6915","webpack:///./src/pages/Pledge.page.vue","webpack:///./src/pages/Status.page.vue?7620","webpack:///src/pages/Status.page.vue","webpack:///./src/pages/Status.page.vue?bae4","webpack:///./src/pages/Status.page.vue","webpack:///./src/router.js","webpack:///src/components/AppMenu.vue","webpack:///./src/components/AppMenu.vue?55d1","webpack:///./src/components/AppMenu.vue","webpack:///./src/components/WalletAuthenticationDialog.vue?5216","webpack:///src/components/WalletAuthenticationDialog.vue","webpack:///./src/components/WalletAuthenticationDialog.vue?3cad","webpack:///./src/components/WalletAuthenticationDialog.vue","webpack:///src/App.vue","webpack:///./src/App.vue?60d0","webpack:///./src/App.vue","webpack:///./src/plugins/vuetify.js","webpack:///./src/lib/auth.js","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","_v","staticClass","mmIsOpen","snackbarColor","model","callback","$$v","displaySnackbar","expression","_s","snackbarMessage","ref","staticRenderFns","drawer","$route","_l","index","icon","label","route","disabled","subheader","_e","on","$event","goTo","component","openMetaMaskConnectionDialog","prepareOpenWeb3DirectConnectionDialog","selectedNetwork","networks","wallet","wallets","updateWallet","show","password","pathify","options","mapping","parseUrl","url","acceptedProtocols","Array","isArray","map","endsWith","toLowerCase","u","URL","includes","protocol","error","cleanUpConfig","config","network","nodeUrl","walletCustodyAPIBaseUrl","getDefaultNetwork","find","default","changeDefaultNetwork","getNetworkList","MAX_BLOCKS_TO_KEEP","state","nbOfNodes","totalFootprint","totalCrypto","sealers","chainUpdateSubscription","blocks","average","arr","reduce","a","b","getters","rewardsByBlock","rewards","sealer","lastReward","unshift","averageReward","averageDelaySec","previousBlock","lastBlock","receivedAt","lastBlockNumber","block","number","mutations","make","processBlock","web3","intf","_intf","$store","carbonFootprint","undefined","difficulty","startsWith","Number","parseInt","poaBlockHashToSealerInfo","blockNumber","utils","eth","getBalance","address","balance","toBN","deployedAt","totalCryptoB4","delta","parseFloat","fromWei","sub","bal","footprint","nbNodes","Date","now","console","warn","actions","fetchAllValues","dispatch","fetchNumberOfNodes","readOnlyCall","set","fetchTotalFootprint","subscribeToChainUpdates","rootState","unsubscribe","Web3","auth","provider","subscription","subscribe","unsubscribeToChainUpdates","insertNewBlock","fetchChainInformations","getBlockNumber","Math","max","log","getBlock","fetchNodeInformations","seenSealers","maxSealerSeenCounter","sortedSealers","values","sort","updateFootprint","sealerAddress","handleMMResponse","writeCall","namespaced","providerMetamask","providerDirect","providerModel","custodyModel","custodyApiUrl","contract","registered","isNode","isAuditor","walletAuthenticationFunction","detectMetamask","detectEthereumProvider","location","reload","detectDirectAccess","defaultNetwork","getWeb3ProviderFromUrl","fetchRole","Node","detectProvider","nbProviders","message","attemptToConnectWallet","addresses","ethereum","request","method","getCustodyLastWallets","accounts","router","openWeb3DirectConnectionDialog","verifyCustodyAuthentication","token","fetchIsRegistered","selfRegister","writeCallWithOptions","maxGas","root","GWEI_FACTOR","pow","ETH_FACTOR","toWebBigInt","bi","BigNumber","toEther","div","toWei","from","multipliedBy","pledgeHistory","footprintHistory","appendFootprint","appendPledge","prov","Web3FunctionProvider","Promise","resolve","allContracts","at","governanceAddress","fetchFootprintHistory","commit","events","CarbonFootprintUpdate","fromBlock","node","returnValues","fetchPledgeHistory","account","AmountPledged","pledge","amount","total","minPledgeAmount","pledgedAmount","redeemBool","fetchBalance","getWalletBalance","fetchCanTransferPledge","fetchMinPledgeAmount","fetchPledgedAmount","addToPledge","redeemPledge","approved","approbationVotes","fetchIsApproved","fetchApprobationVotes","votes","nbAuditors","auditors","fetchAllAuditorsValues","fetchNbAuditors","fetchAuditorsInfos","nodeAdr","floor","minVotes","nbVotes","currentVote","isApproved","voteAuditor","context","auditorAddress","accept","Vue","use","Vuex","tryingToConnect","store","Store","nodes","history","status","nodeGovernance","plugins","plugin","errorFlash","fetchConfig","fetch","res","json","AsyncLocalStorage","keys","keyList","v","localStorage","getItem","JSON","parse","setItem","stringify","removeItem","group","LocalStorage","currentProvider","walletAddress","getContractInstanceByName","contractName","instance","getContractInstance","getCustodyApi","custodyUrl","custody","WalletCustodyApiImpl","savedWallets","api","authenticate","Error","list","authFunction","Web3CustodyFunctionProvider","methodName","args","readOnlyCallWithOptions","reject","convertMMErrorMessage","split","obj","join","then","send","catch","e","err","promise","errorCallback","response","mounted","computed","hasProviderMetamask","hasProviderDirect","hasCustodyApi","methods","toFixed","vanity","custom","sealersFootprint","scopedSlots","_u","fn","item","sealersLabels","sealersReward","sealersAddress","nbBlocksToKeep","sealerMap","processBlockData","info","reward","sealerInfo","updateSealersArrays","tableHeadersAuditors","nodeVote","computeLabel","text","sortable","switchState","tableHeaders","openUpdateFootprintDialog","footprintDialog","selectedSealer","newFootprintValue","submitNewFootprint","currentTab","staticStyle","footprintTableHeaders","pledgeTableHeaders","amountToAdd","pledgeMore","intervalId","setInterval","beforeRouteLeave","to","next","clearInterval","VueRouter","approvedAuditor","isNotNode","walletIsntConnected","any","functions","opts","f","routes","path","Dashboard","meta","displayInSidenav","InstallMetaMask","Auth","hidden","Auditors","restricted","forceRedirectTo","Status","Pledge","Audit","History","redirect","base","sidenav","filter","el","nav","categories","routeName","$router","display","walletPassword","errorMessage","cancel","loading","submit","components","AppMenu","WalletAuthenticationDialog","sync","Vuetify","theme","themes","light","primary","secondary","accent","warning","success","setupAuthNavigationGuard","beforeEach","all","productionTip","vuetify","render","h","App","$mount"],"mappings":"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","file":"js/index.ee1a95d8.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"index\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{attrs:{\"id\":\"inspire\"}},[_c('v-container',[_c('app-menu'),_c('v-app-bar',{attrs:{\"app\":\"\",\"clipped-left\":\"\",\"flat\":\"\",\"color\":\"teal lighten-2\"}},[_c('v-toolbar-title',[_vm._v(\"Proof of Carbon Reduction\")])],1),_c('v-main',[_c('v-container',{staticClass:\"py-8\"},[_c('router-view')],1)],1)],1),_c('v-overlay',{attrs:{\"value\":_vm.mmIsOpen}},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\"}})],1),_c('v-snackbar',{attrs:{\"multi-line\":\"\",\"color\":_vm.snackbarColor,\"right\":\"\"},model:{value:(_vm.displaySnackbar),callback:function ($$v) {_vm.displaySnackbar=$$v},expression:\"displaySnackbar\"}},[_vm._v(\" \"+_vm._s(_vm.snackbarMessage)+\" \")]),_c('wallet-authentication-dialog',{ref:\"walletAuthenticationDialog\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-navigation-drawer',{attrs:{\"app\":\"\",\"clipped\":\"\",\"flat\":\"\"},model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:\"drawer\"}},[_c('v-divider'),_c('v-list',[_c('v-list-item-group',{attrs:{\"value\":_vm.$route.name,\"mandatory\":\"\",\"color\":\"primary\"}},[_vm._l((_vm.sidenav),function(ref,index){\nvar icon = ref.icon;\nvar label = ref.label;\nvar route = ref.route;\nvar disabled = ref.disabled;\nvar subheader = ref.subheader;\nreturn [(subheader && label !== '' && index !== 0)?_c('v-divider',{key:(label + \"-divider\")}):_vm._e(),(subheader && label !== '')?_c('v-subheader',{key:label},[_vm._v(_vm._s(label))]):_c('v-list-item',{key:route,attrs:{\"value\":route,\"disabled\":disabled(),\"link\":\"\"},on:{\"click\":function($event){return _vm.goTo(route)}}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(_vm._s(icon))])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(label))])],1)],1)]})],2)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"Install MetaMask and then reload this application.\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>Install MetaMask and then reload this application.</div>\n</template>\n<script>\nexport default {};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InstallMetaMask.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InstallMetaMask.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InstallMetaMask.page.vue?vue&type=template&id=1ecf0199&\"\nimport script from \"./InstallMetaMask.page.vue?vue&type=script&lang=js&\"\nexport * from \"./InstallMetaMask.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.hasProviderMetamask)?_c('v-btn',{attrs:{\"color\":\"teal\",\"dark\":\"\"},on:{\"click\":_vm.openMetaMaskConnectionDialog}},[_vm._v(\"Connect Metamask Wallet\")]):_vm._e(),_c('br'),_c('br'),(_vm.hasProviderDirect)?_c('div',[_c('v-btn',{attrs:{\"color\":\"teal\",\"dark\":\"\"},on:{\"click\":_vm.prepareOpenWeb3DirectConnectionDialog}},[_vm._v(\"Connect with below configuration\")]),_vm._v(\" \"),_c('br'),_c('br'),_c('v-select',{attrs:{\"hint\":(\"node: \" + (_vm.selectedNetwork.nodeUrl) + \"; custody: \" + (_vm.selectedNetwork.walletCustodyAPIBaseUrl)),\"items\":_vm.networks,\"item-text\":\"name\",\"item-value\":\"nodeUrl\",\"persistent-hint\":\"\",\"return-object\":\"\",\"single-line\":\"\"},model:{value:(_vm.selectedNetwork),callback:function ($$v) {_vm.selectedNetwork=$$v},expression:\"selectedNetwork\"}}),(_vm.hasCustodyApi)?_c('div',[_c('br'),_c('v-combobox',{attrs:{\"label\":\"Enter the wallet address\",\"placeholder\":\"capture your wallet address\",\"outlined\":\"\",\"counter\":\"\",\"clearable\":\"\",\"search-input\":_vm.wallet,\"items\":_vm.wallets},on:{\"update:search-input\":_vm.updateWallet}}),_c('v-text-field',{attrs:{\"label\":\"Enter the wallet password\",\"placeholder\":\"capture your wallet password\",\"outlined\":\"\",\"type\":_vm.show?'text' : 'password'},on:{\"click:append\":function($event){_vm.show = !_vm.show}},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1):_vm._e()],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import pathify from 'vuex-pathify'\nexport default pathify\n\n// options\npathify.options.mapping = 'simple'\n// pathify.options.deep = false","\n\nexport function parseUrl(url, acceptedProtocols) {\n  if (acceptedProtocols && !Array.isArray(acceptedProtocols)) acceptedProtocols = [acceptedProtocols];\n  if (acceptedProtocols) acceptedProtocols = acceptedProtocols.map(p=>(p.endsWith(\":\")? p : p+':').toLowerCase());\n  \n  if (!url) return undefined;\n  try {\n      const u = new URL(url)\n      if (acceptedProtocols) {\n          if (!acceptedProtocols.includes(u.protocol)) return undefined\n      }\n      return u;\n  } catch (error) {\n      return undefined;\n  }\n}\n\nexport async function cleanUpConfig(config) {\n  // Configuration of the internal network is optional and may contains no, one or several networks\n\n  // check the url of the server handling the private keys if not metamask\n  if ( !Array.isArray(config.networks)) config.networks = [];\n  for (const network of config.networks) {\n    if (!parseUrl(network.nodeUrl, [\"http\", \"https\", \"ws\", \"wss\"])) {\n      delete network.nodeUrl;\n    }\n    if (!parseUrl(network.walletCustodyAPIBaseUrl, [\"http\", \"https\"])) {\n        delete network.walletCustodyAPIBaseUrl\n    }\n    // may add later some other verifications like the chain id matches the node \n  }\n  if (config.networks.length==0) {\n    config.networks.push({name: \"No network defined in the configuration\"})\n  }\n  return config;\n}\n\nexport function getDefaultNetwork(config) {\n  let result = config.networks.find( n=>n.default );\n  if (!result && config.networks.length>0) result = config.networks[0];\n  return result;\n}\n\nexport function changeDefaultNetwork(config, url) {\n  for (const network of config.networks) {\n    if (network.nodeUrl == url) {\n      network.default = true;\n    } else {\n      network.default = false;\n    }\n  }\n  return config;\n}\n\nexport function getNetworkList(config) {\n  return config.networks;\n}","import Web3 from \"web3\";\nimport { make } from \"vuex-pathify\";\nimport { poaBlockHashToSealerInfo } from \"pocr-utils\";\nimport { readOnlyCall, intf as _intf, writeCall, handleMMResponse } from \"@/lib/api\";\nimport $store from \"@/store/index\";\n\nconst MAX_BLOCKS_TO_KEEP = 30;\n\nconst state = () => ({\n    nbOfNodes: 0,\n    totalFootprint: 0,\n    totalCrypto: 0,\n    sealers: [],\n    chainUpdateSubscription: null,\n    blocks: []\n})\n\nconst average = (arr) => arr.reduce((a, b) => a + b, 0) / arr.length;\n\nconst getters = {\n    rewardsByBlock(state) {\n        const rewards = state.blocks.map((d) => d.sealer.lastReward);\n        rewards.unshift(0);\n        return rewards;\n    },\n    averageReward(state) {\n        if (state.blocks.length === 0) return 0;\n        const rewards = state.blocks.map((d) => d.sealer.lastReward);\n        return average(rewards);\n    },\n    averageDelaySec(state) {\n        if (state.blocks.length < 2) return 0;\n        const previousBlock = state.blocks[state.blocks.length - 2];\n        const lastBlock = state.blocks[state.blocks.length - 1];\n        return (lastBlock.receivedAt - previousBlock.receivedAt) / 1000;\n    },\n    lastBlock(state) {\n        if (state.blocks.length === 0) return null;\n        return state.blocks[state.blocks.length - 1];\n    },\n    lastBlockNumber(state, getters) {\n        return getters.lastBlock?.block.number;\n    }\n}\n\nconst mutations = make.mutations(state);\n\nasync function processBlock(web3, block) {\n    const intf = _intf($store.get(\"auth/provider\"));\n    const carbonFootprint = $store.get(\"auth/contract\");\n\n    const data = { block, sealer: undefined }\n    try {\n        if (typeof block.difficulty === \"string\" && !block.difficulty.startsWith('0x')) block.difficulty = Number.parseInt(block.difficulty);\n        data.sealer = poaBlockHashToSealerInfo(block);\n        const blockNumber = typeof block.number === \"string\" ? Number.parseInt(block.number) : block.number;\n        const balance = web3.utils.toBN(await web3.eth.getBalance(data.sealer.address, blockNumber))\n        // Total and delta\n        const totalCrypto = web3.utils.toBN(await web3.eth.getBalance(carbonFootprint.deployedAt, blockNumber))\n        const totalCryptoB4 = web3.utils.toBN(await web3.eth.getBalance(carbonFootprint.deployedAt, blockNumber - 1))\n        const delta = Number.parseFloat(web3.utils.fromWei(totalCrypto.sub(totalCryptoB4)));\n\n        const bal = Number.parseFloat(web3.utils.fromWei(balance, \"ether\"))\n        const footprint = await carbonFootprint.footprint(intf.call(), data.sealer.address)\n        const totalFootprint = await carbonFootprint.totalFootprint(intf.call())\n        const nbNodes = await carbonFootprint.nbNodes(intf.call())\n\n        data.sealer.footprint = Number.parseFloat(footprint);\n        data.sealer.balance = bal\n        data.totalFootprint = Number.parseInt(totalFootprint)\n        data.totalCrypto = Number.parseFloat(web3.utils.fromWei(totalCrypto, \"ether\"))\n        data.nbNodes = Number.parseInt(nbNodes)\n        data.sealer.lastReward = delta //normalRewardForFootprint(data.sealer.footprint, data.totalFootprint, data.nbNodes);\n        data.receivedAt = Date.now();\n    } catch (error) {\n        console.warn(\"Error in preparing block\", error)\n    }\n    return data;\n}\n\nconst actions = {\n    fetchAllValues({ dispatch }) {\n        dispatch(\"fetchNumberOfNodes\");\n        dispatch(\"fetchTotalFootprint\");\n        dispatch(\"fetchNodeInformations\");\n    },\n\n    async fetchNumberOfNodes() {\n        const nbNodes = await readOnlyCall(\"nbNodes\");\n        $store.set(\"nodes/nbOfNodes\", Number.parseInt(nbNodes));\n    },\n\n    async fetchTotalFootprint() {\n        const totalFootprint = await readOnlyCall(\"totalFootprint\");\n        $store.set(\"nodes/totalFootprint\", Number.parseInt(totalFootprint));\n    },\n\n    subscribeToChainUpdates({ state, rootState, dispatch }) {\n        if (state.chainUpdateSubscription !== null) state.chainUpdateSubscription.unsubscribe();\n        dispatch(\"fetchChainInformations\");\n\n        const web3 = new Web3(rootState.auth.provider);\n        const subscription = web3.eth.subscribe(\"newBlockHeaders\");\n        subscription.on(\"data\", (block) => dispatch(\"insertNewBlock\", block));\n        $store.set(\"nodes/chainUpdateSubscription\", subscription);\n    },\n\n    unsubscribeToChainUpdates() {\n        if (state.chainUpdateSubscription !== null) state.chainUpdateSubscription.unsubscribe();\n    },\n\n    async insertNewBlock({ state }, block) {\n        const web3 = new Web3($store.get(\"auth/provider\"));\n\n        // Here process the new block, remove one if we've reached the cap\n        let blocks = [...state.blocks];\n        if (blocks.length >= MAX_BLOCKS_TO_KEEP) {\n            blocks.shift();\n        }\n        blocks.push(await processBlock(web3, block));\n        $store.set(\"nodes/blocks\", blocks);\n    },\n\n    async fetchChainInformations({ rootState }) {\n        const web3 = new Web3(rootState.auth.provider);\n        const blocks = [];\n\n        const blockNumber = await web3.eth.getBlockNumber();\n        this.blockNumber = blockNumber;\n\n        let index = Math.max(0, blockNumber - MAX_BLOCKS_TO_KEEP);\n        console.log(\"From block\", index, \"to\", blockNumber);\n\n        for (; index < blockNumber; index++) {\n            const block = await web3.eth.getBlock(index, false);\n            blocks.push(await processBlock(web3, block));\n        }\n        $store.set(\"nodes/blocks\", blocks);\n    },\n\n    async fetchNodeInformations({ rootState }) {\n        const web3 = new Web3(rootState.auth.provider);\n        const blockNumber = await web3.eth.getBlockNumber();\n\n        const sealers = {};\n        const seenSealers = {};\n\n        let i = 0;\n        let maxSealerSeenCounter = 0;\n        while (maxSealerSeenCounter <= 2) { // makes at least 2 full loops of PoA signature\n            const index = blockNumber - i;\n            const block = await web3.eth.getBlock(index, false);\n            const data = await processBlock(web3, block);\n            console.log(\"block\", data.block.number, \"sealer\", data.sealer);\n\n            if (i === 0) {\n                console.log(\"data\", data);\n                $store.set(\"nodes/totalCrypto\", data.totalCrypto);\n            }\n\n            const address = data.sealer.address;\n            if (!sealers[address]) {\n                sealers[address] = data.sealer;\n            }\n            seenSealers[address] = (seenSealers[address] ?? 0) + 1;\n\n            // capture the max of the node seen\n            maxSealerSeenCounter = Math.max(maxSealerSeenCounter, seenSealers[address]);\n            i++;\n        }\n        const sortedSealers = Object.values(sealers).sort((a, b) => a.footprint < b.footprint);\n        // console.log(sortedSealers.map(s => s.footprint));\n        $store.set(\"nodes/sealers\", sortedSealers);\n    },\n\n    async updateFootprint({ dispatch }, { sealerAddress, footprint }) {\n        await handleMMResponse(writeCall(\"setFootprint\", sealerAddress, footprint));\n        dispatch(\"fetchNodeInformations\");\n    }\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","// import ready from \"document-ready-promise\";\nimport detectEthereumProvider from '@metamask/detect-provider';\nimport { make } from \"vuex-pathify\";\nimport { readOnlyCall, writeCallWithOptions, handleMMResponse, getWeb3ProviderFromUrl, verifyCustodyAuthentication, getCustodyLastWallets } from \"@/lib/api\";\nimport { getDefaultNetwork, changeDefaultNetwork } from \"@/lib/config-file\";\n\nimport $store from \"@/store/index\";\nimport router from \"../router.js\";\n\nconst state = () => ({\n    provider: null,\n    providerMetamask: null,\n    providerDirect: null,\n    providerModel: null, // \"metamask\" or \"direct\" or \"both\" (if both are available)\n    custodyModel: null, // \"metamask\" or \"api\" or null if not available\n    custodyApiUrl: null, // the url of the custody api when the custody model is \"api\"\n    wallet: null,\n    contract: null,\n    registered: false,\n    // roles\n    isNode: false,\n    isAuditor: false,\n    walletAuthenticationFunction: null\n})\n\nconst getters = {}\n\nconst mutations = make.mutations(state);\n\n// function to generalize the web3 provider and signature api options\nasync function detectMetamask() {\n    const providerMetamask = await detectEthereumProvider();\n    if (providerMetamask) {\n        providerMetamask.on('accountsChanged', () => window.location.reload())\n        return {\n            providerModel: \"metamask\",\n            provider: providerMetamask,\n            custodyModel: \"metamask\",\n            custodyApiUrl: null\n        }\n    } else return undefined;\n}\n\nasync function detectDirectAccess() {\n    const config = $store.get(\"config\");\n    const defaultNetwork = getDefaultNetwork(config);\n    // if we have a nodeUrl, we can connect to the network\n    if (defaultNetwork.nodeUrl) {\n        // first create a direct provider without the wallet custody\n        const result = {\n            providerModel: \"direct\",\n            provider: getWeb3ProviderFromUrl(defaultNetwork.nodeUrl),\n            custodyModel: null,\n            custodyApiUrl: null\n        }\n        // if we also have the wallet custody, then add it in the result\n        if (defaultNetwork.walletCustodyAPIBaseUrl) {\n            result.custodyModel = \"api\",\n            result.custodyApiUrl = defaultNetwork.walletCustodyAPIBaseUrl\n        } else {\n            console.log(\"Note: No company's wallet custody configured\");\n        }\n        return result;\n    } else {\n        console.log(\"Note: No direct web3 access configured\");\n        return undefined\n    }\n}\n\nconst actions = {\n\n    async fetchRole() {\n        // Possibles roles are simple visitor (no wallet), authenticated visitor, auditor, node operator\n        // Reset the states\n        $store.set(\"auth/isAuditor\", false);\n        $store.set(\"auth/isNode\", false);\n        // get the current address\n        const wallet = $store.get(\"auth/wallet\");\n        if (wallet) {\n            // check if it's Auditor\n            const isAuditor = await readOnlyCall(\"auditorRegistered\", wallet);\n            // get the value of the footprint\n            const Node = await readOnlyCall(\"footprint\", wallet);\n            let isNode = false;\n            // if value different to 0 then it's a node\n            if (Node != 0) isNode = true;\n            // set the values to the store\n            $store.set(\"auth/isAuditor\", isAuditor);\n            $store.set(\"auth/isNode\", isNode);\n        }\n    },\n\n    async detectProvider() {\n        console.log(\"Before detecting providers\");\n        try {\n            await $store.dispatch(\"fetchConfig\");\n            let nbProviders = 0;\n\n            const providerMetamask = await detectMetamask();\n            if (providerMetamask) {\n                nbProviders ++;\n            }\n \n            const providerDirect = await detectDirectAccess();\n            if (providerDirect) {\n                nbProviders ++;\n            } \n            if (nbProviders == 0) {\n                // router.push({ name: \"installMetaMask\" }); \n                return;\n            }\n            \n            $store.set(\"auth/providerMetamask\", providerMetamask);\n            $store.set(\"auth/providerDirect\", providerDirect);\n            if (nbProviders > 1) {\n                $store.set(\"auth/providerModel\", \"both\");\n                // return router.push({ name: \"authentication\" }); \n            } else { // a single provider detected, can skip the decision process\n                const provider = providerDirect || providerMetamask; // will get one that is not null\n                $store.set(\"auth/provider\", provider.provider);\n                $store.set(\"auth/providerModel\", provider.providerModel);\n            }\n        } catch (error) {\n            console.error(\"Fail detecting a valid provider\", error.message)\n        }\n    },\n\n    async attemptToConnectWallet() {\n        let addresses = [];\n        const providerMetamask = $store.get(\"auth/providerMetamask\");\n        const providerDirect = $store.get(\"auth/providerDirect\");\n        if (providerMetamask) addresses = await window.ethereum.request({ method: \"eth_accounts\" });\n        if (providerDirect && addresses.length == 0) addresses = await getCustodyLastWallets();\n        console.log(\"attemptToConnectWallet\", addresses);\n        const address = addresses.length > 0 ? addresses[0] : null;\n        if (!address) return;\n        $store.set(\"auth/wallet\", address);\n        // We do it here because stuff breaks if we try to instanciate the interface before we know the address\n        return address;\n    },\n\n    async openMetaMaskConnectionDialog({ dispatch }) {\n        $store.set(\"auth/wallet\", null);\n        const accounts = await window.ethereum.request({ method: \"eth_requestAccounts\" })\n        if (accounts.length === 0) return;\n        $store.set(\"auth/wallet\", accounts[0]);\n        // it's decided, the provider is metamask\n        const provider = $store.get(\"auth/providerMetamask\");\n        $store.set(\"auth/provider\", provider.provider);\n        $store.set(\"auth/providerModel\", provider.providerModel);\n        // TODO: call fetchRole here to do a selective redirect? Or, just assume it's a first connect and don't care.\n        dispatch(\"fetchRole\");\n        router.push({ name: \"dashboard\" });\n    },\n\n    async openWeb3DirectConnectionDialog({ dispatch }, {wallet, password, nodeUrl}) {\n        // force reset the wallet\n        $store.set(\"auth/wallet\", null);\n        // update the default config\n        let config = $store.get(\"config\");\n        config = changeDefaultNetwork(config, nodeUrl);\n        $store.set(\"config\", config);\n\n        const provider = await detectDirectAccess(); // read again the default config now that it is chaged\n        $store.set(\"auth/provider\", provider.provider);\n        $store.set(\"auth/providerModel\", provider.providerModel);\n        \n        if (provider.custodyModel == \"api\") {\n            const token = await verifyCustodyAuthentication(wallet, password)\n            // console.log(\"openWeb3DirectConnectionDialog\", wallet, password, token);\n            if (token) {\n                $store.set(\"auth/wallet\", wallet);\n            }\n        }\n        dispatch(\"fetchRole\");\n        router.push({ name: \"dashboard\" });\n    },\n\n    async fetchIsRegistered({ state }) {\n        const registered = await handleMMResponse(readOnlyCall(\"auditorRegistered\", state.wallet));\n        $store.set(\"auth/registered\", registered);\n    },\n\n    async selfRegister({ dispatch }) {\n        await handleMMResponse(writeCallWithOptions(\"selfRegisterAuditor\", {maxGas:100000}));\n        dispatch(\"fetchIsRegistered\");\n        dispatch(\"status/fetchIsApproved\", null, { root: true });\n        dispatch(\"fetchRole\");\n    }\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","import { BigNumber } from \"bignumber.js\";\nexport const GWEI_FACTOR = Math.pow(10, 9)\nexport const ETH_FACTOR = Math.pow(10, 18)\n/**\n * Convert to BigNumber\n * @param {bigint|string|number} bi \n * @returns BigNumber\n */\nexport function toWebBigInt(bi) {\n  return new BigNumber(bi);\n}\n\n/**\n * Convert to normal number\n * @param {BigNumber} bi \n * @returns Number\n */\nexport function toNumber(bi) {\n  return bi.toNumber();\n}\n\n/**\n * Convert wei to gwei\n * @param {bigint|string|number} bi \n * @returns BigNumber\n */\nexport function toGWei(bi) {\n  return toWebBigInt(bi).div(toWebBigInt(GWEI_FACTOR));\n}\n/**\n * Convert wei to Ether\n * @param {bigint|string|number} bi \n * @returns BigNumber\n */\nexport function toEther(bi) {\n  return toWebBigInt(bi).div(toWebBigInt(ETH_FACTOR));\n}\n\nexport function toWei(bi, from) {\n  const n = toWebBigInt(bi);\n  if(from === \"ether\") return n.multipliedBy(ETH_FACTOR)\n  if(from === \"gwei\") return n.multipliedBy(GWEI_FACTOR)\n  return n\n}","import { make } from \"vuex-pathify\";\nimport { governanceAddress } from \"@/lib/api\";\nimport { Web3FunctionProvider } from \"@saturn-chain/web3-functions\";\nimport allContracts from \"sc-carbon-footprint\";\nimport { toEther } from \"@/lib/numbers\";\n\n// eslint-disable-next-line \nimport { SmartContractInstance } from \"@saturn-chain/smart-contract\" // needed only for typings resolution in the code\nimport $store from \"@/store/index\";\n\nconst state = () => ({\n    pledgeHistory: [],\n    footprintHistory: []\n})\n\nconst getters = {}\n\nconst mutations = {\n    ...make.mutations(state),\n    appendFootprint: (state, value) => {\n        state.footprintHistory.push(value)\n    },\n    appendPledge: (state, value) => {\n        state.pledgeHistory.push(value)\n    },\n};\n\nconst actions = {\n    fetchAllValues({ dispatch }) {\n        const prov = new Web3FunctionProvider($store.get(\"auth/provider\"), ()=>Promise.resolve($store.get(\"auth/wallet\")))\n        const contract = allContracts.get(\"Governance\").at(governanceAddress);\n\n        dispatch(\"fetchFootprintHistory\", {contract, prov});\n        dispatch(\"fetchPledgeHistory\", {contract, prov});\n    },\n\n    /**\n     * Get the list of setting footprint from the begining.     \n     * TODO: Replace by a pagination scheme \n     * @param {*} empty \n     * @param {{contract:SmartContractInstance, prov:Web3FunctionProvider} param1 \n     */\n    async fetchFootprintHistory({commit}, {contract, prov}) {\n        $store.set(\"history/footprintHistory\", []);\n        contract.events.CarbonFootprintUpdate(prov.get({fromBlock: 1}), {})\n        .on(\"log\", log=>{\n            // console.log(\"get logs \", log);\n            const footprint = {\n                blockNumber: log.blockNumber,\n                node: log.returnValues.node,\n                footprint: log.returnValues.footprint\n            };\n            commit(\"appendFootprint\", footprint);\n        })\n    },\n\n    /**\n     * Get the list of pledging from the begining.     \n     * TODO: Replace by a pagination scheme \n     * @param {*} empty \n     * @param {{contract:SmartContractInstance, prov:Web3FunctionProvider} param1 \n     */\n    async fetchPledgeHistory({commit}, {contract, prov}) {\n        $store.set(\"history/pledgeHistory\", []);\n        // get the logs of the current auditor only\n        contract.events.AmountPledged(prov.get({fromBlock: 1}), {from: await prov.account()})\n        .on(\"log\", log=>{\n            // console.log(\"get logs \", log);\n            const pledge = {\n                blockNumber: log.blockNumber,\n                node: log.returnValues.from,\n                pledge: toEther(log.returnValues.amount),\n                total: toEther(log.returnValues.total)\n            };\n            commit(\"appendPledge\", pledge)\n        })\n    }\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","import { make } from \"vuex-pathify\";\nimport { readOnlyCall, writeCall, writeCallWithOptions, handleMMResponse } from \"@/lib/api\";\nimport $store from \"@/store/index\";\nimport { toWei, toEther } from \"@/lib/numbers\";\nimport { getWalletBalance } from \"@/lib/api\";\n\nconst state = () => ({\n    balance: 0,\n    minPledgeAmount: 0,\n    pledgedAmount: 0,\n    redeemBool: false,\n})\n\nconst getters = {}\n\nconst mutations = make.mutations(state);\n\nconst actions = {\n    fetchAllValues({ dispatch }) {\n        dispatch(\"fetchBalance\");\n        dispatch(\"fetchMinPledgeAmount\");\n        dispatch(\"fetchPledgedAmount\");\n        dispatch(\"fetchCanTransferPledge\");\n    },\n\n    async fetchBalance({ rootState }) {\n        const balance = await getWalletBalance(rootState.auth.wallet);\n        $store.set(\"pledge/balance\", balance);\n    },\n\n    async fetchCanTransferPledge() {\n        const wallet = $store.get(\"auth/wallet\");\n        const redeemBool = await readOnlyCall(\"canTransferPledge\", wallet,\"1\");\n        console.log(\"just trying\", redeemBool);\n        $store.set(\"pledge/redeemBool\", redeemBool);\n    },\n\n    async fetchMinPledgeAmount() {\n        const wallet = $store.get(\"auth/wallet\");\n        const minPledgeAmount = await readOnlyCall(\"minPledgeAmountToAuditNode\", wallet);\n        $store.set(\"pledge/minPledgeAmount\", minPledgeAmount);\n    },\n\n    async fetchPledgedAmount() {\n        const wallet = $store.get(\"auth/wallet\");\n        const pledgedAmount = await readOnlyCall(\"pledgedAmount\", wallet);\n        $store.set(\"pledge/pledgedAmount\", toEther(pledgedAmount));\n    },\n\n    async addToPledge({ dispatch }, amount) {\n        console.log(\"Pledging\", amount)\n        await handleMMResponse(writeCallWithOptions(\"pledge\", { amount: toWei(amount, \"ether\") }));\n        dispatch(\"fetchPledgedAmount\");\n    },\n\n    async redeemPledge({ dispatch }) {\n        // when the smart contract is redeployed with the getPledgeBack function replace the below code\n        const wallet = $store.get(\"auth/wallet\");\n        const amount = $store.get(\"pledge/pledgedAmount\");\n        await  handleMMResponse(writeCall(\"transferPledge\", wallet, amount));\n        // replace with:\n        // await handleMMResponse(writeCall(\"getPledgeBack\"));\n        dispatch(\"fetchPledgedAmount\");\n    }\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","import { make } from \"vuex-pathify\";\nimport { readOnlyCall } from \"@/lib/api\";\nimport $store from \"@/store/index\";\n\nconst state = () => ({\n    approved: false,\n    approbationVotes: 0\n})\n\nconst getters = {}\n\nconst mutations = make.mutations(state);\n\nconst actions = {\n    async fetchIsApproved() {\n        const wallet = $store.get(\"auth/wallet\");\n        const approved = await readOnlyCall(\"auditorApproved\", wallet);\n\n        $store.set(\"status/approved\", approved);\n    },\n    async fetchApprobationVotes() {\n        const wallet = $store.get(\"auth/wallet\");\n        const votes = await readOnlyCall(\"auditorVotes\", wallet);\n\n        $store.set(\"status/approbationVotes\", Number(votes));\n    }\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","import { make } from \"vuex-pathify\";\nimport {\n    handleMMResponse,\n    readOnlyCall,\n    writeCall,\n} from \"@/lib/api\";\nimport $store from \"@/store/index\";\n\nconst state = () => ({\n    nbAuditors: 0,\n    auditors: [],\n})\n\nconst getters = {}\n\nconst mutations = make.mutations(state);\n\nconst actions = {\n    async fetchAllAuditorsValues({ dispatch }) {\n        await dispatch(\"fetchNbAuditors\");\n        await dispatch(\"fetchAuditorsInfos\");\n    },\n\n    async fetchNbAuditors() {\n        const nbAuditors = await readOnlyCall(\"nbAuditors\");\n        $store.set(\"nodeGovernance/nbAuditors\", nbAuditors);\n    },\n\n    async fetchAuditorsInfos() {\n        const nbAuditors = await readOnlyCall(\"nbAuditors\");\n        const nodeAdr = $store.get(\"auth/wallet\");\n        const minVotes = Math.floor((await readOnlyCall(\"nbNodes\")) / 2) + 1;\n        const auditors = [];\n        for (let i = 0; i < nbAuditors; i++) {\n            const address = await readOnlyCall(\"auditorAddress\", i);\n            const nbVotes = await readOnlyCall(\"auditorVotes\", address);\n            const currentVote = await readOnlyCall(\"currentAuditorVote\", address, nodeAdr);\n            const isApproved = await readOnlyCall(\"auditorApproved\", address);\n            auditors[i] = {\n                address,\n                nbVotes,\n                minVotes,\n                currentVote,\n                isApproved\n            };\n        }\n        $store.set(\"nodeGovernance/auditors\", auditors);\n    },\n\n    async voteAuditor(context, {auditorAddress, accept}) {\n        return handleMMResponse(writeCall(\"voteAuditor\", auditorAddress, accept));\n    }\n\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nimport pathify from '@/plugins/pathify'\nimport {cleanUpConfig} from \"@/lib/config-file\"\nimport { make } from \"vuex-pathify\";\n// import createPersistedState from \"vuex-persistedstate\";\n\nimport nodes from \"./nodes\"\nimport auth from \"./auth\"\nimport history from \"./history\";\nimport pledge from \"./pledge\"\nimport status from \"./status\"\nimport nodeGovernance from \"./nodeGovernance\"\n\nVue.use(Vuex);\n\nconst state = {\n    // used for a nicer UX: if this is true, ignore the values above, we probably don't know the actual values yet\n    tryingToConnect: false,\n    mmIsOpen: false,\n\n    displaySnackbar: false,\n    snackbarMessage: \"\",\n    snackbarColor: \"error\",\n    config: undefined\n}\n\nconst store = new Vuex.Store({\n    modules: {\n        nodes,\n        auth,\n        history,\n        pledge,\n        status,\n        nodeGovernance\n    },\n    plugins: [\n        pathify.plugin,\n        // createPersistedState({ key: \"wallets\", paths: [\"wallets\"] })\n    ],\n    state,\n    mutations: make.mutations(state),\n    actions: {\n        errorFlash({ commit }, message) {\n            commit(\"snackbarMessage\", message);\n            commit(\"snackbarColor\", \"error\");\n            commit(\"displaySnackbar\", true);\n        },\n        async fetchConfig({ commit }) {\n            try {\n                const res = await fetch(\"./config.json\")\n                if( res.status === 200 ) {\n                    const config = await res.json();\n                    commit(\"config\", await cleanUpConfig(config))\n                }\n            } catch (error) {\n                commit(\"config\", undefined)\n            }\n        }\n    }\n});\nexport default store;","\nexport class AsyncLocalStorage {\n  constructor(keys) {\n    this.keyList = keys || [];\n  }\n  async getItem(key) {\n    if (!key) return;\n    if (!this.keyList.includes(key)) this.keyList.push(key);\n    const v = window.localStorage.getItem(key);\n    if (!v) return undefined;\n    return JSON.parse(v);\n  }\n  async setItem(key, value) {\n    if (!key) return;\n    if (!this.keyList.includes(key)) this.keyList.push(key);\n    if (!value) window.localStorage.removeItem(key)\n    else window.localStorage.setItem(key, JSON.stringify(value));\n    return;\n  }\n  async getAll() {\n    const result = {};\n    for (const key of this.keyList) {\n      result[key] = await this.getItem(key);\n    }\n    return result\n  }\n  async setAll(group) {\n    for (const key of Object.keys(group)) {\n      await this.setItem(key, group[key]);\n    }\n  }\n}\n","import Web3 from \"web3\";\nimport { Web3FunctionProvider } from \"@saturn-chain/web3-functions\";\nimport { Web3CustodyFunctionProvider } from \"@saturn-chain/web3-custody-functions\";\nimport { WalletCustodyApiImpl } from \"@saturn-chain/wallet-custody-rest-api\";\nimport allContracts from \"sc-carbon-footprint\";\nimport $store from \"@/store/index\";\nimport { AsyncLocalStorage } from \"./async-local-storage\";\n\nconst LocalStorage = new AsyncLocalStorage();\n\n\nexport function getWeb3ProviderFromUrl(url) {\n    const web3 = new Web3(url)\n    return web3.currentProvider;\n}\n\nexport async function getWalletBalance(walletAddress) {\n    return await new Web3($store.get(\"auth/provider\")).eth.getBalance(walletAddress);\n    // const wallet = new Web3Wallet(Web3, walletAddress);\n    // return await wallet.getBalance();\n}\n\nexport const governanceAddress = \"0x0000000000000000000000000000000000000100\";\n\nexport function getContractInstanceByName(contractName) {\n    const contract = allContracts.get(contractName);\n    const instance = contract.at(governanceAddress);\n    console.log(\"Instance\", instance);\n    return instance;\n}\n\nexport function getContractInstance() {\n    return getContractInstanceByName(\"Governance\");\n}\n\nexport function getCustodyApi() {\n    const custodyUrl = $store.get(\"auth/providerDirect\").custodyApiUrl;\n    const custody = new WalletCustodyApiImpl(custodyUrl, \"eth\");\n    return custody;    \n}\n\nexport async function verifyCustodyAuthentication(wallet, password) {\n    const savedWallets = (await LocalStorage.getItem(\"custody.wallets\")) || [];\n    savedWallets.unshift(wallet);\n    LocalStorage.setItem(\"custody.wallets\", savedWallets)\n    const api = getCustodyApi();\n    const token = await handleMMResponse(api.authenticate(wallet, password));\n    return token\n}\n\nexport async function getCustodyLastWallets() {\n    return (await LocalStorage.getItem(\"custody.wallets\")) || [];\n}\n\nexport function intf(provider) {\n    // TODO (suggestion): This approach work, but why not storing in the \"store\" the intf result instead of the web3 provider ?\n    //      you would save writing the intf(provider)\n    if (!provider) provider = $store.get(\"auth/provider\");\n    if (!provider) throw new Error(\"Should not be calling the api functions without a provider connected\")\n    const model = $store.get(\"auth/providerModel\");\n    if (model == \"metamask\") {\n        return new Web3FunctionProvider(provider, (list) => Promise.resolve(list[0]))\n    }\n    if (model == \"direct\") {\n        const wallet = $store.get(\"auth/wallet\");\n        if (wallet) {\n            const custody = getCustodyApi();\n            const authFunction = $store.state.auth.walletAuthenticationFunction;\n            const i = new Web3CustodyFunctionProvider(provider, custody, wallet, authFunction );\n            \n            return i;\n        } else {\n            // returns a fake identity using any address. Only read function will be available\n            return new Web3FunctionProvider(provider, ()=>Promise.resolve(governanceAddress))\n        }\n    }\n    throw new Error(\"should not be calling the api functions without deciding the provider (metamask or direct)\")\n}\n\nexport async function readOnlyCall(methodName, ...args) {\n    return readOnlyCallWithOptions(methodName, { maxGas: 10000000 }, ...args)\n}\n\nexport async function readOnlyCallWithOptions(methodName, options, ...args) {\n    const provider = $store.get(\"auth/provider\");\n    const contract = $store.get(\"auth/contract\");\n    if (!(methodName in contract)) return Promise.reject(new Error(`Method ${methodName} does not exists in contract`));\n    return contract[methodName](\n        intf(provider).call(options),\n        ...args\n    );\n}\n\nexport function writeCall(methodName, ...args) {// return writeCallWithOptions(methodName, {maxGas: 1000000}, ...args);\n    return writeCallWithOptions(methodName, {}, ...args);\n}\n\nfunction convertMMErrorMessage(message) {\n    if(typeof message !== \"string\") message = `\\n {\"message\":\"invalid error message\"}`;\n    let split = message.split(\"\\n\");\n    if(split.length==1) split =  `\\n ${JSON.stringify({message})}`.split('\\n');\n    try {\n        const obj = JSON.parse(split.splice(1).join(\" \"))\n        return obj;\n    } catch (error) {\n        return {\n            message: \"invalid JSON message\"\n        }\n    }\n}\n\nexport function writeCallWithOptions(methodName, options, ...args) {\n    const wallet = $store.get(\"auth/wallet\");\n    if (!wallet) {\n        return Promise.reject(new Error(\"You are not authenticated with a wallet, you cannot update the blockchain\"));\n    }\n    const provider = $store.get(\"auth/provider\");\n    const contract = $store.get(\"auth/contract\");\n    if (!(methodName in contract)) return Promise.reject(new Error(`Method ${methodName} does not exists in contract`));\n\n    return new Promise( (resolve, reject)=>{\n        // First test the execution with the node using the call approach\n        readOnlyCallWithOptions(methodName, options, ...args)\n        .then(async v=>{\n            console.log(\"Tested call\", options, v)\n            resolve(\n                // as it succeeded, try executing it as a transaction\n                await contract[methodName](\n                    intf(provider).send(options),\n                    ...args\n                )\n            )\n        })\n        .catch(e => {\n            const err = convertMMErrorMessage(e.message)\n            reject(err)\n        })\n    });\n}\n\nexport async function handleMMResponse(promise, errorCallback) {\n    let response = null;\n    try {\n        $store.set(\"mmIsOpen\", true);\n        response = await promise;\n    }\n    catch (err) {\n        console.warn(\"Submitted transaction failed with error:\", err);\n        $store.dispatch(\"errorFlash\", err.message);\n        errorCallback && errorCallback(err);\n    }\n    finally {\n        $store.set(\"mmIsOpen\", false);\n    }\n    return response;\n}\n\n// Not used currently but lets you run any arbitrary code and the mmIsOpen flag is handled automatically\n// aswell as the error flash production if you decide to trigger an exception.\nexport async function handleMM(func) {\n    try {\n        $store.set(\"mmIsOpen\", true);\n        await func();\n    }\n    catch (err) {\n        console.log(err);\n        $store.dispatch(\"errorFlash\", err.message);\n    }\n    finally {\n        $store.set(\"mmIsOpen\", false);\n    }\n}","<template>\n  <div>\n    <v-btn color=\"teal\" dark @click=\"openMetaMaskConnectionDialog\"\n      v-if=\"hasProviderMetamask\"\n      >Connect Metamask Wallet</v-btn\n    >\n    <br><br>\n    <div v-if=\"hasProviderDirect\">\n      <v-btn color=\"teal\" dark @click=\"prepareOpenWeb3DirectConnectionDialog\"\n        >Connect with below configuration</v-btn\n      > <br><br>\n      <v-select\n          v-model=\"selectedNetwork\"\n          :hint=\"`node: ${selectedNetwork.nodeUrl}; custody: ${selectedNetwork.walletCustodyAPIBaseUrl}`\"\n          :items=\"networks\"\n          item-text=\"name\"\n          item-value=\"nodeUrl\"\n          persistent-hint\n          return-object\n          single-line\n        ></v-select>\n      <div v-if=\"hasCustodyApi\">\n        <br>\n        <v-combobox\n              label=\"Enter the wallet address\"\n              placeholder=\"capture your wallet address\"\n              outlined counter clearable\n              :search-input=\"wallet\"\n              @update:search-input=\"updateWallet\"\n              :items=\"wallets\"\n            ></v-combobox>\n        <v-text-field\n              label=\"Enter the wallet password\"\n              placeholder=\"capture your wallet password\"\n              outlined \n              :type=\"show?'text' : 'password'\"\n              @click:append=\"show = !show\"\n              v-model=\"password\"\n            ></v-text-field>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport { call } from \"vuex-pathify\";\nimport { getCustodyLastWallets } from \"../lib/api\";\nimport { getDefaultNetwork, getNetworkList } from \"../lib/config-file\";\n\nexport default {\n  data() {\n    return {\n      wallet: undefined,\n      wallets: [],\n      networks: [],\n      selectedNetwork: {name: \"undefined\"},\n      password: undefined,\n      show: false,\n    }\n  },\n  async mounted() {\n    const wallets = await getCustodyLastWallets();\n    if (wallets.length>0) this.wallet = wallets[0];\n    this.wallets = wallets;\n\n    const config = this.$store.get(\"config\");\n    this.networks = getNetworkList(config);\n    this.selectedNetwork = getDefaultNetwork(config);\n  },\n  computed: {\n    hasProviderMetamask() {\n      if (this.$store.state.auth.providerMetamask) return true;\n      else return false;\n    },\n    hasProviderDirect() {\n      if (this.$store.state.auth.providerDirect) return true;\n      else return false;\n    },\n    hasCustodyApi() {\n      if (this.$store.state.auth.providerDirect && this.$store.state.auth.providerDirect.custodyModel == \"api\" ) return true;\n      else return false;\n    },\n  },\n  methods: {\n    ...call(\"auth\", [\"openMetaMaskConnectionDialog\", \"openWeb3DirectConnectionDialog\"]),\n    updateWallet(v) {\n      this.wallet = v;\n    },\n    async prepareOpenWeb3DirectConnectionDialog() {\n      await this.openWeb3DirectConnectionDialog({wallet: this.wallet, password: this.password, nodeUrl: this.selectedNetwork.nodeUrl});\n      this.wallets = await getCustodyLastWallets();\n    }\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auth.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auth.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Auth.page.vue?vue&type=template&id=7a5f7692&\"\nimport script from \"./Auth.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Auth.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('v-card',{staticClass:\"ma-6\",attrs:{\"height\":\"200\",\"width\":\"200\"}},[_c('v-card-subtitle',[_vm._v(\"Block\")]),_c('v-card-title',{staticClass:\"align-center\"},[_c('span',{staticClass:\"text-h3 ma-auto\"},[_vm._v(_vm._s(_vm.lastBlock && _vm.lastBlock.block.number))])]),_c('v-card-subtitle',[_vm._v(_vm._s(_vm.averageDelaySec.toFixed(2))+\" sec\")]),_c('v-card-subtitle',[_vm._v(\"Total CTC: \"+_vm._s(_vm.totalCrypto.toFixed(4)))])],1)],1),_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('v-card',{staticClass:\"ma-6\",attrs:{\"height\":\"200\",\"width\":\"200\"}},[_c('v-card-subtitle',[_vm._v(\"Nodes\")]),_c('v-card-title',{staticClass:\"align-center\"},[_c('span',{staticClass:\"text-h2 ma-auto\"},[_vm._v(_vm._s(_vm.nbOfNodes))])])],1)],1),_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('v-card',{staticClass:\"ma-6\",attrs:{\"height\":\"200\",\"width\":\"200\"}},[_c('v-card-subtitle',[_vm._v(\"Total footprint\")]),_c('v-card-title',{staticClass:\"align-center\"},[_c('span',{staticClass:\"text-h2 ma-auto\"},[_vm._v(_vm._s(_vm.totalFootprint))])]),_c('v-card-subtitle',[_vm._v(\"Average: \"+_vm._s((_vm.totalFootprint / _vm.nbOfNodes).toFixed(2)))])],1)],1),(_vm.lastBlock)?_c('v-col',{staticClass:\"pa-8\",attrs:{\"cols\":\"12\"}},[_c('v-card-title',[_vm._v(\"Footprint for each of the nodes\")]),_c('v-card-subtitle',[_vm._v(\" Last block sealer: \"+_vm._s(_vm.lastBlock.sealer.address)+\" / \"+_vm._s(_vm.lastBlock.sealer.vanity.custom)+\". Footprint: \"+_vm._s(_vm.lastBlock.sealer.footprint)+\" \")]),_c('v-sparkline',{attrs:{\"auto-draw\":\"\",\"type\":\"bar\",\"auto-draw-duration\":500,\"auto-line-width\":\"\",\"value\":_vm.sealersFootprint,\"label-size\":\"3\",\"gradient\":['#f72047', '#ffd200', '#1feaea'],\"padding\":\"8\"},scopedSlots:_vm._u([{key:\"label\",fn:function(item){return [_vm._v(\" \"+_vm._s(_vm.sealersLabels[item.index])+\" - \"+_vm._s(item.value)+\" \")]}}],null,false,328237270)})],1):_vm._e(),(_vm.lastBlock)?_c('v-col',{staticClass:\"pa-8\",attrs:{\"cols\":\"12\"}},[_c('v-card-title',[_vm._v(\"Block reward per node\")]),_c('v-card-subtitle',[_vm._v(\" Last block sealer: \"+_vm._s(_vm.lastBlock.sealer.address)+\" / \"+_vm._s(_vm.lastBlock.sealer.vanity.custom)+\". Footprint: \"+_vm._s(_vm.lastBlock.sealer.footprint)+\" \")]),_c('v-sparkline',{attrs:{\"auto-draw\":\"\",\"type\":\"bar\",\"auto-draw-duration\":500,\"auto-line-width\":\"\",\"value\":_vm.sealersReward,\"label-size\":\"3\",\"gradient\":['#42b3f4'],\"padding\":28},scopedSlots:_vm._u([{key:\"label\",fn:function(item){return [_vm._v(\" \"+_vm._s(_vm.lastBlock.sealer.address == _vm.sealersAddress[item.index] ? \"[\" : \"\")+\" \"+_vm._s(_vm.sealersAddress[item.index])+\" \"+_vm._s(_vm.lastBlock.sealer.address == _vm.sealersAddress[item.index] ? \"]\" : \"\")+\" - \"+_vm._s(Number.parseFloat(item.value).toFixed(2))+\" \")]}}],null,false,2512685418)})],1):_vm._e(),_c('v-col',{staticClass:\"pa-8\",attrs:{\"cols\":\"12\"}},[_c('v-card-title',[_vm._v(\"CTC Creation by block \")]),_c('v-card-subtitle',[_vm._v(\"Last reward: \"+_vm._s(_vm.rewardsByBlock[_vm.rewardsByBlock.length - 1].toFixed(4))+\" CTC; Average: \"+_vm._s(_vm.averageReward.toFixed(4))+\" CTC; Last \"+_vm._s(_vm.rewardsByBlock.length - 1)+\" blocks\")]),_c('v-sparkline',{attrs:{\"auto-draw\":\"\",\"type\":\"trend\",\"auto-draw-duration\":0,\"line-width\":0.3,\"value\":_vm.rewardsByBlock,\"label-size\":\"3\",\"gradient\":['#42b3f4']}})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-layout row wrap>\n    <v-row>\n      <v-col cols=\"4\">\n        <v-card height=\"200\" width=\"200\" class=\"ma-6\">\n          <v-card-subtitle>Block</v-card-subtitle>\n          <v-card-title class=\"align-center\">\n            <span class=\"text-h3 ma-auto\">{{\n              lastBlock && lastBlock.block.number\n            }}</span>\n          </v-card-title>\n          <v-card-subtitle\n            >{{ averageDelaySec.toFixed(2) }} sec</v-card-subtitle\n          >\n          <v-card-subtitle\n            >Total CTC: {{ totalCrypto.toFixed(4) }}</v-card-subtitle\n          >\n        </v-card>\n      </v-col>\n      <v-col cols=\"4\">\n        <v-card height=\"200\" width=\"200\" class=\"ma-6\">\n          <v-card-subtitle>Nodes</v-card-subtitle>\n          <v-card-title class=\"align-center\">\n            <span class=\"text-h2 ma-auto\">{{ nbOfNodes }}</span>\n          </v-card-title>\n        </v-card>\n      </v-col>\n      <v-col cols=\"4\">\n        <v-card height=\"200\" width=\"200\" class=\"ma-6\">\n          <v-card-subtitle>Total footprint</v-card-subtitle>\n          <v-card-title class=\"align-center\">\n            <span class=\"text-h2 ma-auto\">{{ totalFootprint }}</span>\n          </v-card-title>\n          <v-card-subtitle\n            >Average:\n            {{ (totalFootprint / nbOfNodes).toFixed(2) }}</v-card-subtitle\n          >\n        </v-card>\n      </v-col>\n      <v-col cols=\"12\" class=\"pa-8\" v-if=\"lastBlock\">\n        <v-card-title>Footprint for each of the nodes</v-card-title>\n        <v-card-subtitle>\n          Last block sealer: {{ lastBlock.sealer.address }} /\n          {{ lastBlock.sealer.vanity.custom }}. Footprint:\n          {{ lastBlock.sealer.footprint }}\n        </v-card-subtitle>\n        <v-sparkline\n          auto-draw\n          type=\"bar\"\n          :auto-draw-duration=\"500\"\n          auto-line-width\n          :value=\"sealersFootprint\"\n          label-size=\"3\"\n          :gradient=\"['#f72047', '#ffd200', '#1feaea']\"\n          padding=\"8\"\n        >\n          <template v-slot:label=\"item\">\n            {{ sealersLabels[item.index] }} -\n            {{ item.value }}\n          </template>\n        </v-sparkline>\n      </v-col>\n      <v-col cols=\"12\" class=\"pa-8\" v-if=\"lastBlock\">\n        <v-card-title>Block reward per node</v-card-title>\n        <v-card-subtitle>\n          Last block sealer: {{ lastBlock.sealer.address }} /\n          {{ lastBlock.sealer.vanity.custom }}. Footprint:\n          {{ lastBlock.sealer.footprint }}\n        </v-card-subtitle>\n        <v-sparkline\n          auto-draw\n          type=\"bar\"\n          :auto-draw-duration=\"500\"\n          auto-line-width\n          :value=\"sealersReward\"\n          label-size=\"3\"\n          :gradient=\"['#42b3f4']\"\n          :padding=\"28\"\n        >\n          <template v-slot:label=\"item\">\n            {{\n              lastBlock.sealer.address == sealersAddress[item.index] ? \"[\" : \"\"\n            }}\n            {{ sealersAddress[item.index] }}\n            {{\n              lastBlock.sealer.address == sealersAddress[item.index] ? \"]\" : \"\"\n            }}\n            -\n            {{ Number.parseFloat(item.value).toFixed(2) }}\n          </template>\n        </v-sparkline>\n      </v-col>\n\n      <v-col cols=\"12\" class=\"pa-8\">\n        <v-card-title>CTC Creation by block </v-card-title>\n        <v-card-subtitle\n          >Last reward:\n          {{ rewardsByBlock[rewardsByBlock.length - 1].toFixed(4) }} CTC;\n          Average: {{ averageReward.toFixed(4) }} CTC; Last\n          {{ rewardsByBlock.length - 1 }} blocks</v-card-subtitle\n        >\n        <v-sparkline\n          auto-draw\n          type=\"trend\"\n          :auto-draw-duration=\"0\"\n          :line-width=\"0.3\"\n          :value=\"rewardsByBlock\"\n          label-size=\"3\"\n          :gradient=\"['#42b3f4']\"\n        ></v-sparkline>\n      </v-col>\n    </v-row>\n  </v-layout>\n</template>\n\n<script>\nimport { get, call } from \"vuex-pathify\";\n\nexport default {\n  data: () => {\n    return {\n      nbBlocksToKeep: 100,\n      sealerMap: new Map(),\n      blocks: [],\n      //   blockNumber: 0,\n      //   sealersLabels: [],\n      //   sealersAddress: [],\n      //   sealersFootprint: [],\n      sealersReward: [],\n    };\n  },\n  async mounted() {\n    this.fetchAllValues();\n    this.fetchChainInformations().then(this.subscribeToChainUpdates);\n  },\n  computed: {\n    ...get(\"nodes\", [\n      \"sealers\",\n      \"nbOfNodes\",\n      \"lastBlock\",\n      \"totalFootprint\",\n      \"totalCrypto\",\n      \"rewardsByBlock\",\n      \"averageReward\",\n      \"averageDelaySec\",\n      \"lastBlock\",\n    ]),\n    sealersFootprint() {\n      return this.sealers.map((s) => s.footprint);\n    },\n    sealersAddress() {\n      return this.sealers.map((s) => s.address);\n    },\n    sealersLabels() {\n      return this.sealers.map((s) => s.vanity.custom);\n    },\n  },\n  methods: {\n    ...call(\"nodes\", [\n      \"fetchAllValues\",\n      \"fetchChainInformations\",\n      \"subscribeToChainUpdates\",\n    ]),\n    // ...mapActions([\"goToPage\"]),\n    processBlockData(data) {\n      // console.log(data);\n\n      let blocks = this.blocks.filter(\n        (d) =>\n          d.block.number > data.block.number - this.nbBlocksToKeep &&\n          d.block.number != data.block.number\n      );\n      blocks = blocks.sort((d1, d2) => d1.block.number - d2.block.number);\n      blocks.push(data);\n      this.blocks = blocks;\n\n      const sealerInfo = {\n        address: data.sealer.address,\n        info: data.sealer.vanity.custom,\n        footprint: data.sealer.footprint,\n        balance: data.sealer.balance,\n        reward: data.sealer.lastReward,\n      };\n      this.sealerMap.set(sealerInfo.address, sealerInfo);\n      this.totalFootprint = data.totalFootprint;\n      this.totalCrypto = data.totalCrypto;\n      this.nbOfNodes = data.nbOfNodes;\n      this.blockNumber = data.block.number;\n      this.updateSealersArrays();\n    },\n    updateSealersArrays() {\n      let sealers = [];\n      for (const k of this.sealerMap.keys()) {\n        const info = this.sealerMap.get(k);\n        sealers.push(info);\n      }\n      sealers = sealers.sort((i1, i2) => i1.footprint - i2.footprint);\n\n      this.sealersLabels = sealers.map((info) => info.info);\n      this.sealersAddress = sealers.map((info) => info.address);\n      this.sealersFootprint = sealers.map((info) => info.footprint);\n      this.sealersReward = sealers.map((info) => info.reward);\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dashboard.page.vue?vue&type=template&id=3586e4f3&\"\nimport script from \"./Dashboard.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Dashboard.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-col',[_c('v-card',[_c('v-card-title',[_vm._v(\"Number of Auditors\")]),_c('v-card-text',[_vm._v(_vm._s(_vm.nbAuditors))])],1)],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Auditors\")]),_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.auditors,\"headers\":_vm.tableHeadersAuditors,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.status\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.isApproved ? \"Oui\" : \"Non\"))])]}},{key:\"item.votes\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.nbVotes)+\" / \"+_vm._s(item.minVotes)+\" avant \"+_vm._s(item.isApproved ? \"Rvocation\" : \"Approbation\"))])]}},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-btn',{attrs:{\"color\":\"primary\",\"small\":\"\"},on:{\"click\":function($event){return _vm.nodeVote(item)}}},[_vm._v(\" \"+_vm._s(_vm.computeLabel(item))+\" \")])]}}])})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row>\n\n    <v-col>\n      <v-card>\n        <v-card-title>Number of Auditors</v-card-title>\n        <v-card-text>{{ nbAuditors }}</v-card-text>\n      </v-card>\n    </v-col>\n\n    <v-col cols=\"12\">\n      <v-card>\n        <v-card-title>Auditors</v-card-title>\n        <v-card-text>\n          <v-data-table\n              :items=\"auditors\"\n              :headers=\"tableHeadersAuditors\"\n              :items-per-page=\"-1\"\n              hide-default-footer\n          >\n            <template v-slot:item.status=\"{ item }\">\n              <div>{{ item.isApproved ? \"Oui\" : \"Non\" }}</div>\n            </template>\n            <template v-slot:item.votes=\"{ item }\">\n              <div>{{ item.nbVotes }} / {{ item.minVotes }} avant {{ item.isApproved ? \"Rvocation\" : \"Approbation\" }}</div>\n            </template>\n            <template v-slot:item.actions=\"{ item }\">\n              <v-btn\n                  color=\"primary\"\n                  small\n                  @click=\"nodeVote(item)\"\n              >\n                {{ computeLabel(item) }}\n              </v-btn>\n            </template>\n          </v-data-table>\n        </v-card-text>\n      </v-card>\n    </v-col>\n\n  </v-row>\n</template>\n\n<script>\nimport { get, call } from \"vuex-pathify\";\n\nexport default {\n  data: () => ({\n    tableHeadersAuditors: [\n      { text: \"Auditor\", value: \"address\" },\n      { text: \"Approuv\", value: \"status\" },\n      { text: \"Votes courants\", value: \"votes\" },\n      { text: \"Actions\", value: \"actions\", sortable: false },\n    ],\n    switchState: false,\n\n  }),\n  computed: {\n    ...get(\"nodeGovernance\", [\"nbAuditors\", \"auditors\"]),\n  },\n\n  async mounted() {\n    await this.fetchAllAuditorsValues();\n  },\n  methods: {\n    ...call(\"nodeGovernance\", [\"fetchAllAuditorsValues\", \"voteAuditor\"]),\n\n    computeLabel(item) {\n      // auditor is approved, vote for unapproved\n      if (item.isApproved) {\n        if (item.currentVote) {\n          return \"Voter pour rvoquer\";\n        }\n        return \"Retirer mon vote de rvocation\";\n      }\n      // auditor is not approved, vote for approved\n      if (item.currentVote) {\n        return \"Retirer mon vote de d'approbation\";\n      }\n      return \"Voter pour approuver\";\n    },\n\n    async nodeVote(item) {\n      console.log(`address : ${item.address} / vote value : ${!item.currentVote}`);\n      try {\n        await this.voteAuditor({\n          auditorAddress: item.address,\n          accept: !item.currentVote\n        });\n        await this.fetchAllAuditorsValues();\n      } catch (error) {\n        console.log(error);\n        await this.fetchAllAuditorsValues();\n        throw error;\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auditors.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auditors.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Auditors.page.vue?vue&type=template&id=2fb3d706&\"\nimport script from \"./Auditors.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Auditors.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-col',[_c('v-card',[_c('v-card-title',[_vm._v(\"Number of Nodes\")]),_c('v-card-text',[_vm._v(_vm._s(_vm.nbOfNodes))])],1)],1),_c('v-col',[_c('v-card',[_c('v-card-title',[_vm._v(\"Total Footprint\")]),_c('v-card-text',[_vm._v(_vm._s(_vm.totalFootprint)+\" \")])],1)],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Nodes\")]),_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.sealers,\"headers\":_vm.tableHeaders,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.vanity\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(\"Address: \"+_vm._s(item.address))]),_c('div',[_vm._v(\"Name: \"+_vm._s(item.vanity.custom))])]}},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-btn',{attrs:{\"color\":\"primary\",\"small\":\"\"},on:{\"click\":function($event){return _vm.openUpdateFootprintDialog(item)}}},[_vm._v(\" Update footprint \")])]}}])}),_c('v-dialog',{attrs:{\"width\":\"500\"},model:{value:(_vm.footprintDialog),callback:function ($$v) {_vm.footprintDialog=$$v},expression:\"footprintDialog\"}},[(_vm.selectedSealer)?_c('v-card',[_c('v-card-title',[_vm._v(\" Update Footprint for \"+_vm._s(_vm.selectedSealer.address)+\" \")]),_c('v-card-text',[_c('v-row',[_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"6\"}},[_c('v-text-field',{attrs:{\"type\":\"number\",\"outlined\":\"\",\"dense\":\"\"},model:{value:(_vm.newFootprintValue),callback:function ($$v) {_vm.newFootprintValue=$$v},expression:\"newFootprintValue\"}})],1),_c('v-col',{staticClass:\"pb-0\"},[_c('v-btn',{on:{\"click\":function($event){_vm.footprintDialog = false}}},[_vm._v(\"Cancel\")])],1),_c('v-col',{staticClass:\"pb-0\"},[_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.submitNewFootprint}},[_vm._v(\" Submit \")])],1)],1)],1)],1):_vm._e()],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row>\n    <v-col>\n      <v-card>\n        <v-card-title>Number of Nodes</v-card-title>\n        <v-card-text>{{ nbOfNodes }}</v-card-text>\n      </v-card>\n    </v-col>\n    <v-col>\n      <v-card>\n        <v-card-title>Total Footprint</v-card-title>\n        <v-card-text>{{ totalFootprint }} </v-card-text>\n      </v-card>\n    </v-col>\n    <v-col cols=\"12\">\n      <v-card>\n        <v-card-title>Nodes</v-card-title>\n        <v-card-text>\n          <v-data-table\n            :items=\"sealers\"\n            :headers=\"tableHeaders\"\n            :items-per-page=\"-1\"\n            hide-default-footer\n          >\n            <template v-slot:item.vanity=\"{ item }\">\n              <div>Address: {{ item.address }}</div>\n              <div>Name: {{ item.vanity.custom }}</div>\n            </template>\n            <!-- \n            <template v-slot:item.footprint=\"{ item }\">\n\t\t\t\t{{ item.footprint }}\n              <v-edit-dialog\n                @update:return-value=\"setFootprint\"\n                large\n                persistent\n              >\n                {{ item.footprint }}\n                <template v-slot:input>\n                  <v-text-field\n                    :value=\"item.footprint\"\n                    label=\"Edit\"\n                    single-line\n                    type=\"number\"\n                  ></v-text-field>\n                </template>\n              </v-edit-dialog>\n            </template> -->\n            <template v-slot:item.actions=\"{ item }\">\n              <v-btn\n                color=\"primary\"\n                small\n                @click=\"openUpdateFootprintDialog(item)\"\n              >\n                Update footprint\n              </v-btn>\n            </template>\n          </v-data-table>\n\n          <v-dialog v-model=\"footprintDialog\" width=\"500\">\n            <v-card v-if=\"selectedSealer\">\n              <v-card-title>\n                Update Footprint for {{ selectedSealer.address }}\n              </v-card-title>\n              <v-card-text>\n                <v-row>\n                  <v-col cols=\"6\" class=\"pb-0\">\n                    <v-text-field\n                      type=\"number\"\n                      outlined\n                      dense\n                      v-model=\"newFootprintValue\"\n                    ></v-text-field>\n                  </v-col>\n                  <v-col class=\"pb-0\">\n                    <v-btn @click=\"footprintDialog = false\">Cancel</v-btn>\n                  </v-col>\n                  <v-col class=\"pb-0\">\n                    <v-btn color=\"primary\" @click=\"submitNewFootprint\">\n                      Submit\n                    </v-btn>\n                  </v-col>\n                </v-row>\n              </v-card-text>\n            </v-card>\n          </v-dialog>\n        </v-card-text>\n      </v-card>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nimport { get, call } from \"vuex-pathify\";\n\nexport default {\n  data: () => ({\n    tableHeaders: [\n      { text: \"Node\", value: \"vanity\" },\n      { text: \"Footprint\", value: \"footprint\" },\n      { text: \"Actions\", value: \"actions\", sortable: false },\n    ],\n    tableHeadersAuditors: [\n      { text: \"Auditor\", value: \"address\" },\n      { text: \"Votes courants\", value: \"votes\" },\n      { text: \"Mon Vote\", value: \"actions\", sortable: false },\n    ],\n    footprintDialog: false,\n    selectedSealer: null,\n    newFootprintValue: 0,\n  }),\n  computed: {\n    ...get(\"nodes\", [\"nbOfNodes\", \"totalFootprint\", \"sealers\"]),\n  },\n\n  mounted() {\n    this.fetchAllValues();\n  },\n  methods: {\n    ...call(\"nodes\", [\"fetchAllValues\", \"updateFootprint\"]),\n    openUpdateFootprintDialog(sealer) {\n      this.selectedSealer = sealer;\n      this.newFootprintValue = sealer.footprint;\n      this.footprintDialog = true;\n    },\n\n    async submitNewFootprint() {\n      this.footprintDialog = false;\n      await this.updateFootprint({\n        sealerAddress: this.selectedSealer.address,\n        footprint: this.newFootprintValue,\n      });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Audit.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Audit.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Audit.page.vue?vue&type=template&id=2ca433a3&\"\nimport script from \"./Audit.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Audit.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-tabs',{attrs:{\"centered\":\"\",\"slider-color\":\"primary\"},model:{value:(_vm.currentTab),callback:function ($$v) {_vm.currentTab=$$v},expression:\"currentTab\"}},[_c('v-tab',{attrs:{\"href\":\"#footprints\"}},[_vm._v(\" Footprints \")]),_c('v-tab',{attrs:{\"href\":\"#pledges\"}},[_vm._v(\" Pledges \")])],1),_c('v-tabs-items',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.currentTab),callback:function ($$v) {_vm.currentTab=$$v},expression:\"currentTab\"}},[_c('v-tab-item',{attrs:{\"value\":\"footprints\"}},[_c('v-card',[_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.footprintHistory,\"headers\":_vm.footprintTableHeaders,\"items-per-page\":-1,\"hide-default-footer\":\"\"}})],1)],1)],1),_c('v-tab-item',{attrs:{\"value\":\"pledges\"}},[_c('v-card',[_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.pledgeHistory,\"headers\":_vm.pledgeTableHeaders,\"items-per-page\":-1,\"hide-default-footer\":\"\"}})],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row>\n    <v-tabs v-model=\"currentTab\" centered slider-color=\"primary\">\n      <v-tab href=\"#footprints\"> Footprints </v-tab>\n      <v-tab href=\"#pledges\"> Pledges </v-tab>\n    </v-tabs>\n\n    <v-tabs-items v-model=\"currentTab\" style=\"width: 100%\">\n      <v-tab-item value=\"footprints\">\n        <v-card>\n          <v-card-text>\n            <v-data-table\n              :items=\"footprintHistory\"\n              :headers=\"footprintTableHeaders\"\n              :items-per-page=\"-1\"\n              hide-default-footer\n            >\n            </v-data-table>\n          </v-card-text>\n        </v-card>\n      </v-tab-item>\n      <v-tab-item value=\"pledges\">\n        <v-card>\n          <v-card-text>\n            <v-data-table\n              :items=\"pledgeHistory\"\n              :headers=\"pledgeTableHeaders\"\n              :items-per-page=\"-1\"\n              hide-default-footer\n            >\n            </v-data-table>\n          </v-card-text>\n        </v-card>\n      </v-tab-item>\n    </v-tabs-items>\n  </v-row>\n</template>\n\n<script>\nimport { get, call } from \"vuex-pathify\";\n\nexport default {\n  data: () => ({\n    currentTab: \"footprints\",\n    footprintTableHeaders: [\n      { text: \"Block N\", value: \"blockNumber\" },\n      { text: \"Node address\", value: \"node\" },\n      { text: \"Assigned Footprint\", value: \"footprint\" },\n    ],\n    pledgeTableHeaders: [\n      { text: \"Block N\", value: \"blockNumber\" },\n      { text: \"Auditor address\", value: \"node\" },\n      { text: \"Pledge\", value: \"pledge\" },\n    ],\n  }),\n\n  computed: {\n    ...get(\"history\", [\"footprintHistory\", \"pledgeHistory\"]),\n  },\n\n  async mounted() {\n    this.fetchAllValues();\n  },\n\n  methods: {\n    ...call(\"history\", [\"fetchAllValues\"]),\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./History.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./History.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./History.page.vue?vue&type=template&id=3dd16a1f&\"\nimport script from \"./History.page.vue?vue&type=script&lang=js&\"\nexport * from \"./History.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',{attrs:{\"wrap\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Current Wallet Balance\")]),_c('v-card-text',[_vm._v(\" \"+_vm._s(_vm.toEther(_vm.balance))+\"CRC \")])],1)],1),_c('v-col',{attrs:{\"cols\":\"8\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Pledge Informations\")]),_c('v-card-text',[_c('div',[_vm._v(\" Min pledge to start audit: \"+_vm._s(_vm.toEther(_vm.minPledgeAmount))+\"CRC \")]),_c('div',[_vm._v(\"Current pledged amount: \"+_vm._s(_vm.pledgedAmount)+\"CRC\")]),_c('v-btn',{attrs:{\"small\":\"\",\"disabled\":_vm.pledgedAmount === 0 || !_vm.redeemBool},on:{\"click\":_vm.redeemPledge}},[_vm._v(\"Redeem Pledge\")])],1)],1)],1),_c('v-col',[_c('v-card',[_c('v-card-title',[_vm._v(\"Pledge Actions\")]),_c('v-card-text',[_c('v-row',[_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"12\"}},[_c('v-text-field',{attrs:{\"dense\":\"\",\"hide-details\":\"\",\"outlined\":\"\",\"type\":\"number\",\"min\":0,\"placeholder\":\"Amount to add to the pledge\"},model:{value:(_vm.amountToAdd),callback:function ($$v) {_vm.amountToAdd=$$v},expression:\"amountToAdd\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-btn',{staticStyle:{\"width\":\"100%\"},attrs:{\"small\":\"\"},on:{\"click\":_vm.pledgeMore}},[_vm._v(\"Pledge more\")])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row wrap>\n    <v-col cols=\"12\">\n      <v-card>\n        <v-card-title>Current Wallet Balance</v-card-title>\n        <v-card-text> {{ toEther(balance) }}&nbsp;CRC </v-card-text>\n      </v-card>\n    </v-col>\n    <v-col cols=\"8\">\n      <v-card>\n        <v-card-title>Pledge Informations</v-card-title>\n        <v-card-text>\n          <div>\n            Min pledge to start audit: {{ toEther(minPledgeAmount) }}&nbsp;CRC\n          </div>\n          <div>Current pledged amount: {{ pledgedAmount }}&nbsp;CRC</div>\n          <v-btn\n            small\n            @click=\"redeemPledge\"\n            :disabled=\"pledgedAmount === 0 || !redeemBool\"\n            >Redeem Pledge</v-btn\n          >\n        </v-card-text>\n      </v-card>\n    </v-col>\n    <v-col>\n      <v-card>\n        <v-card-title>Pledge Actions</v-card-title>\n        <v-card-text>\n          <v-row>\n            <v-col cols=\"12\" class=\"pb-0\">\n              <v-text-field\n                v-model=\"amountToAdd\"\n                dense\n                hide-details\n                outlined\n                type=\"number\"\n                :min=\"0\"\n                placeholder=\"Amount to add to the pledge\"\n            /></v-col>\n            <v-col cols=\"12\">\n              <v-btn small style=\"width: 100%\" @click=\"pledgeMore\"\n                >Pledge more</v-btn\n              >\n            </v-col>\n          </v-row>\n        </v-card-text>\n      </v-card>\n    </v-col>\n  </v-row>\n</template>\n<script>\nimport { get, call } from \"vuex-pathify\";\nimport { toEther } from \"@/lib/numbers\";\n\nexport default {\n  data: () => ({\n    intervalId: null,\n    amountToAdd: 0,\n  }),\n  computed: {\n    ...get(\"pledge\", [\n      \"balance\",\n      \"minPledgeAmount\",\n      \"pledgedAmount\",\n      \"redeemBool\",\n    ]),\n  },\n  mounted() {\n    this.fetchAllValues();\n    this.intervalId = setInterval(this.fetchAllValues, 60 * 1000);\n  },\n  beforeRouteLeave(to, from, next) {\n    clearInterval(this.intervalId);\n    next();\n  },\n  methods: {\n    toEther,\n    ...call(\"pledge\", [\"fetchAllValues\", \"addToPledge\", \"redeemPledge\"]),\n    async pledgeMore() {\n      await this.addToPledge(this.amountToAdd);\n      this.amountToAdd = 0;\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pledge.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pledge.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Pledge.page.vue?vue&type=template&id=013c990b&\"\nimport script from \"./Pledge.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Pledge.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"pa-md-4 mx-lg-auto\"},[_c('v-card-title',[_vm._v(\" Status \")]),(_vm.registered && _vm.approved)?_c('v-card-subtitle',{staticStyle:{\"color\":\"Green\"}},[_vm._v(\" APPROVED \")]):_vm._e(),(_vm.registered && !_vm.approved)?_c('v-card-subtitle',{staticStyle:{\"color\":\"red\"}},[_vm._v(\" AWAITING APPROVAL \")]):_vm._e(),(!_vm.registered)?_c('v-card-text',[_c('p',[_vm._v(\" You are not registered, please make sure to register \"),_c('v-btn',{staticClass:\"mx-2\",attrs:{\"small\":\"\",\"disabled\":_vm.mmIsOpen},on:{\"click\":_vm.selfRegister}},[_vm._v(\" Self register \")])],1)]):_vm._e(),(_vm.registered && !_vm.approved)?_c('v-card-text',[_c('p',{staticStyle:{\"color\":\"black\"}},[_vm._v(\" You have the total vote of \"+_vm._s(_vm.approbationVotes)+\" \")])]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-card class=\"pa-md-4 mx-lg-auto\">\n    <v-card-title> Status </v-card-title>\n    <v-card-subtitle style=\"color: Green\" v-if=\"registered && approved\">\n      APPROVED\n    </v-card-subtitle>\n    <v-card-subtitle style=\"color: red\" v-if=\"registered && !approved\">\n      AWAITING APPROVAL\n    </v-card-subtitle>\n    <v-card-text v-if=\"!registered\">\n      <p>\n        You are not registered, please make sure to register\n        <v-btn small class=\"mx-2\" @click=\"selfRegister\" :disabled=\"mmIsOpen\">\n          Self register\n        </v-btn>\n      </p>\n    </v-card-text>\n    <v-card-text v-if=\"registered && !approved\">\n      <p style=\"color: black\">\n        You have the total vote of {{ approbationVotes }}\n      </p>\n    </v-card-text>\n  </v-card>\n</template>\n\n<script>\nimport { get, call } from \"vuex-pathify\";\n\nexport default {\n  computed: {\n    mmIsOpen: get(\"mmIsOpen\"),\n    ...get(\"auth\", [\"registered\"]),\n    ...get(\"status\", [\"approved\", \"approbationVotes\"]),\n  },\n  mounted() {\n    this.fetchIsRegistered();\n    this.fetchIsApproved();\n    this.fetchApprobationVotes();\n  },\n  methods: {\n    ...call(\"auth\", [\"fetchIsRegistered\", \"selfRegister\"]),\n    ...call(\"status\", [\"fetchIsApproved\", \"fetchApprobationVotes\"]),\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Status.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Status.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Status.page.vue?vue&type=template&id=5d15b5f5&\"\nimport script from \"./Status.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Status.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport VueRouter from \"vue-router\";\n\nimport InstallMetaMask from \"@/pages/InstallMetaMask.page.vue\";\nimport Auth from \"@/pages/Auth.page.vue\";\n\nimport Dashboard from \"@/pages/Dashboard.page.vue\";\n\nimport Auditors from \"@/pages/Auditors.page.vue\";\n\nimport Audit from \"@/pages/Audit.page.vue\";\nimport History from \"@/pages/History.page.vue\";\nimport Pledge from \"@/pages/Pledge.page.vue\";\nimport Status from \"@/pages/Status.page.vue\";\n\nVue.use(VueRouter);\n\n\nconst approvedAuditor = ({ store }) => store.state.status.approved;\nconst isNode = ({ store }) => store.state.auth.isNode;\nconst isNotNode = ({ store }) => !isNode({ store });\nconst walletIsntConnected = ({ store }) => !store.state.auth.wallet;\n\nconst any = (...functions) => {\n    return (opts) => {\n        for (const f of functions) {\n            if (f(opts)) return true;\n        }\n        return false;\n    }\n}\n\n// The order actually matter because it will determine the order in the sidenav\nexport const routes = [\n    //Public\n    { name: \"dashboard\", path: \"/dashboard\", component: Dashboard, meta: { displayInSidenav: \"\" } },\n    // Auth\n    { name: \"installMetaMask\", path: \"/installmetamask\", component: InstallMetaMask },\n    {\n        name: \"authentication\", path: \"/auth\", component: Auth, meta: {\n            displayInSidenav: \"\",\n            hidden: ({ store }) => !walletIsntConnected({ store })\n        }\n    },\n    // Governance views\n    {\n        name: \"auditors\", path: \"/auditors\", component: Auditors, meta: {\n            displayInSidenav: \"Governance\",\n            restricted: isNode,\n            forceRedirectTo: \"dashboard\",\n            hidden: any(walletIsntConnected, isNotNode)\n        }\n    },\n    // Auditors views\n    {\n        name: \"status\", path: \"/status\", component: Status, meta: {\n            displayInSidenav: \"Audit\",\n            restricted: ({ store }) => !isNode({ store }),\n            forceRedirectTo: \"dashboard\",\n            hidden: any(walletIsntConnected, isNode)\n        }\n    },\n    {\n        name: \"pledge\", path: \"/pledge\", component: Pledge, meta: {\n            displayInSidenav: \"Audit\",\n            restricted: approvedAuditor,\n            forceRedirectTo: \"status\",\n            hidden: any(walletIsntConnected, isNode)\n        }\n    },\n    {\n        name: \"audit\", path: \"/audit\", component: Audit, meta: {\n            displayInSidenav: \"Audit\",\n            restricted: approvedAuditor,\n            forceRedirectTo: \"status\",\n            hidden: any(walletIsntConnected, isNode)\n        }\n    },\n    {\n        name: \"history\", path: \"/history\", component: History, meta: {\n            displayInSidenav: \"Audit\",\n            restricted: approvedAuditor,\n            forceRedirectTo: \"status\",\n            hidden: any(walletIsntConnected, isNode)\n        }\n    },\n    // GdC: For some unknown reason the redirection should not be 'authentication' directly but it works with dashboard\n    { path: \"*\", redirect: \"dashboard\" }\n]\n\nconst router = new VueRouter({\n    routes,\n    base: \"\",\n    // mode: \"history\"\n})\n\nexport default router;","<template>\n  <v-navigation-drawer v-model=\"drawer\" app clipped flat>\n    <v-divider></v-divider>\n    <v-list>\n      <v-list-item-group :value=\"$route.name\" mandatory color=\"primary\">\n        <template\n          v-for=\"(\n            { icon, label, route, disabled, subheader }, index\n          ) in sidenav\"\n        >\n          <v-divider\n            v-if=\"subheader && label !== '' && index !== 0\"\n            :key=\"`${label}-divider`\"\n          ></v-divider>\n          <v-subheader :key=\"label\" v-if=\"subheader && label !== ''\">{{\n            label\n          }}</v-subheader>\n          <v-list-item\n            v-else\n            :key=\"route\"\n            :value=\"route\"\n            @click=\"goTo(route)\"\n            :disabled=\"disabled()\"\n            link\n          >\n            <v-list-item-icon>\n              <v-icon>{{ icon }}</v-icon>\n            </v-list-item-icon>\n\n            <v-list-item-content>\n              <v-list-item-title>{{ label }}</v-list-item-title>\n            </v-list-item-content>\n          </v-list-item>\n        </template>\n      </v-list-item-group>\n    </v-list>\n  </v-navigation-drawer>\n</template>\n\n<script>\nimport { get } from \"vuex-pathify\";\nimport { routes } from \"@/router\";\n\nexport default {\n  data: () => ({\n    drawer: null,\n  }),\n\n  computed: {\n    ...get([\"mmIsOpen\"]),\n    ...get(\"auth\", [\"registered\"]),\n    ...get(\"status\", [\"approved\"]),\n    sidenav() {\n      // Filter the routes to keep the ones that could appear in the sidenav,\n      // and map them to a more usable object\n      const list = routes\n        .filter((r) => r?.meta?.displayInSidenav !== undefined)\n        .map((r) => ({\n          icon: \"mdi-wallet\",\n          label: r.name.charAt(0).toUpperCase() + r.name.slice(1),\n          route: r.name,\n          meta: r.meta,\n          restricted: r.meta.restricted,\n          disabled: () =>\n            this.mmIsOpen ||\n            (r.meta.restricted && !r.meta.restricted({ store: this.$store })),\n          hidden: r.meta.hidden,\n        }));\n\n      const nav = [];\n      const categories = [];\n      for (const el of list) {\n        if (el.hidden && el.hidden({ store: this.$store })) continue;\n        if (\n          el.meta &&\n          el.meta.displayInSidenav !== \"\" &&\n          !categories.includes(el.meta.displayInSidenav)\n        ) {\n          nav.push({ subheader: true, label: el.meta.displayInSidenav });\n          categories.push(el.meta.displayInSidenav);\n        }\n        nav.push(el);\n      }\n      return nav;\n    },\n  },\n\n  mounted() {\n    console.log(\"routes\", routes);\n  },\n\n  methods: {\n    goTo(routeName) {\n      if (this.$route.name === routeName) return;\n      this.$router.push({ name: routeName });\n    },\n  },\n};\n</script>\n\n<style></style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AppMenu.vue?vue&type=template&id=e71ec46c&\"\nimport script from \"./AppMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./AppMenu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-dialog',{attrs:{\"width\":\"500\",\"persistent\":\"\"},model:{value:(_vm.display),callback:function ($$v) {_vm.display=$$v},expression:\"display\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Transaction authentication\")]),_c('v-card-text',[_vm._v(\" Enter the password for the wallet \"+_vm._s(_vm.walletAddress)+\" : \"),_c('v-text-field',{attrs:{\"type\":\"password\"},model:{value:(_vm.walletPassword),callback:function ($$v) {_vm.walletPassword=$$v},expression:\"walletPassword\"}}),_c('div',{staticStyle:{\"color\":\"red\"}},[_vm._v(_vm._s(_vm.errorMessage))])],1),_c('v-card-actions',[_c('v-btn',{on:{\"click\":_vm.cancel}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"loading\":_vm.loading,\"disabled\":_vm.walletPassword === '' || _vm.loading},on:{\"click\":_vm.submit}},[_vm._v(\" Confirm \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-dialog\n    v-model=\"display\"\n    width=\"500\"\n    persistent\n  >\n    <v-card>\n      <v-card-title>Transaction authentication</v-card-title>\n      <v-card-text>\n        Enter the password for the wallet {{ walletAddress }} :\n        <v-text-field type=\"password\" v-model=\"walletPassword\" />\n        <div style=\"color: red\">{{ errorMessage }}</div>\n      </v-card-text>\n      <v-card-actions>\n        <v-btn @click=\"cancel\">Cancel</v-btn>\n        <v-btn\n          @click=\"submit\"\n          :loading=\"loading\"\n          :disabled=\"walletPassword === '' || loading\"\n        >\n          Confirm\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n<script>\nexport default {\n\n  data: () => ({\n    walletAddress: null,\n    errorMessage: null,\n    display: false,\n    loading: false,\n    walletPassword: \"\",\n    // functions as a data fields to be called by the component\n    submit: ()=>{}, \n    cancel: ()=>{}\n  }),\n\n  methods: {\n    /** This method is to be registered in the central store to be passed into the \n     * new Web3CustodyFunctionProvider(provider, custody, wallet, <here>)\n     * to allow user to interact with the authentication process\n     */\n    async authenticate(address, api) {\n      if (!address || !api) throw new Error(\"Invalid call to the authenticate function, missing parameters\");\n      this.walletAddress = address;\n      this.display = true;\n\n      try {\n        // console.log(\"authenticate function with api\",address, api);\n        // create a promise to wait for the user interactions\n        // the body of the promise links two functions (submit and cancel) to the component to receive \n        // the click events\n        const token = await new Promise( (resolve, reject)=>{\n          // function to receive the submit click event\n          async function submit() {\n            if (this.walletAddress && this.walletPassword) {\n              this.loading = true;\n              try {\n                // calls the api to get the token\n                const token = await api.authenticate(this.walletAddress, this.walletPassword);\n                if (!token) throw new Error(\"Missing token from authenticate without real error\") // should not happen\n                // returns the authentication token\n                resolve(token);\n              } catch (error) {\n                this.errorMessage = error.message;\n              } finally {\n                this.loading = false;\n              }\n            } else {\n              reject(new Error(\"No wallet address or password\"))\n            }\n          }\n          // function to receive the cancel click event\n          function cancel() {\n            reject(new Error(\"Authentication cancelled by user\"));\n          }\n          // link the functions to the component (using data instead of methods works fine :-) )\n          this.submit = submit.bind(this);\n          this.cancel = cancel.bind(this);\n        });\n\n        // returns the token obtained from the promise\n        return token;\n      } finally {\n        // in case of exception, we should clear the fields and close the dialog\n        this.walletPassword = \"\";\n        this.errorMessage = null;\n        this.display = false;\n      }\n\n    }\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WalletAuthenticationDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WalletAuthenticationDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WalletAuthenticationDialog.vue?vue&type=template&id=424a8a38&\"\nimport script from \"./WalletAuthenticationDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./WalletAuthenticationDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <v-app id=\"inspire\">\n    <v-container>\n      <app-menu></app-menu>\n      <v-app-bar app clipped-left flat color=\"teal lighten-2\">\n        <v-toolbar-title>Proof of Carbon Reduction</v-toolbar-title>\n      </v-app-bar>\n\n      <v-main>\n        <v-container class=\"py-8\">\n          <router-view></router-view>\n        </v-container>\n      </v-main>\n    </v-container>\n    <v-overlay :value=\"mmIsOpen\">\n      <v-progress-circular indeterminate></v-progress-circular>\n    </v-overlay>\n    <v-snackbar\n      v-model=\"displaySnackbar\"\n      multi-line\n      :color=\"snackbarColor\"\n      right\n    >\n      {{ snackbarMessage }}\n    </v-snackbar>\n    <wallet-authentication-dialog\n      ref=\"walletAuthenticationDialog\"\n    ></wallet-authentication-dialog>\n  </v-app>\n</template>\n\n<script>\nimport AppMenu from \"./components/AppMenu.vue\";\nimport WalletAuthenticationDialog from \"./components/WalletAuthenticationDialog.vue\";\nimport { get, sync, call } from \"vuex-pathify\";\nimport $store from \"@/store/index\";\n\nexport default {\n  components: { AppMenu, WalletAuthenticationDialog },\n  data: () => ({}),\n\n  computed: {\n    ...sync([\"displaySnackbar\", \"snackbarMessage\", \"snackbarColor\"]),\n    ...get([\"mmIsOpen\"]),\n  },\n\n  methods: {\n    ...call(\"auth\", [\"detectProvider\"]),\n  },\n\n  mounted() {\n    // record the authentication function to make it available in api.js\n    $store.set(\"auth/walletAuthenticationFunction\", this.$refs.walletAuthenticationDialog.authenticate) \n  }\n};\n</script>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=ef1b20a8&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport Vuetify from \"vuetify\";\nimport \"vuetify/dist/vuetify.min.css\";\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n    theme: {\n        themes: {\n            light: {\n                primary: \"#607d8b\",\n                secondary: \"#009688\",\n                accent: \"#4caf50\",\n                error: \"# e91e63\",\n                warning: \"#cddc39\",\n                info: \"#3f51b5\",\n                success: \"#8bc34\",\n            },\n        },\n    },\n});","import { getContractInstance } from \"./api\";\n\nexport function setupAuthNavigationGuard(router, store) {\n  router.beforeEach(async (to, from, next) => {\n    console.log(\"routing \", from.name, to.name);\n    // first need to control if we have not routed to the metamask missing page\n    if (to.name === \"installMetaMask\") {\n      return next();\n    }\n\n    // Having a provider is considered mandatory. We'll check that you installed Metamask or have a wallet custody configured.\n    if (!store.state.auth.providerModel) {\n      console.log(\"no auth provider yet\");\n      await store.dispatch(\"auth/detectProvider\");\n      console.log(\"Didn't find any provider in the app, trying to detect one. Provider found?\", store.state.auth.providerModel, store.state.auth.provider);\n      if (store.state.auth.providerModel == \"both\") return next({ name: \"authentication\" });\n      // if no provider was available, assume that no direct provider was possible hence we need at least to have metamask\n      if (!store.state.auth.provider) return next({ name: \"installMetaMask\" });\n    }\n\n    // Just to make sure, if you do not have the smart contract instance yet, we instanciate it.\n    if (!store.state.auth.contract) {\n      store.commit(\"auth/contract\", getContractInstance())\n    }\n\n    // You're going to a non-auth route, keep going.\n    if (!to.meta || !to.meta.restricted) return next();\n\n    // Good, you have the provider. But have you connected a wallet?\n    if (!store.state.auth.wallet) {\n      console.log(\"Didn't find the wallet in the app. Trying to fetch it...\");\n      const address = await store.dispatch(\"auth/attemptToConnectWallet\");\n    \n      console.log(\"Found a connected wallet.\", address);\n    }\n\n    // await store.dispatch(\"auth/fetchRole\", null, { root: true });\n\n    // Alright, you have the extension, and you've connected a wallet. But do you have the right to\n    // go where you're trying to go?\n    if (!to.meta.restricted({ store })) {\n      // Maybe we don't know it yet but you're actually approved (first navigation). We double-check,\n      // to avoid sending you back to status on first navigation (that would be quite annoying)\n      console.log(\"Didn't find the proper authorizations to go to this route. Checking again with the smart contract...\")\n      await Promise.all([\n        store.dispatch(\"auth/fetchIsRegistered\"),\n        store.dispatch(\"status/fetchIsApproved\"),\n        store.dispatch(\"auth/fetchRole\")\n      ]);\n      // You're actually NOT approved or registered at all. Go back to Status, you shouldn't try to go\n      // anywhere else.\n      if (!to.meta.restricted({ store })) return next({ name: to.meta.forceRedirectTo });\n      console.log(\"Found the proper authorizations.\");\n    }\n\n    // Alright, if you managed to go this far, everything's fine.\n    return next();\n  })\n}","import Vue from 'vue'\nimport App from './App.vue'\nimport vuetify from './plugins/vuetify'\nimport 'roboto-fontface/css/roboto/roboto-fontface.css'\nimport '@mdi/font/css/materialdesignicons.css'\nimport '@mdi/js'\n\nimport store from \"./store/index\"\nimport router from './router'\nimport { setupAuthNavigationGuard } from '@/lib/auth'\n\nVue.config.productionTip = false\n\nsetupAuthNavigationGuard(router, store);\n\nnew Vue({\n  vuetify,\n  store,\n  router,\n  render: h => h(App)\n}).$mount('#app');"],"sourceRoot":""}