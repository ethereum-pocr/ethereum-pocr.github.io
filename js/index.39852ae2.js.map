{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib/bigint-polyfill.js","webpack:///./src/App.vue?68e8","webpack:///./src/components/AppMenu.vue?be29","webpack:///./src/pages/InstallMetaMask.page.vue?10ec","webpack:///./src/lib/config-file.js","webpack:///./src/lib/ethereum-compatible-wallet.js","webpack:///src/pages/InstallMetaMask.page.vue","webpack:///./src/pages/InstallMetaMask.page.vue?4233","webpack:///./src/pages/InstallMetaMask.page.vue","webpack:///./src/pages/Auth.page.vue?094c","webpack:///./src/plugins/pathify.js","webpack:///./src/lib/const.js","webpack:///./src/store/nodes.js","webpack:///./src/store/auth.js","webpack:///./src/lib/numbers.js","webpack:///./src/store/history.js","webpack:///./src/store/pledge.js","webpack:///./src/store/status.js","webpack:///./src/store/nodeGovernance.js","webpack:///./src/store/index.js","webpack:///./src/lib/async-local-storage.js","webpack:///./src/lib/api.js","webpack:///src/pages/Auth.page.vue","webpack:///./src/pages/Auth.page.vue?c349","webpack:///./src/pages/Auth.page.vue","webpack:///./src/pages/Welcome.page.vue?6edf","webpack:///src/pages/Welcome.page.vue","webpack:///./src/pages/Welcome.page.vue?10e8","webpack:///./src/pages/Welcome.page.vue","webpack:///./src/pages/Dashboard.page.vue?7592","webpack:///./src/lib/colors.js","webpack:///./src/components/ExplorerRedirect.vue?398b","webpack:///src/components/ExplorerRedirect.vue","webpack:///./src/components/ExplorerRedirect.vue?5534","webpack:///./src/components/ExplorerRedirect.vue","webpack:///src/pages/Dashboard.page.vue","webpack:///./src/pages/Dashboard.page.vue?384f","webpack:///./src/pages/Dashboard.page.vue","webpack:///./src/pages/Auditors.page.vue?9712","webpack:///src/pages/Auditors.page.vue","webpack:///./src/pages/Auditors.page.vue?2562","webpack:///./src/pages/Auditors.page.vue","webpack:///./src/pages/Audit.page.vue?b0df","webpack:///src/pages/Audit.page.vue","webpack:///./src/pages/Audit.page.vue?8ac8","webpack:///./src/pages/Audit.page.vue","webpack:///./src/pages/History.page.vue?2018","webpack:///src/pages/History.page.vue","webpack:///./src/pages/History.page.vue?d2e4","webpack:///./src/pages/History.page.vue","webpack:///./src/pages/Pledge.page.vue?2071","webpack:///src/pages/Pledge.page.vue","webpack:///./src/pages/Pledge.page.vue?6915","webpack:///./src/pages/Pledge.page.vue","webpack:///./src/pages/Status.page.vue?886d","webpack:///src/pages/Status.page.vue","webpack:///./src/pages/Status.page.vue?bae4","webpack:///./src/pages/Status.page.vue","webpack:///./src/pages/ConfiscatedPledge.page.vue?a8f3","webpack:///src/pages/ConfiscatedPledge.page.vue","webpack:///./src/pages/ConfiscatedPledge.page.vue?e160","webpack:///./src/pages/ConfiscatedPledge.page.vue","webpack:///./src/pages/Improvements.page.vue?f4cc","webpack:///src/pages/Improvements.page.vue","webpack:///./src/pages/Improvements.page.vue?28f9","webpack:///./src/pages/Improvements.page.vue","webpack:///./src/pages/Logger.page.vue?5052","webpack:///src/pages/Logger.page.vue","webpack:///./src/pages/Logger.page.vue?f5fd","webpack:///./src/pages/Logger.page.vue","webpack:///./src/router.js","webpack:///src/components/AppMenu.vue","webpack:///./src/components/AppMenu.vue?55d1","webpack:///./src/components/AppMenu.vue","webpack:///./src/components/WalletAuthenticationDialog.vue?29c8","webpack:///src/components/WalletAuthenticationDialog.vue","webpack:///./src/components/WalletAuthenticationDialog.vue?3cad","webpack:///./src/components/WalletAuthenticationDialog.vue","webpack:///src/App.vue","webpack:///./src/App.vue?60d0","webpack:///./src/App.vue","webpack:///./src/plugins/vuetify.js","webpack:///./src/lib/initialization.js","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","nativeBigInt","global","BigInt","supportsNative","_BigInt","require","nativeFunction","operator","a","b","this","Proxy","obj","field","equals","toString","radix","littleEndian","elements","arr","ArrayBuffer","view","DataView","setBigUint64","Uint8Array","uint8arr","intarr","toArray","set","reverse","_toUint8ArrayNative","_toUint8Array","array","detectSupport","buffer","getBigUint64","Array","from","fromArray","_vm","_h","$createElement","_c","_self","attrs","model","callback","$$v","drawerDisplayed","expression","_e","on","showDrawer","$event","goTo","_v","staticClass","_s","walletRole","disconnect","wallet","currentBlockNumber","chainName","mmIsOpen","mmConnecting","cancelWalletConnection","snackbarColor","displaySnackbar","snackbarMessage","ref","staticRenderFns","drawerChange","drawer","$route","_l","index","icon","label","route","disabled","subheader","providerMetamask","_m","network","chainId","title","activateOrInstall","parseUrl","url","acceptedProtocols","isArray","map","endsWith","toLowerCase","u","URL","includes","protocol","error","cleanUpConfig","config","activate_log","networks","explorers","nodeUrl","walletCustodyAPIBaseUrl","explorerUrl","chainID","getDefaultNetwork","find","default","changeDefaultNetwork","getNetworkList","getExplorerUrl","detectEthereumProvider","mustBeMetaMask","silent","timeout","_validateInputs","handled","Promise","resolve","handleEthereum","console","log","removeEventListener","ethereum","isMetaMask","message","undefined","addEventListener","once","setTimeout","Error","getEthereumProviderChainInfo","provider","connected","request","method","isConnected","Number","chainIdHex","networkVersion","getEthereumProviderConnectedAccounts","completed","then","accounts","catch","errorLike","providerError","code","decoded","JSON","parse","unlockEthereumProviderAccounts","notifier","reject","switchEthereumProviderNetwork","address","test","params","switchError","computed","mounted","fetch","res","all","methods","noRedirect","info","rpcUrls","nativeCurrency","blockExplorerUrls","router","component","prepareOpenMetaMaskConnectionDialog","goToInstallMetamask","prepareOpenWeb3DirectConnectionDialog","selectedNetwork","wallets","updateWallet","show","password","pathify","options","mapping","ROLES","VISITOR","AUDITED_NODE","NEW_NODE","APPROVED_AUDITOR","PENDING_AUDITOR","USER_CONNECTED","CRIPBaseUrl","governanceAddress","totalCRCAddress","sessionVariableTotalPocRCoins","GeneratedCRCTotalHash","web3","utils","keccak256","MAX_BLOCKS_TO_KEEP","state","nbOfNodes","totalFootprint","totalCrypto","sealers","chainUpdateSubscription","blocks","currentWalletBalanceWei","backupLoop","timeSinceLastBlock","average","reduce","getters","rewardsByBlock","rewards","sealer","lastReward","unshift","averageReward","averageDelaySec","minIndex","Math","min","delays","previousBlock","lastBlock","receivedAt","sum","v","lastBlockNumber","block","number","mutations","make","updateSealerDetails","carbonFootprint","$store","intf","_intf","eth","getBalance","balance","toBN","bal","parseFloat","fromWei","footprint","processBlock","Date","toTimeString","difficulty","startsWith","parseInt","blockNumber","totalCryptoB4","getStorageAt","poaBlockHashToSealerInfo","delta","sub","nbNodes","now","isSealer","warn","logicOnNewBloc","pop","si","findIndex","sealedBlocks","actions","fetchAllValues","dispatch","initBackupLoop","commit","clearInterval","setInterval","fetchNumberOfNodes","readOnlyCall","fetchTotalFootprint","updateNodesStatus","isActive","subscribeToChainUpdates","rootState","unsubscribe","auth","subscription","subscribeNewBlocks","blockProcessing","blocksWaiting","processingFunc","baseFeePerGas","getBlock","unsubscribeToChainUpdates","insertNewBlock","getWalletBalance","discoverNotRunningSealers","contract","prov","Web3FunctionProvider","deployedAt","events","CarbonFootprintUpdate","fromBlock","found","returnValues","node","vanity","custom","fetchChainInformations","nodes","lastBlockInMemory","getBlockNumber","max","blockNumbers","loadedBlocks","fetchOneNodeInfo","updateFootprint","sealerAddress","handleMMResponse","writeCall","namespaced","providerDirect","providerModel","custodyModel","custodyApiUrl","delegatedWallet","registered","isNode","isVoterNode","isAuditor","isAuditorApproved","walletAuthenticationFunction","mmConnectionNotifier","EventEmitter","detectMetamask","chainChanged","location","pathname","origin","href","removeListener","chain","detectDirectAccess","defaultNetwork","getWeb3ProviderFromUrl","checkNetworkProofOfCarbonReduction","setWalletAttributes","root","fetchRole","sealerNode","delegateOf","setConnection","store","Web3","ens","myWeb3","detectProvider","getContractInstance","nbProviders","attemptToConnectWallet","addresses","getCustodyLastWallets","emit","openMetaMaskConnectionDialog","openWeb3DirectConnectionDialog","verifyCustodyAuthentication","token","fetchIsRegistered","selfRegister","writeCallWithOptions","maxGas","GWEI_FACTOR","pow","ETH_FACTOR","toWebBigInt","bi","BigNumber","toNumber","toGWei","div","toEther","toWei","multipliedBy","toParam","Numberlib","pledgeHistory","footprintHistory","appendFootprint","appendPledge","allContracts","at","fetchFootprintHistory","getTransaction","transactionHash","tx","auditor","txHash","foundSealer","nodeName","auditorName","fetchPledgeHistory","AmountPledged","pledge","amountAdded","amountRemoved","total","minPledgeAmount","pledgedAmount","redeemBool","fetchBalance","fetchCanTransferPledge","fetchMinPledgeAmount","fetchPledgedAmount","addToPledge","amount","redeemPledge","approved","approbationVotes","fetchIsApproved","fetchApprobationVotes","votes","nbAuditors","auditors","fetchAllAuditorsValues","fetchNbAuditors","fetchAuditorsInfos","nodeAdr","floor","minVotes","nbVotes","currentVote","isApproved","fetchConfiscatedPledge","confiscated","voteAuditor","context","auditorAddress","accept","Vue","use","Vuex","initialized","tryingToConnect","logs","Store","history","status","nodeGovernance","plugins","plugin","errorFlash","fetchConfig","configUrl","searchParams","has","uConf","delete","json","startInitialization","wrapConsoleLogging","failMsg","watch","oldLog","oldError","oldWarn","addLineInBody","payload","document","getElementById","body","createElement","setAttribute","insertBefore","firstElementChild","pre","innerHTML","type","args","join","appendChild","AsyncLocalStorage","keys","keyList","localStorage","getItem","setItem","stringify","removeItem","group","LocalStorage","currentProvider","walletAddress","getContractInstanceByName","contractName","instance","getCustodyApi","custodyUrl","custody","WalletCustodyApiImpl","savedWallets","Set","api","authenticate","list","authFunction","Web3CustodyFunctionProvider","globalTimerList","globalTimerIndex","globalTimerId","globalTimerLastExecution","globalTimerFunction","id","when","setImmediate","initGlobalTimer","cb","delayMs","startAt","e","clearTimeout","forEach","ev","__id","providerSendAsync","sendAsync","skipCache","send","rej","subs","captureRejections","timer","runLoop","props","lastCheck","methodName","readOnlyCallWithOptions","wrapSend","convertMMErrorMessage","split","target","err","collectDataFunction","cmd","isTx","getCallData","promise","errorCallback","response","blockHash","gasUsed","handleMM","func","hasProviderMetamask","hasProviderDirect","hasCustodyApi","metamask","$router","goToDashboard","routeName","style","lastBlockNoTurnSealing","toFixed","maxFootprint","gradientGreenToRed","scopedSlots","_u","fn","sealersHeaders","item","totalSealedBlocks","colorGradient","fadeFraction","rgbColor1","rgbColor2","rgbColor3","color1","color2","fade","diffRed","red","diffGreen","green","diffBlue","blue","gradient","highColor","mediumColor","lowColor","open","validator","components","Explorer","nbBlocksToKeep","sealerMap","sealersReward","text","align","sealersSorted","sealersFootprint","sealersAddress","sealersLabels","tableHeadersAuditors","nodeVote","computeLabel","sortable","switchState","tableHeaders","openUpdateFootprintDialog","footprintDialog","selectedSealer","newFootprintValue","submitNewFootprint","currentTab","staticStyle","footprintTableHeaders","pledgeTableHeaders","amountToAdd","pledgeMore","intervalId","beforeRouteLeave","to","next","currentWalletBalanceEth","registerDelegateCommandLine","totalPledge","CRIPsUrl","lastCRIPCreated","reserveCRIP","CRIPS","cripsTableHeaders","createdBlock","voteFromContent","voteFromBlock","voteUntilContent","voteUntilBlock","auditorsFor","auditorsAgainst","nodesFor","nodesAgainst","canVote","userVote","$set","userVotes","votesTableHeaders","fetchCRIPS","fetchUserVotes","currentBlock","count","crip","voter","approval","decision","inVotingPeriod","nbBlocks","funct","VueRouter","walletIsntConnected","hasRole","role","not","f","opts","any","functions","routes","path","Welcome","meta","hidden","Dashboard","displayInSidenav","Status","restricted","forceRedirectTo","Improvements","InstallMetaMask","Auth","Auditors","ConfiscatedPledge","Pledge","Audit","History","Logger","redirect","base","oldPush","currentRoute","sidenav","filter","el","nav","categories","$emit","display","walletPassword","errorMessage","cancel","loading","submit","AppMenu","WalletAuthenticationDialog","sync","Vuetify","theme","themes","light","primary","secondary","accent","warning","success","setupAuthNavigationGuard","beforeEach","productionTip","vuetify","render","h","App","$mount"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrB,MAAS,GAGNK,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU6B,QAGnC,IAAIC,EAASF,EAAiB5B,GAAY,CACzCK,EAAGL,EACH+B,GAAG,EACHF,QAAS,IAUV,OANAf,EAAQd,GAAUW,KAAKmB,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOC,GAAI,EAGJD,EAAOD,QAKfH,EAAoBM,EAAIlB,EAGxBY,EAAoBO,EAAIL,EAGxBF,EAAoBQ,EAAI,SAASL,EAASM,EAAMC,GAC3CV,EAAoBW,EAAER,EAASM,IAClC3B,OAAO8B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEV,EAAoBe,EAAI,SAASZ,GACX,qBAAXa,QAA0BA,OAAOC,aAC1CnC,OAAO8B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DpC,OAAO8B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKxC,OAAOyC,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBxC,OAAO8B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBQ,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAJ,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASgB,EAAQC,GAAY,OAAO9C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQC,IAGzG5B,EAAoB6B,EAAI,IAExB,IAAIC,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAW3C,KAAKsC,KAAKK,GAC5CA,EAAW3C,KAAOf,EAClB0D,EAAaA,EAAWG,QACxB,IAAI,IAAItD,EAAI,EAAGA,EAAImD,EAAWjD,OAAQF,IAAKP,EAAqB0D,EAAWnD,IAC3E,IAAIU,EAAsB2C,EAI1BzC,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,svBCvJT,IAAMyC,EAAkC,qBAAXC,GAA2BA,EAAOC,QAA6B,qBAAXL,QAA2BA,OAAOK,OAC7GC,EAAyC,oBAAjBH,EACxBI,EAAUC,EAAQ,QAElBC,EAAiB,SAAUC,EAAUC,GACvC,OAAQD,GAEN,IAAK,MAAO,OAAO,SAACE,GAAD,OAAO,IAAIP,EAAOM,EAAIC,IACzC,IAAK,WAAY,OAAO,SAACA,GAAD,OAAO,IAAIP,EAAOM,EAAIC,IAC9C,IAAK,WAAY,OAAO,SAACA,GAAD,OAAO,IAAIP,EAAOM,EAAIC,IAC9C,IAAK,SAAU,OAAO,SAACA,GAAD,OAAO,IAAIP,EAAOM,EAAIC,IAC5C,IAAK,YAAa,OAAO,SAACA,GAAD,OAAO,IAAIP,EAAOM,EAAIC,IAC/C,IAAK,MAAO,OAAO,SAACA,GAAD,OAAO,IAAIP,EAAJ,SAAWM,EAAKC,KAE1C,IAAK,YAAa,OAAO,SAACA,GAAD,OAAO,IAAIP,EAAOM,GAAKC,IAChD,IAAK,aAAc,OAAO,SAACA,GAAD,OAAO,IAAIP,EAAOM,GAAKC,IAEjD,IAAK,MAAO,OAAO,SAACA,GAAD,OAAO,IAAIP,EAAOM,EAAIC,IACzC,IAAK,KAAM,OAAO,SAACA,GAAD,OAAO,IAAIP,EAAOM,EAAIC,IACxC,IAAK,MAAO,OAAO,SAACA,GAAD,OAAO,IAAIP,EAAOM,EAAIC,IAEzC,IAAK,KAAM,OAAO,SAACA,GAAD,OAAOD,EAAIC,GAC7B,IAAK,KAAM,OAAO,SAACA,GAAD,OAAOD,EAAIC,GAC7B,IAAK,MAAO,OAAO,SAACA,GAAD,OAAOD,GAAKC,GAC/B,IAAK,MAAO,OAAO,SAACA,GAAD,OAAOD,GAAKC,GAC/B,IAAK,KAAM,OAAO,SAACA,GAAD,OAAOD,IAAMC,GAC/B,IAAK,MAAO,OAAO,SAACA,GAAD,OAAOD,IAAMC,GAEhC,IAAK,SAAU,OAAO,kBAAM,IAAIP,GAASM,IACzC,IAAK,MAAO,OAAO,kBAAM,IAAIN,GAASM,IACtC,IAAK,OAAQ,OAAO,kBAAM,IAAIN,IAASM,IACvC,IAAK,OAAQ,OAAO,kBAAM,IAAIN,IAASM,MAiBvCN,E,wBACF,WAAYlB,GACR,GADe,UACM,kBAAVA,EACP0B,KAAK1B,MAAQA,MACV,IAAIA,aAAiBkB,EACxB,OAAOlB,EAEP0B,KAAK1B,MAAQ,IAAIoB,EAAQpB,GAG7B,OAAO,IAAI2B,MAAMD,KAAM,CACnB9B,IADmB,SACfgC,EAAKC,GACL,OAAIA,KAASD,EAAYA,EAAIC,GACJ,kBAAdD,EAAI5B,MAA2BsB,EAAeO,EAAOD,EAAI5B,OAC3C,kBAAd4B,EAAI5B,OAAsB6B,KAASD,EAAI5B,MAAc4B,EAAI5B,MAAM6B,GAAOtB,KAAKqB,EAAI5B,YAA1F,K,iCAMZ,WACI,MAA0B,kBAAf0B,KAAK1B,MACL0B,KAAK1B,MAEL0B,O,oBAKf,SAAOD,GACH,MAA0B,kBAAfC,KAAK1B,MACL0B,KAAK1B,QAAUyB,EAAEzB,MACjByB,aAAaP,EACG,kBAAZO,EAAEzB,MACF0B,KAAK1B,MAAM8B,OAAO,IAAIV,EAAQK,EAAEM,aAEhCL,KAAK1B,MAAM8B,OAAO,IAAIV,EAAQK,EAAEzB,QAGpC0B,KAAK1B,MAAM8B,OAAO,IAAIV,EAAQK,M,sBAI7C,SAASO,GACL,OAAON,KAAK1B,MAAM+B,SAASC,K,iCAG/B,WAAwD,IAApCC,EAAoC,wDAAdC,EAAc,uDAAH,EAC3CC,EAAM,IAAIC,YAAYF,GACtBG,EAAO,IAAIC,SAASH,GAE1B,OADAE,EAAKE,aAAa,EAAGb,KAAK1B,MAAOiC,GAC1B,IAAIO,WAAWL,K,2BAG1B,WAAkD,IAApCF,EAAoC,wDAAdC,EAAc,uDAAH,EACrCC,EAAM,IAAIC,YAAYF,GACtBO,EAAW,IAAID,WAAWL,GAC1BO,EAAShB,KAAK1B,MAAM2C,QAAX,SAAmB,EAAG,IAAG3C,MAGxC,OAFIiC,EAAcQ,EAASG,IAAIF,EAAOG,UAAW,GAC5CJ,EAASG,IAAIF,EAAQR,EAAWQ,EAAO/E,QACrC8E,I,0BAGX,WAAiD,IAApCR,EAAoC,wDAAdC,EAAc,uDAAH,EAC1C,MAA0B,kBAAfR,KAAK1B,MACL0B,KAAKoB,oBAAoBb,EAAcC,GAEvCR,KAAKqB,cAAcd,EAAcC,M,6BAYhD,SAAsBO,GAAsD,IAKpEO,EALwBf,EAA4C,wDAAtBgB,IAAsB,yDACxE,GAAI9B,GAAkB8B,EAAe,CACjC,IAAMZ,EAAO,IAAIC,SAASG,EAASS,QACnC,OAAO,IAAIhC,EAAOmB,EAAKc,aAAa,EAAGlB,IAQ3C,OAJIe,EADAf,EACQmB,MAAMC,KAAKZ,GAAUI,UAErBO,MAAMC,KAAKZ,GAEhB,IAAIvB,EAAOE,EAAQkC,UAAUN,EAAlB,SAAyB,EAAG,S,KAItD9D,EAAOD,QAAUiC,I,6JC9Ib,EAAS,WAAa,IAAIqC,EAAI7B,KAAS8B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACE,MAAM,CAAC,GAAK,YAAY,CAACF,EAAG,cAAc,CAACA,EAAG,WAAW,CAACG,MAAM,CAAC7D,MAAOuD,EAAmB,gBAAEO,SAAS,SAAUC,GAAMR,EAAIS,gBAAgBD,GAAKE,WAAW,qBAAqBP,EAAG,YAAY,CAACE,MAAM,CAAC,IAAM,GAAG,eAAe,GAAG,KAAO,GAAG,MAAQ,mBAAmB,CAAGL,EAAIS,gBAAwET,EAAIW,KAA3DR,EAAG,qBAAqB,CAACS,GAAG,CAAC,MAAQZ,EAAIa,cAAuBV,EAAG,kBAAkB,CAACS,GAAG,CAAC,MAAQ,SAASE,GAAQ,OAAOd,EAAIe,KAAK,cAAc,CAACf,EAAIgB,GAAG,+BAA+Bb,EAAG,YAAYA,EAAG,SAAS,CAACc,YAAY,OAAOZ,MAAM,CAAC,MAAQ,OAAO,aAAa,UAAU,CAACL,EAAIgB,GAAG,IAAIhB,EAAIkB,GAAGlB,EAAImB,YAAY,OAAQnB,EAAU,OAAEG,EAAG,SAAS,CAACc,YAAY,OAAOZ,MAAM,CAAC,MAAQ,OAAO,aAAa,UAAU,CAACF,EAAG,SAAS,CAACc,YAAY,OAAOL,GAAG,CAAC,MAAQZ,EAAIoB,aAAa,CAACpB,EAAIgB,GAAG,eAAehB,EAAIgB,GAAG,IAAIhB,EAAIkB,GAAGlB,EAAIqB,QAAQ,MAAM,GAAGrB,EAAIW,KAAKR,EAAG,SAAS,CAACc,YAAY,OAAOZ,MAAM,CAAC,MAAQ,OAAO,aAAa,UAAU,CAACL,EAAIgB,GAAG,IAAIhB,EAAIkB,GAAGlB,EAAIsB,oBAAoB,OAAOnB,EAAG,SAAS,CAACc,YAAY,OAAOZ,MAAM,CAAC,MAAQ,OAAO,aAAa,UAAU,CAACL,EAAIgB,GAAG,IAAIhB,EAAIkB,GAAGlB,EAAIuB,WAAW,QAAQ,GAAGpB,EAAG,SAAS,CAACA,EAAG,cAAc,CAACc,YAAY,QAAQ,CAACd,EAAG,gBAAgB,IAAI,IAAI,GAAGA,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQL,EAAIwB,WAAW,CAACrB,EAAG,sBAAsB,CAACE,MAAM,CAAC,cAAgB,OAAO,GAAGF,EAAG,YAAY,CAACE,MAAM,CAAC,MAAQL,EAAIyB,eAAe,CAACtB,EAAG,SAAS,CAACA,EAAG,eAAe,CAACH,EAAIgB,GAAG,mEAAmEb,EAAG,iBAAiB,CAACA,EAAG,QAAQ,CAACS,GAAG,CAAC,MAAQZ,EAAI0B,yBAAyB,CAAC1B,EAAIgB,GAAG,aAAa,IAAI,IAAI,GAAGb,EAAG,aAAa,CAACE,MAAM,CAAC,aAAa,GAAG,MAAQL,EAAI2B,cAAc,MAAQ,IAAIrB,MAAM,CAAC7D,MAAOuD,EAAmB,gBAAEO,SAAS,SAAUC,GAAMR,EAAI4B,gBAAgBpB,GAAKE,WAAW,oBAAoB,CAACV,EAAIgB,GAAG,IAAIhB,EAAIkB,GAAGlB,EAAI6B,iBAAiB,OAAO1B,EAAG,+BAA+B,CAAC2B,IAAI,gCAAgC,IACv5DC,EAAkB,G,YCDlB,G,UAAS,WAAa,IAAI/B,EAAI7B,KAAS8B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,sBAAsB,CAACE,MAAM,CAAC,IAAM,GAAG,QAAU,GAAG,KAAO,IAAIO,GAAG,CAAC,MAAQZ,EAAIgC,cAAc1B,MAAM,CAAC7D,MAAOuD,EAAU,OAAEO,SAAS,SAAUC,GAAMR,EAAIiC,OAAOzB,GAAKE,WAAW,WAAW,CAACP,EAAG,aAAaA,EAAG,SAAS,CAACA,EAAG,oBAAoB,CAACE,MAAM,CAAC,MAAQL,EAAIkC,OAAOlG,KAAK,UAAY,GAAG,MAAQ,YAAY,CAACgE,EAAImC,GAAInC,EAAW,SAAE,SAAS8B,EAAIM,GACpb,IAAIC,EAAOP,EAAIO,KACXC,EAAQR,EAAIQ,MACZC,EAAQT,EAAIS,MACZC,EAAWV,EAAIU,SACfC,EAAYX,EAAIW,UACpB,MAAO,CAAEA,GAAuB,KAAVH,GAA0B,IAAVF,EAAajC,EAAG,YAAY,CAACpD,IAAKuF,EAAQ,aAActC,EAAIW,KAAM8B,GAAuB,KAAVH,EAAcnC,EAAG,cAAc,CAACpD,IAAIuF,GAAO,CAACtC,EAAIgB,GAAGhB,EAAIkB,GAAGoB,MAAUnC,EAAG,cAAc,CAACpD,IAAIwF,EAAMlC,MAAM,CAAC,MAAQkC,EAAM,SAAWC,IAAW,KAAO,IAAI5B,GAAG,CAAC,MAAQ,SAASE,GAAQ,OAAOd,EAAIe,KAAKwB,MAAU,CAACpC,EAAG,mBAAmB,CAACA,EAAG,SAAS,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGmB,OAAU,GAAGlC,EAAG,sBAAsB,CAACA,EAAG,oBAAoB,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGoB,OAAW,IAAI,QAAO,IAAI,GAAGnC,EAAG,YAAYA,EAAG,MAAM,CAACE,MAAM,CAAC,IAAM,gBAAgB,MAAQ,WAAW,KACpiB,EAAkB,G,gHCPlB,EAAS,WAAa,IAAIL,EAAI7B,KAAS8B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAGH,EAAI0C,iBAAiH1C,EAAIW,KAAnGR,EAAG,MAAM,CAACA,EAAG,MAAM,CAACH,EAAIgB,GAAG,wDAAwDhB,EAAI2C,GAAG,KAAe3C,EAAoB,iBAAEG,EAAG,MAAM,CAACA,EAAG,QAAQH,EAAImC,GAAInC,EAAY,UAAE,SAAS4C,GAAS,OAAOzC,EAAG,QAAQ,CAACpD,IAAI6F,EAAQC,QAAQxC,MAAM,CAAC,KAAO,MAAM,CAACF,EAAG,SAAS,CAACA,EAAG,eAAe,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAG0B,EAAQ5G,SAASmE,EAAG,cAAc,CAACA,EAAG,MAAM,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAG0B,EAAQE,UAAU3C,EAAG,MAAM,CAACH,EAAIgB,GAAG,YAAYhB,EAAIkB,GAAG0B,EAAQC,cAAc1C,EAAG,iBAAiB,CAACA,EAAG,QAAQ,CAACS,GAAG,CAAC,MAAQ,SAASE,GAAQ,OAAOd,EAAI+C,kBAAkBH,MAAY,CAAC5C,EAAIgB,GAAG,eAAe,IAAI,IAAI,MAAK,IAAI,GAAGhB,EAAIW,QACjsB,EAAkB,CAAC,WAAa,IAAIX,EAAI7B,KAAS8B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACH,EAAIgB,GAAG,2CAA2Cb,EAAG,IAAI,CAACE,MAAM,CAAC,KAAO,gCAAgC,OAAS,WAAW,CAACL,EAAIgB,GAAG,uC,0HCCjP,SAASgC,EAASC,EAAKC,GAI5B,GAHIA,IAAsBrD,MAAMsD,QAAQD,KAAoBA,EAAoB,CAACA,IAC7EA,IAAmBA,EAAoBA,EAAkBE,KAAI,SAAAhG,GAAC,OAAGA,EAAEiG,SAAS,KAAMjG,EAAIA,EAAE,KAAKkG,kBAE5FL,EACL,IACI,IAAMM,EAAI,IAAIC,IAAIP,GAClB,GAAIC,IACKA,EAAkBO,SAASF,EAAEG,UAAW,OAEjD,OAAOH,EACT,MAAOI,GACL,QAIC,SAAeC,EAAtB,kC,8DAAO,WAA6BC,GAA7B,iGAWL,IAAWhB,KARPgB,EAAOC,aACTD,EAAOC,cAAe,EAEtBD,EAAOC,cAAe,EAGlBjE,MAAMsD,QAAQU,EAAOE,YAAWF,EAAOE,SAAW,IAClDC,EAAYH,EAAOG,WAAW,GACdA,EACdf,EAAMe,EAAUnB,GACjBG,EAASC,EAAK,CAAC,OAAQ,kBACnBe,EAAUnB,GAGrBgB,EAAOG,UAAYA,EAjBd,iBAmBiBH,EAAOE,UAnBxB,IAmBL,2BAAWnB,EAA4B,QAChCI,EAASJ,EAAQqB,QAAS,CAAC,OAAQ,QAAS,KAAM,gBAC9CrB,EAAQqB,QAEZjB,EAASJ,EAAQsB,wBAAyB,CAAC,OAAQ,kBAC7CtB,EAAQsB,wBAEdlB,EAASJ,EAAQuB,YAAa,CAAC,OAAQ,kBACnCvB,EAAQuB,YAEZvB,EAAQuB,aACPN,EAAOG,UAAUpB,EAAQwB,WAC3BxB,EAAQuB,YAAcN,EAAOG,UAAUpB,EAAQwB,UA/BhD,qCAoCuB,GAAxBP,EAAOE,SAAS3J,QAClByJ,EAAOE,SAASrJ,KAAK,CAACsB,KAAM,4CArCzB,kBAuCE6H,GAvCF,2C,wBA0CA,SAASQ,EAAkBR,GAChC,IAAI5I,EAAS4I,EAAOE,SAASO,MAAM,SAAArH,GAAC,OAAEA,EAAEsH,WAExC,OADKtJ,GAAU4I,EAAOE,SAAS3J,OAAO,IAAGa,EAAS4I,EAAOE,SAAS,IAC3D9I,EAGF,SAASuJ,EAAqBX,EAAQZ,GAAK,uBAC1BY,EAAOE,UADmB,IAChD,2BAAuC,KAA5BnB,EAA4B,QACjCA,EAAQqB,SAAWhB,EACrBL,EAAQ2B,SAAU,EAElB3B,EAAQ2B,SAAU,GAL0B,8BAQhD,OAAOV,EAGF,SAASY,EAAeZ,GAC7B,OAAOA,EAAOE,SAGT,SAASW,EAAeb,EAAQO,GACrC,GAAKP,EAAL,CACA,IAAKO,EAAS,CACZ,IAAMxB,EAAUyB,EAAkBR,GAClC,OAAIjB,GAAWA,EAAQwB,QACjBxB,EAAQuB,YAAoBvB,EAAQuB,YAC5BO,EAAeb,EAAQjB,EAAQwB,cAE3C,EAGF,OAAIP,EAAOG,UAAUI,GACZP,EAAOG,UAAUI,QAD1B,G,oCCpFG,SAASO,IAIR,6DAAJ,GAAI,IAHNC,sBAGM,aAFNC,cAEM,aADNC,eACM,MADI,IACJ,EACNC,IACA,IAAIC,GAAU,EACd,OAAO,IAAIC,SAAQ,SAACC,GAgBlB,SAASC,IAGP,GADKN,GAAQO,QAAQC,IAAI,4CAA6CL,IAClEA,EAAJ,CAGAA,GAAU,EACV1H,OAAOgI,oBAAoB,uBAAwBH,GACnD,MAAqB7H,OAAbiI,EAAR,EAAQA,SAMR,GALKV,GAAQO,QAAQC,IACnB,+CACAE,EACAX,IAEEW,GAAcX,IAAkBW,EAASC,WAEtC,CACL,IAAMC,EACJb,GAAkBW,EACd,yCACA,qCACLV,GAAUO,QAAQzB,MAAM,0BAA2B8B,GACpDP,OAAQQ,QAPRR,EAAQK,IA7BRjI,OAAOiI,SACTJ,KAGKN,GAAQO,QAAQC,IACnB,wEAEF/H,OAAOqI,iBAAiB,uBAAwBR,EAAgB,CAC9DS,MAAM,IAERC,YAAW,WACTV,MACCL,OA4BP,SAASC,IACP,GAA8B,mBAAnBH,EACT,MAAM,IAAIkB,MAAJ,6EAIR,GAAsB,mBAAXjB,EACT,MAAM,IAAIiB,MAAJ,qEAIR,GAAuB,kBAAZhB,EACT,MAAM,IAAIgB,MAAJ,sEAYL,SAAeC,EAAtB,kC,8DAAO,WAA4CC,GAA5C,0FACAA,EADA,yCACiB,CAACC,WAAW,IAD7B,uBAEiBD,EAASE,QAAQ,CAAEC,OAAQ,gBAF5C,cAECtD,EAFD,yBAIE,CACLoD,UAAWD,EAASI,cACpBvD,QAASwD,OAAOxD,GAChByD,WAAY,KAAF,OAAQD,OAAOxD,GAASrE,SAAS,KAC3C+H,eAAgBF,OAAOL,EAASO,kBAR7B,2C,wBAkBA,SAAeC,EAAtB,kC,8DAAO,WAAoDR,GAApD,+IAA8E,GAA9E,IAA+DlB,eAA/D,MAAyE,IAAzE,oBACE,IAAIG,SAAQ,SAACC,GAClB,IAAIuB,GAAY,EAEhBZ,YAAW,WACLY,IACJA,GAAY,EACZvB,EAAQ,OACPJ,GAGHkB,EACGE,QAAQ,CAAEC,OAAQ,iBAClBO,MAAK,SAACC,GACDF,IACJA,GAAY,EACZvB,EAAQyB,OAETC,OAAM,WACDH,IACJA,GAAY,EACZvB,EAAQ,YArBT,2C,wBA0BP,SAAS2B,EAAUlD,GACjB,MAAgC,qBAAlBA,EAAM8B,QAUtB,SAASqB,EAAcnD,EAAOoD,EAAMnN,GAClC,GAAK+J,EAAL,CACA,IAAI1I,EAAS0I,EAGb,GAFqB,iBAAV1I,IAAoBA,EAAS,IAAI6K,MAAM7K,IAC7C4L,EAAU5L,KAASA,EAAS,IAAI6K,MAAM7K,IACvC,gBAAQA,EAAO8L,OAAiC,iBAAlB9L,EAAOwK,QACvC,IACE,IAAMuB,EAAUC,KAAKC,MAAMjM,EAAOwK,SAClCxK,EAAO8L,KAAOC,EAAQD,KACtB9L,EAAOrB,KAAOoN,EAAQpN,KACtBqB,EAAOwK,QAAUuB,EAAQvB,QACzB,MAAO9B,GACP1I,EAAO8L,KAAOA,GAAQ,EAK1B,OAFIA,IAAM9L,EAAO8L,KAAOA,GACpBnN,IAAMqB,EAAOrB,KAAOA,GACjBqB,GAWF,SAAekM,EAAtB,oC,8DAAO,WAA8CnB,EAAUoB,GAAxD,iGACQ,IAAInC,SAAQ,SAACC,EAASmC,GACjC,IAAIZ,GAAY,EAEhBW,EAASxB,KAAK,UAAU,WAClBa,IACJA,GAAY,EACZY,EAAOP,EAAc,kBAAmB,WAE1Cd,EACGE,QAAQ,CAAEC,OAAQ,wBAClBO,MAAK,SAACC,GACDF,IACJA,GAAY,EACZvB,EAAQyB,OAETC,OAAM,SAACjD,GACF8C,IACJA,GAAY,EACZY,EAAOP,EAAcnD,WAnBtB,mF,wBA0CA,SAAe2D,EAAtB,sC,8DAAO,WAA6CtB,EAAUpD,EAAS2E,GAAhE,0FACAvB,EADA,sBACgBc,EAAc,4BAA6B,OAD3D,UAEAlE,EAFA,sBAEekE,EAAc,iCAAkC,OAF/D,UAGA,iBAAiBU,KAAK5E,EAAQC,SAH9B,sBAG8CiE,EAAc,wDAAyD,OAHrH,gCAKGd,EAASE,QAAQ,CACrBC,OAAQ,6BACRsB,OAAQ,CAAC,CAAE5E,QAASD,EAAQC,YAP3B,+DAUC6E,EAAcZ,EAAc,EAAD,IAE3B,0BAA0BU,KAAKE,EAAYjC,WAAUiC,EAAYX,KAAO,MAGpD,MAApBW,EAAYX,KAfb,qBAgBIQ,IAAW3E,EAAQrB,UAhBvB,4CAkBSyE,EAASE,QAAQ,CACrBC,OAAQ,0BACRsB,OAAQ,CACN7E,EAAS2E,KArBhB,oEA4BST,EAAc,EAAD,IA5BtB,sCA+BOA,EAAc,mHAAoH,MAAOlE,GA/BhJ,cAoCG8E,EApCH,kE,wBChLQ,OACb9N,KAAMA,WAAR,OACAmK,cAEE4D,SAAUA,iCACZtL,4BACAA,iFAGEuL,QATF,WASA,gLAEAC,6CAFA,cAEAC,EAFA,gBAGAA,SAHA,OAGAC,EAHA,OAIA,yDAJA,8CAOEC,QAASA,gDACXxN,gCACAA,mGAFA,IAGIuI,kBAHJ,SAGAH,GAAA,uKACA,mBADA,sBACA,6CADA,cAEA2C,EAAA,4BACA1C,EAAA,oCACAsB,EAAAO,sBAJA,kBAMA,gCAAAuD,gBANA,UAQA,SARA,uBAQA,uCARA,yBASAlC,KATA,WASAmC,EATA,OAUAA,qBAVA,kCAWAZ,KACAzE,UACAtB,iBACA4G,8BACAC,gCACAC,kDAAA,2EACA,UAjBA,gCAmBA,2BAnBA,QAqBAC,SAAAtM,mBArBA,qDAwBA,sDAxBA,gECjD8V,I,YCO1VuM,EAAY,eACd,EACA,EACA,GACA,EACA,KACA,KACA,MAIa,EAAAA,E,QClBX,EAAS,WAAa,IAAIvI,EAAI7B,KAAS8B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAAEH,EAAuB,oBAAEG,EAAG,MAAM,CAACA,EAAG,QAAQ,CAACc,YAAY,QAAQZ,MAAM,CAAC,MAAQ,OAAO,KAAO,IAAIO,GAAG,CAAC,MAAQZ,EAAIwI,sCAAsC,CAACxI,EAAIgB,GAAG,6BAA6Bb,EAAG,QAAQ,CAACc,YAAY,YAAYZ,MAAM,CAAC,MAAQ,OAAO,KAAO,IAAIO,GAAG,CAAC,MAAQZ,EAAIyI,sBAAsB,CAACzI,EAAIgB,GAAG,+BAA+B,GAAGhB,EAAIW,KAAKR,EAAG,MAAMA,EAAG,MAAOH,EAAqB,kBAAEG,EAAG,MAAM,CAACA,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,OAAO,KAAO,IAAIO,GAAG,CAAC,MAAQZ,EAAI0I,wCAAwC,CAAC1I,EAAIgB,GAAG,sCAAsChB,EAAIgB,GAAG,KAAKb,EAAG,MAAMA,EAAG,MAAMA,EAAG,WAAW,CAACE,MAAM,CAAC,KAAQ,SAAYL,EAAI2I,gBAAuB,QAAI,cAAiB3I,EAAI2I,gBAAuC,wBAAG,MAAQ3I,EAAI+D,SAAS,YAAY,OAAO,aAAa,UAAU,kBAAkB,GAAG,gBAAgB,GAAG,cAAc,IAAIzD,MAAM,CAAC7D,MAAOuD,EAAmB,gBAAEO,SAAS,SAAUC,GAAMR,EAAI2I,gBAAgBnI,GAAKE,WAAW,qBAAsBV,EAAiB,cAAEG,EAAG,MAAM,CAACA,EAAG,MAAMA,EAAG,aAAa,CAACE,MAAM,CAAC,MAAQ,2BAA2B,YAAc,8BAA8B,SAAW,GAAG,QAAU,GAAG,UAAY,GAAG,eAAeL,EAAIqB,OAAO,MAAQrB,EAAI4I,SAAShI,GAAG,CAAC,sBAAsBZ,EAAI6I,gBAAgB1I,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,4BAA4B,YAAc,+BAA+B,SAAW,GAAG,KAAOL,EAAI8I,KAAK,OAAS,YAAYlI,GAAG,CAAC,eAAe,SAASE,GAAQd,EAAI8I,MAAQ9I,EAAI8I,OAAOxI,MAAM,CAAC7D,MAAOuD,EAAY,SAAEO,SAAS,SAAUC,GAAMR,EAAI+I,SAASvI,GAAKE,WAAW,eAAe,GAAGV,EAAIW,MAAM,GAAGX,EAAIW,QACloD,EAAkB,G,2MCAPqI,SAGfA,OAAQC,QAAQC,QAAU,S,kECFbC,GAAQ,CACnBC,QAAU,UACVC,aAAe,eACfC,SAAW,WACXC,iBAAmB,mBACnBC,gBAAkB,UAClBC,eAAiB,QAGNC,GAAc,yDAGdC,GAAoB,6CACpBC,GAAkB,6CACzBC,GAAgC,qBACzBC,GAAwBC,IAAKC,MAAMC,UAAUJ,ICVpDK,GAAqB,GAErBC,GAAQ,iBAAO,CACjBC,UAAW,EACXC,eAAgB,EAChBC,YAAa,EACbC,QAAS,GACTC,wBAAyB,KACzBC,OAAQ,GACRnJ,mBAAoB,EACpBoJ,wBAAyB,EACzBC,WAAY,KACZC,mBAAoB,IAGlBC,GAAU,SAACjM,GAAD,OAASA,EAAIkM,QAAO,SAAC7M,EAAGC,GAAJ,OAAUD,EAAIC,IAAG,GAAKU,EAAIxE,QAExD2Q,GAAU,CACZC,eADY,SACGb,GACX,IAAMc,EAAUd,EAAMM,OAAOrH,KAAI,SAACrH,GAAD,OAAOA,EAAEmP,OAAOC,cAEjD,OADAF,EAAQG,QAAQ,GACTH,GAEXI,cANY,SAMElB,GACV,GAA4B,IAAxBA,EAAMM,OAAOrQ,OAAc,OAAO,EACtC,IAAM6Q,EAAUd,EAAMM,OAAOrH,KAAI,SAACrH,GAAD,OAAOA,EAAEmP,OAAOC,cACjD,OAAON,GAAQI,IAEnBK,gBAXY,SAWInB,GACZ,GAAIA,EAAMM,OAAOrQ,OAAS,EAAG,OAAO,EAGpC,IAFA,IAAMmR,EAAWpB,EAAMM,OAAOrQ,OAAOoR,KAAKC,IAAItB,EAAMM,OAAOrQ,OAAQ,IAC7DsR,EAAS,GACNxR,EAAEiQ,EAAMM,OAAOrQ,OAAO,EAAGF,EAAEqR,EAAUrR,IAAK,CAC/C,IAAMyR,EAAgBxB,EAAMM,OAAOvQ,EAAI,GACjC0R,EAAYzB,EAAMM,OAAOvQ,GAC/BwR,EAAOhR,MAAMkR,EAAUC,WAAaF,EAAcE,YAAc,KAGpE,OAAqB,GAAjBH,EAAOtR,OAAoB,EACxBsR,EAAOZ,QAAQ,SAACgB,EAAKC,GAAN,OAAUA,EAAED,IAAK,GAAKJ,EAAOtR,QAEvDwR,UAxBY,SAwBFzB,GACN,OAA4B,IAAxBA,EAAMM,OAAOrQ,OAAqB,KAC/B+P,EAAMM,OAAON,EAAMM,OAAOrQ,OAAS,IAE9C4R,gBA5BY,SA4BI7B,EAAOY,GAAS,MAC5B,iBAAOA,EAAQa,iBAAf,aAAO,EAAmBK,MAAMC,SAIlCC,GAAYC,OAAKD,UAAUhC,I,SAElBkC,G,qGAAf,WAAmCtC,EAAMmB,GAAzC,sGACUoB,EAAkBC,GAAOlQ,IAAI,iBAC7BmQ,EAAOC,GAAM1C,GAFvB,KAGoBA,EAAKC,MAHzB,SAG0CD,EAAK2C,IAAIC,WAAWzB,EAAO3D,SAHrE,0BAGUqF,EAHV,KAG+BC,KAH/B,gBAIUC,EAAMzG,OAAO0G,WAAWhD,EAAKC,MAAMgD,QAAQJ,EAAS,UAJ9D,UAK4BN,EAAgBW,UAAUT,EAAKhS,OAAQ0Q,EAAO3D,SAL1E,eAKU0F,EALV,OAMI/B,EAAO+B,UAAY5G,OAAO0G,WAAWE,GACrC/B,EAAO0B,QAAUE,EACjB5B,EAAOC,WAAa,EARxB,kBAUWD,GAVX,4C,kCAaegC,G,qGAAf,WAA4BnD,EAAMkC,GAAlC,sHACI7G,QAAQC,IAAI,cAAe4G,EAAMC,QAAQ,IAAIiB,MAAOC,gBAC9CZ,EAAOC,GAAMF,GAAOlQ,IAAI,kBACxBiQ,EAAkBC,GAAOlQ,IAAI,iBAE7BzC,EAAO,CAAEqS,QAAOf,YAAQxF,GALlC,SAOwC,kBAArBuG,EAAMoB,YAA4BpB,EAAMoB,WAAWC,WAAW,QAAOrB,EAAMoB,WAAahH,OAAOkH,SAAStB,EAAMoB,aACnHG,EAAsC,kBAAjBvB,EAAMC,OAAsB7F,OAAOkH,SAAStB,EAAMC,QAAUD,EAAMC,OAEzFuB,EAAgB1D,EAAKC,MAAM6C,KAAK,GAChCvC,EAAcP,EAAKC,MAAM6C,KAAK,GAX1C,cAa4B9C,EAAKC,MAbjC,UAakDD,EAAK2C,IAAIgB,aAAa9D,GAAiBE,GAAuB0D,EAAa,GAb7H,2BAaYC,EAbZ,KAauCZ,KAbvC,qBAc0B9C,EAAKC,MAd/B,UAcgDD,EAAK2C,IAAIgB,aAAa9D,GAAiBE,GAAuB0D,GAd9G,oBAcYlD,EAdZ,KAcqCuC,KAdrC,oFAoBQjT,EAAKsR,OAASyC,sCAAyB1B,GApB/C,UAqB4BI,GAAoBtC,EAAMnQ,EAAKsR,QArB3D,eAqBQtR,EAAKsR,OArBb,OAsBc0C,EAAQvH,OAAO0G,WAAWhD,EAAKC,MAAMgD,QAAQ1C,EAAYuD,IAAIJ,GAAgB,UACnF7T,EAAKsR,OAAOC,WAAayC,EACzBhU,EAAKqS,MAAMC,OAASsB,EAxB5B,UA0BqClB,EAAgBjC,eAAemC,EAAKhS,QA1BzE,eA0Bc6P,EA1Bd,iBA2B8BiC,EAAgBwB,QAAQtB,EAAKhS,QA3B3D,QA2BcsT,EA3Bd,OA6BQlU,EAAKyQ,eAAiBhE,OAAOkH,SAASlD,GACtCzQ,EAAK0Q,YAAcjE,OAAO0G,WAAWhD,EAAKC,MAAMgD,QAAQ1C,EAAa,UACrE1Q,EAAKkU,QAAUzH,OAAOkH,SAASO,GAC/BlU,EAAKiS,WAAasB,KAAKY,MAGjBxD,EAAU,GACPnI,EAAQ,EApCzB,aAoC4BA,EAAQ0L,GApCpC,kCAqCiCxB,EAAgB/B,QAAQiC,EAAKhS,OAAQ4H,GArCtE,eAqCkB8I,EArClB,iBAsCmCoB,EAAgB0B,SAASxB,EAAKhS,OAAQ0Q,GAtCzE,QAsCkB8C,EAtClB,OAuCYzD,EAAQ7P,KAAK,CAACwQ,SAAQ8C,aAvClC,QAoC6C5L,IApC7C,mFA4CQgD,QAAQ6I,KAAK,2BAAb,MACM,IAAInI,MAAM,yBAAyBmG,EAAMC,QA7CvD,iCA+CWtS,GA/CX,iE,kCAiDesU,G,yGAAf,WAA8BnE,EAAMU,EAAQF,EAAS0B,GAArD,6FAEI,MAAOxB,EAAOrQ,OAAO,GAAKqQ,EAAOA,EAAOrQ,OAAO,GAAG6R,MAAMC,QAAUD,EAAMC,OACpEzB,EAAO0D,MAHf,gBAKuBjB,GAAanD,EAAMkC,GAL1C,OAKUrS,EALV,OAMI6Q,EAAO/P,KAAKd,GACZ,MAAO6Q,EAAOrQ,QAAU8P,GACpBO,EAAO5P,QARf,OAYQuT,EAAK7D,EAAQ8D,WAAU,SAAA7S,GAAC,OAAEA,EAAE+L,SAAW3N,EAAKsR,OAAO3D,WACnD6G,EAAG,GACGlD,EADA,iCACatR,EAAKsR,QADlB,IACyBoD,aAAc,IAC7ClJ,QAAQC,IAAI,sBAAuB6F,GACnCX,EAAQ7P,KAAKwQ,KAEPA,EADH,iCACgBX,EAAQ6D,IAAQxU,EAAKsR,QACxCA,EAAOoD,eACP/D,EAAQ6D,GAAMlD,GApBtB,kBAsBW,CAACT,SAAQF,YAtBpB,2C,yBA0BA,IAAMgE,GAAU,CACNC,eADM,YACuB,0JAAZC,EAAY,EAAZA,SAAY,SACzBA,EAAS,sBADgB,uBAEzBA,EAAS,uBAFgB,uBAGzBA,EAAS,qBAHgB,8CAM7BC,eAPM,YAO0B,kKAAhBvE,EAAgB,EAAhBA,MAAOwE,EAAS,EAATA,OACrBxE,EAAMQ,YAAaiE,cAAc,EAAKjE,YAC1CgE,EAAO,qBAAsB,GACvBhE,EAAakE,aAAa,WAC5B,IAAMjD,EAAYW,GAAOlQ,IAAI,mBAC7B,GAAKuP,EAAL,CACA,IAAMhB,EAAqBuC,KAAKY,MAAMnC,EAAUC,WAMhD8C,EAAO,qBAAsB/D,MAC9B,KAEH+D,EAAO,aAAchE,GAfa,8CAkBhCmE,mBAzBM,WAyBe,mKACDC,GAAa,WADZ,OACjBjB,EADiB,OAEvBvB,GAAOlN,IAAI,kBAAmBgH,OAAOkH,SAASO,IAFvB,8CAKrBkB,oBA9BM,WA8BgB,mKACKD,GAAa,kBADlB,OAClB1E,EADkB,OAExBkC,GAAOlN,IAAI,uBAAwBgH,OAAOkH,SAASlD,IAF3B,8CAKtB4E,kBAnCM,WAmCc,2JAChB1E,EAAUgC,GAAOlQ,IAAI,iBADL,iBAEDkO,GAFC,gEAEXW,EAFW,iBAGF6D,GAAa,WAAY7D,EAAO3D,SAH9B,OAGZ/L,EAHY,OAKlB0P,EAAOgE,SAAW1T,EALA,kJAOtB+Q,GAAOlN,IAAI,gBAAiBkL,GAPN,mEAUpB4E,wBA7CM,YA6CkD,wKAA9BhF,EAA8B,EAA9BA,MAAOiF,EAAuB,EAAvBA,UAAWX,EAAY,EAAZA,SACR,OAAlCtE,EAAMK,0BACNL,EAAMK,wBAAwB6E,cAC9B9C,GAAOlN,IAAI,gCAAiC,OAHU,SAKpDoP,EAAS,0BAL2C,OAOpD1E,EAAOqF,EAAUE,KAAKvF,KACtBwF,EAAeC,GAAmBzF,GACpC0F,GAAkB,EAClBC,EAAgB,GACdC,EAXoD,yDAWnC,WAAO1D,GAAP,kGAEYvG,GAAvBuG,EAAM2D,cAFK,gCAEqC7F,EAAK2C,IAAImD,SAAS5D,EAAMC,QAF7D,OAEuBD,EAFvB,8BAGTwC,EAAS,iBAAkBxC,GAHlB,iEAOf7G,QAAQ6I,KAAK,iCAAb,MACAyB,EAAgB,GARD,UASTjB,EAAS,2BATA,yDAXmC,sDAuB1Dc,EAAa3O,GAAG,OAAhB,yDAAwB,WAAMqL,GAAN,qFAChBwD,EADgB,gBACCC,EAAchV,KAAKuR,GADpB,uCAGhBwD,GAAkB,EAHF,SAIVE,EAAe1D,GAJL,YAKRA,EAAQyD,EAAc7U,SALd,kCAMN8U,EAAe1D,GANT,gDAShBwD,GAAkB,EATF,2EAAxB,uDAYAlD,GAAOlN,IAAI,gCAAiCkQ,GAnCc,+CAsC9DO,0BAnFY,WAoF8B,OAAlC3F,GAAMK,yBAAkCL,GAAMK,wBAAwB6E,eAKxEU,eAzFM,WAyFiD9D,GAAO,sKAA7C9B,EAA6C,EAA7CA,MAAOiF,EAAsC,EAAtCA,UAAWT,EAA2B,EAA3BA,OAAQF,EAAmB,EAAnBA,SACvC1E,EAAOwC,GAAOlQ,IAAI,aACxBsS,EAAO,qBAAsB1C,EAAMC,SAC/BkD,EAAUE,KAAKjO,OAH6C,gCAI1C2O,GAAiBZ,EAAUE,KAAKjO,QAJU,OAItDyL,EAJsD,OAK5D6B,EAAO,0BAA2B7B,GAL0B,iCAQ5BoB,GAAenE,EAAD,eAAWI,EAAMM,QAAjB,eAA8BN,EAAMI,SAAU0B,GARhC,iBAQrDxB,EARqD,EAQrDA,OAAQF,EAR6C,EAQ7CA,QAEfgC,GAAOlN,IAAI,eAAgBoL,GAC3B8B,GAAOlN,IAAI,gBAAiBkL,GACxBE,EAAOrQ,OAAO,GACdmS,GAAOlN,IAAI,oBAAqBoL,EAAOA,EAAOrQ,OAAO,GAAGkQ,aAbA,6DAkBhEmE,EAAS,kBAlBuD,6DAqBpEwB,0BA9GY,YA8GkC,IAAnBb,EAAmB,EAAnBA,UAAWjF,EAAQ,EAARA,MAC5BJ,EAAOqF,EAAUE,KAAKvF,KACtBmG,EAAWd,EAAUE,KAAKY,SAC1BC,EAAO,IAAIC,0BAAqBhB,EAAUE,KAAKtJ,UAAU,kBAAIf,QAAQC,QAAQgL,EAASG,eACtF9F,EAAU,eAAIJ,EAAMI,SAC1B2F,EAASI,OAAOC,sBAAsBJ,EAAK9T,IAAI,CAACmU,UAAW,IAAK,IAC/D5P,GAAG,MADJ,yDACW,WAAMyE,GAAN,4FAEHoL,EAAQlG,EAAQjG,MAAK,SAAA9I,GAAC,OAAEA,EAAE+L,QAAQjE,eAAiB+B,EAAIqL,aAAaC,KAAKrN,iBACxEmN,EAHE,gCAIkBpE,GAAoBtC,EAAM,CAC3CxC,QAASlC,EAAIqL,aAAaC,KAAKrN,cAC/BsN,OAAQ,CAACC,OAAO,0BAChBvC,aAAc,IAPf,OAIGpD,EAJH,OAUHuF,EAAQlG,EAAQjG,MAAK,SAAA9I,GAAC,OAAEA,EAAE+L,QAAQjE,eAAiB4H,EAAO3D,WAEtD2D,EAAO+B,UAAU,QAAavH,IAAR+K,IACtBrL,QAAQC,IAAI,6BAA8B6F,GAE1CX,EAAQ7P,KAAKwQ,GAEbrF,YAAY,kBAAI0G,GAAOlN,IAAI,gBAAiBkL,KAAU,MAjBvD,2CADX,wDAwBEuG,uBA3IM,YA2I0C,+LAAvB1B,EAAuB,EAAvBA,UAAWX,EAAY,EAAZA,SAChC1E,EAAOqF,EAAUE,KAAKvF,KAExBU,EAH8C,eAGhC2E,EAAU2B,MAAMtG,QAAQ,IAEtCF,EAL8C,eAK/B6E,EAAU2B,MAAMxG,SAAS,IACtCyG,EAAoBvG,EAAOrQ,OAAO,EAAIqQ,EAAOA,EAAOrQ,OAAO,GAAG6R,MAAMC,OAAS,EANjC,SAOxBnC,EAAK2C,IAAIuE,iBAPe,OAclD,IAPMzD,EAP4C,OAQlD,EAAKA,YAAcA,EAEfpL,EAAQoJ,KAAK0F,IAAIF,EAAkB,EAAGxD,EAActD,IACxD9E,QAAQC,IAAI,aAAcjD,EAAO,KAAMoL,EAAa,gBAAiBjD,EAAQnQ,OAAQ,eAAgBqQ,EAAOrQ,QAEtG+W,EAAe,GACd/O,EAAQoL,EAAapL,IAAS+O,EAAazW,KAAK0H,GAdL,iBAevB6C,QAAQ8C,IAAIoJ,EAAa/N,KAAI,SAAAhB,GAAK,OAAE2H,EAAK2C,IAAImD,SAASzN,GAAO,OAftC,QAe5CgP,EAf4C,wBAgB9BA,GAhB8B,kEAgBvCnF,EAhBuC,4BAmB1BiC,GAAenE,EAAMU,EAAQF,EAAS0B,GAnBZ,QAmBpC3P,EAnBoC,OAoB1CmO,EAASnO,EAAEmO,OACXF,EAAUjO,EAAEiO,QArB8B,0MA0B9CE,EAAOrQ,OAAO,GACdmS,GAAOlN,IAAI,oBAAqBoL,EAAOA,EAAOrQ,OAAO,GAAGkQ,aAE5DiC,GAAOlN,IAAI,eAAgBoL,GAC3B8B,GAAOlN,IAAI,gBAAiBkL,GAE5BkE,EAAS,6BACTlC,GAAOkC,SAAS,kBAjCkC,4EAmChD4C,iBA9KM,WA8KwB9J,GAAS,4JAArB6H,EAAqB,EAArBA,UACdrF,EAAOqF,EAAUE,KAAKvF,KAEtBQ,EAAU6E,EAAU2B,MAAMxG,SAAW,GACvCkG,EAAQlG,EAAQ8D,WAAU,SAAA7S,GAAC,OAAEA,EAAE+L,SAAWA,EAAQjE,mBAClDmN,GAAO,GAL8B,iCAMdpE,GAAoBtC,EAAMQ,EAAQkG,IANpB,cAMrClG,EAAQkG,GAN6B,OAOrClE,GAAOlN,IAAI,gBAAiBkL,GAPS,kBAQ9BA,EAAQkG,IARsB,sCAU9B/K,GAV8B,+CAcvC4L,gBA5LM,cA4LoD,8JAAzC7C,EAAyC,EAAzCA,SAAa8C,EAA4B,EAA5BA,cAAetE,EAAa,EAAbA,UAAa,SACtDuE,GAAiBC,GAAU,eAAgBF,EAAetE,IADJ,OAE5DwB,EAAS,mBAAoB8C,GAC7B9C,EAAS,kBAHmD,+CAOrD,IACXtE,SACAY,WACAoB,aACAoC,WACAmD,YAAY,G,wBC5UVvH,GAAQ,iBAAO,CACjBJ,KAAM,KACNyC,KAAM,KACNxG,SAAU,KACVtD,iBAAkB,KAClBiP,eAAgB,KAChBC,cAAe,KACfC,aAAc,KACdC,cAAe,KACfzQ,OAAQ,KACR0Q,gBAAiB,KACjB7B,SAAU,KACV8B,YAAY,EAEZC,QAAQ,EACRC,aAAa,EACbC,WAAW,EACXC,mBAAmB,EACnBC,6BAA8B,KAC9B5Q,cAAc,EACd6Q,qBAAuB,IAAIC,OAGzBxH,GAAU,CACZ5J,WADY,SACDgJ,GACP,OAAKA,EAAM9I,OACP8I,EAAM+H,YAAoB/I,GAAME,aAChCc,EAAM8H,OAAe9I,GAAMG,SAC3Ba,EAAMiI,kBAA0BjJ,GAAMI,iBACtCY,EAAMgI,UAAkBhJ,GAAMK,gBAE3BL,GAAMM,eANaN,GAAMC,SAQpCjF,YAVY,SAUAgG,GACR,MAA2B,YAAvBA,EAAMyH,cACCzH,EAAMzH,iBAAiByB,YAEP,UAAvBgG,EAAMyH,cACCzH,EAAMwH,eAAexN,iBADhC,GAKJ5C,UAnBY,SAmBF4I,GACN,IAAItH,EAAQ,EACZ,OAAQsH,EAAMyH,eACV,IAAK,SAAU/O,EAAQsH,EAAMwH,eAAevN,QAAS,MACrD,IAAK,WAAYvB,EAAQsH,EAAMzH,iBAAiB0B,QAAS,MAE7D,OAAQvB,GACJ,KAAK,KAAM,MAAO,WAClB,KAAK,KAAM,MAAO,UAEtB,MAAO,YAITsJ,GAAYC,OAAKD,UAAUhC,I,SAGlBqI,K,gGAAf,qBASaC,EATb,4FASaA,EATb,WAUQnV,OAAOoV,SAAW,IAAIlP,IAAIlG,OAAOoV,SAASC,SAAUrV,OAAOoV,SAASE,QAAQC,MAThFzN,QAAQC,IAAI,4BACNxB,EAAS0I,GAAOlQ,IAAI,UACtBqG,OAAmBgD,EAH3B,kBAKiCf,EAAuB,CAACG,QAAQ,MALjE,OAKQpC,EALR,4DAOQ0C,QAAQC,IAAI,+BAPpB,YAYQ3C,EAZR,wBAiBQA,EAAiBoQ,eAAe,eAAgBL,GAChD/P,EAAiB9B,GAAG,eAAgB6R,GAlB5C,UAmB4B1M,EAA6BrD,GAnBzD,eAmBcqQ,EAnBd,OAqBc5O,EAAcO,EAAeb,EAAQkP,EAAMlQ,SACjDuC,QAAQC,IAAI,uBAAwBlB,GAtB5C,kBAuBe,CACHyN,cAAe,WACf5L,SAAUtD,EACVmP,aAAc,WACdC,cAAe,KACf1N,QAAS2O,EAAMlQ,QACfsB,gBA7BZ,sCA+BkBuB,GA/BlB,0D,kCAkCesN,K,gGAAf,2GACUnP,EAAS0I,GAAOlQ,IAAI,UACpB4W,EAAiB5O,EAAkBR,IAErCoP,EAAehP,QAJvB,uBAMchJ,EAAS,CACX2W,cAAe,SACf5L,SAAUkN,GAAuBD,EAAehP,SAChD4N,aAAc,KACdC,cAAe,KACf1N,QAASiC,OAAOkH,SAAS0F,EAAe7O,SACxCD,YAAaO,EAAeb,IAG5BoP,EAAe/O,yBACfjJ,EAAO4W,aAAe,MACtB5W,EAAO6W,cAAgBmB,EAAe/O,yBAEtCkB,QAAQC,IAAI,gDAnBxB,kBAqBepK,GArBf,cAuBQmK,QAAQC,IAAI,0CAvBpB,uBAwBeK,GAxBf,4C,yBA2BA,IAAM6I,GAAU,CAEN4E,mCAFM,WAE+B,4JACjCpJ,EAAOwC,GAAOlQ,IAAI,aACnB0N,EAFkC,yCAErB,sCAFqB,cAGjCuC,EAAkBC,GAAOlQ,IAAI,iBACnC+I,QAAQC,IAAI,qCAAsC0E,GAJX,kBAOTA,EAAK2C,IAAIuE,iBAPA,cAO7BzD,EAP6B,iBASfzD,EAAK2C,IAAImD,SAASrC,GATH,eAS7BvB,EAT6B,OAUH,kBAArBA,EAAMoB,YAA4BpB,EAAMoB,WAAWC,WAAW,QAAOrB,EAAMoB,WAAahH,OAAOkH,SAAStB,EAAMoB,aACzHM,sCAAyB1B,GAXU,UAa7BK,EAAgBwB,QAAQtB,KAAOhS,QAbF,oEAgBnC4K,QAAQzB,MAAM,6CAAd,MAhBmC,kBAiB5B,KAAM8B,SAjBsB,kCAmBhC,GAnBgC,6DAsBrC2N,oBAxBM,YAwB0B,mJAAX3E,EAAW,EAAXA,SACvBA,EAAS,qBACTA,EAAS,yBAA0B,KAAM,CAAE4E,MAAM,IACjD5E,EAAS,aAHyB,8CAMhC6E,UA9BM,WA8BM,kKACdlO,QAAQC,IAAI,oBAGZkH,GAAOlN,IAAI,kBAAkB,GAC7BkN,GAAOlN,IAAI,eAAe,GAC1BkN,GAAOlN,IAAI,oBAAoB,GAGzBgC,EAASkL,GAAOlQ,IAAI,gBACtBgF,EAVU,iCAYc0N,GAAa,oBAAqB1N,GAZhD,cAYJ8Q,EAZI,iBAasBpD,GAAa,kBAAmB1N,GAbtD,eAaJ+Q,EAbI,iBAea7F,GAAOkC,SAAS,yBAA0BpN,GAfvD,WAeNkS,EAfM,OAiBLA,EAjBK,4CAmBuBxE,GAAa,aAAc1N,GAnBlD,eAmBImS,EAnBJ,iBAqBiBjH,GAAOkC,SAAS,yBAA0B+E,GArB3D,QAqBFD,EArBE,yEA0BNA,EA1BM,wBA2BNhH,GAAOlN,IAAI,eAAe,GACtB6S,GAAc,EA5BZ,oBA8BkBnD,GAAa,qBAAsB1N,GA9BrD,QA8BF6Q,EA9BE,8EAgCsBnD,GAAa,YAAa1N,GAhChD,QAgCI4L,EAhCJ,OAiCFiF,EAAcjF,EAAY,EAjCxB,QAmCNV,GAAOlN,IAAI,mBAAoB6S,GAC/B3F,GAAOlN,IAAI,uBAAwBkU,EAAWhM,SApCxC,QAuCVgF,GAAOlN,IAAI,iBAAkB8S,GAC7B5F,GAAOlN,IAAI,yBAA0B+S,GAxC3B,sEA6CZqB,cA3EM,SA2EQC,EAAO1N,GAAU,mJACjCZ,QAAQC,IAAI,sBAAuBW,EAAS4L,eAC5CrF,GAAOlN,IAAI,gBAAiB2G,EAASA,UACrCuG,GAAOlN,IAAI,qBAAsB2G,EAAS4L,eACpC7H,EAAO,IAAI4J,IAAK3N,EAASA,UAC/B+D,EAAK2C,IAAIkH,IAAM,KACfrH,GAAOlN,IAAI,YAAa0K,GACxBzM,OAAOuW,OAAS9J,EAChBwC,GAAOlN,IAAI,YAAa,MARS,8CAW/ByU,eAtFM,YAsF+C,oKAArCrF,EAAqC,EAArCA,SAAUE,EAA2B,EAA3BA,OAAQxE,EAAmB,EAAnBA,MAAOiF,EAAY,EAAZA,UAEtCjF,EAAM+F,UACPvB,EAAO,WAAYoF,MAEvB3O,QAAQC,IAAI,8BAL2C,SAO9C+J,EAAUvL,OAPoC,gCAOtB0I,GAAOkC,SAAS,eAPM,cAQ/CuF,EAAc,EARiC,UAUpBxB,KAVoB,eAU7C9P,EAV6C,OAW/CA,GACAsR,IAZ+C,UAetBhB,KAfsB,WAe7CrB,EAf6C,OAgB/CA,GACAqC,IAEe,GAAfA,EAnB+C,wBAqB/CzH,GAAOlN,IAAI,qBAAsB,QArBc,8BAyBnDkN,GAAOlN,IAAI,wBAAyBqD,GACpC6J,GAAOlN,IAAI,sBAAuBsS,KAC9BqC,EAAc,GA3BiC,iBA4B/CzH,GAAOlN,IAAI,qBAAsB,QA5Bc,+BA+BzC2G,EAAW2L,GAAkBjP,EA/BY,UAgCzC+L,EAAS,gBAAiBzI,GAhCe,6DAqCnDZ,QAAQzB,MAAM,kCAAmC,KAAM8B,SArCJ,QAuCvDL,QAAQC,IAAI,iCAvC2C,6DA0CrD4O,uBAhIM,WAgImB,8JACvBC,EAAY,GACVxR,EAAmB6J,GAAOlQ,IAAI,yBAE9BiE,EAAQiM,GAAOlQ,IAAI,sBAEZ,YAATiE,EANuB,gCAMgBkG,EAAqC9D,EAAiBsD,SAAU,CAAClB,QAAQ,MANzF,OAMFoP,EANE,iBAOd,UAAT5T,GAAyC,GAApB4T,EAAU9Z,OAPR,kCAOuC+Z,KAPvC,QAOqBD,EAPrB,mBAQ3B,EAAA9O,SAAQC,IAAR,SAAY,mBAAZ,sBAAkC6O,GAAlC,CAA6C,OACvC3M,EAAU2M,EAAU9Z,OAAS,EAAI8Z,EAAU,GAAK,KACjD3M,EAVsB,0DAW3BgF,GAAOlN,IAAI,cAAekI,GAXC,kBAapBA,GAboB,+CAgBzB7F,uBAhJM,YAgJ2B,mJAARyI,EAAQ,EAARA,MACvBA,EAAM1I,cACN0I,EAAMmI,qBAAqB8B,KAAK,UAFD,8CAMjCC,6BAtJM,YAsJ6E,wLAApD5F,EAAoD,EAApDA,SAAUtE,EAA0C,EAA1CA,MAAOwE,EAAmC,EAAnCA,OAAmC,iCAAJ,GAAI,IAAxB1G,kBAAwB,SAC/EjC,EAAWuG,GAAOlQ,IAAI,yBAC5BkQ,GAAOlN,IAAI,cAAe,MAF2D,SAKhEmH,EAAqCR,EAASA,SAAU,CAAClB,QAAS,MALF,UAKjF6B,EALiF,OAMhE,GAAjBA,EAASvM,OANwE,iCAQ7EuU,EAAO,gBAAgB,GARsD,UAS5DxH,EAA+BnB,EAASA,SAAUmE,EAAMmI,sBATI,QAS7E3L,EAT6E,gCAW7EgI,EAAO,gBAAgB,GAXsD,wBAc7D,IAApBhI,EAASvM,OAdwE,sDAerFmS,GAAOlN,IAAI,cAAesH,EAAS,IAEnC8H,EAAS,gBAAiBzI,GAIrBiC,EArBgF,kCAsB3EwG,EAAS,aAtBkE,QAuBjFnG,GAAO5N,KAAK,CAAEsB,KAAM,cAvB6D,iEA2BnFsY,+BAjLM,cAiLoE,sKAAzC7F,EAAyC,EAAzCA,SAAapN,EAA4B,EAA5BA,OAAQ0H,EAAoB,EAApBA,SAAU9E,EAAU,EAAVA,QAElEsI,GAAOlN,IAAI,cAAe,MAEtBwE,EAAS0I,GAAOlQ,IAAI,UACxBwH,EAASW,EAAqBX,EAAQI,GACtCsI,GAAOlN,IAAI,SAAUwE,GANuD,SAQrDmP,KARqD,UAQtEhN,EARsE,OAS5EyI,EAAS,gBAAiBzI,GAIG,OAAzBA,EAAS6L,aAb+D,kCAcpD0C,GAA4BlT,EAAQ0H,GAdgB,QAclEyL,EAdkE,OAiBpEA,GACAjI,GAAOlN,IAAI,cAAegC,GAlB0C,yBAqBtEoN,EAAS,aArB6D,QAsB5EnG,GAAO5N,KAAK,CAAEsB,KAAM,cAtBwD,+CAyB1EoF,WA1MM,WA0MO,6JACTkH,GAAO5N,KAAK,CAAEsB,KAAM,mBADX,OAEfuQ,GAAOlN,IAAI,cAAe,MAFX,8CAKboV,kBA/MM,YA+MuB,wJAATtK,EAAS,EAATA,MACtBoC,GAAOlN,IAAI,mBAAmB,IAC1B8K,EAAM9I,OAFqB,gCAGFmQ,GAAiBzC,GAAa,oBAAqB5E,EAAM9I,SAHvD,OAGrB2Q,EAHqB,OAI3BzF,GAAOlN,IAAI,kBAAmB2S,GAJH,8CAQ7B0C,aAvNM,YAuNqB,0JAAZjG,EAAY,EAAZA,SAAY,SACvB+C,GAAiBmD,GAAqB,sBAAuB,CAACC,OAAO,OAD9C,OAE7BnG,EAAS,uBAFoB,+CAMtB,IACXtE,SACAY,WACAoB,aACAoC,WACAmD,YAAY,G,aCxWHmD,GAAcrJ,KAAKsJ,IAAI,GAAI,GAC3BC,GAAavJ,KAAKsJ,IAAI,GAAI,IAMhC,SAASE,GAAYC,GAC1B,OAAO,IAAIC,gBAAUD,GAQhB,SAASE,GAASF,GACvB,OAAOA,EAAGE,WAQL,SAASC,GAAOH,GACrB,OAAOD,GAAYC,GAAII,IAAIL,GAAYH,KAOlC,SAASS,GAAQL,GACtB,OAAOD,GAAYC,GAAII,IAAIL,GAAYD,KAGlC,SAASQ,GAAMN,EAAInV,GACxB,IAAM7C,EAAI+X,GAAYC,GACtB,MAAY,UAATnV,EAAyB7C,EAAEuY,aAAaT,IAC/B,SAATjV,EAAwB7C,EAAEuY,aAAaX,IACnC5X,EAOF,SAASwY,GAAQR,GAEtB,MAAO,KAAKA,EAAGzW,SAAS,IAG1BlB,OAAOoY,UAAY,CACjBV,eACAG,YACAG,WACAF,UACAG,SACAE,Y,eClDItL,GAAQ,iBAAO,CACjBwL,cAAe,GACfC,iBAAkB,KAGhB7K,GAAU,GAEVoB,GAAY,iCACXC,OAAKD,UAAUhC,KADP,IAEX0L,gBAAiB,SAAC1L,EAAO1N,GACrB0N,EAAMyL,iBAAiBlb,KAAK+B,IAEhCqZ,aAAc,SAAC3L,EAAO1N,GAClB0N,EAAMwL,cAAcjb,KAAK+B,MAI3B8R,GAAU,CACZC,eADY,YACiB,IAAZC,EAAY,EAAZA,SACP0B,EAAO,IAAIC,0BAAqB7D,GAAOlQ,IAAI,kBAAkB,kBAAI4I,QAAQC,QAAQqH,GAAOlQ,IAAI,mBAC5F6T,EAAW6F,IAAa1Z,IAAI,cAAc2Z,GAAGrM,IAEnD8E,EAAS,wBAAyB,CAACyB,WAAUC,SAC7C1B,EAAS,qBAAsB,CAACyB,WAAUC,UASxC8F,sBAfM,cAeuD,+JAAtCtH,EAAsC,EAAtCA,OAAQS,EAA8B,EAA9BA,UAAac,EAAiB,EAAjBA,SAAUC,EAAO,EAAPA,KAClDpG,EAAOwC,GAAOlQ,IAAI,aAClBkO,EAAU6E,EAAU2B,MAAMxG,QAC1BlJ,EAAS+N,EAAUE,KAAKjO,OAC9BkL,GAAOlN,IAAI,2BAA4B,IACvC6Q,EAASI,OAAOC,sBAAsBJ,EAAK9T,IAAI,CAACmU,UAAW,IAAK,IAC/D5P,GAAG,MADJ,yDACW,WAAMyE,GAAN,2GAEU0E,EAAK2C,IAAIwJ,eAAe7Q,EAAI8Q,iBAFtC,OAEDC,EAFC,OAIDnJ,EAAY,CACdO,YAAanI,EAAImI,YACjB6I,QAASD,EAAGA,EAAGtW,KAAKwD,cAAc,aAClCqN,KAAMtL,EAAIqL,aAAaC,KAAKrN,cAC5B2J,UAAW5H,EAAIqL,aAAazD,UAC5BqJ,OAAQjR,EAAI8Q,iBAEVI,EAAchM,EAAQjG,MAAK,SAAA9I,GAAC,OAAEA,EAAE+L,SAAW0F,EAAU0D,QAEvD1D,EAAUuJ,SADVD,EACqBA,EAAY3F,OAAOC,OAEnB,aAErB5D,EAAUoJ,SAAWhV,EACrB4L,EAAUwJ,YAAc,KAExBxJ,EAAUwJ,YAAcxJ,EAAUoJ,QAEtC1H,EAAO,kBAAmB1B,GAtBnB,2CADX,uDAL+D,8CAsC7DyJ,mBArDM,cAqDoD,2JAAtC/H,EAAsC,EAAtCA,OAAQS,EAA8B,EAA9BA,UAAac,EAAiB,EAAjBA,SAAUC,EAAO,EAAPA,KAC/C9O,EAAS+N,EAAUE,KAAKjO,OAC9BkL,GAAOlN,IAAI,wBAAyB,IAEpC6Q,EAASI,OAAOqG,cAAcxG,EAAK9T,IAAI,CAACmU,UAAW,IAAK,CAAC1Q,KAAMuB,IAC9DT,GAAG,MADJ,yDACW,WAAMyE,GAAN,uFAEDuR,EAAS,CACXpJ,YAAanI,EAAImI,YACjB6I,QAAShR,EAAIqL,aAAa5Q,KAC1B8W,OAAQtB,GAAQjQ,EAAIqL,aAAamG,aAAavB,GAAQjQ,EAAIqL,aAAaoG,eACvEC,MAAOzB,GAAQjQ,EAAIqL,aAAaqG,OAChCT,OAAQjR,EAAI8Q,iBAEhBxH,EAAO,eAAgBiI,GAThB,2CADX,uDAJ4D,+CAmBrD,IACXzM,SACAY,WACAoB,aACAoC,WACAmD,YAAY,GClGVvH,GAAQ,iBAAO,CACjByC,QAAS,EACToK,gBAAiB,EACjBC,cAAe,EACfC,YAAY,IAGVnM,GAAU,GAEVoB,GAAYC,OAAKD,UAAUhC,IAE3BoE,GAAU,CACZC,eADY,YACiB,IAAZC,EAAY,EAAZA,SACbA,EAAS,gBACTA,EAAS,wBACTA,EAAS,sBACTA,EAAS,2BAGP0I,aARM,YAQsB,4JAAb/H,EAAa,EAAbA,UAAa,SACRY,GAAiBZ,EAAUE,KAAKjO,QADxB,OACxBuL,EADwB,OAE9BL,GAAOlN,IAAI,iBAAkBuN,GAFC,8CAK5BwK,uBAbM,WAamB,4JACrB/V,EAASkL,GAAOlQ,IAAI,eADC,SAEF0S,GAAa,oBAAqB1N,EAAO,KAFvC,OAErB6V,EAFqB,OAG3B9R,QAAQC,IAAI,cAAe6R,GAC3B3K,GAAOlN,IAAI,oBAAqB6X,GAJL,8CAOzBG,qBApBM,WAoBiB,4JACnBhW,EAASkL,GAAOlQ,IAAI,eADD,SAEK0S,GAAa,6BAA8B1N,GAFhD,OAEnB2V,EAFmB,OAGzBzK,GAAOlN,IAAI,yBAA0B2X,GAHZ,8CAMvBM,mBA1BM,WA0Be,4JACjBjW,EAASkL,GAAOlQ,IAAI,eADH,SAEK0S,GAAa,gBAAiB1N,GAFnC,OAEjB4V,EAFiB,OAGvB1K,GAAOlN,IAAI,uBAAwBiW,GAAQ2B,IAHpB,8CAMrBM,YAhCM,WAgCoBC,GAAQ,0JAApB/I,EAAoB,EAApBA,SAChBrJ,QAAQC,IAAI,WAAYmS,GADY,SAE9BhG,GAAiBmD,GAAqB,SAAU,CAAE6C,OAAQjC,GAAMiC,EAAQ,SAAU5C,OAAQ,OAF5D,OAGpCnG,EAAS,sBACTA,EAAS,gBAJ2B,8CAOlCgJ,aAvCM,YAuCqB,0JAAZhJ,EAAY,EAAZA,SAAY,SAIvB+C,GAAiBC,GAAU,kBAJJ,OAO7BhD,EAAS,sBACTA,EAAS,gBARoB,+CAYtB,IACXtE,SACAY,WACAoB,aACAoC,WACAmD,YAAY,GCrEVvH,GAAQ,iBAAO,CACjBuN,UAAU,EACVC,iBAAkB,IAGhB5M,GAAU,GAEVoB,GAAYC,OAAKD,UAAUhC,IAE3BoE,GAAU,CACNqJ,gBADM,WACY,wJACpBrL,GAAOlN,IAAI,mBAAmB,GACxBgC,EAASkL,GAAOlQ,IAAI,gBACtBgF,EAHgB,gCAIO0N,GAAa,kBAAmB1N,GAJvC,OAIVqW,EAJU,OAKhBnL,GAAOlN,IAAI,kBAAmBqY,GALd,8CAQlBG,sBATM,WASkB,4JACpBxW,EAASkL,GAAOlQ,IAAI,eADA,SAEN0S,GAAa,eAAgB1N,GAFvB,OAEpByW,EAFoB,OAI1BvL,GAAOlN,IAAI,0BAA2BgH,OAAOyR,IAJnB,+CAQnB,IACX3N,SACAY,WACAoB,aACAoC,WACAmD,YAAY,GC1BVvH,GAAQ,iBAAO,CACjB4N,WAAY,EACZC,SAAU,KAGRjN,GAAU,GAEVoB,GAAYC,OAAKD,UAAUhC,IAE3BoE,GAAU,CACN0J,uBADM,YAC+B,0JAAZxJ,EAAY,EAAZA,SAAY,SACjCA,EAAS,mBADwB,uBAEjCA,EAAS,sBAFwB,8CAKrCyJ,gBANM,WAMY,mKACKnJ,GAAa,cADlB,OACdgJ,EADc,OAEpBxL,GAAOlN,IAAI,4BAA6B0Y,GAFpB,8CAKlBI,mBAXM,WAWe,mLACEpJ,GAAa,cADf,cACjBgJ,EADiB,OAEjBK,EAAU7L,GAAOlQ,IAAI,eAFJ,KAGNmP,KAHM,SAGYuD,GAAa,WAHzB,6BAGuC,EAHvC,UAGDsJ,MAHC,gBAGjBC,EAHiB,KAG4C,EAC7DN,EAAW,GACR9d,EAAI,EALU,aAKPA,EAAI6d,GALG,kCAMGhJ,GAAa,iBAAkB7U,GANlC,eAMbqN,EANa,iBAOGwH,GAAa,eAAgBxH,GAPhC,eAObgR,EAPa,iBAQOxJ,GAAa,qBAAsBxH,EAAS6Q,GARnD,eAQbI,EARa,iBASMzJ,GAAa,kBAAmBxH,GATtC,QASbkR,EATa,OAUnBT,EAAS9d,GAAK,CACVqN,UACAgR,UACAD,WACAE,cACAC,cAfe,QAKSve,IALT,wBAkBvBqS,GAAOlN,IAAI,0BAA2B2Y,GAlBf,+CAqBrBU,uBAhCM,WAgCmB,mKACD3J,GAAa,qBADZ,cACrB4J,EADqB,OAE3BvT,QAAQC,IAAI,qBAAsBsT,EAAlC,eAAsDA,IAF3B,kBAGpBrD,GAAQqD,IAHY,8CAMzBC,YAtCM,SAsCMC,EAtCN,GAsCyC,4JAAzBC,EAAyB,EAAzBA,eAAgBC,EAAS,EAATA,OAAS,kBAC1CvH,GAAiBmD,GAAqB,cAAe,CAACC,OAAO,KAASkE,EAAgBC,KAD5C,+CAM1C,IACX5O,SACAY,WACAoB,aACAoC,WACAmD,YAAY,GCnDhBsH,aAAIC,IAAIC,QAGR,IAAM/O,GAAQ,CACVgP,aAAa,EAEbC,iBAAiB,EACjB5X,UAAU,EAEVI,iBAAiB,EACjBC,gBAAiB,GACjBF,cAAe,QACfkC,YAAQ6B,GAEN2T,GAAO,GAEP3F,GAAQ,IAAIwF,OAAKI,MAAM,CACzB3e,QAAS,CACLoW,SACAzB,QACAiK,WACA3C,UACA4C,UACAC,mBAEJC,QAAS,CACL1Q,EAAQ2Q,QAGZxP,SACAgC,UAAWC,OAAKD,UAAUhC,IAC1BY,QAAS,CACLsO,KADK,WAED,OAAOA,KAGf9K,QAAS,CACLqL,WADK,WACkBnU,GAAS,IAAnBkJ,EAAmB,EAAnBA,OACTA,EAAO,kBAAmBlJ,GAC1BkJ,EAAO,gBAAiB,SACxBA,EAAO,mBAAmB,IAExBkL,YAND,YAMyB,oKAAVlL,EAAU,EAAVA,OAChBvJ,QAAQC,IAAI,sBADc,SAGlByU,EAAY,gBACV7W,EAAM,IAAIO,IAAIlG,OAAOoV,SAASG,MAChC5P,EAAI8W,aAAaC,IAAI,YACfC,EAAQ,IAAIzW,IAAIP,EAAI8W,aAAa1d,IAAI,WAC3Cyd,EAAYG,EAAMpH,KAClB5P,EAAI8W,aAAaG,OAAO,WARN,SAWJrS,MAAMiS,GAXF,UAWhBhS,EAXgB,OAYH,MAAfA,EAAI0R,OAZc,kCAaG1R,EAAIqS,OAbP,eAaZtW,EAbY,YAclB8K,EAdkB,UAcK/K,EAAcC,GAdnB,6BAcX,SAdW,mEAiBtBuB,QAAQzB,MAAM,+BAAgC,KAAM8B,SACpDkJ,EAAO,cAAUjJ,GAlBK,6DAsBxB0U,oBA5BD,YA4BgD,2KAA1BzL,EAA0B,EAA1BA,OAAQxE,EAAkB,EAAlBA,MAAOsE,EAAW,EAAXA,SACtCrJ,QAAQC,IAAI,YAAa,GADwB,SAG7CsJ,EAAO,eAAe,GAEtBvJ,QAAQC,IAAI,mBALiC,SAMvCoJ,EAAS,eAN8B,cAOzCtE,EAAMtG,OAAOC,cAAcuW,KAC/BjV,QAAQC,IAAI,0BACZqO,GAAM/E,OAAO,gBAAiBoF,MAC9B3O,QAAQC,IAAI,uBAViC,UAWvCoJ,EAAS,uBAX8B,WAY7CrJ,QAAQC,IAAI,0BAA2B8E,EAAMmF,KAAKsC,eAClB,YAA5BzH,EAAMmF,KAAKsC,cAb8B,kCAcnBnD,EAAS,2CAdU,QAcnC6L,EAdmC,OAerCA,IACAlV,QAAQC,IAAI,uCAAwCiV,GACpD3L,EAAO,qBAAsB,mBAjBQ,eAuB7C,EAAK4L,OAAM,SAACpQ,GAAD,OAASA,EAAMmF,KAAKjO,UAAQ,WACnC+D,QAAQC,IAAI,2BAA4B8E,EAAMmF,KAAKjO,QACnDoN,EAAS,+BAzBgC,UA4BvCA,EAAS,+BA5B8B,QA8B7CE,EAAO,eAAe,GA9BuB,sEAgCvCF,EAAS,aAAc,wCAAwC,KAAMhJ,SAhC9B,gEAsC9CiO,MAER,SAAS2G,KACZ,IAAMG,EAASpV,QAAQC,IACjBoV,EAAWrV,QAAQzB,MACnB+W,EAAUtV,QAAQ6I,KAExB,SAAS0M,EAAcC,GACnB,GAAKtd,OAAOud,SAAZ,CACA,IAAIxB,EAAO/b,OAAOud,SAASC,eAAe,YAC1C,IAAKzB,EAAM,CAEP,IAAKwB,SAASE,KAAM,OACpB1B,EAAOwB,SAASG,cAAc,OAC9B3B,EAAK4B,aAAa,KAAM,YACxB5B,EAAK4B,aAAa,QAAS,qCAC3BJ,SAASE,KAAKG,aAAa7B,EAAMwB,SAASE,KAAKI,mBAEnD,IAAMC,EAAMP,SAASG,cAAc,OACnCI,EAAIC,UAAJ,aAAoBT,EAAQU,KAA5B,kBAA0CV,EAAQW,KAAKnY,KAAI,SAAAnF,GAAC,MAAa,UAAV,eAAOA,GAAY,SAAqB,oBAALA,EAAiB,QAAQA,KAAIud,KAAK,OACpInC,EAAKoC,YAAYL,IAGrBhW,QAAQC,IAAM,WAAa,2BAATkW,EAAS,yBAATA,EAAS,gBACvBf,EAAM,WAAN,EAAUe,GACVZ,EAAc,CAACW,KAAK,OAAQC,UAEhCnW,QAAQ6I,KAAO,WAAa,2BAATsN,EAAS,yBAATA,EAAS,gBACxBb,EAAO,WAAP,EAAWa,GACXZ,EAAc,CAACW,KAAK,OAAQC,UAEhCnW,QAAQzB,MAAQ,WAAa,2BAAT4X,EAAS,yBAATA,EAAS,gBACzBd,EAAQ,WAAR,EAAYc,GACZZ,EAAc,CAACW,KAAK,QAASC,U,8BCtJxBG,GAAb,WACE,WAAYC,GAAM,wBAChBxd,KAAKyd,QAAUD,GAAQ,GAF3B,wGAIE,WAAc5e,GAAd,0FACOA,EADP,oDAEOoB,KAAKyd,QAAQnY,SAAS1G,IAAMoB,KAAKyd,QAAQlhB,KAAKqC,GAC7CgP,EAAIzO,OAAOue,aAAaC,QAAQ/e,GACjCgP,EAJP,8CAIiBrG,GAJjB,gCAKSuB,KAAKC,MAAM6E,IALpB,gDAJF,wIAWE,WAAchP,EAAKN,GAAnB,oFACOM,EADP,wDAEOoB,KAAKyd,QAAQnY,SAAS1G,IAAMoB,KAAKyd,QAAQlhB,KAAKqC,GAC9CN,EACAa,OAAOue,aAAaE,QAAQhf,EAAKkK,KAAK+U,UAAUvf,IADzCa,OAAOue,aAAaI,WAAWlf,GAH7C,mEAXF,yIAkBE,0GACQ9B,EAAS,GADjB,iBAEoBkD,KAAKyd,SAFzB,gEAEa7e,EAFb,iBAGwBoB,KAAK2d,QAAQ/e,GAHrC,OAGI9B,EAAO8B,GAHX,iLAKS9B,GALT,gEAlBF,sIAyBE,WAAaihB,GAAb,iGACoB7hB,OAAOshB,KAAKO,GADhC,+CACanf,EADb,cAEUoB,KAAK4d,QAAQhf,EAAKmf,EAAMnf,IAFlC,0EAzBF,iECYMof,GAAe,IAAIT,GAGlB,SAASxI,GAAuBjQ,GACnC,IAAM8G,EAAO,IAAI4J,IAAK1Q,GACtB,OAAO8G,EAAKqS,gBAGT,SAAepM,GAAtB,mC,gEAAO,WAAgCqM,GAAhC,iGACU9P,GAAOlQ,IAAI,aAAaqQ,IAAIC,WAAW0P,GADjD,mF,yBAKA,SAASC,GAA0BC,GACtC,IAAMrM,EAAW6F,IAAa1Z,IAAIkgB,GAC5BC,EAAWtM,EAAS8F,GAAGrM,IAE7B,OADAvE,QAAQC,IAAI,WAAYmX,GACjBA,EAGJ,SAASzI,KACZ,OAAOuI,GAA0B,cAG9B,SAASG,KACZ,IAAMC,EAAanQ,GAAOlQ,IAAI,uBAAuByV,cAC/C6K,EAAU,IAAIC,0BAAqBF,EAAY,OACrD,OAAOC,EAGJ,SAAepI,GAAtB,qC,gEAAO,WAA2ClT,EAAQ0H,GAAnD,2GACuBoT,GAAaL,QAAQ,mBAD5C,gDACmE,GADnE,cACCe,EADD,KAEHA,EAAazR,QAAQ/J,GACrBwb,EAAe,eAAI,IAAIC,IAAID,IAC3BV,GAAaJ,QAAQ,kBAAmBc,GAClCE,EAAMN,KALT,UAMiBjL,GAAiBuL,EAAIC,aAAa3b,EAAQ0H,IAN3D,eAMGyL,EANH,yBAOIA,GAPJ,4C,yBAUA,SAAeL,KAAtB,gC,gEAAO,8GACWgI,GAAaL,QAAQ,mBADhC,gDACuD,GADvD,iF,yBAIA,SAAStP,GAAKxG,GACjB,IAAI/K,EAASsR,GAAOlQ,IAAI,aACxB,GAAIpB,EAAQ,OAAOA,EAInB,GADK+K,IAAUA,EAAWuG,GAAOlQ,IAAI,mBAChC2J,EAAU,MAAM,IAAIF,MAAM,wEAC/B,IAAMxF,EAAQiM,GAAOlQ,IAAI,sBACzB,GAAa,YAATiE,EAAqB,CACrB,IAAMyJ,EAAOwC,GAAOlQ,IAAI,aACxBpB,EAAS,IAAImV,0BAAqBrG,GAAM,SAACkT,GAAD,OAAUhY,QAAQC,QAAQ+X,EAAK,OAE3E,GAAa,UAAT3c,EAAmB,CACnB,IAAMe,EAASkL,GAAOlQ,IAAI,eAC1B,GAAIgF,EAAQ,CACR,IAAMsb,EAAUF,KACVS,EAAe3Q,GAAOpC,MAAMmF,KAAK+C,6BACvCpX,EAAS,IAAIkiB,iCAA4BnX,EAAU2W,EAAStb,EAAQ6b,QAGpEjiB,EAAS,IAAImV,0BAAqBpK,GAAU,kBAAIf,QAAQC,QAAQyE,OAGxE,GAAI1O,EAIA,OAFAA,EAAO8O,KAAK2C,IAAIkH,IAAM,KACtBrH,GAAOlN,IAAI,YAAapE,GACjBA,EAGX,MAAM,IAAI6K,MAAM,8FAGpB,IAAMsX,GAAgB,GAClBC,GAAiB,EACjBC,GAAc,EACdC,GAAyB,EACvBC,GAAsB,WAExBD,GAA2BpQ,KAAKY,MAChC,cAAiB1T,OAAOshB,KAAKyB,IAA7B,eAA+C,CAA1C,IAAMK,EAAE,KACH3Y,EAAUsY,GAAgBK,GAC5B3Y,EAAQ4Y,MAAMH,IAEdI,aAAa7Y,EAAQvE,YAI3Bqd,GAAkB,WAChBN,GAAc,GAAG1O,cAAc0O,IACnCC,GAA2BpQ,KAAKY,MAChCuP,GAAgBzO,YAAY2O,GAAqB,KAarD,SAAS3X,GAAWgY,EAAIC,GACpB,IAAIC,EAAU5Q,KAAKY,MACb0P,EAAGJ,KACTD,GAAgBK,GAAI,CAACC,KAAMK,EAAUD,EAASvd,SAA1B,kBACT6c,GAAgBK,GACvB,IAAKI,IAAM,MAAMG,GACb5Y,QAAQC,IAAI,mCAAoC2Y,MAI5D,SAASC,GAAaR,UACXL,GAAgBK,GArB3B,CAAC,OAAQ,UAAW,SAAU,UAAW,YAAYS,SAAQ,SAAAC,GAAE,OAC/D7gB,OAAOqI,iBAAiBwY,GAAI,WAEpBhR,KAAKY,MAAQwP,GAA2B,MACxCnY,QAAQC,IAAI,4BACZuY,YAqBR,IAAIQ,GAAM,IACH,SAAS5O,GAAmBzF,GAE/B,GADKA,IAAMA,EAAOwC,GAAOlQ,IAAI,eACxB0N,EAAM,MAAM,IAAIjE,MAAM,wEAC3B,IAAME,EAAWuG,GAAOlQ,IAAI,iBACtBiE,EAAQiM,GAAOlQ,IAAI,sBACnBgiB,EAA6B,YAAT/d,EAE1B,SAAChE,EAAGuhB,GACA7X,EAASsY,UAAT,iCAAuBhiB,GAAvB,IAA0BiiB,WAAU,IAAOV,IAG7C7X,EAASwY,KAAKxhB,KAAKgJ,GAXgB,SAetBiL,IAfsB,6FAerC,oHACoB,IAAIhM,SAAS,SAAC6C,EAAK2W,GAC/BJ,EAAkB,CAAClY,OAAO,kBAAmBsX,GAAIW,KAAQ3W,OAAO,KAAK,SAACuW,EAAE1hB,GAEhE0hB,EAAGS,EAAIT,GACF1hB,EAAErB,OAAQ6M,EAAIxL,EAAErB,QACJ,iBAALqB,EAAewL,EAAIxL,GAC9BmiB,EAAI,IAAI3Y,MAAM,gCAP/B,cACUxJ,EADV,yBAWW+J,OAAO/J,IAXlB,2CAfqC,wBA6BrC,IAAMoiB,EAAO,IAAInM,mBAAa,CAACoM,mBAAmB,IAClDD,EAAKrP,YAAc,WACXqP,EAAKE,QACLX,GAAaS,EAAKE,OAClBF,EAAKE,MAAQ,OAGrB,IAAMd,EAAU,IApCqB,SAsCtBe,IAtCsB,6FAsCrC,sHAGaH,EAAKI,MAHlB,gCAK2C7N,IAL3C,wBAKwE9D,KAAKY,MAAjE2Q,EAAKI,MALjB,CAK0BlT,UAL1B,KAK6DmT,UAL7D,8CAOkC9N,IAPlC,WAOgBrF,EAPhB,OASkBmT,EAAY5R,KAAKY,QAEnBnC,EAAY8S,EAAKI,MAAMlT,WAXvC,iBAYyB1N,EAAEwgB,EAAKI,MAAMlT,UAAU,EAZhD,aAYmD1N,GAAG0N,GAZtD,4CAc4C7B,EAAK2C,IAAImD,SAAS3R,GAAG,GAdjE,QAc8B+N,EAd9B,OAewByS,EAAKtK,KAAK,OAAQnI,GAf1C,sDAiBwB7G,QAAQ6I,KAAK,sBAAsB/P,EAAG,KAAMuH,SAjBpE,QAYiEvH,IAZjE,wBAqBYwgB,EAAKI,MAAQ,CAAClT,YAAWmT,aArBrC,6DAwBQ3Z,QAAQ6I,KAAK,2DAA4D,KAAMxI,SAxBvF,QA4BIiZ,EAAKE,MAAQ/Y,GAAYgZ,EAAUf,GA5BvC,kEAtCqC,wBAsErC,OADAY,EAAKE,MAAQ/Y,GAAYgZ,EAAU,IAC5BH,EAKJ,SAAe3P,GAAtB,mC,gEAAO,WAA4BiQ,GAA5B,sHAA2CzD,EAA3C,iCAA2CA,EAA3C,mCACI0D,GAAuB,WAAvB,GAAwBD,EAAY,CAAEpK,OAAQ,MAA9C,OAA6D2G,KADjE,2C,yBAIA,SAAe0D,GAAtB,qC,gEAAO,WAAuCD,EAAY/V,GAAnD,8GACGjD,EAAWuG,GAAOlQ,IAAI,iBACtB6T,EAAW3D,GAAOlQ,IAAI,iBACtB2iB,KAAc9O,EAHjB,yCAGmCjL,QAAQoC,OAAO,IAAIvB,MAAJ,iBAAoBkZ,EAApB,mCAHlD,sBAA+DzD,EAA/D,iCAA+DA,EAA/D,mCAIIrL,EAAS8O,GAAT,MAAA9O,EAAQ,CACXgP,GAAS1S,GAAKxG,GAAUxL,KAAKyO,KADlB,OAERsS,KANJ,2C,yBAUA,SAAS9J,GAAUuN,GAAqB,2BAANzD,EAAM,iCAANA,EAAM,kBAC3C,OAAO5G,GAAoB,WAApB,GAAqBqK,EAAY,IAAjC,OAAwCzD,IAGnD,SAAS4D,GAAsB1Z,GACL,kBAAZA,IAAsBA,EAAU,0CAC1C,IAAI2Z,EAAQ3Z,EAAQ2Z,MAAM,MACT,GAAdA,EAAMhlB,SAAWglB,EAAS,aAAMnY,KAAK+U,UAAU,CAACvW,aAAY2Z,MAAM,OACrE,IACI,IAAM/gB,EAAM4I,KAAKC,MAAMkY,EAAM9jB,OAAO,GAAGkgB,KAAK,MAC5C,OAAOnd,EACT,MAAOsF,GACL,MAAO,CACH8B,QAAS,yBAKrB,SAASyZ,GAASV,GACd,OAAO,SAACa,EAAQzlB,GAEZ,OAAO4kB,EAAKa,EAAQzlB,IAIrB,SAAS+a,GAAqBqK,EAAY/V,GAAkB,2BAANsS,EAAM,iCAANA,EAAM,kBAC/D,IAAMla,EAASkL,GAAOlQ,IAAI,eAC1B,IAAKgF,EACD,OAAO4D,QAAQoC,OAAO,IAAIvB,MAAM,8EAEpC,IAAME,EAAWuG,GAAOlQ,IAAI,iBACtB6T,EAAW3D,GAAOlQ,IAAI,iBAC5B,OAAM2iB,KAAc9O,GAChBjH,EAAQuO,SAAQvO,EAAQuO,OAAO,IAAI7Z,IAAOsL,EAAQuO,OAAOhZ,SAAS,MAE/D,IAAIyG,SAAS,SAACC,EAASmC,GAE1B4X,GAAuB,WAAvB,GAAwBD,EAAY/V,GAApC,OAAgDsS,IAC/C7U,KADD,yDACM,WAAMqF,GAAN,wFACF3G,QAAQC,IAAI,cAAe4D,EAAS8C,GADlC,KAEF7G,EAFE,SAIQgL,EAAS8O,GAAT,MAAA9O,EAAQ,CACVgP,GAAS1S,GAAKxG,GAAUwY,KAAKvV,KADnB,OAEPsS,IANT,6EADN,uDAWC3U,OAAM,SAAAoX,GACH,IAAMsB,EAAMH,GAAsBnB,EAAEvY,SACpC4B,EAAOiY,UAlBuBra,QAAQoC,OAAO,IAAIvB,MAAJ,iBAAoBkZ,EAApB,kC,SAuB1CO,G,qGAAf,WAAmCF,EAAQzlB,GAA3C,8FACU4lB,EADV,uDACgEH,EADhE,oBACkFzlB,EADlF,yBAEW,CAAC6lB,MAAM,EAAMxkB,OAAQukB,IAFhC,2C,yBAIO,SAAeE,GAAtB,mC,gEAAO,WAA2BV,GAA3B,+GACG9O,EAAW3D,GAAOlQ,IAAI,iBADzB,WAA0Ckf,EAA1C,iCAA0CA,EAA1C,0BAEerL,EAAS8O,GAAT,MAAA9O,EAAQ,CAAcqP,IAAd,OAAsChE,IAF7D,cAEGiE,EAFH,OAGHpa,QAAQC,IAAIma,GAHT,kBAIIA,GAJJ,2C,yBAOA,SAAehO,GAAtB,qC,gEAAO,WAAgCmO,EAASC,GAAzC,gGACCC,EAAW,KADZ,SAGCtT,GAAOlN,IAAI,YAAY,GAHxB,SAIkBsgB,EAJlB,OAICE,EAJD,0DAOKpa,EAAU,KAAIA,QAEd,KAAIqa,WAAa,KAAIC,SAAuB,GAAZ,KAAIvG,SACpC/T,EAAU,+CAAH,OAAkD,KAAIsa,QAAtD,cAEX3a,QAAQ6I,KAAK,2CAA4CxI,GACzD8G,GAAOkC,SAAS,aAAchJ,GAC9Bma,GAAiBA,EAAc,EAAD,IAd/B,yBAiBCrT,GAAOlN,IAAI,YAAY,GAjBxB,8CAmBIwgB,GAnBJ,+D,yBAwBA,SAAeG,GAAtB,mC,gEAAO,WAAwBC,GAAxB,iGAEC1T,GAAOlN,IAAI,YAAY,GAFxB,SAGO4gB,IAHP,0DAMC7a,QAAQC,IAAR,MACAkH,GAAOkC,SAAS,aAAc,KAAIhJ,SAPnC,yBAUC8G,GAAOlN,IAAI,YAAY,GAVxB,4E,yBCxQQ,QACbzF,KADF,WAEI,MAAO,CACLyH,YAAQA,EACRuH,QAASA,GACT7E,SAAUA,GACV4E,gBAAiBA,CAAvB3M,kBACM+M,cAAUA,EACVD,MAAMA,IAGVlB,QAXF,WAWA,gLACAuM,KADA,OACAvL,EADA,OAEA,4BACA,YAEA/E,EAAA,uBACA,gBACA,uBAPA,8CASE8D,SAAUA,CACRuY,oBADJ,WAEM,QAAI/hB,KAAKoO,OAAOpC,MAAMmF,KAAK5M,kBAG7Byd,kBALJ,WAMM,QAAIhiB,KAAKoO,OAAOpC,MAAMmF,KAAKqC,gBAG7ByO,cATJ,WAUM,SAAIjiB,KAAKoO,OAAOpC,MAAMmF,KAAKqC,gBAAwE,OAAtDxT,KAAKoO,OAAOpC,MAAMmF,KAAKqC,eAAeE,gBAIvF7J,QAASA,gDACXxN,gCACAA,+IAFA,IAGIqO,aAHJ,SAGAkD,GACM5N,KAAKkD,OAAS0K,GAEhBvD,oCANJ,WAMA,iKACA6X,EAAA,qCACAA,EAFA,iEAIA,mBAJA,uBAMA,uCANA,4DAQA,iCARA,oEAUA,4EAVA,2BAaA,kBAbA,wBAeA,wBAfA,6DAmBI3X,sCAzBJ,WAyBA,wKACA,kCAAArH,gBAAA0H,oBAAA9E,oCADA,uBAEAkQ,KAFA,OAEA,UAFA,qDAKI1L,oBA9BJ,WA+BMtK,KAAKmiB,QAAQ5lB,KAAK,CAAxBsB,0BAGIukB,cAlCJ,WAmCMpiB,KAAKmiB,QAAQ5lB,KAAK,CAAxBsB,uBC1HmV,MCO/U,GAAY,eACd,GACA,EACA,GACA,EACA,KACA,KACA,MAIa,M,QClBX,GAAS,WAAa,IAAIgE,EAAI7B,KAAS8B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,KAAK,CAACH,EAAIgB,GAAG,+BAA+Bb,EAAG,MAAM,CAACH,EAAIgB,GAAG,0GAA0Gb,EAAG,YAAY,CAACc,YAAY,SAASjB,EAAI2C,GAAG,GAAGxC,EAAG,MAAM,CAACH,EAAIgB,GAAG,0EAA0Eb,EAAG,IAAI,CAACS,GAAG,CAAC,MAAQ,SAASE,GAAQ,OAAOd,EAAIe,KAAK,gBAAgB,CAACf,EAAIgB,GAAG,iBAAiBb,EAAG,MAAM,CAACA,EAAG,IAAI,CAACS,GAAG,CAAC,MAAQ,SAASE,GAAQ,OAAOd,EAAIe,KAAK,qBAAqB,CAACf,EAAIgB,GAAG,aAAahB,EAAIgB,GAAG,+EAA+EhB,EAAI2C,GAAG,GAAGxC,EAAG,YAAY,CAACc,YAAY,SAASjB,EAAI2C,GAAG,IAAI,IACjvB,GAAkB,CAAC,WAAa,IAAI3C,EAAI7B,KAAS8B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACH,EAAIgB,GAAG,mDAAmDb,EAAG,IAAI,CAACE,MAAM,CAAC,KAAO,mCAAmC,OAAS,WAAW,CAACL,EAAIgB,GAAG,mBAAmB,WAAa,IAAIhB,EAAI7B,KAAS8B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACH,EAAIgB,GAAG,wDAAwDb,EAAG,IAAI,CAACE,MAAM,CAAC,KAAO,4CAA4C,OAAS,WAAW,CAACL,EAAIgB,GAAG,aAAa,WAAa,IAAIhB,EAAI7B,KAAS8B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACH,EAAIgB,GAAG,kEAAkEb,EAAG,IAAI,CAACE,MAAM,CAAC,KAAO,iFAAiF,OAAS,WAAW,CAACL,EAAIgB,GAAG,gBCevzB,IAGb4G,QAHF,WAIIzJ,KAAKic,uBAEPpS,QAASA,iCACXxN,yCADA,IAEIuG,KAFJ,SAEAyf,GACUriB,KAAK+D,OAAOlG,OAASwkB,GACzBriB,KAAKmiB,QAAQ5lB,KAAK,CAAxBsB,aC1BsV,MCOlV,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QClBX,GAAS,WAAa,IAAIgE,EAAI7B,KAAS8B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,WAAW,CAACE,MAAM,CAAC,IAAM,GAAG,KAAO,KAAK,CAACF,EAAG,SAAS,CAACc,YAAY,eAAeZ,MAAM,CAAC,OAAS,MAAM,MAAQ,QAAQ,CAACF,EAAG,kBAAkB,CAACH,EAAIgB,GAAG,UAAUb,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,QAAQ,GAAKL,EAAI4L,UAAU5L,EAAI4L,UAAUK,MAAMC,OAAO,MAAM,GAAG/L,EAAG,eAAe,CAACc,YAAY,gBAAgB,CAACd,EAAG,OAAO,CAACc,YAAY,kBAAkBwf,MAAOzgB,EAAI0gB,uBAAuB,YAAY,IAAK,CAAC1gB,EAAIgB,GAAGhB,EAAIkB,GAAGlB,EAAI4L,WAAa5L,EAAI4L,UAAUK,MAAMC,aAAa/L,EAAG,kBAAkB,CAACH,EAAIgB,GAAG,YAAYhB,EAAIkB,GAAGlB,EAAIsK,YAAYqW,QAAQ,IAAI,gBAAgBxgB,EAAG,kBAAkB,CAACH,EAAIgB,GAAGhB,EAAIkB,IAAIlB,EAAI4K,mBAAmB,KAAM+V,QAAQ,IAAI,8BAA8B,GAAGxgB,EAAG,SAAS,CAACc,YAAY,eAAeZ,MAAM,CAAC,OAAS,MAAM,MAAQ,QAAQ,CAACF,EAAG,kBAAkB,CAACH,EAAIgB,GAAG,mBAAmBb,EAAG,eAAe,CAACc,YAAY,gBAAgB,CAACd,EAAG,OAAO,CAACc,YAAY,mBAAmB,CAACjB,EAAIgB,GAAGhB,EAAIkB,GAAGlB,EAAIoK,iBAAiB,GAAGjK,EAAG,SAAS,CAACc,YAAY,eAAeZ,MAAM,CAAC,OAAS,MAAM,MAAQ,QAAQ,CAACF,EAAG,kBAAkB,CAACH,EAAIgB,GAAG,+BAA+Bb,EAAG,eAAe,CAACc,YAAY,gBAAgB,CAACd,EAAG,OAAO,CAACc,YAAY,mBAAmB,CAACjB,EAAIgB,GAAGhB,EAAIkB,GAAGlB,EAAIqK,qBAAqBlK,EAAG,kBAAkB,CAACc,YAAY,QAAQ,CAACjB,EAAIgB,GAAG,YAAYhB,EAAIkB,IAAIlB,EAAIqK,eAAiBrK,EAAIoK,WAAWuW,QAAQ,IAAI,wBAAwB,GAAGxgB,EAAG,QAAQ,CAAEH,EAAa,UAAEG,EAAG,QAAQ,CAACc,YAAY,OAAOZ,MAAM,CAAC,KAAO,OAAO,CAACF,EAAG,SAAS,CAACA,EAAG,eAAe,CAACH,EAAIgB,GAAG,4CAA4Cb,EAAG,kBAAkB,CAACH,EAAIgB,GAAG,uBAAuBhB,EAAIkB,GAAGlB,EAAI4L,UAAUV,OAAO3D,SAAS,MAAMvH,EAAIkB,GAAGlB,EAAI4L,UAAUV,OAAO0F,OAAOC,QAAQ,gBAAgB7Q,EAAIkB,GAAGlB,EAAI4L,UAAUV,OAAO+B,WAAW,aAAa9M,EAAG,cAAcH,EAAImC,GAAInC,EAAiB,eAAE,SAASkL,GAAQ,OAAO/K,EAAG,oBAAoB,CAACpD,IAAImO,EAAO3D,QAAQtG,YAAY,OAAOZ,MAAM,CAAC,OAAS,MAAM,MAAQ6K,EAAO+B,UAAYjN,EAAI4gB,aAAe,IAAI,MAAQ5gB,EAAI6gB,mBAAmB3V,EAAO+B,UAAYjN,EAAI4gB,eAAeE,YAAY9gB,EAAI+gB,GAAG,CAAC,CAAChkB,IAAI,UAAUikB,GAAG,SAASlf,GAAK,MAAO,CAAC9B,EAAIgB,GAAG,IAAIhB,EAAIkB,GAAGgK,EAAO0F,OAAOC,QAAQ,OAAO1Q,EAAG,SAAS,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGgK,EAAO+B,cAAcjN,EAAIgB,GAAG,eAAe,MAAK,QAAU,IAAI,IAAI,GAAGhB,EAAIW,KAAMX,EAAa,UAAEG,EAAG,QAAQ,CAACc,YAAY,OAAOZ,MAAM,CAAC,KAAO,OAAO,CAACF,EAAG,SAAS,CAACA,EAAG,eAAe,CAACH,EAAIgB,GAAG,aAAab,EAAG,cAAc,CAACA,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQL,EAAIuK,QAAQ,QAAUvK,EAAIihB,eAAe,kBAAkB,EAAE,sBAAsB,IAAIH,YAAY9gB,EAAI+gB,GAAG,CAAC,CAAChkB,IAAI,YAAYikB,GAAG,SAASlf,GAC9hF,IAAIof,EAAOpf,EAAIof,KACf,MAAO,CAAC/gB,EAAG,MAAM,CAACA,EAAG,SAAS,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGggB,EAAKhS,SAAS,8BAA8B,sBAAsBlP,EAAIgB,GAAG,IAAIhB,EAAIkB,GAAGggB,EAAKtQ,OAAOC,UAAU,GAAG1Q,EAAG,MAAM,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGggB,EAAK3Z,eAAe,CAACxK,IAAI,aAAaikB,GAAG,SAASlf,GACpO,IAAIof,EAAOpf,EAAIof,KACf,MAAO,CAAC/gB,EAAG,MAAM,CAACH,EAAIgB,GAAGhB,EAAIkB,IAAI,IAAMggB,EAAK5S,aAAetO,EAAImhB,mBAAmBR,QAAQ,IAAI,QAAQxgB,EAAG,MAAM,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGggB,EAAK5S,cAAc,MAAMtO,EAAIkB,GAAGlB,EAAImhB,yBAAyB,CAACpkB,IAAI,eAAeikB,GAAG,SAASlf,GAC3N,IAAIof,EAAOpf,EAAIof,KACf,MAAO,CAAC/gB,EAAG,MAAM,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGggB,EAAKtU,QAAQ+T,QAAQ,UAAU,CAAC5jB,IAAI,kBAAkBikB,GAAG,SAASlf,GAClG,IAAIof,EAAOpf,EAAIof,KACf,MAAO,CAAC/gB,EAAG,MAAM,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGggB,EAAK/V,WAAWwV,QAAQ,UAAU,CAAC5jB,IAAI,kBAAkBikB,GAAG,SAASlf,GACrG,IAAIof,EAAOpf,EAAIof,KACf,MAAO,CAAEA,EAAK3Z,SAASvH,EAAI4L,UAAUV,OAAO3D,QAASpH,EAAG,SAAS,CAACH,EAAIgB,GAAG,cAAchB,EAAIW,SAAS,MAAK,EAAM,eAAe,IAAI,IAAI,GAAGX,EAAIW,MAAM,IAAI,IACnJ,GAAkB,G,oBCTf,SAASygB,GAAcC,EAAcC,EAAWC,EAAWC,GAChE,IAAIC,EAASH,EACTI,EAASH,EACTI,EAAON,EAGPG,IACFG,GAAc,EAGVA,GAAQ,IACVA,GAAQ,EACRF,EAASF,EACTG,EAASF,IAIb,IAAII,EAAUF,EAAOG,IAAMJ,EAAOI,IAC9BC,EAAYJ,EAAOK,MAAQN,EAAOM,MAClCC,EAAWN,EAAOO,KAAOR,EAAOQ,KAEhCC,EAAW,CACbL,IAAKtU,SAAS/B,KAAK6M,MAAMoJ,EAAOI,IAAOD,EAAUD,GAAQ,IACzDI,MAAOxU,SAAS/B,KAAK6M,MAAMoJ,EAAOM,MAASD,EAAYH,GAAQ,IAC/DM,KAAM1U,SAAS/B,KAAK6M,MAAMoJ,EAAOQ,KAAQD,EAAWL,GAAQ,KAG9D,MAAO,OAASO,EAASL,IAAM,IAAMK,EAASH,MAAQ,IAAMG,EAASD,KAAO,IAG9E,IAAME,GAAY,CAChBN,IAAK,IACLE,MAAO,GACPE,KAAM,IAEFG,GAAc,CAClBP,IAAK,IACLE,MAAO,IACPE,KAAM,IAEFI,GAAW,CACfR,IAAK,GACLE,MAAO,IACPE,KAAM,IAGD,SAASpB,GAAmBQ,GACjC,OAAOD,GAAcC,EAAcgB,GAAUD,GAAaD,ICjD5D,IAAI,GAAS,WAAa,IAAIniB,EAAI7B,KAAS8B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,SAAS,CAACE,MAAM,CAAC,MAAQ,GAAG,MAAQ,QAAQO,GAAG,CAAC,MAAQ,SAASE,GAAQ,OAAOd,EAAIsiB,KAAKtiB,EAAIiD,QAAQ,CAACjD,EAAIgB,GAAG,sBAC5M,GAAkB,GCMP,IACb8d,MAAOA,CACLrB,GAAIA,CAACA,OAAQA,QACbnC,KAAMA,CACJA,KAAMA,OACNiH,UAFN,SAEA9lB,GAEQ,MAAO,CAAC,QAAS,KAAM,QAAS,WAAWgH,SAAShH,MAK1DkL,SAAUA,CACR1E,IADJ,WAEM,IAAN,6BACM,GAAKkB,EAAL,CACA,MAAOA,EAAYd,SAAS,KAAlCc,wBACM,IAAN,qEACM,OAAOZ,EAAEsP,QAIb7K,QAASA,CACPsa,KADJ,SACArf,GACM3F,OAAOA,KAAKA,EAAKA,oBC/BmU,MCOtV,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QC4IA,IACbklB,WAAYA,CAAdC,aACE7oB,KAAMA,WACJ,MAAO,CACL8oB,eAAgBA,IAChBC,UAAWA,IAAIA,IACflY,OAAQA,GACRmY,cAAeA,GACf3B,eAAgBA,CACtB,CAAA4B,YAAApmB,aAAAqmB,cACA,CAAAD,yBAAApmB,kBAAAqmB,eACA,CAAAD,kBAAApmB,mBAAAqmB,eACA,CAAAD,mBAAApmB,gBAAAqmB,eACA,CAAAD,qBAAApmB,cAAAqmB,gBACA,CAAAD,YAAApmB,uBAIEmL,QAlBF,WAkBA,wKACAoY,6BADA,uBAEA,mBAFA,uBAGA,4BAHA,uBAIA,mBAJA,8CAOErY,SAAUA,iCACZtL,wBACA,UACA,YACA,YACA,iBACA,cACA,iBACA,gBACA,kBACA,wBAVA,IAYI0mB,cAZJ,WAaM,OAAO,iDAAb,mCAEInC,aAfJ,WAgBM,OAAOziB,KAAKoM,QAAQO,QAAO,SAAjC,8CAEIkY,iBAlBJ,WAmBM,OAAO7kB,KAAKoM,QAAQnH,KAAI,SAA9B,0BAEI6f,eArBJ,WAsBM,OAAO9kB,KAAKoM,QAAQnH,KAAI,SAA9B,wBAEI8f,cAxBJ,WAyBM,OAAO/kB,KAAKoM,QAAQnH,KAAI,SAA9B,8BAEI+d,kBA3BJ,WA4BM,OAAOhjB,KAAKoM,QAAQO,QAAO,SAAjC,mCAEI4V,uBA9BJ,WA+BM,OAAOviB,KAAKyN,WAAlB,GAA+BzN,KAAKyN,UAAUK,MAAMoB,cAGlDrF,QAASA,gBACP6Y,mBAAJA,IACArmB,wBACA,iBACA,yBACA,0BACA,qBC/NwV,MCOpV,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QClBX,GAAS,WAAa,IAAIwF,EAAI7B,KAAS8B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACA,EAAG,SAAS,CAACA,EAAG,eAAe,CAACH,EAAIgB,GAAG,wBAAwBb,EAAG,cAAc,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGlB,EAAI+X,gBAAgB,IAAI,GAAG5X,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,OAAO,CAACF,EAAG,SAAS,CAACA,EAAG,eAAe,CAACH,EAAIgB,GAAG,cAAcb,EAAG,cAAc,CAACA,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQL,EAAIgY,SAAS,QAAUhY,EAAImjB,qBAAqB,kBAAkB,EAAE,sBAAsB,IAAIrC,YAAY9gB,EAAI+gB,GAAG,CAAC,CAAChkB,IAAI,cAAcikB,GAAG,SAASlf,GAC9gB,IAAIof,EAAOpf,EAAIof,KACf,MAAO,CAAC/gB,EAAG,MAAM,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGggB,EAAKzI,WAAa,MAAQ,aAAa,CAAC1b,IAAI,aAAaikB,GAAG,SAASlf,GACrG,IAAIof,EAAOpf,EAAIof,KACf,MAAO,CAAC/gB,EAAG,MAAM,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGggB,EAAK3I,SAAS,MAAMvY,EAAIkB,GAAGggB,EAAK5I,UAAU,UAAUtY,EAAIkB,GAAGggB,EAAKzI,WAAa,aAAe,qBAAqB,CAAC1b,IAAI,eAAeikB,GAAG,SAASlf,GACjL,IAAIof,EAAOpf,EAAIof,KACf,MAAO,CAAC/gB,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,UAAU,MAAQ,IAAIO,GAAG,CAAC,MAAQ,SAASE,GAAQ,OAAOd,EAAIojB,SAASlC,MAAS,CAAClhB,EAAIgB,GAAG,IAAIhB,EAAIkB,GAAGlB,EAAIqjB,aAAanC,IAAO,eAAe,IAAI,IAAI,IAAI,IACrL,GAAkB,GCuCP,IACbtnB,KAAMA,WAAR,OACAupB,sBACA,CAAAN,eAAApmB,iBACA,CAAAomB,gBAAApmB,gBACA,CAAAomB,sBAAApmB,eACA,CAAAomB,eAAApmB,gBAAA6mB,cAEAC,iBAGE5b,SAAUA,kBACZtL,4DAGEuL,QAfF,WAeA,wKACA,2BADA,8CAGEI,QAASA,iCACXxN,2EADA,IAGI6oB,aAHJ,SAGAnC,GAEM,OAAIA,EAAKzI,WACHyI,EAAK1I,YACA,sBAEF,iCAGL0I,EAAK1I,YACA,iCAEF,wBAGT4K,SAlBJ,SAkBAlC,GAAA,+JACA9b,sFADA,kBAGA,eACA0T,yBACAC,wBALA,uBAOA,2BAPA,iEASA3T,kBATA,UAUA,2BAVA,kFClFuV,MCOnV,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QClBX,GAAS,WAAa,IAAIpF,EAAI7B,KAAS8B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACA,EAAG,SAAS,CAACA,EAAG,eAAe,CAACH,EAAIgB,GAAG,qBAAqBb,EAAG,cAAc,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGlB,EAAIoK,eAAe,IAAI,GAAGjK,EAAG,QAAQ,CAACA,EAAG,SAAS,CAACA,EAAG,eAAe,CAACH,EAAIgB,GAAG,qBAAqBb,EAAG,cAAc,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGlB,EAAIqK,gBAAgB,QAAQ,IAAI,GAAGlK,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,OAAO,CAACF,EAAG,SAAS,CAACA,EAAG,eAAe,CAACH,EAAIgB,GAAG,WAAWb,EAAG,cAAc,CAACA,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQL,EAAIuK,QAAQ,QAAUvK,EAAIwjB,aAAa,kBAAkB,EAAE,sBAAsB,IAAI1C,YAAY9gB,EAAI+gB,GAAG,CAAC,CAAChkB,IAAI,cAAcikB,GAAG,SAASlf,GACzoB,IAAIof,EAAOpf,EAAIof,KACf,MAAO,CAAC/gB,EAAG,MAAM,CAACH,EAAIgB,GAAG,YAAYhB,EAAIkB,GAAGggB,EAAK3Z,YAAYpH,EAAG,MAAM,CAACH,EAAIgB,GAAG,SAAShB,EAAIkB,GAAGggB,EAAKtQ,OAAOC,cAAc,CAAC9T,IAAI,eAAeikB,GAAG,SAASlf,GACxJ,IAAIof,EAAOpf,EAAIof,KACf,MAAO,CAAC/gB,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,UAAU,MAAQ,IAAIO,GAAG,CAAC,MAAQ,SAASE,GAAQ,OAAOd,EAAIyjB,0BAA0BvC,MAAS,CAAClhB,EAAIgB,GAAG,+BAA+Bb,EAAG,WAAW,CAACE,MAAM,CAAC,MAAQ,OAAOC,MAAM,CAAC7D,MAAOuD,EAAmB,gBAAEO,SAAS,SAAUC,GAAMR,EAAI0jB,gBAAgBljB,GAAKE,WAAW,oBAAoB,CAAEV,EAAkB,eAAEG,EAAG,SAAS,CAACA,EAAG,eAAe,CAACH,EAAIgB,GAAG,yBAAyBhB,EAAIkB,GAAGlB,EAAI2jB,eAAepc,SAAS,OAAOpH,EAAG,cAAc,CAACA,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACc,YAAY,OAAOZ,MAAM,CAAC,KAAO,MAAM,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,KAAO,SAAS,SAAW,GAAG,MAAQ,IAAIC,MAAM,CAAC7D,MAAOuD,EAAqB,kBAAEO,SAAS,SAAUC,GAAMR,EAAI4jB,kBAAkBpjB,GAAKE,WAAW,wBAAwB,GAAGP,EAAG,QAAQ,CAACc,YAAY,QAAQ,CAACd,EAAG,QAAQ,CAACS,GAAG,CAAC,MAAQ,SAASE,GAAQd,EAAI0jB,iBAAkB,KAAS,CAAC1jB,EAAIgB,GAAG,aAAa,GAAGb,EAAG,QAAQ,CAACc,YAAY,QAAQ,CAACd,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,WAAWO,GAAG,CAAC,MAAQZ,EAAI6jB,qBAAqB,CAAC7jB,EAAIgB,GAAG,eAAe,IAAI,IAAI,IAAI,GAAGhB,EAAIW,MAAM,IAAI,IAAI,IAAI,IAAI,IAClgC,GAAkB,GCyFP,IACb/G,KAAMA,WAAR,OACA4pB,cACA,CAAAX,YAAApmB,gBACA,CAAAomB,iBAAApmB,mBACA,CAAAomB,eAAApmB,gBAAA6mB,cAEAH,sBACA,CAAAN,eAAApmB,iBACA,CAAAomB,sBAAApmB,eACA,CAAAomB,gBAAApmB,gBAAA6mB,cAEAI,mBACAC,oBACAC,sBAEEjc,SAAUA,kBACZtL,kEAGEuL,QApBF,WAqBIzJ,KAAKqQ,kBAEPxG,QAASA,iCACXxN,8DADA,IAEIipB,0BAFJ,SAEAvY,GACM/M,KAAKwlB,eAAiBzY,EACtB/M,KAAKylB,kBAAoB1Y,EAAO+B,UAChC9O,KAAKulB,iBAAkB,GAGzBG,mBARJ,WAQA,+JACA,qBADA,SAEA,mBACAtS,uCACAtE,gCAJA,iDC7HoV,MCOhV,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QClBX,GAAS,WAAa,IAAIjN,EAAI7B,KAAS8B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,SAAW,GAAG,eAAe,WAAWC,MAAM,CAAC7D,MAAOuD,EAAc,WAAEO,SAAS,SAAUC,GAAMR,EAAI8jB,WAAWtjB,GAAKE,WAAW,eAAe,CAACP,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,gBAAgB,CAACL,EAAIgB,GAAG,kBAAkBb,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,aAAa,CAACL,EAAIgB,GAAG,gBAAgB,GAAGb,EAAG,eAAe,CAAC4jB,YAAY,CAAC,MAAQ,QAAQzjB,MAAM,CAAC7D,MAAOuD,EAAc,WAAEO,SAAS,SAAUC,GAAMR,EAAI8jB,WAAWtjB,GAAKE,WAAW,eAAe,CAACP,EAAG,aAAa,CAACE,MAAM,CAAC,MAAQ,eAAe,CAACF,EAAG,SAAS,CAACA,EAAG,cAAc,CAACA,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQL,EAAI4V,iBAAiB,QAAU5V,EAAIgkB,sBAAsB,kBAAkB,EAAE,sBAAsB,IAAIlD,YAAY9gB,EAAI+gB,GAAG,CAAC,CAAChkB,IAAI,YAAYikB,GAAG,SAASlf,GACnzB,IAAIof,EAAOpf,EAAIof,KACf,MAAO,CAAC/gB,EAAG,MAAM,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGggB,EAAKvQ,SAASxQ,EAAG,MAAM,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGggB,EAAK1K,gBAAgB,CAACzZ,IAAI,gBAAgBikB,GAAG,SAASlf,GAC5H,IAAIof,EAAOpf,EAAIof,KACf,MAAO,CAAC/gB,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,KAAK,GAAK6gB,EAAK5K,kBAAkB,IAAI,IAAI,GAAGnW,EAAG,aAAa,CAACE,MAAM,CAAC,MAAQ,YAAY,CAACF,EAAG,SAAS,CAACA,EAAG,eAAe,CAACH,EAAIgB,GAAG,yBAAyBb,EAAG,cAAc,CAACA,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQL,EAAI2V,cAAc,QAAU3V,EAAIikB,mBAAmB,kBAAkB,EAAE,sBAAsB,IAAInD,YAAY9gB,EAAI+gB,GAAG,CAAC,CAAChkB,IAAI,gBAAgBikB,GAAG,SAASlf,GACxY,IAAIof,EAAOpf,EAAIof,KACf,MAAO,CAAC/gB,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,KAAK,GAAK6gB,EAAK5K,kBAAkB,IAAI,IAAI,IAAI,IAAI,IAClF,GAAkB,GC8CP,IACbkM,WAAYA,CAAdC,aACE7oB,KAAMA,WAAR,OACAkqB,wBACAE,uBACA,CAAAnB,gBAAApmB,qBACA,CAAAomB,eAAApmB,qBACA,CAAAomB,YAAApmB,cACA,CAAAomB,gBAAApmB,mBACA,CAAAomB,QAAApmB,mBAEAwnB,oBACA,CAAApB,gBAAApmB,qBAEM,CAANomB,cAAApmB,gBACA,CAAAomB,aAAApmB,eACA,CAAAomB,QAAApmB,qBAIEkL,SAAUA,kBACZtL,gEAGEuL,QAxBF,WAwBA,wJACA,mBADA,8CAIEI,QAASA,kBACXxN,+CClFsV,MCOlV,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QClBX,GAAS,WAAa,IAAIwF,EAAI7B,KAAS8B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,KAAK,CAACF,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,OAAO,CAACF,EAAG,SAAS,CAACA,EAAG,eAAe,CAACH,EAAIgB,GAAG,4BAA4Bb,EAAG,cAAc,CAACH,EAAIgB,GAAG,IAAIhB,EAAIkB,GAAGlB,EAAIsV,QAAQtV,EAAI4M,UAAU,YAAY,IAAI,GAAGzM,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,MAAM,CAACF,EAAG,SAAS,CAACA,EAAG,eAAe,CAACH,EAAIgB,GAAG,yBAAyBb,EAAG,cAAc,CAACA,EAAG,MAAM,CAACH,EAAIgB,GAAG,+BAA+BhB,EAAIkB,GAAGlB,EAAIsV,QAAQtV,EAAIgX,iBAAiB2J,QAAQ,IAAI,WAAWxgB,EAAG,MAAM,CAACH,EAAIgB,GAAG,2BAA2BhB,EAAIkB,GAAGlB,EAAIiX,cAAc0J,QAAQ,IAAI,UAAUxgB,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,GAAG,SAAiC,IAAtBL,EAAIiX,gBAAwBjX,EAAIkX,YAAYtW,GAAG,CAAC,MAAQZ,EAAIyX,eAAe,CAACzX,EAAIgB,GAAG,oBAAoB,IAAI,IAAI,GAAGb,EAAG,QAAQ,CAACA,EAAG,SAAS,CAACA,EAAG,eAAe,CAACH,EAAIgB,GAAG,oBAAoBb,EAAG,cAAc,CAACA,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACc,YAAY,OAAOZ,MAAM,CAAC,KAAO,OAAO,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,GAAG,eAAe,GAAG,SAAW,GAAG,KAAO,SAAS,IAAM,EAAE,YAAc,+BAA+BC,MAAM,CAAC7D,MAAOuD,EAAe,YAAEO,SAAS,SAAUC,GAAMR,EAAIkkB,YAAY1jB,GAAKE,WAAW,kBAAkB,GAAGP,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,OAAO,CAACF,EAAG,QAAQ,CAAC4jB,YAAY,CAAC,MAAQ,QAAQ1jB,MAAM,CAAC,MAAQ,IAAIO,GAAG,CAAC,MAAQZ,EAAImkB,aAAa,CAACnkB,EAAIgB,GAAG,kBAAkB,IAAI,IAAI,IAAI,IAAI,IAAI,IACp0C,GAAkB,GCsDP,IACbpH,KAAMA,WAAR,OACAwqB,gBACAF,gBAEEvc,SAAUA,kBACZtL,yBACA,UACA,kBACA,gBACA,gBAGEuL,QAbF,WAcIzJ,KAAKqQ,iBACLrQ,KAAKimB,WAAavV,YAAY1Q,KAAKqQ,eAAgB,MAErD6V,iBAjBF,SAiBAC,EAAAxkB,EAAAykB,GACI3V,cAAcA,KAAKA,YACnB2V,KAEFvc,QAASA,+BACPsN,QAAJA,IACA9a,0EAFA,IAGI2pB,WAHJ,WAGA,wKACA,6BADA,OAEA,gBAFA,iDC/EqV,MCOjV,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QClBX,GAAS,WAAa,IAAInkB,EAAI7B,KAAS8B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,SAAS,CAACc,YAAY,sBAAsB,CAAEjB,EAAImB,YAAcnB,EAAImJ,MAAMC,QAASjJ,EAAG,eAAe,CAACH,EAAIgB,GAAG,IAAIhB,EAAIkB,GAAGlB,EAAImB,YAAY,IAAInB,EAAIkB,GAAGlB,EAAIqB,QAAQ,KAAKlB,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,UAAU,GAAKL,EAAIqB,WAAW,GAAGlB,EAAG,eAAe,CAACH,EAAIgB,GAAG,cAAcb,EAAG,kBAAkB,CAACH,EAAIgB,GAAG,IAAIhB,EAAIkB,GAAGlB,EAAIwkB,yBAAyB,YAAY,GAAIxkB,EAAa,UAAEG,EAAG,SAAS,CAACc,YAAY,sBAAsB,CAACd,EAAG,eAAe,CAACH,EAAIgB,GAAG,cAAehB,EAAIgS,YAAchS,EAAI0X,SAAUvX,EAAG,kBAAkB,CAAC4jB,YAAY,CAAC,MAAQ,UAAU,CAAC/jB,EAAIgB,GAAG,gBAAgBhB,EAAIW,KAAMX,EAAIgS,aAAehS,EAAI0X,SAAUvX,EAAG,kBAAkB,CAAC4jB,YAAY,CAAC,MAAQ,QAAQ,CAAC/jB,EAAIgB,GAAG,yBAAyBhB,EAAIW,KAAMX,EAAIgS,aAAehS,EAAI0X,SAAUvX,EAAG,cAAc,CAACA,EAAG,IAAI,CAAC4jB,YAAY,CAAC,MAAQ,UAAU,CAAC/jB,EAAIgB,GAAG,+BAA+BhB,EAAIkB,GAAGlB,EAAI2X,kBAAkB,SAAS3X,EAAIW,MAAM,GAAGX,EAAIW,KAAMX,EAAImB,YAAcnB,EAAImJ,MAAMM,eAAgBtJ,EAAG,SAAS,CAACc,YAAY,sBAAsB,CAACd,EAAG,cAAc,CAACA,EAAG,IAAI,CAACH,EAAIgB,GAAG,6DAA6Db,EAAG,QAAQ,CAACc,YAAY,OAAOZ,MAAM,CAAC,MAAQ,GAAG,SAAWL,EAAIwB,UAAUZ,GAAG,CAAC,MAAQZ,EAAI0U,eAAe,CAAC1U,EAAIgB,GAAG,sBAAsB,KAAKb,EAAG,cAAc,CAACA,EAAG,IAAI,CAACH,EAAIgB,GAAG,2HAA2Hb,EAAG,OAAO,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGlB,EAAIykB,qCAAqC,GAAGzkB,EAAIW,MAAM,IACrhD,GAAkB,GCmDP,I,UAAA,CACb6hB,WAAYA,CAAdC,aACE7oB,KAAMA,WAAR,OACA6qB,iCAEE9c,SAAUA,6DACRwB,MAAOA,WAAX,WACI3H,SAAUA,eAAIA,aAClBnF,6DACAA,0DACAA,qDALA,IAMImoB,wBANJ,WAOM,OAAOlP,GAAQnX,KAAKuM,yBAAyBiW,QAAQ,IAEvDxO,UATJ,WAUM,MAAO,CAAC,qEAGZvK,QAlBF,WAkBA,+JACA,sBACA,oBACA,0BAHA,SAKA8X,6BALA,OAKA,8BALA,qDAOE1X,QAASA,iCACXxN,6DACAA,wEC/EqV,MCOjV,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QClBX,GAAS,WAAa,IAAIwF,EAAI7B,KAAS8B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,OAAO,CAACF,EAAG,KAAK,CAACH,EAAIgB,GAAG,qDAAqDb,EAAG,QAAQ,CAACE,MAAM,CAAC,KAAO,OAAO,CAACF,EAAG,SAAS,CAACA,EAAG,eAAe,CAACH,EAAIgB,GAAG,8BAA8Bb,EAAG,cAAc,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGlB,EAAI0kB,aAAa,WAAW,IAAI,IAAI,IAC1X,GAAkB,GCiBP,IACb9qB,KAAMA,WAAR,OACA8qB,gBAGE9c,QALF,WAKA,wKACA,2BADA,OACA,cADA,qDAIEI,QAASA,kBACXxN,8DC5BgW,MCO5V,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QClBX,GAAS,WAAa,IAAIwF,EAAI7B,KAAS8B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACc,YAAY,OAAOZ,MAAM,CAAC,KAAO,OAAO,CAACF,EAAG,SAAS,CAACA,EAAG,eAAe,CAACH,EAAIgB,GAAG,iDAAiD,IAAI,GAAGb,EAAG,QAAQ,CAACc,YAAY,OAAOZ,MAAM,CAAC,KAAO,OAAO,CAAEL,EAAe,YAAEG,EAAG,SAAS,CAACc,YAAY,QAAQ,CAACd,EAAG,kBAAkB,CAACH,EAAIgB,GAAG,4BAA4Bb,EAAG,cAAc,CAACH,EAAIgB,GAAG,yKAAyKb,EAAG,IAAI,CAACE,MAAM,CAAC,KAAOL,EAAI2kB,WAAW,CAAC3kB,EAAIgB,GAAGhB,EAAIkB,GAAGlB,EAAI2kB,eAAexkB,EAAG,iBAAiB,CAAGH,EAAI4kB,gBAAwIzkB,EAAG,cAAc,CAACH,EAAIgB,GAAG,mCAAmCb,EAAG,OAAO,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGlB,EAAI4kB,sBAAhNzkB,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,UAAU,MAAQ,IAAIO,GAAG,CAAC,MAAQZ,EAAI6kB,cAAc,CAAC7kB,EAAIgB,GAAG,iCAAgJ,IAAI,GAAGhB,EAAIW,MAAM,GAAGR,EAAG,QAAQ,CAACc,YAAY,OAAOZ,MAAM,CAAC,KAAO,OAAO,CAACF,EAAG,SAAS,CAACc,YAAY,QAAQ,CAACd,EAAG,eAAe,CAACH,EAAIgB,GAAG,uCAAuCb,EAAG,cAAc,CAACA,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQL,EAAI8kB,MAAM,QAAU9kB,EAAI+kB,kBAAkB,kBAAkB,EAAE,sBAAsB,IAAIjE,YAAY9gB,EAAI+gB,GAAG,CAAC,CAAChkB,IAAI,oBAAoBikB,GAAG,SAASlf,GAC/yC,IAAIof,EAAOpf,EAAIof,KACf,MAAO,CAAC/gB,EAAG,MAAM,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGggB,EAAK8D,cAAc,KAAK7kB,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,QAAQ,GAAK6gB,EAAK8D,iBAAiB,MAAM,CAACjoB,IAAI,qBAAqBikB,GAAG,SAASlf,GACpK,IAAIof,EAAOpf,EAAIof,KACf,MAAO,CAAC/gB,EAAG,IAAI,CAACE,MAAM,CAAC,KAAO6gB,EAAKje,MAAM,CAACjD,EAAIgB,GAAG,QAAQhB,EAAIkB,GAAGggB,EAAK9e,OAAO,YAAY,CAACrF,IAAI,qBAAqBikB,GAAG,SAASlf,GAC9H,IAAIof,EAAOpf,EAAIof,KACf,MAAO,CAAC/gB,EAAG,MAAM,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGlB,EAAIilB,gBAAgB/D,EAAK9e,WAAWjC,EAAG,MAAM,CAACH,EAAIgB,GAAG,MAAMhB,EAAIkB,GAAGggB,EAAKgE,qBAAqB,CAACnoB,IAAI,sBAAsBikB,GAAG,SAASlf,GACnK,IAAIof,EAAOpf,EAAIof,KACf,MAAO,CAAC/gB,EAAG,MAAM,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGlB,EAAImlB,iBAAiBjE,EAAK9e,WAAWjC,EAAG,MAAM,CAACH,EAAIgB,GAAG,MAAMhB,EAAIkB,GAAGggB,EAAKkE,sBAAsB,CAACroB,IAAI,gBAAgBikB,GAAG,SAASlf,GAC/J,IAAIof,EAAOpf,EAAIof,KACf,MAAO,CAAC/gB,EAAG,MAAM,CAACH,EAAIgB,GAAG,QAAQhB,EAAIkB,GAAGggB,EAAKmE,gBAAgBllB,EAAG,MAAM,CAACH,EAAIgB,GAAG,SAAShB,EAAIkB,GAAGggB,EAAKoE,uBAAuB,CAACvoB,IAAI,aAAaikB,GAAG,SAASlf,GACxJ,IAAIof,EAAOpf,EAAIof,KACf,MAAO,CAAC/gB,EAAG,MAAM,CAACH,EAAIgB,GAAG,QAAQhB,EAAIkB,GAAGggB,EAAKqE,aAAaplB,EAAG,MAAM,CAACH,EAAIgB,GAAG,SAAShB,EAAIkB,GAAGggB,EAAKsE,oBAAoB,CAACzoB,IAAI,kBAAkBikB,GAAG,SAASlf,GACvJ,IAAIof,EAAOpf,EAAIof,KACf,MAAO,CAAElhB,EAAIylB,QAAQvE,EAAK9e,OAAQjC,EAAG,gBAAgB,CAACS,GAAG,CAAC,OAAS,SAASE,GAAQ,OAAOd,EAAI0lB,SAASxE,KAAQ5gB,MAAM,CAAC7D,MAAOykB,EAAS,KAAE3gB,SAAS,SAAUC,GAAMR,EAAI2lB,KAAKzE,EAAM,OAAQ1gB,IAAME,WAAW,cAAc,CAACP,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQ,QAAQ,OAAQ,KAAQF,EAAG,UAAU,CAACE,MAAM,CAAC,MAAQ,SAAS,OAAQ,MAAU,GAAGL,EAAIW,aAAa,IAAI,IAAI,GAAGR,EAAG,QAAQ,CAACc,YAAY,OAAOZ,MAAM,CAAC,KAAO,OAAO,CAACF,EAAG,SAAS,CAACc,YAAY,QAAQ,CAACd,EAAG,eAAe,CAACH,EAAIgB,GAAG,gBAAgBb,EAAG,cAAc,CAACA,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQL,EAAI4lB,UAAU,QAAU5lB,EAAI6lB,kBAAkB,kBAAkB,EAAE,sBAAsB,IAAI/E,YAAY9gB,EAAI+gB,GAAG,CAAC,CAAChkB,IAAI,aAAaikB,GAAG,SAASlf,GACxqB,IAAIof,EAAOpf,EAAIof,KACf,MAAO,CAAC/gB,EAAG,MAAM,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGggB,EAAKjV,OAAO,KAAK9L,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,KAAK,GAAK6gB,EAAK5K,WAAW,WAAW,IAAI,IAAI,IAAI,IAC3H,GAAkB,GCqFP,IACbkM,WAAYA,CAAdC,aACE7oB,KAAMA,WAAR,OACAgrB,uBACAE,SACAc,aACAb,mBACA,CAAAlC,kBAAApmB,sBACA,CAAAomB,WAAApmB,uBACA,CAAAomB,gBAAApmB,uBACA,CAAAomB,sBAAApmB,kBACA,CAAAomB,mBAAApmB,eACA,CAAAomB,iBAAApmB,wBACA,CAAAomB,cAAApmB,qBAEAopB,mBACA,CAAAhD,kBAAApmB,eACA,CAAAomB,eAAApmB,eACA,CAAAomB,gBAAApmB,qBAGEkL,SAAUA,CACR6F,YADJ,WAEM,OAAO,GAAOnR,IAAI,6BAEpBsoB,SAJJ,WAKM,OAAOjb,IAETtD,YAPJ,WAQM,QAAS,GAAO/J,IAAI,gBAEtB4V,OAVJ,WAWM,OAAO,GAAO5V,IAAI,oBAAsB,GAAMgN,cAEhD8I,UAbJ,WAcM,OAAO,GAAO9V,IAAI,oBAAsB,GAAMkN,mBAIlD3B,QAvCF,WAwCIzJ,KAAK2nB,aACL3nB,KAAK4nB,kBAGP/d,QAASA,CACP6c,YADJ,WACA,yKACA1U,EAAA,mHACAD,EAAA3D,wBACAyZ,EAAA,cAHA,SAKAxU,qBAAAoD,cALA,OAMA1E,0BAAAM,cAAA,CAAAgJ,WACA5T,KAAA,mBACA,uCACA,kBATA,8CAaIkgB,WAdJ,WAcA,sLACA/W,6BADA,OACAkX,EADA,OAEAhrB,EAAA,GACAmH,EAAA,EAHA,YAGAA,KAHA,iCAIA2M,+BAJA,OAIAmX,EAJA,OAKAA,iCACAA,iDACAA,mDACAjjB,EAAA,sDACAijB,aACAjrB,UAVA,QAGAmH,IAHA,uBAYA,UAZA,+CAeI2jB,eA7BJ,WA6BA,kKACA1kB,EAAAkL,sDACA4D,EAAA,+FACAD,EAAA3D,wBACA,eACA2D,uBAAAM,cAAA,CAAA2V,UACAvlB,GAAA,mBACAwE,0BACA,kBACAhD,4CACAgkB,gDACAC,sEACA/P,yBACArK,yBAbA,8CAkBIwZ,QA/CJ,SA+CArjB,GACM,IAAN,oDACM,IAAK8jB,EAAM,OAAO,EAClB,IAAN,mBACA,0CACM,OAAOI,IAAmBnoB,KAAK8T,QAAU9T,KAAKgU,YAEhD8S,gBAtDJ,SAsDA7iB,GACM,IAAN,oDACM,IAAK8jB,EAAM,MAAO,MAClB,IAAN,mCAEM,OADA9gB,QAAQA,IAAIA,kBAAmBA,EAAOA,EAAMA,GACxCmhB,GAAV,YACA,+BAEIpB,iBA9DJ,SA8DA/iB,GACM,IAAN,oDACM,IAAK8jB,EAAM,MAAO,MAClB,IAAN,oCAEM,OADA9gB,QAAQA,IAAIA,kBAAmBA,EAAOA,EAAMA,GACxCmhB,GAAV,YACA,+BAGIb,SAvEJ,SAuEAQ,GAAA,mKACA9gB,wCACA,0BAFA,wDAGAohB,EAAAN,+CAHA,SAIA1U,SAAAoD,YAAA,UAJA,OAIAiL,EAJA,OAKA,wBACA,eACA,mBAPA,iDCzN2V,MCOvV,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QClBX,GAAS,WAAa,IAAI7f,EAAI7B,KAAS8B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAMH,EAAImC,GAAInC,EAAQ,MAAE,SAASqF,GAAK,OAAOlF,EAAG,MAAM,CAACpD,IAAIsI,EAAItI,KAAK,CAACoD,EAAG,SAAS,CAACH,EAAIgB,GAAGhB,EAAIkB,GAAGmE,EAAIiW,SAAStb,EAAIgB,GAAG,IAAIhB,EAAIkB,GAAGmE,EAAIkW,KAAKnY,KAAI,SAAUnF,GAAI,MAAiB,iBAAHA,EAAY,MAAMA,KAAMud,KAAK,MAAM,MAAM,MAAK,IACrT,GAAkB,GCUP,IACb5hB,KAAMA,WAAR,UACE+N,SAAUA,kBACZtL,0BAGEuL,QANF,aAQEI,QAASA,ICnB0U,MCOjV,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QCGfgR,aAAIC,IAAIwN,QAMR,IAAMC,GAAsB,SAAC,GAAD,IAAGhT,EAAH,EAAGA,MAAH,OAAgBA,EAAMvJ,MAAMmF,KAAKjO,QACvDslB,GAAU,SAACC,GACb,OAAO,gBAAElT,EAAF,EAAEA,MAAF,OAAcA,EAAMrX,IAAI,oBAAsBuqB,IAEnDC,GAAM,SAACC,GACT,OAAO,SAACC,GACJ,OAAQD,EAAEC,KAIZC,GAAM,WAAkB,2BAAdC,EAAc,yBAAdA,EAAc,gBAC1B,OAAO,SAACF,GAAS,uBACGE,GADH,IACb,2BAA2B,KAAhBH,EAAgB,QACvB,GAAIA,EAAEC,GAAO,OAAO,GAFX,8BAIb,OAAO,IAKFG,GAAS,CAElB,CAAElrB,KAAM,UAAWmrB,KAAM,WAAY5e,UAAW6e,GAASC,KAAM,CAAEC,OAAQ,kBAAI,KAC7E,CAAEtrB,KAAM,YAAamrB,KAAM,aAAc5e,UAAWgf,GAAWF,KAAM,CAAEG,iBAAkB,KACzF,CACIxrB,KAAM,SAAUmrB,KAAM,UAAW5e,UAAWkf,GAAQJ,KAAM,CACtDG,iBAAkB,GAClBE,WAAYb,GAAIF,GAAQxd,GAAMC,UAC9Bue,gBAAiB,YACjBL,OAAQX,GAAQxd,GAAMC,WAG9B,CACIpN,KAAM,eAAgBmrB,KAAM,gBAAiB5e,UAAWqf,GAAcP,KAAM,CACxEG,iBAAkB,GAClBG,gBAAiB,cAKzB,CAAE3rB,KAAM,kBAAmBmrB,KAAM,mBAAoB5e,UAAWsf,GAChE,CACI7rB,KAAM,iBAAkBmrB,KAAM,QAAS5e,UAAWuf,GAAMT,KAAM,CAC1DG,iBAAkB,GAClBF,OAAQ,gBAAG5T,EAAH,EAAGA,MAAH,OAAgBgT,GAAoB,CAAEhT,aAKtD,CACI1X,KAAM,WAAYmrB,KAAM,YAAa5e,UAAWwf,GAAUV,KAAM,CAC5DG,iBAAkB,aAClBE,WAAYV,GAAIL,GAAQxd,GAAME,cAAesd,GAAQxd,GAAMG,WAC3Dqe,gBAAiB,YACjBL,OAAQT,GAAIG,GAAIL,GAAQxd,GAAME,cAAesd,GAAQxd,GAAMG,cAGnE,CACItN,KAAM,qBAAsBmrB,KAAM,eAAgB5e,UAAWyf,GAAmBX,KAAM,CAClFG,iBAAkB,aAClBE,WAAYV,GAAIL,GAAQxd,GAAME,cAAesd,GAAQxd,GAAMG,WAC3Dqe,gBAAiB,YACjBL,OAAQT,GAAIG,GAAIL,GAAQxd,GAAME,cAAesd,GAAQxd,GAAMG,cAInE,CACItN,KAAM,SAAUmrB,KAAM,UAAW5e,UAAW0f,GAAQZ,KAAM,CACtDG,iBAAkB,QAClBE,WAAYf,GAAQxd,GAAMI,kBAC1Boe,gBAAiB,SACjBL,OAAQT,GAAIG,GAAIL,GAAQxd,GAAMK,iBAAkBmd,GAAQxd,GAAMI,sBAGtE,CACIvN,KAAM,QAASmrB,KAAM,SAAU5e,UAAW2f,GAAOb,KAAM,CACnDG,iBAAkB,QAClBE,WAAYf,GAAQxd,GAAMI,kBAC1Boe,gBAAiB,SACjBL,OAAQT,GAAIG,GAAIL,GAAQxd,GAAMK,iBAAkBmd,GAAQxd,GAAMI,sBAGtE,CACIvN,KAAM,UAAWmrB,KAAM,WAAY5e,UAAW4f,GAASd,KAAM,CACzDG,iBAAkB,QAClBE,WAAYV,GAAIL,GAAQxd,GAAMK,iBAAkBmd,GAAQxd,GAAMI,mBAC9Doe,gBAAiB,SACjBL,OAAQT,GAAIG,GAAIL,GAAQxd,GAAMK,iBAAkBmd,GAAQxd,GAAMI,sBAGtE,CACIvN,KAAM,OAAQmrB,KAAM,QAAS5e,UAAW6f,GAAQf,KAAM,CAClDG,iBAAkB,GAElBG,gBAAiB,SACjBL,OAAQ,gBAAEzjB,EAAF,EAAEA,OAAF,QAAY,OAACA,QAAD,IAACA,KAAQC,iBAIrC,CAAEqjB,KAAM,IAAKkB,SAAU,YAGrB/f,GAAS,IAAIme,OAAU,CACzBS,UACAoB,KAAM,K,SAKK5tB,G,mGAAf,WAAoB4pB,GAApB,0GAEcnmB,KAAKoqB,QAAQjE,GAF3B,yDAIQlf,QAAQC,IAAI,iDAAkD,KAAMif,GAAGtoB,KAAM,UAAQmC,KAAKqqB,aAAaxsB,MAJ/G,wD,yBADAsM,GAAOigB,QAAUjgB,GAAO5N,KAAKsC,KAAKsL,IAQlCA,GAAO5N,KAAOA,GAAKsC,KAAKsL,IACTA,UCnGA,IACbwW,MAAOA,CACLriB,MAAOA,SAET7C,KAAMA,WAAR,OACAqI,YAEEsY,MAAOA,CACL9d,MADJ,WAEM0B,KAAK8D,OAAS9D,KAAK1B,QAGvBkL,SAAUA,+DACZtL,uCACAA,uCACAA,uCAHA,IAIIosB,QAJJ,WAIA,aAGA,KACAC,QAAA,YAAQ,IAAR,EAAQ,YAAR,uFACAtlB,KAAA,YAAQ,MAAR,CACUf,KAAMA,aACNC,MAAOA,EAAEA,KAAKA,OAAOA,GAAGA,cAAgBA,EAAEA,KAAKA,MAAMA,GACrDC,MAAOA,EAAEA,KACT8kB,KAAMA,EAAEA,KACRK,WAAYA,EAAEA,KAAKA,WACnBllB,SAAUA,WAApB,OACA,YACAlG,uCAAAoX,kBACU4T,OAAQA,EAAEA,KAAKA,WAGzB,KACA,KAlBA,iBAoBArK,GApBA,IAoBA,0CACA,oBAAAvJ,kBAAA7P,uBAEA8kB,QACAA,+BACA,sCAEAC,QAAAnmB,aAAAH,gCACAumB,iCAEAD,YA9BA,8BAgCM,OAAOA,KAIXhhB,QApDF,WAqDIxC,QAAQA,IAAIA,SAAUA,KAGxB4C,QAASA,CACPhG,aADJ,WAGM7D,KAAK2qB,MAAM,QAAS3qB,KAAK8D,SAE3BlB,KALJ,SAKAyf,GACUriB,KAAK+D,OAAOlG,OAASwkB,GACzBriB,KAAKmiB,QAAQ5lB,KAAK,CAAxBsB,YC5GiV,MCO7U,GAAY,eACd,GACA,EACA,GACA,EACA,KACA,KACA,MAIa,M,QClBX,GAAS,WAAa,IAAIgE,EAAI7B,KAAS8B,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,WAAW,CAACE,MAAM,CAAC,MAAQ,MAAM,WAAa,IAAIC,MAAM,CAAC7D,MAAOuD,EAAW,QAAEO,SAAS,SAAUC,GAAMR,EAAI+oB,QAAQvoB,GAAKE,WAAW,YAAY,CAACP,EAAG,SAAS,CAACA,EAAG,eAAe,CAACH,EAAIgB,GAAG,gCAAgCb,EAAG,cAAc,CAACH,EAAIgB,GAAG,sCAAsChB,EAAIkB,GAAGlB,EAAIqc,eAAe,OAAOlc,EAAG,eAAe,CAACE,MAAM,CAAC,KAAO,YAAYC,MAAM,CAAC7D,MAAOuD,EAAkB,eAAEO,SAAS,SAAUC,GAAMR,EAAIgpB,eAAexoB,GAAKE,WAAW,oBAAoBP,EAAG,MAAM,CAAC4jB,YAAY,CAAC,MAAQ,QAAQ,CAAC/jB,EAAIgB,GAAGhB,EAAIkB,GAAGlB,EAAIipB,kBAAkB,GAAG9oB,EAAG,iBAAiB,CAACA,EAAG,QAAQ,CAACS,GAAG,CAAC,MAAQZ,EAAIkpB,SAAS,CAAClpB,EAAIgB,GAAG,YAAYb,EAAG,QAAQ,CAACE,MAAM,CAAC,QAAUL,EAAImpB,QAAQ,SAAkC,KAAvBnpB,EAAIgpB,gBAAyBhpB,EAAImpB,SAASvoB,GAAG,CAAC,MAAQZ,EAAIopB,SAAS,CAACppB,EAAIgB,GAAG,gBAAgB,IAAI,IAAI,IACx2B,GAAkB,GC0BP,IAEbpH,KAAMA,WAAR,OACAyiB,mBACA4M,kBACAF,WACAI,WACAH,kBAEAI,oBACAF,sBAGElhB,QAASA,CAKPgV,aALJ,SAKAzV,EAAAwV,GAAA,iKACA,KADA,sBACA,2EADA,cAEA,kBACA,aAHA,kBAUA,oCAEAqM,IAFA,6FAEA,wGACA,yCADA,wBAEA,gBAFA,kBAKArM,uDALA,UAKAvI,EALA,OAMAA,EANA,sBAMA,gEANA,OAQAtP,KARA,qDAUA,+BAVA,yBAYA,gBAZA,6CAeAmC,8CAfA,gEAFA,wBAqBA,aACAA,iDAGA,mBACA,sBApCA,cAUAmN,EAVA,yBAwCAA,GAxCA,uBA2CA,oBACA,oBACA,aA7CA,8EC7CoW,MCOhW,GAAY,eACd,GACA,GACA,IACA,EACA,KACA,KACA,MAIa,M,QC2DA,IACbgO,WAAYA,CAAd6G,WAAAC,+BACE1vB,KAAMA,WAAR,OACA6G,qBAGEkH,SAAUA,+DACZ4hB,uEACAltB,8BACAA,2EACAA,gDAGE2L,QAASA,iCACXxN,iFADA,IAEIqG,WAFJ,WAGM1C,KAAKsC,iBAAkB,GAEzBM,KALJ,SAKAyf,GACUriB,KAAK+D,OAAOlG,OAASwkB,GACzBriB,KAAKmiB,QAAQ5lB,KAAK,CAAxBsB,YAIE4L,QAxBF,WA0BI2E,GAAOA,IAAIA,oCAAqCA,KAAKA,MAAMA,2BAA2BA,gBCvGoO,MCO1T,GAAY,eACd,GACA,EACAxK,GACA,EACA,KACA,KACA,MAIa,M,0CCdfiX,aAAIC,IAAIuQ,MAEO,WAAIA,KAAQ,CACvBC,MAAO,CACHC,OAAQ,CACJC,MAAO,CACHC,QAAS,UACTC,UAAW,UACXC,OAAQ,UACRnmB,MAAO,WACPomB,QAAS,UACT7hB,KAAM,UACN8hB,QAAS,c,oBCflB,SAASC,GAAyB3hB,EAAQoL,GAC/CpL,EAAO4hB,WAAP,yDAAkB,WAAO5F,EAAIxkB,EAAMykB,GAAjB,oFAChBnf,QAAQC,IAAIvF,EAAK9D,KAAK,UAAQsoB,EAAGtoB,KAAO0X,EAAMvJ,MAAMgP,YAAazF,EAAMvJ,MAAMmF,KAAKsC,eACnE,WAAX0S,EAAGtoB,KAFS,yCAEiBuoB,KAFjB,UAGD,QAAXD,EAAGtoB,KAHS,yCAGcuoB,KAHd,UAIX7Q,EAAMvJ,MAAMgP,YAJD,yCAIqBoL,EAAK,CAACvoB,KAAK,aAJhC,mBAQC,mBAAXsoB,EAAGtoB,KARO,0CAQ2BuoB,KAR3B,WASwB,QAAlC7Q,EAAMvJ,MAAMmF,KAAKsC,cATP,0CASuC2S,EAAK,CAACvoB,KAAK,qBATlD,WAUC,kBAAXsoB,EAAGtoB,KAVO,0CAU0BuoB,KAV1B,WAWwB,QAAlC7Q,EAAMvJ,MAAMmF,KAAKsC,cAXP,0CAWuC2S,EAAK,CAACvoB,KAAK,oBAXlD,WAYwB,kBAAlC0X,EAAMvJ,MAAMmF,KAAKsC,cAZP,0CAYiD2S,EAAK,CAACvoB,KAAK,qBAZ5D,WAeTsoB,EAAG+C,MAAsC,oBAAvB/C,EAAG+C,KAAKK,WAfjB,0CAemDnD,KAfnD,WAiBTD,EAAG+C,KAAKK,WAAW,CAAEhU,UAjBZ,0CAiB6B6Q,EAAK,CAAEvoB,KAAMsoB,EAAG+C,KAAKM,iBAAmB,eAjBrE,eAmBdviB,QAAQC,IAAIvF,EAAK9D,KAAK,UAAQsoB,EAAGtoB,KAAM,QAnBzB,kBAoBPuoB,KApBO,4CAsBZnf,QAAQzB,MAAM,wCAAwC7D,EAAK9D,KAAK,OAAOsoB,EAAGtoB,KAAM,KAAMyJ,SAtB1E,kBAuBL8e,EAAK,CAACvoB,KAAK,aAvBN,0DAAlB,2DCSFgd,aAAInV,OAAOsmB,eAAgB,EAE3BF,GAAyB3hB,GAAQoL,IAEjC,IAAIsF,aAAI,CACNoR,WACA1W,SACApL,UACA+hB,OAAQ,SAAAC,GAAC,OAAIA,EAAEC,OACdC,OAAO,S","file":"js/index.39852ae2.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"index\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","const nativeBigInt = (typeof global !== 'undefined') && global.BigInt || (typeof window !== 'undefined') && window.BigInt;\nconst supportsNative = typeof nativeBigInt === 'function';\nconst _BigInt = require('big-integer');\n\nconst nativeFunction = function (operator, a) {\n    switch (operator) {\n      // Arithmetic operators\n      case 'add': return (b) => new BigInt(a + b);\n      case 'subtract': return (b) => new BigInt(a - b);\n      case 'multiply': return (b) => new BigInt(a * b);\n      case 'divide': return (b) => new BigInt(a / b);\n      case 'remainder': return (b) => new BigInt(a % b);\n      case 'pow': return (b) => new BigInt(a ** b);\n      // Bitwise shift operators\n      case 'shiftLeft': return (b) => new BigInt(a << b);\n      case 'shiftRight': return (b) => new BigInt(a >> b);\n      // Binary bitwise operators\n      case 'and': return (b) => new BigInt(a & b);\n      case 'or': return (b) => new BigInt(a | b);\n      case 'xor': return (b) => new BigInt(a ^ b);\n      // Relational operators\n      case 'lt': return (b) => a < b;\n      case 'gt': return (b) => a > b;\n      case 'leq': return (b) => a <= b;\n      case 'geq': return (b) => a >= b;\n      case 'eq': return (b) => a === b;\n      case 'neq': return (b) => a !== b;\n      // Unary operators\n      case 'negate': return () => new BigInt(- a);\n      case 'not': return () => new BigInt(~ a);\n      case 'next': return () => new BigInt(++a);\n      case 'prev': return () => new BigInt(--a);\n    }\n    return undefined;\n};\n\n/**\n * A proxy for BigInt that supports both native and polyfill implementations.\n * Also includes convenience functions for conversion to and from uint8 arrays\n * with both big and little endian byte order.\n * \n * Examples:\n *     const biNative = new BigInt(2n ** 63n - 1n));\n *     biNative.toUint8Array()\n * \n *     const biNonNative = new BigInt('9223372036854775807');\n *     biNonNative.toUint8Array()\n */\nclass BigInt {\n    constructor(value) {\n        if (typeof value === 'bigint') {\n            this.value = value;\n        } else if (value instanceof BigInt) {\n            return value; \n        } else {\n            this.value = new _BigInt(value);\n        }\n        // Proxy method calls to _BigInt if possible\n        return new Proxy(this, {\n            get(obj, field) {\n                if (field in obj) return obj[field];\n                if (typeof obj.value === 'bigint') return nativeFunction(field, obj.value);\n                if (typeof obj.value !== 'bigint' && field in obj.value) return obj.value[field].bind(obj.value);\n                return undefined;\n            }\n        });\n    }\n\n    valueOf() {\n        if (typeof this.value === 'bigint') {\n            return this.value;\n        } else {\n            return this;\n            //throw new Error('Cannot implicitly cast polyfilled BigInt into number')\n        }\n    }\n\n    equals(b) {\n        if (typeof this.value === 'bigint') {\n            return this.value === b.value;\n        } else if (b instanceof BigInt) {\n            if (typeof b.value === 'bigint') {\n                return this.value.equals(new _BigInt(b.toString()));\n            } else {\n                return this.value.equals(new _BigInt(b.value));\n            } \n        } else {\n            return this.value.equals(new _BigInt(b));\n        }\n    }\n\n    toString(radix) {\n        return this.value.toString(radix);\n    }\n\n    _toUint8ArrayNative(littleEndian = false, elements = 8) {\n        const arr = new ArrayBuffer(elements);\n        const view = new DataView(arr);\n        view.setBigUint64(0, this.value, littleEndian);\n        return new Uint8Array(arr);\n    }\n\n    _toUint8Array(littleEndian = false, elements = 8) {\n        const arr = new ArrayBuffer(elements);\n        const uint8arr = new Uint8Array(arr);\n        const intarr = this.value.toArray(2**8).value;\n        if (littleEndian) uint8arr.set(intarr.reverse(), 0);\n        else uint8arr.set(intarr, elements - intarr.length);\n        return uint8arr;\n    }\n\n    toUint8Array(littleEndian = false, elements = 8) {\n        if (typeof this.value === 'bigint') {\n            return this._toUint8ArrayNative(littleEndian, elements);\n        } else {\n            return this._toUint8Array(littleEndian, elements);\n        }\n    }\n\n    /**\n     * Get BigInt from a uint8 array in specified endianess.\n     * Uses native BigInt if the environment supports it and detectSupport is true.\n     * \n     * @param {Uint8Array} uint8arr\n     * @param {boolean} littleEndian use little endian byte order, default is false\n     * @param {boolean} detectSupport auto-detect support for native BigInt, default is true\n     */\n    static fromUint8Array(uint8arr, littleEndian = false, detectSupport = true) {\n        if (supportsNative && detectSupport) {\n            const view = new DataView(uint8arr.buffer);\n            return new BigInt(view.getBigUint64(0, littleEndian));\n        }\n        let array;\n        if (littleEndian) {\n            array = Array.from(uint8arr).reverse();\n        } else {\n            array = Array.from(uint8arr);\n        }\n        return new BigInt(_BigInt.fromArray(array, 2**8));\n    }\n}\n\nmodule.exports = BigInt;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{attrs:{\"id\":\"inspire\"}},[_c('v-container',[_c('app-menu',{model:{value:(_vm.drawerDisplayed),callback:function ($$v) {_vm.drawerDisplayed=$$v},expression:\"drawerDisplayed\"}}),_c('v-app-bar',{attrs:{\"app\":\"\",\"clipped-left\":\"\",\"flat\":\"\",\"color\":\"teal lighten-2\"}},[(!_vm.drawerDisplayed)?_c('v-app-bar-nav-icon',{on:{\"click\":_vm.showDrawer}}):_vm._e(),_c('v-toolbar-title',{on:{\"click\":function($event){return _vm.goTo('welcome')}}},[_vm._v(\"Proof of Carbon Reduction\")]),_c('v-spacer'),_c('v-chip',{staticClass:\"ma-2\",attrs:{\"color\":\"blue\",\"text-color\":\"white\"}},[_vm._v(\" \"+_vm._s(_vm.walletRole)+\" \")]),(_vm.wallet)?_c('v-chip',{staticClass:\"ma-2\",attrs:{\"color\":\"blue\",\"text-color\":\"white\"}},[_c('v-icon',{staticClass:\"mr-1\",on:{\"click\":_vm.disconnect}},[_vm._v(\"mdi-close\")]),_vm._v(\" \"+_vm._s(_vm.wallet)+\" \")],1):_vm._e(),_c('v-chip',{staticClass:\"ma-2\",attrs:{\"color\":\"blue\",\"text-color\":\"white\"}},[_vm._v(\" \"+_vm._s(_vm.currentBlockNumber)+\" \")]),_c('v-chip',{staticClass:\"ma-2\",attrs:{\"color\":\"blue\",\"text-color\":\"white\"}},[_vm._v(\" \"+_vm._s(_vm.chainName)+\" \")])],1),_c('v-main',[_c('v-container',{staticClass:\"py-8\"},[_c('router-view')],1)],1)],1),_c('v-overlay',{attrs:{\"value\":_vm.mmIsOpen}},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\"}})],1),_c('v-overlay',{attrs:{\"value\":_vm.mmConnecting}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Authorize the connection of the website to the browser wallet\")]),_c('v-card-actions',[_c('v-btn',{on:{\"click\":_vm.cancelWalletConnection}},[_vm._v(\"Cancel\")])],1)],1)],1),_c('v-snackbar',{attrs:{\"multi-line\":\"\",\"color\":_vm.snackbarColor,\"right\":\"\"},model:{value:(_vm.displaySnackbar),callback:function ($$v) {_vm.displaySnackbar=$$v},expression:\"displaySnackbar\"}},[_vm._v(\" \"+_vm._s(_vm.snackbarMessage)+\" \")]),_c('wallet-authentication-dialog',{ref:\"walletAuthenticationDialog\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-navigation-drawer',{attrs:{\"app\":\"\",\"clipped\":\"\",\"flat\":\"\"},on:{\"input\":_vm.drawerChange},model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:\"drawer\"}},[_c('v-divider'),_c('v-list',[_c('v-list-item-group',{attrs:{\"value\":_vm.$route.name,\"mandatory\":\"\",\"color\":\"primary\"}},[_vm._l((_vm.sidenav),function(ref,index){\nvar icon = ref.icon;\nvar label = ref.label;\nvar route = ref.route;\nvar disabled = ref.disabled;\nvar subheader = ref.subheader;\nreturn [(subheader && label !== '' && index !== 0)?_c('v-divider',{key:(label + \"-divider\")}):_vm._e(),(subheader && label !== '')?_c('v-subheader',{key:label},[_vm._v(_vm._s(label))]):_c('v-list-item',{key:route,attrs:{\"value\":route,\"disabled\":disabled(),\"link\":\"\"},on:{\"click\":function($event){return _vm.goTo(route)}}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(_vm._s(icon))])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(label))])],1)],1)]})],2)],1),_c('v-spacer'),_c('img',{attrs:{\"src\":\"PoCR_Logo.png\",\"width\":\"100%\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.providerMetamask)?_c('div',[_c('div',[_vm._v(\"Install MetaMask and then reload this application.\")]),_vm._m(0)]):_vm._e(),(_vm.providerMetamask)?_c('div',[_c('v-row',_vm._l((_vm.networks),function(network){return _c('v-col',{key:network.chainId,attrs:{\"cols\":\"4\"}},[_c('v-card',[_c('v-card-title',[_vm._v(_vm._s(network.name))]),_c('v-card-text',[_c('div',[_vm._v(_vm._s(network.title))]),_c('div',[_vm._v(\"chainID: \"+_vm._s(network.chainId))])]),_c('v-card-actions',[_c('v-btn',{on:{\"click\":function($event){return _vm.activateOrInstall(network)}}},[_vm._v(\"Activate\")])],1)],1)],1)}),1)],1):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"Installation instructions available at \"),_c('a',{attrs:{\"href\":\"https://metamask.io/download/\",\"target\":\"_blank\"}},[_vm._v(\"https://metamask.io/download/\")])])}]\n\nexport { render, staticRenderFns }","\n\nexport function parseUrl(url, acceptedProtocols) {\n  if (acceptedProtocols && !Array.isArray(acceptedProtocols)) acceptedProtocols = [acceptedProtocols];\n  if (acceptedProtocols) acceptedProtocols = acceptedProtocols.map(p=>(p.endsWith(\":\")? p : p+':').toLowerCase());\n  \n  if (!url) return undefined;\n  try {\n      const u = new URL(url)\n      if (acceptedProtocols) {\n          if (!acceptedProtocols.includes(u.protocol)) return undefined\n      }\n      return u;\n  } catch (error) {\n      return undefined;\n  }\n}\n\nexport async function cleanUpConfig(config) {\n  // Configuration of the internal network is optional and may contains no, one or several networks\n\n  if (config.activate_log) {\n    config.activate_log = true;\n  } else {\n    config.activate_log = false;\n  }\n  // check the url of the server handling the private keys if not metamask\n  if ( !Array.isArray(config.networks)) config.networks = [];\n  const explorers = config.explorers||{};\n  for (const chainId in explorers) {\n    const url = explorers[chainId];\n    if (!parseUrl(url, [\"http\", \"https\"])) {\n      delete explorers[chainId];\n    }\n  }\n  config.explorers = explorers;\n\n  for (const network of config.networks) {\n    if (!parseUrl(network.nodeUrl, [\"http\", \"https\", \"ws\", \"wss\"])) {\n      delete network.nodeUrl;\n    }\n    if (!parseUrl(network.walletCustodyAPIBaseUrl, [\"http\", \"https\"])) {\n        delete network.walletCustodyAPIBaseUrl\n    }\n    if (!parseUrl(network.explorerUrl, [\"http\", \"https\"])) {\n      delete network.explorerUrl;\n    }\n    if (!network.explorerUrl) { // try to find a url in the explorers field\n      if (config.explorers[network.chainID]) {\n        network.explorerUrl = config.explorers[network.chainID];\n      }\n    }\n    // may add later some other verifications like the chain id matches the node \n  }\n  if (config.networks.length==0) {\n    config.networks.push({name: \"No network defined in the configuration\"})\n  }\n  return config;\n}\n\nexport function getDefaultNetwork(config) {\n  let result = config.networks.find( n=>n.default );\n  if (!result && config.networks.length>0) result = config.networks[0];\n  return result;\n}\n\nexport function changeDefaultNetwork(config, url) {\n  for (const network of config.networks) {\n    if (network.nodeUrl == url) {\n      network.default = true;\n    } else {\n      network.default = false;\n    }\n  }\n  return config;\n}\n\nexport function getNetworkList(config) {\n  return config.networks;\n}\n\nexport function getExplorerUrl(config, chainID) {\n  if (!config) return undefined;\n  if (!chainID) { // assume the default config\n    const network = getDefaultNetwork(config)\n    if (network && network.chainID) {\n      if (network.explorerUrl) return network.explorerUrl;\n      else return getExplorerUrl(config, network.chainID);\n    } else {\n      return undefined;\n    }\n  } else { // use the chain ID\n    if (config.explorers[chainID]) {\n      return config.explorers[chainID];\n    } \n  }\n  return undefined;\n}","\n\n/**\n * Test in the window object if the ethereum compatible wallet has been registered\n * @param {{mustBeMetaMask: boolean, silent: boolean, tiemout: number}} options: configure the behavior of the function. Default are  mustBeMetaMask = false, silent = false, timeout = 3000\n * @returns {Promise<Provider|undefined>} returns the web3 compatible provider that also support the following api https://docs.metamask.io/guide/ethereum-provider.html#table-of-contents\n * Does not raise Error\n */\nexport function detectEthereumProvider({\n  mustBeMetaMask = false,\n  silent = false,\n  timeout = 3000,\n} = {}) {\n  _validateInputs();\n  let handled = false;\n  return new Promise((resolve) => {\n    // Is the ethereum provider alredy registered ?\n    if (window.ethereum) {\n      handleEthereum();\n    } else {\n      // No, then await for the event that says so or the timeout duration\n      if (!silent) console.log(\n        \"detectEthereumProvider - no ethereum yet - wait for event or timeout\"\n      );\n      window.addEventListener(\"ethereum#initialized\", handleEthereum, {\n        once: true,\n      });\n      setTimeout(() => {\n        handleEthereum();\n      }, timeout);\n    }\n    function handleEthereum() {\n      // Now let's decide what to return\n      if (!silent) console.log(\"detectEthereumProvider - handleEthereum()\", handled);\n      if (handled) {\n        return;\n      }\n      handled = true;\n      window.removeEventListener(\"ethereum#initialized\", handleEthereum);\n      const { ethereum } = window;\n      if (!silent) console.log(\n        \"detectEthereumProvider - decide return value\",\n        ethereum,\n        mustBeMetaMask\n      );\n      if (ethereum && (!mustBeMetaMask || ethereum.isMetaMask)) {\n        resolve(ethereum);\n      } else {\n        const message =\n          mustBeMetaMask && ethereum\n            ? \"Non-MetaMask window.ethereum detected.\"\n            : \"Unable to detect window.ethereum.\";\n        !silent && console.error(\"detectEthereumProvider:\", message);\n        resolve(undefined);\n      }\n    }\n  });\n  function _validateInputs() {\n    if (typeof mustBeMetaMask !== \"boolean\") {\n      throw new Error(\n        `detectEthereumProvider: Expected option 'mustBeMetaMask' to be a boolean.`\n      );\n    }\n    if (typeof silent !== \"boolean\") {\n      throw new Error(\n        `detectEthereumProvider: Expected option 'silent' to be a boolean.`\n      );\n    }\n    if (typeof timeout !== \"number\") {\n      throw new Error(\n        `detectEthereumProvider: Expected option 'timeout' to be a number.`\n      );\n    }\n  }\n}\n\n/**\n * Returns the connected node info\n * @param {Provider} provider \n * @returns {{connected:boolean, chainId?: number, chainIdHex?: string, networkVersion?: number}}\n */\nexport async function getEthereumProviderChainInfo(provider) {\n  if (!provider) return {connected: false};\n  const chainId = await provider.request({ method: 'eth_chainId' })\n  \n  return {\n    connected: provider.isConnected(),\n    chainId: Number(chainId),\n    chainIdHex: `0x${ Number(chainId).toString(16)}`,\n    networkVersion: Number(provider.networkVersion),\n  }\n}\n\n/**\n * \n * @param {Provider} provider \n * @param {{timeout: boolean}} options with default {timeout=500 ms} \n * @returns {Promise<string[]>} an array of account address or an empty array if the wallet is locked. The first address of the array is the selected wallet.\n */\nexport async function getEthereumProviderConnectedAccounts(provider, {timeout = 500}={}) {\n  return new Promise((resolve) => {\n    let completed = false;\n    // set the timeout to respond in case of blocked call on eth_accounts\n    setTimeout(() => {\n      if (completed) return;\n      completed = true;\n      resolve([]);\n    }, timeout);\n    // submit the request to the wallet\n    // this mehod can block on brave wallet, but doesn't on metamask, hence the timeout\n    provider\n      .request({ method: \"eth_accounts\" })\n      .then((accounts) => {\n        if (completed) return;\n        completed = true;\n        resolve(accounts);\n      })\n      .catch(() => {\n        if (completed) return;\n        completed = true;\n        resolve([]);\n      });\n  });\n}\n\nfunction errorLike(error) {\n  return typeof error.message !== \"undefined\";\n}\n\n/**\n * Ensure the error is properly formatted as bet specification\n * @param {Error | string | any} error that will be converted into an Error \n * @param {number|undefined} code will be set to the resulting error if defined\n * @param {any|undefined} data will be set to the resulting error if defined\n * @returns \n */\nfunction providerError(error, code, data) {\n  if (!error) return undefined;\n  let result = error;\n  if (typeof result == \"string\") result = new Error(result);\n  if (!errorLike(result)) result = new Error(result);\n  if (typeof !result.code && typeof result.message == \"string\") {\n    try {\n      const decoded = JSON.parse(result.message);\n      result.code = decoded.code;\n      result.data = decoded.data;\n      result.message = decoded.message;\n    } catch (error) {\n      result.code = code || 0;\n    }\n  }\n  if (code) result.code = code;\n  if (data) result.data = data;\n  return result;\n}\n\n/**\n * Request the user to unlock the wallet and returns selected accounts\n * @param {Provider} provider \n * @param {EventEmitter} notifier an emmiter provided by the caller to request cancellation by emitting the 'cancel' event\n * @returns {Promise<string[]>} the connected account\n * If the wallet is not unlocked then the call remains pending until the `notifier.emit('cancel')` is called. In such case an error is raised with `error.code == 4001`.    \n * It can also raise an error with code `-32602` if there is already a pending request to unlock the wallet by this page or another\n */\nexport async function unlockEthereumProviderAccounts(provider, notifier) {\n  return await new Promise((resolve, reject) => {\n    let completed = false;\n    // catch the cancel event that can be provided by the user\n    notifier.once(\"cancel\", () => {\n      if (completed) return;\n      completed = true;\n      reject(providerError(\"Cancelled login\", 4001));\n    });\n    provider\n      .request({ method: \"eth_requestAccounts\" })\n      .then((accounts) => {\n        if (completed) return;\n        completed = true;\n        resolve(accounts);\n      })\n      .catch((error) => {\n        if (completed) return;\n        completed = true;\n        reject(providerError(error));\n      });\n  });\n}\n\n/**\n * Request switching to the provided network chainId and if it does not exists try creating the network if the info are provided and an address is provided\n * @param {Provider} provider \n * @param {{\n      chainId: string; \n      chainName?: string;\n      nativeCurrency?: {\n        name: string;\n        symbol: string; \n        decimals: number;\n      };\n      rpcUrls?: string[];\n      blockExplorerUrls?: string[];\n      iconUrls?: string[];\n    }} network information for selecting the network. If the optional info are not provided, the network won't be created \n * @param {string|undefined} address the account needed to request the network creation\n * @returns {Promise<void>}\n */\nexport async function switchEthereumProviderNetwork(provider, network, address) {\n  if (!provider) throw providerError(\"missing a valid provider\", -32602);\n  if (!network) throw providerError(\"missing the network parameter\", -32602);\n  if (!/0x[0-9a-fA-F]+/.test(network.chainId)) throw providerError(\"missing the network chainId as an hex string (0x123)\", -32602);\n  try {\n    await provider.request({\n      method: 'wallet_switchEthereumChain',\n      params: [{ chainId: network.chainId }],\n    });\n  } catch (switchError_) {\n    let switchError = providerError(switchError_);\n    // in mobile metamask wallet, the error code 4902 is not set but the error message contains the name of the function to use\n    if (/wallet_addEthereumChain/.test(switchError.message)) switchError.code = 4902;\n    // console.log(\"Fail switching to the network:\", switchError.code, switchError.message, address, network.chainName, \"test message\", /wallet_addEthereumChain/.test(switchError.message))\n    // This error code indicates that the chain has not been added to MetaMask.\n    if (switchError.code == 4902) {\n      if ( address && network.chainName ) {\n        try {\n          await provider.request({\n            method: 'wallet_addEthereumChain',\n            params: [\n              network, address\n            ],\n          });\n          \n        } catch (addError) {\n          // handle \"add\" error\n          // console.log(\"Fail adding network\", addError.message)\n          throw providerError(addError);\n        }\n      } else {\n        throw providerError(\"Cannot switch to the network because it does not exist and the call misses the network info and a valid account\", -32602, network)\n      }\n    }\n    // handle other \"switch\" errors\n    // console.log(\"Fail switching to the network:\"+switchError.message)\n    throw switchError;\n  }\n}","<template>\n  <div>\n    <div v-if=\"!providerMetamask\">\n      <div>Install MetaMask and then reload this application.</div>\n      <div>Installation instructions available at <a href=\"https://metamask.io/download/\" target=\"_blank\">https://metamask.io/download/</a></div>\n    </div>\n    <div v-if=\"providerMetamask\">\n      <v-row>\n        <v-col cols=\"4\" v-for=\"network of networks\" :key=\"network.chainId\">\n          <v-card>\n            <v-card-title>{{network.name}}</v-card-title>\n            <v-card-text>\n              <div>{{network.title}}</div>\n              <div>chainID: {{network.chainId}}</div>\n            </v-card-text>\n            <v-card-actions>\n              <v-btn @click=\"activateOrInstall(network)\">Activate</v-btn>\n            </v-card-actions>\n          </v-card>\n        </v-col>\n      </v-row>\n    </div>\n  </div>\n</template>\n<script>\nimport { get, call } from \"vuex-pathify\";\nimport { getExplorerUrl } from '../lib/config-file';\nimport {switchEthereumProviderNetwork, getEthereumProviderChainInfo} from \"../lib/ethereum-compatible-wallet\";\nimport router from \"../router.js\";\n\nexport default {\n  data: ()=>({\n    networks: []\n  }),\n  computed: {\n    ...get([\"config\"]),\n    ...get(\"auth\", [\"provider\", \"providerModel\", \"providerMetamask\", \"wallet\"]),\n  },\n\n  async mounted() {\n    // await this.detectProvider();\n    const res = await fetch('https://chainid.network/chains.json')\n    const all = await res.json()\n    this.networks = all.filter(n=>n.chain == 'CRC')\n  },\n\n  methods: {\n    ...call([\"errorFlash\"]),\n    ...call(\"auth\", [\"detectProvider\", \"openMetaMaskConnectionDialog\", \"attemptToConnectWallet\"]),\n    async activateOrInstall(network) {\n      if (!this.providerMetamask) throw new Error(\"metamask has not been installed\")\n      const ethereum = this.providerMetamask.provider;\n      const chainId = '0x'+Number(network.chainId).toString(16);\n      const explorerUrl = getExplorerUrl(this.config, network.chainId);\n      try {\n        await this.openMetaMaskConnectionDialog({noRedirect: true});\n\n        if (!this.wallet) throw new Error(\"Could not find an account\");\n        const info = await getEthereumProviderChainInfo(ethereum);\n        if (info.chainId != network.chainId) {\n          await switchEthereumProviderNetwork(ethereum, {\n            chainId, \n            chainName: network.name,\n            rpcUrls: [...network.rpc],\n            nativeCurrency: network.nativeCurrency,\n            blockExplorerUrls: network.explorers.filter(e=>e.standard=='EIP3091').map(e=>e.url).concat(explorerUrl)\n          }, this.wallet)\n        } else {\n          this.attemptToConnectWallet()\n        }\n        router.push({ name: \"dashboard\" });\n      } catch (addError) {\n        // handle \"add\" error\n        this.errorFlash(\"Fail adding the network:\"+addError.message)\n      }\n    }\n  }\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InstallMetaMask.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InstallMetaMask.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InstallMetaMask.page.vue?vue&type=template&id=4ddb8f43&\"\nimport script from \"./InstallMetaMask.page.vue?vue&type=script&lang=js&\"\nexport * from \"./InstallMetaMask.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.hasProviderMetamask)?_c('div',[_c('v-btn',{staticClass:\" my-3\",attrs:{\"color\":\"teal\",\"dark\":\"\"},on:{\"click\":_vm.prepareOpenMetaMaskConnectionDialog}},[_vm._v(\"Connect Metamask Wallet\")]),_c('v-btn',{staticClass:\"mx-3 my-3\",attrs:{\"color\":\"teal\",\"dark\":\"\"},on:{\"click\":_vm.goToInstallMetamask}},[_vm._v(\"Switch / Install network\")])],1):_vm._e(),_c('br'),_c('br'),(_vm.hasProviderDirect)?_c('div',[_c('v-btn',{attrs:{\"color\":\"teal\",\"dark\":\"\"},on:{\"click\":_vm.prepareOpenWeb3DirectConnectionDialog}},[_vm._v(\"Connect with below configuration\")]),_vm._v(\" \"),_c('br'),_c('br'),_c('v-select',{attrs:{\"hint\":(\"node: \" + (_vm.selectedNetwork.nodeUrl) + \"; custody: \" + (_vm.selectedNetwork.walletCustodyAPIBaseUrl)),\"items\":_vm.networks,\"item-text\":\"name\",\"item-value\":\"nodeUrl\",\"persistent-hint\":\"\",\"return-object\":\"\",\"single-line\":\"\"},model:{value:(_vm.selectedNetwork),callback:function ($$v) {_vm.selectedNetwork=$$v},expression:\"selectedNetwork\"}}),(_vm.hasCustodyApi)?_c('div',[_c('br'),_c('v-combobox',{attrs:{\"label\":\"Enter the wallet address\",\"placeholder\":\"capture your wallet address\",\"outlined\":\"\",\"counter\":\"\",\"clearable\":\"\",\"search-input\":_vm.wallet,\"items\":_vm.wallets},on:{\"update:search-input\":_vm.updateWallet}}),_c('v-text-field',{attrs:{\"label\":\"Enter the wallet password\",\"placeholder\":\"capture your wallet password\",\"outlined\":\"\",\"type\":_vm.show?'text' : 'password'},on:{\"click:append\":function($event){_vm.show = !_vm.show}},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1):_vm._e()],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import pathify from 'vuex-pathify'\nexport default pathify\n\n// options\npathify.options.mapping = 'simple'\n// pathify.options.deep = false","import web3 from \"web3\";\n\nexport const ROLES = {\n  VISITOR : \"Visitor\",\n  AUDITED_NODE : \"Audited node\",\n  NEW_NODE : \"New node\",\n  APPROVED_AUDITOR : \"Approved auditor\",\n  PENDING_AUDITOR : \"Auditor\",\n  USER_CONNECTED : \"User\",\n}\n\nexport const CRIPBaseUrl = \"https://github.com/ethereum-pocr/CRIPs/blob/main/CRIPS\"\n\n\nexport const governanceAddress = \"0x0000000000000000000000000000000000000100\";\nexport const totalCRCAddress = \"0x0000000000000000000000000000000000000101\";\nconst sessionVariableTotalPocRCoins = \"GeneratedPocRTotal\";\nexport const GeneratedCRCTotalHash = web3.utils.keccak256(sessionVariableTotalPocRCoins);","import { make } from \"vuex-pathify\";\nimport { poaBlockHashToSealerInfo } from \"pocr-utils\";\nimport { Web3FunctionProvider } from \"@saturn-chain/web3-functions\";\nimport { readOnlyCall, intf as _intf, writeCall, handleMMResponse, getWalletBalance, subscribeNewBlocks } from \"@/lib/api\";\nimport { totalCRCAddress, GeneratedCRCTotalHash } from \"@/lib/const\";\nimport $store from \"@/store/index\";\n\nconst MAX_BLOCKS_TO_KEEP = 10;\n\nconst state = () => ({\n    nbOfNodes: 0,\n    totalFootprint: 0,\n    totalCrypto: 0,\n    sealers: [],\n    chainUpdateSubscription: null,\n    blocks: [],\n    currentBlockNumber: 0,\n    currentWalletBalanceWei: 0,\n    backupLoop: null,\n    timeSinceLastBlock: 0\n})\n\nconst average = (arr) => arr.reduce((a, b) => a + b, 0) / arr.length;\n\nconst getters = {\n    rewardsByBlock(state) {\n        const rewards = state.blocks.map((d) => d.sealer.lastReward);\n        rewards.unshift(0);\n        return rewards;\n    },\n    averageReward(state) {\n        if (state.blocks.length === 0) return 0;\n        const rewards = state.blocks.map((d) => d.sealer.lastReward);\n        return average(rewards);\n    },\n    averageDelaySec(state) {\n        if (state.blocks.length < 2) return 0;\n        const minIndex = state.blocks.length-Math.min(state.blocks.length, 11)\n        const delays = [];\n        for (let i=state.blocks.length-1; i>minIndex; i--) {\n            const previousBlock = state.blocks[i - 1];\n            const lastBlock = state.blocks[i];\n            delays.push((lastBlock.receivedAt - previousBlock.receivedAt) / 1000)\n        }\n        // console.log(\"Debug averageDelaySec\", minIndex, state.blocks.length, delays);\n        if (delays.length == 0) return 0;\n        return delays.reduce( (sum, v)=>v+sum, 0) / delays.length;\n    },\n    lastBlock(state) {\n        if (state.blocks.length === 0) return null;\n        return state.blocks[state.blocks.length - 1];\n    },\n    lastBlockNumber(state, getters) {\n        return getters.lastBlock?.block.number;\n    }\n}\n\nconst mutations = make.mutations(state);\n\nasync function updateSealerDetails(web3, sealer) {\n    const carbonFootprint = $store.get(\"auth/contract\");\n    const intf = _intf(web3);\n    const balance = web3.utils.toBN(await web3.eth.getBalance(sealer.address));\n    const bal = Number.parseFloat(web3.utils.fromWei(balance, \"ether\"));\n    const footprint = await carbonFootprint.footprint(intf.call(), sealer.address);\n    sealer.footprint = Number.parseFloat(footprint);\n    sealer.balance = bal;\n    sealer.lastReward = 0; //delta //normalRewardForFootprint(data.sealer.footprint, data.totalFootprint, data.nbNodes);\n\n    return sealer;\n}\n\nasync function processBlock(web3, block) {\n    console.log(\"ProcessBloc\", block.number, new Date().toTimeString());\n    const intf = _intf($store.get(\"auth/provider\"));\n    const carbonFootprint = $store.get(\"auth/contract\");\n\n    const data = { block, sealer: undefined }\n    try {\n        if (typeof block.difficulty === \"string\" && !block.difficulty.startsWith('0x')) block.difficulty = Number.parseInt(block.difficulty);\n        const blockNumber = typeof block.number === \"string\" ? Number.parseInt(block.number) : block.number;\n        // Total and delta\n        let totalCryptoB4 = web3.utils.toBN(0);\n        let totalCrypto = web3.utils.toBN(0);\n        try {\n            totalCryptoB4 = web3.utils.toBN(await web3.eth.getStorageAt(totalCRCAddress, GeneratedCRCTotalHash, blockNumber -1))\n            totalCrypto = web3.utils.toBN(await web3.eth.getStorageAt(totalCRCAddress, GeneratedCRCTotalHash, blockNumber))\n        } catch (error) {\n            // can typically fails when the blockNumber is 128 block before the last block because of missing trie node\n            // In that case we ignore the calculation (zero)\n        }\n        // extract the sealer data\n        data.sealer = poaBlockHashToSealerInfo(block);\n        data.sealer = await updateSealerDetails(web3, data.sealer);\n        const delta = Number.parseFloat(web3.utils.fromWei(totalCrypto.sub(totalCryptoB4), \"ether\"));\n        data.sealer.lastReward = delta;\n        data.block.number = blockNumber;\n\n        const totalFootprint = await carbonFootprint.totalFootprint(intf.call())\n        const nbNodes = await carbonFootprint.nbNodes(intf.call())\n\n        data.totalFootprint = Number.parseInt(totalFootprint)\n        data.totalCrypto = Number.parseFloat(web3.utils.fromWei(totalCrypto, \"ether\"))\n        data.nbNodes = Number.parseInt(nbNodes)\n        data.receivedAt = Date.now();\n\n        // read the sealers from the contract\n        const sealers = []\n        for (let index = 0; index < nbNodes; index++) {\n            const sealer = await carbonFootprint.sealers(intf.call(), index)\n            const isSealer = await carbonFootprint.isSealer(intf.call(), sealer)\n            sealers.push({sealer, isSealer})\n        }\n        // console.log(\"Loaded sealers\", sealers);\n\n    } catch (error) {\n        console.warn(\"Error in preparing block\", error)\n        throw new Error(\"Fail processing block \"+block.number)\n    }\n    return data;\n}\nasync function logicOnNewBloc(web3, blocks, sealers, block) {\n    // we have a block that is before the current block, remove the block up to that block\n    while (blocks.length>0 && blocks[blocks.length-1].block.number >= block.number) {\n        blocks.pop();\n    }\n    const data = await processBlock(web3, block);\n    blocks.push(data);\n    while (blocks.length >= MAX_BLOCKS_TO_KEEP) {\n        blocks.shift();\n    }\n\n    // Update the sealer of the block\n    let si = sealers.findIndex(s=>s.address == data.sealer.address);\n    if (si<0) { // not found\n        const sealer = {...data.sealer,sealedBlocks: 1}\n        console.log(\"Creating new sealer\", sealer);\n        sealers.push(sealer);\n    } else {\n        const sealer = {...sealers[si], ...data.sealer};\n        sealer.sealedBlocks ++;\n        sealers[si] = sealer;\n    }\n    return {blocks, sealers};\n\n}\n\nconst actions = {\n    async fetchAllValues({ dispatch }) {\n        await dispatch(\"fetchNumberOfNodes\");\n        await dispatch(\"fetchTotalFootprint\");\n        await dispatch(\"updateNodesStatus\");\n    },\n\n    async initBackupLoop({state, commit}) {\n        if (state.backupLoop) {clearInterval(this.backupLoop)}\n        commit(\"timeSinceLastBlock\", 0)\n        const backupLoop = setInterval( ()=>{\n            const lastBlock = $store.get(\"nodes/lastBlock\");\n            if (!lastBlock) return;\n            const timeSinceLastBlock = Date.now()-lastBlock.receivedAt;\n            // if (timeSinceLastBlock > 60*1000) {\n            //     console.warn(\"No block update since more than 60 seconds. Force a subscription\");\n            //     window.location.reload();\n            //     // dispatch(\"subscribeToChainUpdates\")\n            // }\n            commit(\"timeSinceLastBlock\", timeSinceLastBlock)\n        }, 200);\n\n        commit(\"backupLoop\", backupLoop);\n    },\n\n    async fetchNumberOfNodes() {\n        const nbNodes = await readOnlyCall(\"nbNodes\");\n        $store.set(\"nodes/nbOfNodes\", Number.parseInt(nbNodes));\n    },\n\n    async fetchTotalFootprint() {\n        const totalFootprint = await readOnlyCall(\"totalFootprint\");\n        $store.set(\"nodes/totalFootprint\", Number.parseInt(totalFootprint));\n    },\n\n    async updateNodesStatus() {\n        const sealers = $store.get(\"nodes/sealers\")\n        for (const sealer of sealers) {\n            const s = await readOnlyCall(\"isSealer\", sealer.address)\n            // console.log(\"isSealer\", sealer);\n            sealer.isActive = s\n        }\n        $store.set(\"nodes/sealers\", sealers)\n    },\n\n    async subscribeToChainUpdates({ state, rootState, dispatch }) {\n        if (state.chainUpdateSubscription !== null) {\n            state.chainUpdateSubscription.unsubscribe();\n            $store.set(\"nodes/chainUpdateSubscription\", null);\n        }\n        await dispatch(\"fetchChainInformations\");\n\n        const web3 = rootState.auth.web3;\n        const subscription = subscribeNewBlocks(web3) //web3.eth.subscribe(\"newBlockHeaders\");\n        let blockProcessing = false;\n        let blocksWaiting = [];\n        const processingFunc = async (block) => {\n            try {\n                if (block.baseFeePerGas == undefined) block = await web3.eth.getBlock(block.number);\n                await dispatch(\"insertNewBlock\", block);\n            } catch (error) {\n                // some error on the subscription processing\n                // if the error is due to the loss of connection it needs a reset of the connection\n                console.warn(\"Error on receiving a new block\", error);\n                blocksWaiting = []; // clear\n                await dispatch(\"subscribeToChainUpdates\");\n            }\n        }\n        subscription.on(\"data\", async block =>{\n            if (blockProcessing) blocksWaiting.push(block);\n            else try {\n                blockProcessing = true;\n                await processingFunc(block);\n                while( (block = blocksWaiting.shift()) ) {\n                    await processingFunc(block);\n                }\n            } finally {\n                blockProcessing = false;\n            }\n        });\n        $store.set(\"nodes/chainUpdateSubscription\", subscription);\n    },\n\n    unsubscribeToChainUpdates() {\n        if (state.chainUpdateSubscription !== null) state.chainUpdateSubscription.unsubscribe();\n    },\n\n\n\n    async insertNewBlock({ state, rootState, commit, dispatch }, block) {\n        const web3 = $store.get(\"auth/web3\");\n        commit(\"currentBlockNumber\", block.number);\n        if (rootState.auth.wallet) {\n            const bal = await getWalletBalance(rootState.auth.wallet);\n            commit(\"currentWalletBalanceWei\", bal);\n        }\n        try {\n            const {blocks, sealers} = await logicOnNewBloc(web3, [...state.blocks], [...state.sealers], block);\n            \n            $store.set(\"nodes/blocks\", blocks);\n            $store.set(\"nodes/sealers\", sealers);\n            if (blocks.length>0) {\n                $store.set(\"nodes/totalCrypto\", blocks[blocks.length-1].totalCrypto)\n            }\n        } catch (error) {\n            // ignore that block\n        }\n        dispatch(\"fetchAllValues\");\n    },\n\n    discoverNotRunningSealers({rootState, state}) {\n        const web3 = rootState.auth.web3;\n        const contract = rootState.auth.contract;\n        const prov = new Web3FunctionProvider(rootState.auth.provider, ()=>Promise.resolve(contract.deployedAt));\n        const sealers = [...state.sealers]; // make a copy of the sealers from the store\n        contract.events.CarbonFootprintUpdate(prov.get({fromBlock: 1}), {})\n        .on(\"log\", async log=>{\n            // try to find the sealer in the list\n            let found = sealers.find(s=>s.address.toLowerCase() == log.returnValues.node.toLowerCase())\n            if (!found) {\n                const sealer = await updateSealerDetails(web3, {\n                    address: log.returnValues.node.toLowerCase(), \n                    vanity: {custom:\"Unknown innactive node\"},\n                    sealedBlocks: 0\n                })\n                // check again if it not already added, as the above can execute concurrently\n                found = sealers.find(s=>s.address.toLowerCase() == sealer.address)\n                // we have collected the node data, but maybe it is not a node anymore\n                if (sealer.footprint>0 && found===undefined) {\n                    console.log(\"Adding an innactive sealer\", sealer);\n                    // keep in the local array variable \n                    sealers.push(sealer);\n                    // but also update the store with some delay to prevent concurrent race in other state setter\n                    setTimeout( ()=>$store.set(\"nodes/sealers\", sealers), 200);\n                }\n            }\n        })\n    },\n\n    async fetchChainInformations({ rootState, dispatch }) {\n        const web3 = rootState.auth.web3;\n        // gets the eventually already available blocks to only request the new ones\n        let blocks = [...(rootState.nodes.blocks||[])];\n        // the sealers array or create it\n        let sealers = [...(rootState.nodes.sealers||[])];\n        const lastBlockInMemory = blocks.length>0 ? blocks[blocks.length-1].block.number : 0;\n        const blockNumber = await web3.eth.getBlockNumber();\n        this.blockNumber = blockNumber;\n\n        let index = Math.max(lastBlockInMemory+1, blockNumber - MAX_BLOCKS_TO_KEEP);\n        console.log(\"From block\", index, \"to\", blockNumber, \"sealers count\", sealers.length, \"blocks count\", blocks.length);\n\n        const blockNumbers = [];\n        for (; index < blockNumber; index++) blockNumbers.push(index);\n        const loadedBlocks = await Promise.all(blockNumbers.map(index=>web3.eth.getBlock(index, false)));\n        for (const block of loadedBlocks) {\n            // const block = await web3.eth.getBlock(index, false);\n            try {\n                const r = await logicOnNewBloc(web3, blocks, sealers, block);\n                blocks = r.blocks;\n                sealers = r.sealers;\n            } catch (error) {\n                // ignore block                \n            }\n        }\n        if (blocks.length>0) {\n            $store.set(\"nodes/totalCrypto\", blocks[blocks.length-1].totalCrypto)\n        }\n        $store.set(\"nodes/blocks\", blocks);\n        $store.set(\"nodes/sealers\", sealers);\n        // We may have nodes that have been receiving a footprint that are not running, let's find them from the event log\n        dispatch(\"discoverNotRunningSealers\");\n        $store.dispatch(\"auth/fetchRole\");\n    },\n    async fetchOneNodeInfo({rootState}, address) {\n        const web3 = rootState.auth.web3;\n        // ensure blocks are loaded, because it needs the blocks to find the node\n        const sealers = rootState.nodes.sealers || [];\n        let found = sealers.findIndex(s=>s.address == address.toLowerCase());\n        if (found>=0) {\n            sealers[found] = await updateSealerDetails(web3, sealers[found]);\n            $store.set(\"nodes/sealers\", sealers);\n            return sealers[found];\n        } else {\n            return undefined; //await updateSealerDetails(web3, {address})\n        }\n    },\n\n    async updateFootprint({dispatch}, { sealerAddress, footprint }) {\n        await handleMMResponse(writeCall(\"setFootprint\", sealerAddress, footprint));\n        dispatch(\"fetchOneNodeInfo\", sealerAddress);\n        dispatch(\"fetchAllValues\")\n    }\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","// import ready from \"document-ready-promise\";\n// import detectEthereumProvider from '@metamask/detect-provider';\nimport Web3 from \"web3\";\nimport EventEmitter from 'events';\nimport { make } from \"vuex-pathify\";\nimport { readOnlyCall, writeCallWithOptions, handleMMResponse, getWeb3ProviderFromUrl, verifyCustodyAuthentication, getCustodyLastWallets } from \"@/lib/api\";\nimport { getDefaultNetwork, changeDefaultNetwork, getExplorerUrl } from \"@/lib/config-file\";\nimport { detectEthereumProvider, getEthereumProviderConnectedAccounts, unlockEthereumProviderAccounts, getEthereumProviderChainInfo} from '@/lib/ethereum-compatible-wallet';\n\nimport $store from \"@/store/index\";\nimport router from \"../router.js\";\nimport {ROLES} from \"../lib/const\"\nimport { poaBlockHashToSealerInfo } from '@root/../pocr-utils/build/index.js';\nimport { intf, getContractInstance } from '../lib/api.js';\n\nconst state = () => ({\n    web3: null, // the web3 instance to avoid recreating it each time, because it has a side effect on the events of the provider\n    intf: null, // similarly the intf instance should not be recreated each time\n    provider: null,\n    providerMetamask: null,\n    providerDirect: null,\n    providerModel: null, // \"metamask\" or \"direct\" or \"both\" (if both are available)\n    custodyModel: null, // \"metamask\" or \"api\" or null if not available\n    custodyApiUrl: null, // the url of the custody api when the custody model is \"api\"\n    wallet: null,\n    delegatedWallet: null,\n    contract: null,\n    registered: false,\n    // roles\n    isNode: false,\n    isVoterNode: false,\n    isAuditor: false,\n    isAuditorApproved: false,\n    walletAuthenticationFunction: null,\n    mmConnecting: false,\n    mmConnectionNotifier : new EventEmitter(),\n})\n\nconst getters = {\n    walletRole(state) {\n        if (!state.wallet) return ROLES.VISITOR;\n        if (state.isVoterNode) return ROLES.AUDITED_NODE;\n        if (state.isNode) return ROLES.NEW_NODE;\n        if (state.isAuditorApproved) return ROLES.APPROVED_AUDITOR;\n        if (state.isAuditor) return ROLES.PENDING_AUDITOR;\n\n        return ROLES.USER_CONNECTED;\n    },\n    explorerUrl(state) {\n        if (state.providerModel == \"metamask\") {\n            return state.providerMetamask.explorerUrl;\n        }\n        if (state.providerModel == \"direct\") {\n            return state.providerDirect.explorerUrl;\n        }\n        return undefined;\n    },\n    chainName(state) {\n        let chainId=0;\n        switch (state.providerModel) {\n            case \"direct\": chainId=state.providerDirect.chainID; break;\n            case \"metamask\": chainId=state.providerMetamask.chainID; break;\n        }\n        switch (chainId) {\n            case 1804: return \"Kerleano\";\n            case 2606: return \"PoCRNet\";\n        }\n        return \"Unknown\"\n    }\n}\n\nconst mutations = make.mutations(state);\n\n// function to generalize the web3 provider and signature api options\nasync function detectMetamask() {\n    console.log(\"Entering detect Metamask\")\n    const config = $store.get(\"config\");\n    let providerMetamask = undefined;\n    try {\n        providerMetamask = await detectEthereumProvider({timeout:2000});\n    } catch (error) {\n        console.log(\"fail detectEthereumProvider\");\n    }\n    function chainChanged() {\n        window.location = new URL(window.location.pathname, window.location.origin).href;\n    }\n    if (providerMetamask) {\n        // providerMetamask.on(\"connect\", chaininfo=>{\n            //     console.log(\"Metamask chain info\", chaininfo);\n        // })\n        // providerMetamask.on('accountsChanged', () => window.location.reload())\n        providerMetamask.removeListener('chainChanged', chainChanged);\n        providerMetamask.on('chainChanged', chainChanged);\n        const chain = await getEthereumProviderChainInfo(providerMetamask)\n        // const explorerUrl = getExplorerUrl(config, chainID)\n        const explorerUrl = getExplorerUrl(config, chain.chainId)\n        console.log(\"Explorer url defined\", explorerUrl)\n        return {\n            providerModel: \"metamask\",\n            provider: providerMetamask,\n            custodyModel: \"metamask\",\n            custodyApiUrl: null,\n            chainID: chain.chainId,\n            explorerUrl\n        }\n    } else return undefined;\n}\n\nasync function detectDirectAccess() {\n    const config = $store.get(\"config\");\n    const defaultNetwork = getDefaultNetwork(config);\n    // if we have a nodeUrl, we can connect to the network\n    if (defaultNetwork.nodeUrl) {\n        // first create a direct provider without the wallet custody\n        const result = {\n            providerModel: \"direct\",\n            provider: getWeb3ProviderFromUrl(defaultNetwork.nodeUrl),\n            custodyModel: null,\n            custodyApiUrl: null,\n            chainID: Number.parseInt(defaultNetwork.chainID),\n            explorerUrl: getExplorerUrl(config) // will use the default network\n        }\n        // if we also have the wallet custody, then add it in the result\n        if (defaultNetwork.walletCustodyAPIBaseUrl) {\n            result.custodyModel = \"api\",\n            result.custodyApiUrl = defaultNetwork.walletCustodyAPIBaseUrl\n        } else {\n            console.log(\"Note: No company's wallet custody configured\");\n        }\n        return result;\n    } else {\n        console.log(\"Note: No direct web3 access configured\");\n        return undefined\n    }\n}\nconst actions = {\n\n    async checkNetworkProofOfCarbonReduction() {\n        const web3 = $store.get(\"auth/web3\");\n        if (!web3) return \"No web3 connection established yet\";\n        const carbonFootprint = $store.get(\"auth/contract\");\n        console.log(\"checkNetworkProofOfCarbonReduction\", web3);\n        try {\n            // try getting the blocknumber\n            const blockNumber = await web3.eth.getBlockNumber()\n            // try getting the poaInfo of the block\n            const block = await web3.eth.getBlock(blockNumber);\n            if (typeof block.difficulty === \"string\" && !block.difficulty.startsWith('0x')) block.difficulty = Number.parseInt(block.difficulty);\n            poaBlockHashToSealerInfo(block);\n            // try getting the number of sealers/nodes\n            await carbonFootprint.nbNodes(intf().call())\n            \n        } catch (error) {\n            console.error(\"Fail in checkNetworkProofOfCarbonReduction\", error);\n            return error.message;\n        }\n        return false;\n    },\n\n    async setWalletAttributes({dispatch}) {\n        dispatch(\"fetchIsRegistered\");\n        dispatch(\"status/fetchIsApproved\", null, { root: true });\n        dispatch(\"fetchRole\");\n    },\n\n    async fetchRole() {\n        console.log(\"fetchRole called\");\n        // Possibles roles are simple visitor (no wallet), authenticated visitor, auditor, node operator\n        // Reset the states\n        $store.set(\"auth/isAuditor\", false);\n        $store.set(\"auth/isNode\", false);\n        $store.set(\"auth/isVoterNode\", false);\n\n        // get the current address\n        const wallet = $store.get(\"auth/wallet\");\n        if (wallet) {\n            // check if it's Auditor\n            const isAuditor = await readOnlyCall(\"auditorRegistered\", wallet);\n            const isAuditorApproved = await readOnlyCall(\"auditorApproved\", wallet);\n            // see if the node is a sealer and get the value of the footprint if it exists\n            let sealerNode = await $store.dispatch(\"nodes/fetchOneNodeInfo\", wallet);\n            // console.log(\"sealerNode\", sealerNode);\n            if (!sealerNode) { // wallet is not a node, is the wallet a delegate of a node\n                try {\n                    const delegateOf = await readOnlyCall(\"delegateOf\", wallet);\n                    // console.log(\"retrieved delegateOf\", delegateOf);\n                    sealerNode = await $store.dispatch(\"nodes/fetchOneNodeInfo\", delegateOf);\n                } catch (error) {\n                    // console.log(\"retrieved delegateOf impossible - ealier version of the genesis\");\n                }\n            }\n            if (sealerNode) { // wallet found as sealer or delegate of a sealer\n                $store.set(\"auth/isNode\", true);\n                let isVoterNode = false;\n                try { // to keep compatibility with the old genesis\n                    isVoterNode = await readOnlyCall(\"canActAsSealerNode\", wallet);\n                } catch (error) {\n                    const footprint = await readOnlyCall(\"footprint\", wallet);\n                    isVoterNode = footprint > 0;\n                }\n                $store.set(\"auth/isVoterNode\", isVoterNode);\n                $store.set(\"auth/delegatedWallet\", sealerNode.address);\n            } \n            // set the values to the store\n            $store.set(\"auth/isAuditor\", isAuditor);\n            $store.set(\"auth/isAuditorApproved\", isAuditorApproved);\n\n        }\n    },\n\n    async setConnection(store, provider) {\n        console.log(\"Setting connection:\", provider.providerModel);\n        $store.set(\"auth/provider\", provider.provider);\n        $store.set(\"auth/providerModel\", provider.providerModel);\n        const web3 = new Web3(provider.provider);\n        web3.eth.ens = null\n        $store.set(\"auth/web3\", web3);\n        window.myWeb3 = web3;\n        $store.set(\"auth/intf\", null); // will created on the fly by the intf() function\n    },\n\n    async detectProvider({dispatch, commit, state, rootState}) {\n        // Just to make sure, if you do not have the smart contract instance yet, we instanciate it.\n        if (!state.contract) {\n            commit(\"contract\", getContractInstance())\n        }  \n        console.log(\"Before detecting providers\");\n        try {\n            if (!rootState.config) await $store.dispatch(\"fetchConfig\");\n            let nbProviders = 0;\n\n            const providerMetamask = await detectMetamask();\n            if (providerMetamask) {\n                nbProviders ++;\n            }\n \n            const providerDirect = await detectDirectAccess();\n            if (providerDirect) {\n                nbProviders ++;\n            } \n            if (nbProviders == 0) {\n                // router.push({ name: \"installMetaMask\" }); \n                $store.set(\"auth/providerModel\", \"none\");\n                return;\n            }\n            \n            $store.set(\"auth/providerMetamask\", providerMetamask);\n            $store.set(\"auth/providerDirect\", providerDirect);\n            if (nbProviders > 1) {\n                $store.set(\"auth/providerModel\", \"both\");\n                // return router.push({ name: \"authentication\" }); \n            } else { // a single provider detected, can skip the decision process\n                const provider = providerDirect || providerMetamask; // will get one that is not null\n                await dispatch(\"setConnection\", provider);\n                // $store.set(\"auth/provider\", provider.provider);\n                // $store.set(\"auth/providerModel\", provider.providerModel);\n            }\n        } catch (error) {\n            console.error(\"Fail detecting a valid provider\", error.message)\n        }\n        console.log(\"Finishing detecting providers\");\n    },\n\n    async attemptToConnectWallet() {\n        let addresses = [];\n        const providerMetamask = $store.get(\"auth/providerMetamask\");\n        // const providerDirect = $store.get(\"auth/providerDirect\");\n        const model = $store.get(\"auth/providerModel\");\n        \n        if (model == \"metamask\") addresses = await getEthereumProviderConnectedAccounts(providerMetamask.provider, {timeout:1000});\n        if (model == \"direct\" && addresses.length == 0) addresses = await getCustodyLastWallets();\n        console.log(\"wallets found [\", ...addresses, \"]\");\n        const address = addresses.length > 0 ? addresses[0] : null;\n        if (!address) return;\n        $store.set(\"auth/wallet\", address);\n        // We do it here because stuff breaks if we try to instanciate the interface before we know the address\n        return address;\n    },\n\n    async cancelWalletConnection({ state}) {\n        if (state.mmConnecting) {\n            state.mmConnectionNotifier.emit(\"cancel\");\n        }\n    },\n\n    async openMetaMaskConnectionDialog({ dispatch, state, commit }, {noRedirect = false}={}) {\n        const provider = $store.get(\"auth/providerMetamask\");\n        $store.set(\"auth/wallet\", null);\n        // const notifier = new EventEmitter();\n        // setTimeout( ()=>notifier.emit(\"cancel\"), 10000);\n        let accounts = await getEthereumProviderConnectedAccounts(provider.provider, {timeout: 500});\n        if (accounts.length==0) {\n            try {\n                commit(\"mmConnecting\", true)\n                accounts = await unlockEthereumProviderAccounts(provider.provider, state.mmConnectionNotifier)\n            } finally {\n                commit(\"mmConnecting\", false)\n            }\n        }\n        if (accounts.length === 0) return;\n        $store.set(\"auth/wallet\", accounts[0]);\n        // it's decided, the provider is metamask\n        dispatch(\"setConnection\", provider);\n        // $store.set(\"auth/provider\", provider.provider);\n        // $store.set(\"auth/providerModel\", provider.providerModel);\n        // TODO: call fetchRole here to do a selective redirect? Or, just assume it's a first connect and don't care.\n        if (!noRedirect) {\n            await dispatch(\"fetchRole\");\n            router.push({ name: \"dashboard\" });\n        }\n    },\n\n    async openWeb3DirectConnectionDialog({ dispatch }, {wallet, password, nodeUrl}) {\n        // force reset the wallet\n        $store.set(\"auth/wallet\", null);\n        // update the default config\n        let config = $store.get(\"config\");\n        config = changeDefaultNetwork(config, nodeUrl);\n        $store.set(\"config\", config);\n\n        const provider = await detectDirectAccess(); // read again the default config now that it is chaged\n        dispatch(\"setConnection\", provider);\n        // $store.set(\"auth/provider\", provider.provider);\n        // $store.set(\"auth/providerModel\", provider.providerModel);\n        \n        if (provider.custodyModel == \"api\") {\n            const token = await verifyCustodyAuthentication(wallet, password)\n            \n            // console.log(\"openWeb3DirectConnectionDialog\", wallet, password, token);\n            if (token) {\n                $store.set(\"auth/wallet\", wallet);\n            }\n        }\n        await dispatch(\"fetchRole\");\n        router.push({ name: \"dashboard\" });\n    },\n\n    async disconnect() {\n        await router.push({ name: \"authentication\" });\n        $store.set(\"auth/wallet\", null);\n    },\n\n    async fetchIsRegistered({ state }) {\n        $store.set(\"auth/registered\", false);\n        if (state.wallet) {\n            const registered = await handleMMResponse(readOnlyCall(\"auditorRegistered\", state.wallet));\n            $store.set(\"auth/registered\", registered);\n        }\n    },\n\n    async selfRegister({ dispatch }) {\n        await handleMMResponse(writeCallWithOptions(\"selfRegisterAuditor\", {maxGas:200000}));\n        dispatch(\"setWalletAttributes\");\n    }\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","import { BigNumber } from \"bignumber.js\";\nexport const GWEI_FACTOR = Math.pow(10, 9)\nexport const ETH_FACTOR = Math.pow(10, 18)\n/**\n * Convert to BigNumber\n * @param {bigint|string|number} bi \n * @returns BigNumber\n */\nexport function toWebBigInt(bi) {\n  return new BigNumber(bi);\n}\n\n/**\n * Convert to normal number\n * @param {BigNumber} bi \n * @returns Number\n */\nexport function toNumber(bi) {\n  return bi.toNumber();\n}\n\n/**\n * Convert wei to gwei\n * @param {bigint|string|number} bi \n * @returns BigNumber\n */\nexport function toGWei(bi) {\n  return toWebBigInt(bi).div(toWebBigInt(GWEI_FACTOR));\n}\n/**\n * Convert wei to Ether\n * @param {bigint|string|number} bi \n * @returns BigNumber\n */\nexport function toEther(bi) {\n  return toWebBigInt(bi).div(toWebBigInt(ETH_FACTOR));\n}\n\nexport function toWei(bi, from) {\n  const n = toWebBigInt(bi);\n  if(from === \"ether\") return n.multipliedBy(ETH_FACTOR)\n  if(from === \"gwei\") return n.multipliedBy(GWEI_FACTOR)\n  return n\n}\n\n/** Convert a big int to a smart contract parameter call \n * @param {BigNumber} bi\n * @return {string}\n*/\nexport function toParam(bi) {\n  // return bi.toFormat(0, BigNumber.ROUND_DOWN, {groupSeparator:''})\n  return '0x'+bi.toString(16)\n}\n\nwindow.Numberlib = {\n  toWebBigInt,\n  toNumber,\n  toEther,\n  toGWei,\n  toWei,\n  toParam\n}","import { make } from \"vuex-pathify\";\nimport { governanceAddress } from \"@/lib/const\";\nimport { Web3FunctionProvider } from \"@saturn-chain/web3-functions\";\nimport allContracts from \"sc-carbon-footprint\";\nimport { toEther } from \"@/lib/numbers\";\n\n// eslint-disable-next-line \nimport { SmartContractInstance } from \"@saturn-chain/smart-contract\" // needed only for typings resolution in the code\nimport $store from \"@/store/index\";\n\nconst state = () => ({\n    pledgeHistory: [],\n    footprintHistory: []\n})\n\nconst getters = {}\n\nconst mutations = {\n    ...make.mutations(state),\n    appendFootprint: (state, value) => {\n        state.footprintHistory.push(value)\n    },\n    appendPledge: (state, value) => {\n        state.pledgeHistory.push(value)\n    },\n};\n\nconst actions = {\n    fetchAllValues({ dispatch }) {\n        const prov = new Web3FunctionProvider($store.get(\"auth/provider\"), ()=>Promise.resolve($store.get(\"auth/wallet\")))\n        const contract = allContracts.get(\"Governance\").at(governanceAddress);\n\n        dispatch(\"fetchFootprintHistory\", {contract, prov});\n        dispatch(\"fetchPledgeHistory\", {contract, prov});\n    },\n\n    /**\n     * Get the list of setting footprint from the begining.     \n     * TODO: Replace by a pagination scheme \n     * @param {*} empty \n     * @param {{contract:SmartContractInstance, prov:Web3FunctionProvider} param1 \n     */\n    async fetchFootprintHistory({commit, rootState}, {contract, prov}) {\n        const web3 = $store.get(\"auth/web3\");\n        const sealers = rootState.nodes.sealers;\n        const wallet = rootState.auth.wallet;\n        $store.set(\"history/footprintHistory\", []);\n        contract.events.CarbonFootprintUpdate(prov.get({fromBlock: 1}), {})\n        .on(\"log\", async log=>{\n            // console.log(\"get logs \", log);\n            const tx = await web3.eth.getTransaction(log.transactionHash)\n            // console.log('tx=', tx);\n            const footprint = {\n                blockNumber: log.blockNumber,\n                auditor: tx?tx.from.toLowerCase():'no sealer!',\n                node: log.returnValues.node.toLowerCase(),\n                footprint: log.returnValues.footprint,\n                txHash: log.transactionHash\n            };\n            const foundSealer = sealers.find(s=>s.address == footprint.node);\n            if (foundSealer) {\n                footprint.nodeName = foundSealer.vanity.custom;\n            } else {\n                footprint.nodeName = 'Not a node';\n            }\n            if (footprint.auditor == wallet) {\n                footprint.auditorName = \"Me\";\n            } else {\n                footprint.auditorName = footprint.auditor;\n            }\n            commit(\"appendFootprint\", footprint);\n        })\n    },\n\n    /**\n     * Get the list of pledging from the begining.     \n     * TODO: Replace by a pagination scheme \n     * @param {*} empty \n     * @param {{contract:SmartContractInstance, prov:Web3FunctionProvider} param1 \n     */\n    async fetchPledgeHistory({commit, rootState}, {contract, prov}) {\n        const wallet = rootState.auth.wallet;\n        $store.set(\"history/pledgeHistory\", []);\n        // get the logs of the current auditor only\n        contract.events.AmountPledged(prov.get({fromBlock: 1}), {from: wallet})\n        .on(\"log\", async log=>{\n            // console.log(\"get logs \", log, \"filter\", {from: wallet});\n            const pledge = {\n                blockNumber: log.blockNumber,\n                auditor: log.returnValues.from,\n                pledge: toEther(log.returnValues.amountAdded)-toEther(log.returnValues.amountRemoved),\n                total: toEther(log.returnValues.total),\n                txHash: log.transactionHash\n            };\n            commit(\"appendPledge\", pledge)\n        })\n    }\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","import { make } from \"vuex-pathify\";\nimport { readOnlyCall, writeCall, writeCallWithOptions, handleMMResponse } from \"@/lib/api\";\nimport $store from \"@/store/index\";\nimport { toWei, toEther } from \"@/lib/numbers\";\nimport { getWalletBalance } from \"@/lib/api\";\n\nconst state = () => ({\n    balance: 0,\n    minPledgeAmount: 0,\n    pledgedAmount: 0,\n    redeemBool: false,\n})\n\nconst getters = {}\n\nconst mutations = make.mutations(state);\n\nconst actions = {\n    fetchAllValues({ dispatch }) {\n        dispatch(\"fetchBalance\");\n        dispatch(\"fetchMinPledgeAmount\");\n        dispatch(\"fetchPledgedAmount\");\n        dispatch(\"fetchCanTransferPledge\");\n    },\n\n    async fetchBalance({ rootState }) {\n        const balance = await getWalletBalance(rootState.auth.wallet);\n        $store.set(\"pledge/balance\", balance);\n    },\n\n    async fetchCanTransferPledge() {\n        const wallet = $store.get(\"auth/wallet\");\n        const redeemBool = await readOnlyCall(\"canTransferPledge\", wallet,\"1\");\n        console.log(\"just trying\", redeemBool);\n        $store.set(\"pledge/redeemBool\", redeemBool);\n    },\n\n    async fetchMinPledgeAmount() {\n        const wallet = $store.get(\"auth/wallet\");\n        const minPledgeAmount = await readOnlyCall(\"minPledgeAmountToAuditNode\", wallet);\n        $store.set(\"pledge/minPledgeAmount\", minPledgeAmount);\n    },\n\n    async fetchPledgedAmount() {\n        const wallet = $store.get(\"auth/wallet\");\n        const pledgedAmount = await readOnlyCall(\"pledgedAmount\", wallet);\n        $store.set(\"pledge/pledgedAmount\", toEther(pledgedAmount));\n    },\n\n    async addToPledge({ dispatch }, amount) {\n        console.log(\"Pledging\", amount)\n        await handleMMResponse(writeCallWithOptions(\"pledge\", { amount: toWei(amount, \"ether\"), maxGas: 300000}));\n        dispatch(\"fetchPledgedAmount\");\n        dispatch(\"fetchBalance\");\n    },\n\n    async redeemPledge({ dispatch }) {\n        // when the smart contract is redeployed with the getPledgeBack function replace the below code\n        // const wallet = $store.get(\"auth/wallet\");\n        // const amount = $store.get(\"pledge/pledgedAmount\");\n        await handleMMResponse(writeCall(\"getPledgeBack\"));\n        // replace with:\n        // await handleMMResponse(writeCall(\"getPledgeBack\"));\n        dispatch(\"fetchPledgedAmount\");\n        dispatch(\"fetchBalance\");\n    }\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","import { make } from \"vuex-pathify\";\nimport { readOnlyCall } from \"@/lib/api\";\nimport $store from \"@/store/index\";\n\nconst state = () => ({\n    approved: false,\n    approbationVotes: 0\n})\n\nconst getters = {}\n\nconst mutations = make.mutations(state);\n\nconst actions = {\n    async fetchIsApproved() {\n        $store.set(\"status/approved\", false);\n        const wallet = $store.get(\"auth/wallet\");\n        if (wallet) {\n            const approved = await readOnlyCall(\"auditorApproved\", wallet);\n            $store.set(\"status/approved\", approved);\n        }\n    },\n    async fetchApprobationVotes() {\n        const wallet = $store.get(\"auth/wallet\");\n        const votes = await readOnlyCall(\"auditorVotes\", wallet);\n\n        $store.set(\"status/approbationVotes\", Number(votes));\n    }\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","import { make } from \"vuex-pathify\";\nimport { toEther } from \"@/lib/numbers\";\nimport {\n    handleMMResponse,\n    readOnlyCall,\n    writeCallWithOptions,\n} from \"@/lib/api\";\nimport $store from \"@/store/index\";\n\nconst state = () => ({\n    nbAuditors: 0,\n    auditors: [],\n})\n\nconst getters = {}\n\nconst mutations = make.mutations(state);\n\nconst actions = {\n    async fetchAllAuditorsValues({ dispatch }) {\n        await dispatch(\"fetchNbAuditors\");\n        await dispatch(\"fetchAuditorsInfos\");\n    },\n\n    async fetchNbAuditors() {\n        const nbAuditors = await readOnlyCall(\"nbAuditors\");\n        $store.set(\"nodeGovernance/nbAuditors\", nbAuditors);\n    },\n\n    async fetchAuditorsInfos() {\n        const nbAuditors = await readOnlyCall(\"nbAuditors\");\n        const nodeAdr = $store.get(\"auth/wallet\");\n        const minVotes = Math.floor((await readOnlyCall(\"nbNodes\")) / 2) + 1;\n        const auditors = [];\n        for (let i = 0; i < nbAuditors; i++) {\n            const address = await readOnlyCall(\"auditorAddress\", i);\n            const nbVotes = await readOnlyCall(\"auditorVotes\", address);\n            const currentVote = await readOnlyCall(\"currentAuditorVote\", address, nodeAdr);\n            const isApproved = await readOnlyCall(\"auditorApproved\", address);\n            auditors[i] = {\n                address,\n                nbVotes,\n                minVotes,\n                currentVote,\n                isApproved\n            };\n        }\n        $store.set(\"nodeGovernance/auditors\", auditors);\n    },\n\n    async fetchConfiscatedPledge() {\n        const confiscated = await readOnlyCall(\"confiscatedAmount\");\n        console.log(\"confiscated pledge\", confiscated, typeof confiscated);\n        return toEther(confiscated)\n    },\n\n    async voteAuditor(context, {auditorAddress, accept}) {\n        return handleMMResponse(writeCallWithOptions(\"voteAuditor\", {maxGas:200000}, auditorAddress, accept));\n    }\n\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nimport pathify from '@/plugins/pathify';\nimport {cleanUpConfig} from \"@/lib/config-file\";\nimport { getContractInstance } from \"@/lib/api\";\nimport { make } from \"vuex-pathify\";\n// import createPersistedState from \"vuex-persistedstate\";\n\nimport nodes from \"./nodes\"\nimport auth from \"./auth\"\nimport history from \"./history\";\nimport pledge from \"./pledge\"\nimport status from \"./status\"\nimport nodeGovernance from \"./nodeGovernance\"\n\nVue.use(Vuex);\n// let _logIndexCounter=0;\n\nconst state = {\n    initialized: false,\n    // used for a nicer UX: if this is true, ignore the values above, we probably don't know the actual values yet\n    tryingToConnect: false,\n    mmIsOpen: false,\n\n    displaySnackbar: false,\n    snackbarMessage: \"\",\n    snackbarColor: \"error\",\n    config: undefined,\n}\nconst logs = [];\n\nconst store = new Vuex.Store({\n    modules: {\n        nodes,\n        auth,\n        history,\n        pledge,\n        status,\n        nodeGovernance\n    },\n    plugins: [\n        pathify.plugin,\n        // createPersistedState({ key: \"wallets\", paths: [\"wallets\"] })\n    ],\n    state,\n    mutations: make.mutations(state),\n    getters: {\n        logs() {\n            return logs;\n        }\n    },\n    actions: {\n        errorFlash({ commit }, message) {\n            commit(\"snackbarMessage\", message);\n            commit(\"snackbarColor\", \"error\");\n            commit(\"displaySnackbar\", true);\n        },\n        async fetchConfig({ commit }) {\n            console.log(\"Inside fetchConfig\")\n            try {\n                let configUrl = \"./config.json\";\n                const url = new URL(window.location.href);\n                if (url.searchParams.has(\"config\")) {\n                    const uConf = new URL(url.searchParams.get(\"config\"));\n                    configUrl = uConf.href;\n                    url.searchParams.delete(\"config\")\n                    // window.history.replaceState(null, null, url);\n                }\n                const res = await fetch(configUrl)\n                if( res.status === 200 ) {\n                    const config = await res.json();\n                    commit(\"config\", await cleanUpConfig(config))\n                }\n            } catch (error) {\n                console.error(\"Could not process the config\", error.message)\n                commit(\"config\", undefined)\n            }\n        },\n\n        async startInitialization({commit, state, dispatch}) {\n            console.log(\"RootStore\", this)\n            try {\n                commit(\"initialized\", false);\n                \n                console.log(\"Fetching config\");\n                await dispatch(\"fetchConfig\");\n                if (state.config.activate_log) wrapConsoleLogging();\n                console.log(\"Fetching config - done\");\n                store.commit(\"auth/contract\", getContractInstance())\n                console.log(\"Detecting providers\");\n                await dispatch(\"auth/detectProvider\");\n                console.log(\"Detected provider model\", state.auth.providerModel);\n                if (state.auth.providerModel == \"metamask\") {\n                    const failMsg = await dispatch(\"auth/checkNetworkProofOfCarbonReduction\");\n                    if (failMsg) {\n                        console.log(\"Verification of PoCR netowrk failed:\", failMsg);\n                        commit(\"auth/providerModel\", \"switchMetamask\")\n                    }\n                }\n\n                // record a watcher for state.auth.wallet\n                // this watch function first param is a reactive function like if used in the vue template\n                this.watch((state)=>state.auth.wallet, ()=>{\n                    console.log(\"wallet has been changed:\", state.auth.wallet)\n                    dispatch(\"auth/setWalletAttributes\")\n                })\n\n                await dispatch(\"auth/attemptToConnectWallet\");\n                \n                commit(\"initialized\", true);\n            } catch (error) {\n                await dispatch(\"errorFlash\", \"Initialization failed - reload page: \"+error.message)\n            }\n        },\n    },\n\n});\nexport default store;\n\nexport function wrapConsoleLogging() {\n    const oldLog = console.log;\n    const oldError = console.error;\n    const oldWarn = console.warn;\n    \n    function addLineInBody(payload) {\n        if (!window.document) return;\n        let logs = window.document.getElementById(\"--logs--\")\n        if (!logs) {\n            // const body = window.document.getElementsByClassName(\"body\")\n            if (!document.body) return;\n            logs = document.createElement(\"div\")\n            logs.setAttribute(\"id\", \"--logs--\")\n            logs.setAttribute(\"style\", \"position: relative; z-index: 100;\")\n            document.body.insertBefore(logs, document.body.firstElementChild)\n        }\n        const pre = document.createElement(\"pre\");\n        pre.innerHTML=`<b>${payload.type}</b> : ${payload.args.map(a=>(typeof a==\"object\"?'Object':typeof a == \"undefined\"?'Undef':a)).join(', ')}`\n        logs.appendChild(pre);\n    }\n    \n    console.log = (...args) => {\n        oldLog(...args)\n        addLineInBody({type:\"info\", args})\n    }\n    console.warn = (...args) => {\n        oldWarn(...args)\n        addLineInBody({type:\"warn\", args})\n    }\n    console.error = (...args) => {\n        oldError(...args)\n        addLineInBody({type:\"error\", args})\n    }\n}\n","\nexport class AsyncLocalStorage {\n  constructor(keys) {\n    this.keyList = keys || [];\n  }\n  async getItem(key) {\n    if (!key) return;\n    if (!this.keyList.includes(key)) this.keyList.push(key);\n    const v = window.localStorage.getItem(key);\n    if (!v) return undefined;\n    return JSON.parse(v);\n  }\n  async setItem(key, value) {\n    if (!key) return;\n    if (!this.keyList.includes(key)) this.keyList.push(key);\n    if (!value) window.localStorage.removeItem(key)\n    else window.localStorage.setItem(key, JSON.stringify(value));\n    return;\n  }\n  async getAll() {\n    const result = {};\n    for (const key of this.keyList) {\n      result[key] = await this.getItem(key);\n    }\n    return result\n  }\n  async setAll(group) {\n    for (const key of Object.keys(group)) {\n      await this.setItem(key, group[key]);\n    }\n  }\n}\n","import Web3 from \"web3\";\nimport BigInt from \"./bigint-polyfill\";\nimport { Web3FunctionProvider } from \"@saturn-chain/web3-functions\";\nimport { Web3CustodyFunctionProvider } from \"@saturn-chain/web3-custody-functions\";\nimport { WalletCustodyApiImpl } from \"@saturn-chain/wallet-custody-rest-api\";\nimport allContracts from \"sc-carbon-footprint\";\nimport $store from \"@/store/index\";\nimport { AsyncLocalStorage } from \"./async-local-storage\";\n\nimport { EventEmitter } from \"events\";\n\nimport { governanceAddress } from \"./const\";\n\nconst LocalStorage = new AsyncLocalStorage();\n\n\nexport function getWeb3ProviderFromUrl(url) {\n    const web3 = new Web3(url)\n    return web3.currentProvider;\n}\n\nexport async function getWalletBalance(walletAddress) {\n    return await $store.get(\"auth/web3\").eth.getBalance(walletAddress);\n}\n\n\nexport function getContractInstanceByName(contractName) {\n    const contract = allContracts.get(contractName);\n    const instance = contract.at(governanceAddress);\n    console.log(\"Instance\", instance);\n    return instance;\n}\n\nexport function getContractInstance() {\n    return getContractInstanceByName(\"Governance\");\n}\n\nexport function getCustodyApi() {\n    const custodyUrl = $store.get(\"auth/providerDirect\").custodyApiUrl;\n    const custody = new WalletCustodyApiImpl(custodyUrl, \"eth\");\n    return custody;    \n}\n\nexport async function verifyCustodyAuthentication(wallet, password) {\n    let savedWallets = (await LocalStorage.getItem(\"custody.wallets\")) || [];\n    savedWallets.unshift(wallet);\n    savedWallets = [...new Set(savedWallets)];\n    LocalStorage.setItem(\"custody.wallets\", savedWallets)\n    const api = getCustodyApi();\n    const token = await handleMMResponse(api.authenticate(wallet, password));\n    return token\n}\n\nexport async function getCustodyLastWallets() {\n    return (await LocalStorage.getItem(\"custody.wallets\")) || [];\n}\n\nexport function intf(provider) {\n    let result = $store.get(\"auth/intf\");\n    if (result) return result;\n    // TODO (suggestion): This approach work, but why not storing in the \"store\" the intf result instead of the web3 provider ?\n    //      you would save writing the intf(provider)\n    if (!provider) provider = $store.get(\"auth/provider\");\n    if (!provider) throw new Error(\"Should not be calling the api functions without a provider connected\")\n    const model = $store.get(\"auth/providerModel\");\n    if (model == \"metamask\") {\n        const web3 = $store.get(\"auth/web3\");\n        result = new Web3FunctionProvider(web3, (list) => Promise.resolve(list[0]))\n    }\n    if (model == \"direct\") {\n        const wallet = $store.get(\"auth/wallet\");\n        if (wallet) {\n            const custody = getCustodyApi();\n            const authFunction = $store.state.auth.walletAuthenticationFunction;\n            result = new Web3CustodyFunctionProvider(provider, custody, wallet, authFunction );\n        } else {\n            // returns a fake identity using any address. Only read function will be available\n            result = new Web3FunctionProvider(provider, ()=>Promise.resolve(governanceAddress))\n        }\n    }\n    if (result) {\n        // remove the ens that breaks the vue inspector\n        result.web3.eth.ens = null;\n        $store.set(\"auth/intf\", result);\n        return result;\n    } \n\n    throw new Error(\"should not be calling the api functions without deciding the provider (metamask or direct)\")\n}\n\nconst globalTimerList={};\nlet globalTimerIndex=0;\nlet globalTimerId=0;\nlet globalTimerLastExecution=0;\nconst globalTimerFunction = ()=>{\n    //console.log(\"interval\");\n    globalTimerLastExecution = Date.now();\n    for (const id of Object.keys(globalTimerList)) {\n        const timeout = globalTimerList[id];\n        if (timeout.when<=globalTimerLastExecution) {\n            // console.log(\"Calling the timer callback\");\n            setImmediate(timeout.callback);\n        }\n    }\n}\nconst initGlobalTimer = ()=>{\n    if (globalTimerId>0) clearInterval(globalTimerId);\n    globalTimerLastExecution = Date.now();\n    globalTimerId = setInterval(globalTimerFunction, 50);\n}\n\n['load', 'message', 'online', 'offline', 'pageshow'].forEach(ev=>\nwindow.addEventListener(ev, () => { \n    // console.log(\"Should reset the timer\", Date.now(), globalTimerLastExecution, Date.now() - globalTimerLastExecution > 30*1000);\n    if (Date.now() - globalTimerLastExecution > 30*1000) {\n        console.log(\"Setting the global timer\");\n        initGlobalTimer()\n    }\n}));\n\n// Function that hides the standard setTimeout function to try using a permanent unique interval loop\nfunction setTimeout(cb, delayMs) {\n    let startAt = Date.now();\n    const id=globalTimerIndex++;\n    globalTimerList[id]={when: startAt + delayMs, callback(){ \n        delete globalTimerList[id];\n        try {cb()} catch(e) {\n            console.log(\"timer callback failed - so what?\", e);\n        }\n    }}\n}\nfunction clearTimeout(id) {\n    delete globalTimerList[id];\n}\n\n\n\nlet __id= 1000;\nexport function subscribeNewBlocks(web3) {\n    if (!web3) web3 = $store.get(\"auth/web3\");\n    if (!web3) throw new Error(\"Should not be calling the api functions without a provider connected\")\n    const provider = $store.get(\"auth/provider\");\n    const model = $store.get(\"auth/providerModel\");\n    const providerSendAsync = model == \"metamask\" ? \n    // With metamask the send async exists and the skip cache should be activated to bypass the cached block request\n    (r, cb)=> {\n        provider.sendAsync({...r, skipCache:true}, cb)\n    } \n    // else use the normal provider send method\n    : provider.send.bind(provider);\n    //provider.sendAsync? provider.sendAsync.bind(provider) : provider.send.bind(provider);\n\n\n    async function getBlockNumber() {\n        const r = await new Promise( (res, rej)=>{\n            providerSendAsync({method:\"eth_blockNumber\", id: __id++, params:[]}, (e,r)=>{\n                // console.log(\"send Async response\", e, r)\n                if (e) rej(e);\n                else if (r.result) res(r.result);\n                else if (typeof r == \"string\") res(r); // the brave wallet on mobile respond with the value directly rather than the {result:\"\"} structure\n                else rej(new Error('No error or response!'))\n            })\n        })\n        // console.log(\"Request eth_blockNumber\", Number(r));\n        return Number(r);\n    }\n\n    const subs = new EventEmitter({captureRejections: true});\n    subs.unsubscribe = ()=>{\n        if (subs.timer) {\n            clearTimeout(subs.timer);\n            subs.timer = null;\n        }\n    }\n    const delayMs = 1000;\n    \n    async function runLoop() {\n        try {\n            // console.log(\"Starting the block receiving loop\")\n            if (!subs.props) {\n                // first execution: initialized the props and loop\n                subs.props = {lastBlock: await getBlockNumber(), lastCheck: Date.now()};\n            } else {\n                let lastBlock = await getBlockNumber();\n    \n                const lastCheck = Date.now();\n                //console.log(\"runLoop:\", subs.props, {lastBlock, lastCheck});\n                if (lastBlock > subs.props.lastBlock) {\n                    for (let b=subs.props.lastBlock+1; b<=lastBlock; b++) {\n                        try {\n                            const block = await web3.eth.getBlock(b, false)\n                            subs.emit(\"data\", block);\n                        } catch (error) {\n                            console.warn(\"Fail getting block \"+b, error.message)\n                        }\n                    }\n                }\n                subs.props = {lastBlock, lastCheck};\n            }\n        } catch (error) {\n            console.warn(\"Something went wront when processing the loop. Ignoring.\", error.message);\n        }    \n\n        // restart the loop after the delay\n        subs.timer = setTimeout( runLoop , delayMs);\n    }\n    // initialize the loop in 10 ms to initialize the props\n    subs.timer = setTimeout( runLoop , 10);\n    return subs\n}\n\n\n\nexport async function readOnlyCall(methodName, ...args) {\n    return readOnlyCallWithOptions(methodName, { maxGas: 10000000 }, ...args)\n}\n\nexport async function readOnlyCallWithOptions(methodName, options, ...args) {\n    const provider = $store.get(\"auth/provider\");\n    const contract = $store.get(\"auth/contract\");\n    if (!(methodName in contract)) return Promise.reject(new Error(`Method ${methodName} does not exists in contract`));\n    return contract[methodName](\n        wrapSend(intf(provider).call(options)), \n        ...args\n    );\n}\n\nexport function writeCall(methodName, ...args) {// return writeCallWithOptions(methodName, {maxGas: 1000000}, ...args);\n    return writeCallWithOptions(methodName, {}, ...args);\n}\n\nfunction convertMMErrorMessage(message) {\n    if(typeof message !== \"string\") message = `\\n {\"message\":\"invalid error message\"}`;\n    let split = message.split(\"\\n\");\n    if(split.length==1) split =  `\\n ${JSON.stringify({message})}`.split('\\n');\n    try {\n        const obj = JSON.parse(split.splice(1).join(\" \"))\n        return obj;\n    } catch (error) {\n        return {\n            message: \"invalid JSON message\"\n        }\n    }\n}\n\nfunction wrapSend(send) {\n    return (target, data) => {\n        //console.log(\"Wrapped sender\", target, data);\n        return send(target, data)\n    }\n}\n\nexport function writeCallWithOptions(methodName, options, ...args) {\n    const wallet = $store.get(\"auth/wallet\");\n    if (!wallet) {\n        return Promise.reject(new Error(\"You are not authenticated with a wallet, you cannot update the blockchain\"));\n    }\n    const provider = $store.get(\"auth/provider\");\n    const contract = $store.get(\"auth/contract\");\n    if (!(methodName in contract)) return Promise.reject(new Error(`Method ${methodName} does not exists in contract`));\n    if (options.amount) options.amount=new BigInt(options.amount.toString(10))\n\n    return new Promise( (resolve, reject)=>{\n        // First test the execution with the node using the call approach\n        readOnlyCallWithOptions(methodName, options, ...args)\n        .then(async v=>{\n            console.log(\"Tested call\", options, v)\n            resolve(\n                // as it succeeded, try executing it as a transaction\n                await contract[methodName](\n                    wrapSend(intf(provider).send(options)),\n                    ...args\n                )\n            )\n        })\n        .catch(e => {\n            const err = convertMMErrorMessage(e.message)\n            reject(err)\n        })\n    });\n}\n\nasync function collectDataFunction(target, data) {\n    const cmd = `eth.sendTransaction({from: eth.coinbase, to:\"${target}\", data:\"${data}\"})`\n    return {isTx: true, result: cmd}\n}\nexport async function getCallData(methodName, ...args) {\n    const contract = $store.get(\"auth/contract\");\n    const cmd = await contract[methodName]( collectDataFunction, ...args)\n    console.log(cmd)\n    return cmd;\n}\n\nexport async function handleMMResponse(promise, errorCallback) {\n    let response = null;\n    try {\n        $store.set(\"mmIsOpen\", true);\n        response = await promise;\n    }\n    catch (err) {\n        let message = err.message;\n        // In some cases of lack of gas in the transaction, the err contains a tx info\n        if (err.blockHash && err.gasUsed && err.status==false) {\n            message = `Not enough gas to complete the transaction: ${err.gasUsed} provided`\n        }\n        console.warn(\"Submitted transaction failed with error:\", message);\n        $store.dispatch(\"errorFlash\", message);\n        errorCallback && errorCallback(err);\n    }\n    finally {\n        $store.set(\"mmIsOpen\", false);\n    }\n    return response;\n}\n\n// Not used currently but lets you run any arbitrary code and the mmIsOpen flag is handled automatically\n// aswell as the error flash production if you decide to trigger an exception.\nexport async function handleMM(func) {\n    try {\n        $store.set(\"mmIsOpen\", true);\n        await func();\n    }\n    catch (err) {\n        console.log(err);\n        $store.dispatch(\"errorFlash\", err.message);\n    }\n    finally {\n        $store.set(\"mmIsOpen\", false);\n    }\n}","<template>\n  <div>\n    <div v-if=\"hasProviderMetamask\">\n      <v-btn color=\"teal\" class=\" my-3\" dark @click=\"prepareOpenMetaMaskConnectionDialog\"\n        >Connect Metamask Wallet</v-btn>\n      <v-btn class=\"mx-3 my-3\" color=\"teal\" dark @click=\"goToInstallMetamask\"\n        >Switch / Install network</v-btn>\n\n    </div>\n    <br><br>\n    <div v-if=\"hasProviderDirect\">\n      <v-btn color=\"teal\" dark @click=\"prepareOpenWeb3DirectConnectionDialog\"\n        >Connect with below configuration</v-btn\n      > <br><br>\n      <v-select\n          v-model=\"selectedNetwork\"\n          :hint=\"`node: ${selectedNetwork.nodeUrl}; custody: ${selectedNetwork.walletCustodyAPIBaseUrl}`\"\n          :items=\"networks\"\n          item-text=\"name\"\n          item-value=\"nodeUrl\"\n          persistent-hint\n          return-object\n          single-line\n        ></v-select>\n      <div v-if=\"hasCustodyApi\">\n        <br>\n        <v-combobox\n              label=\"Enter the wallet address\"\n              placeholder=\"capture your wallet address\"\n              outlined counter clearable\n              :search-input=\"wallet\"\n              @update:search-input=\"updateWallet\"\n              :items=\"wallets\"\n            ></v-combobox>\n        <v-text-field\n              label=\"Enter the wallet password\"\n              placeholder=\"capture your wallet password\"\n              outlined \n              :type=\"show?'text' : 'password'\"\n              @click:append=\"show = !show\"\n              v-model=\"password\"\n            ></v-text-field>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport { call } from \"vuex-pathify\";\nimport { getCustodyLastWallets } from \"../lib/api\";\nimport { getDefaultNetwork, getNetworkList } from \"../lib/config-file\";\n\nexport default {\n  data() {\n    return {\n      wallet: undefined,\n      wallets: [],\n      networks: [],\n      selectedNetwork: {name: \"undefined\"},\n      password: undefined,\n      show: false,\n    }\n  },\n  async mounted() {\n    const wallets = await getCustodyLastWallets();\n    if (wallets.length>0) this.wallet = wallets[0];\n    this.wallets = wallets;\n\n    const config = this.$store.get(\"config\");\n    this.networks = getNetworkList(config);\n    this.selectedNetwork = getDefaultNetwork(config);\n  },\n  computed: {\n    hasProviderMetamask() {\n      if (this.$store.state.auth.providerMetamask) return true;\n      else return false;\n    },\n    hasProviderDirect() {\n      if (this.$store.state.auth.providerDirect) return true;\n      else return false;\n    },\n    hasCustodyApi() {\n      if (this.$store.state.auth.providerDirect && this.$store.state.auth.providerDirect.custodyModel == \"api\" ) return true;\n      else return false;\n    },\n  },\n  methods: {\n    ...call([\"errorFlash\"]),\n    ...call(\"auth\", [\"openMetaMaskConnectionDialog\", \"openWeb3DirectConnectionDialog\", \"setConnection\", \"checkNetworkProofOfCarbonReduction\"]),\n    updateWallet(v) {\n      this.wallet = v;\n    },\n    async prepareOpenMetaMaskConnectionDialog() {\n      const metamask = this.$store.state.auth.providerMetamask;\n      if (!metamask) return;\n\n      await this.setConnection(metamask);\n\n      if (!await this.checkNetworkProofOfCarbonReduction()) {\n        try {\n          await this.openMetaMaskConnectionDialog()\n        } catch (error) {\n          this.errorFlash(\"Could not connect an account from the wallet: \" + error.message);\n          return;\n        }\n        this.goToDashboard()\n      } else {\n        this.goToInstallMetamask()\n      }\n\n    },\n    async prepareOpenWeb3DirectConnectionDialog() {\n      await this.openWeb3DirectConnectionDialog({wallet: this.wallet, password: this.password, nodeUrl: this.selectedNetwork.nodeUrl});\n      this.wallets = await getCustodyLastWallets();\n    },\n\n    goToInstallMetamask() {\n      this.$router.push({ name: 'installMetaMask' })\n    },\n\n    goToDashboard() {\n      this.$router.push({ name: 'dashboard' })\n    }\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auth.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auth.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Auth.page.vue?vue&type=template&id=e9e81918&\"\nimport script from \"./Auth.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Auth.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h2',[_vm._v(\"Proof of Carbon Reduction\")]),_c('div',[_vm._v(\"The consensus that incentivize nodes to improve their carbon footprint to earn more crypto (CRC / )\")]),_c('v-divider',{staticClass:\"my-4\"}),_vm._m(0),_c('div',[_vm._v(\"This application gives you a view on the network and the nodes in the \"),_c('a',{on:{\"click\":function($event){return _vm.goTo('dashboard')}}},[_vm._v(\"Dashboard\")])]),_c('div',[_c('a',{on:{\"click\":function($event){return _vm.goTo('authentication')}}},[_vm._v(\"Connect\")]),_vm._v(\" with a wallet to operate as a node or as an auditor of carbon footprint \")]),_vm._m(1),_c('v-divider',{staticClass:\"my-4\"}),_vm._m(2)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"To read the detail of this consensus go to the \"),_c('a',{attrs:{\"href\":\"https://github.com/ethereum-pocr\",\"target\":\"_blank\"}},[_vm._v(\"whitepaper\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"A basic block and transaction explorer is available \"),_c('a',{attrs:{\"href\":\"https://ethereum-pocr.github.io/explorer/\",\"target\":\"_blank\"}},[_vm._v(\"here\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"This application is open sourced and its code is available in \"),_c('a',{attrs:{\"href\":\"https://github.com/ethereum-pocr/ethereum-pocr.github.io/tree/main/vue-auditor\",\"target\":\"_blank\"}},[_vm._v(\"github\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <h2>Proof of Carbon Reduction</h2>\n    <div>The consensus that incentivize nodes to improve their carbon footprint to earn more crypto (CRC / )</div>\n    <v-divider class=\"my-4\"></v-divider>\n    <div>To read the detail of this consensus go to the <a href=\"https://github.com/ethereum-pocr\" target=\"_blank\">whitepaper</a></div>\n    <div>This application gives you a view on the network and the nodes in the  <a @click=\"goTo('dashboard')\">Dashboard</a></div>\n    <div><a @click=\"goTo('authentication')\">Connect</a> with a wallet to operate as a node or as an auditor of carbon footprint  </div>\n    <div>A basic block and transaction explorer is available <a href=\"https://ethereum-pocr.github.io/explorer/\" target=\"_blank\">here</a></div>\n    <v-divider class=\"my-4\"></v-divider>\n    <div>This application is open sourced and its code is available in <a href=\"https://github.com/ethereum-pocr/ethereum-pocr.github.io/tree/main/vue-auditor\" target=\"_blank\">github</a></div>\n  </div>\n</template>\n\n<script>\nimport { call } from \"vuex-pathify\";\nexport default {\n\n\n  mounted() {\n    this.startInitialization()\n  },\n  methods: {\n    ...call([\"startInitialization\"]),\n    goTo(routeName) {\n      if (this.$route.name === routeName) return;\n      this.$router.push({ name: routeName });\n    },\n  }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Welcome.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Welcome.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Welcome.page.vue?vue&type=template&id=4ec0183c&\"\nimport script from \"./Welcome.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Welcome.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{attrs:{\"col\":\"\",\"wrap\":\"\"}},[_c('v-card',{staticClass:\"my-6 ma-auto\",attrs:{\"height\":\"200\",\"width\":\"300\"}},[_c('v-card-subtitle',[_vm._v(\"Block \"),_c('explorer',{attrs:{\"type\":\"block\",\"id\":_vm.lastBlock?_vm.lastBlock.block.number:0}})],1),_c('v-card-title',{staticClass:\"align-center\"},[_c('span',{staticClass:\"text-h4 ma-auto\",style:(_vm.lastBlockNoTurnSealing?'color:red':'')},[_vm._v(_vm._s(_vm.lastBlock && _vm.lastBlock.block.number))])]),_c('v-card-subtitle',[_vm._v(\"Total of \"+_vm._s(_vm.totalCrypto.toFixed(2))+\"  created\")]),_c('v-card-subtitle',[_vm._v(_vm._s((_vm.timeSinceLastBlock/1000).toFixed(2))+\" sec. since last update\")])],1),_c('v-card',{staticClass:\"my-6 ma-auto\",attrs:{\"height\":\"200\",\"width\":\"200\"}},[_c('v-card-subtitle',[_vm._v(\"Audited nodes\")]),_c('v-card-title',{staticClass:\"align-center\"},[_c('span',{staticClass:\"text-h2 ma-auto\"},[_vm._v(_vm._s(_vm.nbOfNodes))])])],1),_c('v-card',{staticClass:\"my-6 ma-auto\",attrs:{\"height\":\"200\",\"width\":\"300\"}},[_c('v-card-subtitle',[_vm._v(\"Total footprint (g.CO E)\")]),_c('v-card-title',{staticClass:\"align-center\"},[_c('span',{staticClass:\"text-h4 ma-auto\"},[_vm._v(_vm._s(_vm.totalFootprint))])]),_c('v-card-subtitle',{staticClass:\"mt-3\"},[_vm._v(\"Average: \"+_vm._s((_vm.totalFootprint / _vm.nbOfNodes).toFixed(2))+\" g.CO E per node\")])],1),_c('v-row',[(_vm.lastBlock)?_c('v-col',{staticClass:\"py-8\",attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Carbon Footprint for each of the nodes\")]),_c('v-card-subtitle',[_vm._v(\" Last block sealer: \"+_vm._s(_vm.lastBlock.sealer.address)+\" / \"+_vm._s(_vm.lastBlock.sealer.vanity.custom)+\". Footprint: \"+_vm._s(_vm.lastBlock.sealer.footprint)+\" g.CO \")]),_c('v-card-text',_vm._l((_vm.sealersSorted),function(sealer){return _c('v-progress-linear',{key:sealer.address,staticClass:\"my-1\",attrs:{\"height\":\"2em\",\"value\":sealer.footprint / _vm.maxFootprint * 100,\"color\":_vm.gradientGreenToRed(sealer.footprint / _vm.maxFootprint)},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){return [_vm._v(\" \"+_vm._s(sealer.vanity.custom)+\" - \"),_c('strong',[_vm._v(_vm._s(sealer.footprint))]),_vm._v(\" g.CO \")]}}],null,true)})}),1)],1)],1):_vm._e(),(_vm.lastBlock)?_c('v-col',{staticClass:\"pb-8\",attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Sealers\")]),_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.sealers,\"headers\":_vm.sealersHeaders,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.name\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_c('v-icon',[_vm._v(_vm._s(item.isActive?\"mdi-lock-open-check-outline\":\"mdi-lock-remove\"))]),_vm._v(\" \"+_vm._s(item.vanity.custom))],1),_c('div',[_vm._v(_vm._s(item.address))])]}},{key:\"item.ratio\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s((100 * item.sealedBlocks / _vm.totalSealedBlocks).toFixed(2))+\" %\")]),_c('div',[_vm._v(_vm._s(item.sealedBlocks)+\" / \"+_vm._s(_vm.totalSealedBlocks))])]}},{key:\"item.balance\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.balance.toFixed(4)))])]}},{key:\"item.lastReward\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.lastReward.toFixed(4)))])]}},{key:\"item.lastSealer\",fn:function(ref){\nvar item = ref.item;\nreturn [(item.address==_vm.lastBlock.sealer.address)?_c('v-icon',[_vm._v(\"mdi-seal\")]):_vm._e()]}}],null,false,2192072440)})],1)],1)],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\nexport function colorGradient(fadeFraction, rgbColor1, rgbColor2, rgbColor3) {\n  var color1 = rgbColor1;\n  var color2 = rgbColor2;\n  var fade = fadeFraction;\n\n  // Do we have 3 colors for the gradient? Need to adjust the params.\n  if (rgbColor3) {\n    fade = fade * 2;\n\n    // Find which interval to use and adjust the fade percentage\n    if (fade >= 1) {\n      fade -= 1;\n      color1 = rgbColor2;\n      color2 = rgbColor3;\n    }\n  }\n\n  var diffRed = color2.red - color1.red;\n  var diffGreen = color2.green - color1.green;\n  var diffBlue = color2.blue - color1.blue;\n\n  var gradient = {\n    red: parseInt(Math.floor(color1.red + (diffRed * fade)), 10),\n    green: parseInt(Math.floor(color1.green + (diffGreen * fade)), 10),\n    blue: parseInt(Math.floor(color1.blue + (diffBlue * fade)), 10),\n  };\n\n  return 'rgb(' + gradient.red + ',' + gradient.green + ',' + gradient.blue + ')';\n}\n\nconst highColor = {\n  red: 217,\n  green: 83,\n  blue: 79\n};\nconst mediumColor = {\n  red: 240,\n  green: 173,\n  blue: 78\n};\nconst lowColor = {\n  red: 92,\n  green: 184,\n  blue: 91\n};\n\nexport function gradientGreenToRed(fadeFraction) {\n  return colorGradient(fadeFraction, lowColor, mediumColor, highColor);\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-icon',{attrs:{\"small\":\"\",\"color\":\"blue\"},on:{\"click\":function($event){return _vm.open(_vm.url)}}},[_vm._v(\"mdi-open-in-new\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-icon small color=\"blue\" @click=\"open(url)\">mdi-open-in-new</v-icon>\n</template>\n\n<script>\nimport $store from \"@/store\";\n\nexport default {\n  props: {\n    id: [String, Number],\n    type: { \n      type: String,\n      validator(value) {\n        // The value must match one of these strings\n        return ['block', 'tx', 'token', 'account'].includes(value)\n      }\n    },\n  },\n\n  computed: {\n    url() {\n      let explorerUrl = $store.get(\"auth/explorerUrl\");\n      if (!explorerUrl) return undefined;\n      while (explorerUrl.endsWith('/')) explorerUrl = explorerUrl.slice(0, explorerUrl.length-1)\n      const u = new URL(`${this.type}/${this.id}`, `${explorerUrl}/`)\n      return u.href;\n    }\n  },\n\n  methods: {\n    open(url) {\n      window.open(url, 'POCR-EXPLORER')\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExplorerRedirect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExplorerRedirect.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ExplorerRedirect.vue?vue&type=template&id=6eff6f16&\"\nimport script from \"./ExplorerRedirect.vue?vue&type=script&lang=js&\"\nexport * from \"./ExplorerRedirect.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <v-layout col wrap>\n    <v-card height=\"200\" width=\"300\" class=\"my-6 ma-auto\">\n      <v-card-subtitle>Block <explorer type=\"block\" :id=\"lastBlock?lastBlock.block.number:0\"></explorer></v-card-subtitle>\n      <v-card-title class=\"align-center\">\n        <span class=\"text-h4 ma-auto\" :style=\"lastBlockNoTurnSealing?'color:red':''\">{{\n          lastBlock && lastBlock.block.number\n        }}</span>\n      </v-card-title>\n      <v-card-subtitle>Total of {{ totalCrypto.toFixed(2) }}  created</v-card-subtitle>\n      <v-card-subtitle>{{ (timeSinceLastBlock/1000).toFixed(2) }} sec. since last update</v-card-subtitle>\n    </v-card>\n\n    <v-card height=\"200\" width=\"200\" class=\"my-6 ma-auto\">\n      <v-card-subtitle>Audited nodes</v-card-subtitle>\n      <v-card-title class=\"align-center\">\n        <span class=\"text-h2 ma-auto\">{{ nbOfNodes }}</span>\n      </v-card-title>\n    </v-card>\n    <v-card height=\"200\" width=\"300\" class=\"my-6 ma-auto\">\n      <v-card-subtitle>Total footprint (g.CO E)</v-card-subtitle>\n      <v-card-title class=\"align-center\">\n        <span class=\"text-h4 ma-auto\">{{ totalFootprint }}</span>\n      </v-card-title>\n      <v-card-subtitle class=\"mt-3\"\n        >Average:\n        {{ (totalFootprint / nbOfNodes).toFixed(2) }} g.CO E per node</v-card-subtitle\n      >\n    </v-card>\n    <v-row>\n      <v-col cols=\"12\" class=\"py-8\" v-if=\"lastBlock\">\n        <v-card>\n        <v-card-title>Carbon Footprint for each of the nodes</v-card-title>\n        <v-card-subtitle>\n          Last block sealer: {{ lastBlock.sealer.address }} /\n          {{ lastBlock.sealer.vanity.custom }}. Footprint:\n          {{ lastBlock.sealer.footprint }} g.CO\n        </v-card-subtitle>\n        <v-card-text>\n          <v-progress-linear v-for=\"sealer of sealersSorted\" :key=\"sealer.address\" \n            height=\"2em\" class=\"my-1\"\n            :value=\"sealer.footprint / maxFootprint * 100\"\n            :color=\"gradientGreenToRed(sealer.footprint / maxFootprint)\"\n          >\n            <template v-slot:default=\"{  }\">\n              {{sealer.vanity.custom}} - <strong>{{ sealer.footprint }}</strong>  g.CO\n            </template>\n          </v-progress-linear>\n        </v-card-text>\n        <!-- <v-sparkline\n          auto-draw\n          type=\"bar\"\n          \n          auto-line-width\n          :value=\"sealersFootprint\"\n          label-size=\"3\"\n          :gradient=\"['#f72047', '#ffd200', '#1feaea']\"\n          padding=\"8\"\n        >\n          <template v-slot:label=\"item\">\n            {{ sealersLabels[item.index] }} -\n            {{ item.value }}\n          </template>\n        </v-sparkline> -->\n        </v-card>\n      </v-col>\n\n      <v-col cols=\"12\" class=\"pb-8\" v-if=\"lastBlock\">\n        <v-card>\n          <v-card-title>Sealers</v-card-title>\n          <v-card-text>\n            <v-data-table\n              :items=\"sealers\"\n              :headers=\"sealersHeaders\"\n              :items-per-page=\"-1\"\n              hide-default-footer\n            >\n              <template v-slot:item.name=\"{ item }\">\n                <div><v-icon>{{item.isActive?\"mdi-lock-open-check-outline\":\"mdi-lock-remove\"}}</v-icon> {{ item.vanity.custom }}</div>\n                <div>{{ item.address }}</div>\n              </template>\n              <template v-slot:item.ratio=\"{ item }\">\n                <div>{{ (100 * item.sealedBlocks / totalSealedBlocks).toFixed(2) }} %</div>\n                <div>{{ item.sealedBlocks }} / {{ totalSealedBlocks }}</div>\n              </template>\n              <template v-slot:item.balance=\"{ item }\">\n                <div>{{ item.balance.toFixed(4) }}</div>\n              </template>\n              <template v-slot:item.lastReward=\"{ item }\">\n                <div>{{ item.lastReward.toFixed(4) }}</div>\n              </template>\n              <template v-slot:item.lastSealer=\"{ item }\">\n                <v-icon v-if=\"item.address==lastBlock.sealer.address\">mdi-seal</v-icon>\n              </template>\n            </v-data-table>\n          </v-card-text>\n        </v-card>\n      </v-col>\n<!-- \n      <v-col cols=\"12\" class=\"pa-8\" v-if=\"lastBlock\">\n        <v-card-title>Block reward per node</v-card-title>\n        <v-card-subtitle>\n          Last block sealer: {{ lastBlock.sealer.address }} /\n          {{ lastBlock.sealer.vanity.custom }}. Footprint:\n          {{ lastBlock.sealer.footprint }} g.CO\n        </v-card-subtitle>\n        <v-sparkline\n          auto-draw\n          type=\"bar\"\n          :auto-draw-duration=\"500\"\n          auto-line-width\n          :value=\"sealersReward\"\n          label-size=\"3\"\n          :gradient=\"['#42b3f4']\"\n          :padding=\"28\"\n        >\n          <template v-slot:label=\"item\">\n            {{\n              lastBlock.sealer.address == sealersAddress[item.index] ? \"[\" : \"\"\n            }}\n            {{ sealersAddress[item.index] }}\n            {{\n              lastBlock.sealer.address == sealersAddress[item.index] ? \"]\" : \"\"\n            }}\n            -\n            {{ Number.parseFloat(item.value).toFixed(2) }}\n          </template>\n        </v-sparkline>\n      </v-col> -->\n\n      <!-- <v-col cols=\"12\" class=\"pa-8\">\n        <v-card-title>CRC Creation by block </v-card-title>\n        <v-card-subtitle\n          >Last reward:\n          {{ rewardsByBlock[rewardsByBlock.length - 1].toFixed(4) }} CRC;\n          Average: {{ averageReward.toFixed(4) }} CRC; Last\n          {{ rewardsByBlock.length - 1 }} blocks</v-card-subtitle\n        >\n        <v-sparkline\n          auto-draw\n          type=\"trend\"\n          :auto-draw-duration=\"0\"\n          :line-width=\"0.3\"\n          :value=\"rewardsByBlock\"\n          label-size=\"3\"\n          :gradient=\"['#42b3f4']\"\n        ></v-sparkline>\n      </v-col> -->\n    </v-row>\n  </v-layout>\n</template>\n\n<script>\nimport { get, call } from \"vuex-pathify\";\nimport { handleMM } from '../lib/api';\nimport { gradientGreenToRed } from '../lib/colors'\nimport Explorer from \"../components/ExplorerRedirect.vue\";\n\nexport default {\n  components: {Explorer},\n  data: () => {\n    return {\n      nbBlocksToKeep: 100,\n      sealerMap: new Map(),\n      blocks: [],\n      sealersReward: [],\n      sealersHeaders: [\n      { text: \"Name\", value: \"name\", align:\"left\" },\n      { text: \"Footprint (g.CO)\", value: \"footprint\" , align:\"right\"},\n      { text: \"Reward ()\", value: \"lastReward\" , align:\"right\"},\n      { text: \"Balance ()\", value: \"balance\" , align:\"right\"},\n      { text: \"Sealing ratio\", value: \"ratio\", align:\"center\"},\n      { text: \"Last\", value: \"lastSealer\" },\n    ],\n    };\n  },\n  async mounted() {\n    await handleMM(this.fetchChainInformations)\n    await this.fetchAllValues();\n    await this.subscribeToChainUpdates();\n    await this.initBackupLoop();\n\n  },\n  computed: {\n    ...get(\"nodes\", [\n      \"sealers\",\n      \"nbOfNodes\",\n      \"lastBlock\",\n      \"totalFootprint\",\n      \"totalCrypto\",\n      \"rewardsByBlock\",\n      \"averageReward\",\n      \"averageDelaySec\",\n      \"timeSinceLastBlock\"\n    ]),\n    sealersSorted() {\n      return [...this.sealers].sort( (a,b)=>a.footprint-b.footprint )\n    },\n    maxFootprint() {\n      return this.sealers.reduce( (max, s)=>s.footprint>max?s.footprint:max, 1 )\n    },\n    sealersFootprint() {\n      return this.sealers.map((s) => s.footprint);\n    },\n    sealersAddress() {\n      return this.sealers.map((s) => s.address);\n    },\n    sealersLabels() {\n      return this.sealers.map((s) => s.vanity.custom);\n    },\n    totalSealedBlocks() {\n      return this.sealers.reduce( (total, s)=>total+s.sealedBlocks, 0);\n    },\n    lastBlockNoTurnSealing() {\n      return this.lastBlock && this.lastBlock.block.difficulty==1; // 1 means out of turn ; 2 means in turn\n    },\n  },\n  methods: {\n    gradientGreenToRed,\n    ...call(\"nodes\", [\n      \"fetchAllValues\",\n      \"fetchChainInformations\",\n      \"subscribeToChainUpdates\",\n      \"initBackupLoop\"\n    ]),\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dashboard.page.vue?vue&type=template&id=11a39685&\"\nimport script from \"./Dashboard.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Dashboard.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-col',[_c('v-card',[_c('v-card-title',[_vm._v(\"Number of Auditors\")]),_c('v-card-text',[_vm._v(_vm._s(_vm.nbAuditors))])],1)],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Auditors\")]),_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.auditors,\"headers\":_vm.tableHeadersAuditors,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.status\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.isApproved ? \"Oui\" : \"Non\"))])]}},{key:\"item.votes\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.nbVotes)+\" / \"+_vm._s(item.minVotes)+\" avant \"+_vm._s(item.isApproved ? \"Rvocation\" : \"Approbation\"))])]}},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-btn',{attrs:{\"color\":\"primary\",\"small\":\"\"},on:{\"click\":function($event){return _vm.nodeVote(item)}}},[_vm._v(\" \"+_vm._s(_vm.computeLabel(item))+\" \")])]}}])})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row>\n\n    <v-col>\n      <v-card>\n        <v-card-title>Number of Auditors</v-card-title>\n        <v-card-text>{{ nbAuditors }}</v-card-text>\n      </v-card>\n    </v-col>\n\n    <v-col cols=\"12\">\n      <v-card>\n        <v-card-title>Auditors</v-card-title>\n        <v-card-text>\n          <v-data-table\n              :items=\"auditors\"\n              :headers=\"tableHeadersAuditors\"\n              :items-per-page=\"-1\"\n              hide-default-footer\n          >\n            <template v-slot:item.status=\"{ item }\">\n              <div>{{ item.isApproved ? \"Oui\" : \"Non\" }}</div>\n            </template>\n            <template v-slot:item.votes=\"{ item }\">\n              <div>{{ item.nbVotes }} / {{ item.minVotes }} avant {{ item.isApproved ? \"Rvocation\" : \"Approbation\" }}</div>\n            </template>\n            <template v-slot:item.actions=\"{ item }\">\n              <v-btn\n                  color=\"primary\"\n                  small\n                  @click=\"nodeVote(item)\"\n              >\n                {{ computeLabel(item) }}\n              </v-btn>\n            </template>\n          </v-data-table>\n        </v-card-text>\n      </v-card>\n    </v-col>\n\n  </v-row>\n</template>\n\n<script>\nimport { get, call } from \"vuex-pathify\";\n\nexport default {\n  data: () => ({\n    tableHeadersAuditors: [\n      { text: \"Auditor\", value: \"address\" },\n      { text: \"Approuv\", value: \"status\" },\n      { text: \"Votes courants\", value: \"votes\" },\n      { text: \"Actions\", value: \"actions\", sortable: false },\n    ],\n    switchState: false,\n\n  }),\n  computed: {\n    ...get(\"nodeGovernance\", [\"nbAuditors\", \"auditors\"]),\n  },\n\n  async mounted() {\n    await this.fetchAllAuditorsValues();\n  },\n  methods: {\n    ...call(\"nodeGovernance\", [\"fetchAllAuditorsValues\", \"voteAuditor\"]),\n\n    computeLabel(item) {\n      // auditor is approved, vote for unapproved\n      if (item.isApproved) {\n        if (item.currentVote) {\n          return \"Voter pour rvoquer\";\n        }\n        return \"Retirer mon vote de rvocation\";\n      }\n      // auditor is not approved, vote for approved\n      if (item.currentVote) {\n        return \"Retirer mon vote d'approbation\";\n      }\n      return \"Voter pour approuver\";\n    },\n\n    async nodeVote(item) {\n      console.log(`address : ${item.address} / vote value : ${!item.currentVote}`);\n      try {\n        await this.voteAuditor({\n          auditorAddress: item.address,\n          accept: !item.currentVote\n        });\n        await this.fetchAllAuditorsValues();\n      } catch (error) {\n        console.log(error);\n        await this.fetchAllAuditorsValues();\n        throw error;\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auditors.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auditors.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Auditors.page.vue?vue&type=template&id=66ef6459&\"\nimport script from \"./Auditors.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Auditors.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-col',[_c('v-card',[_c('v-card-title',[_vm._v(\"Number of Nodes\")]),_c('v-card-text',[_vm._v(_vm._s(_vm.nbOfNodes))])],1)],1),_c('v-col',[_c('v-card',[_c('v-card-title',[_vm._v(\"Total Footprint\")]),_c('v-card-text',[_vm._v(_vm._s(_vm.totalFootprint)+\" \")])],1)],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Nodes\")]),_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.sealers,\"headers\":_vm.tableHeaders,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.vanity\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(\"Address: \"+_vm._s(item.address))]),_c('div',[_vm._v(\"Name: \"+_vm._s(item.vanity.custom))])]}},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-btn',{attrs:{\"color\":\"primary\",\"small\":\"\"},on:{\"click\":function($event){return _vm.openUpdateFootprintDialog(item)}}},[_vm._v(\" Update footprint \")])]}}])}),_c('v-dialog',{attrs:{\"width\":\"500\"},model:{value:(_vm.footprintDialog),callback:function ($$v) {_vm.footprintDialog=$$v},expression:\"footprintDialog\"}},[(_vm.selectedSealer)?_c('v-card',[_c('v-card-title',[_vm._v(\" Update Footprint for \"+_vm._s(_vm.selectedSealer.address)+\" \")]),_c('v-card-text',[_c('v-row',[_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"6\"}},[_c('v-text-field',{attrs:{\"type\":\"number\",\"outlined\":\"\",\"dense\":\"\"},model:{value:(_vm.newFootprintValue),callback:function ($$v) {_vm.newFootprintValue=$$v},expression:\"newFootprintValue\"}})],1),_c('v-col',{staticClass:\"pb-0\"},[_c('v-btn',{on:{\"click\":function($event){_vm.footprintDialog = false}}},[_vm._v(\"Cancel\")])],1),_c('v-col',{staticClass:\"pb-0\"},[_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.submitNewFootprint}},[_vm._v(\" Submit \")])],1)],1)],1)],1):_vm._e()],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row>\n    <v-col>\n      <v-card>\n        <v-card-title>Number of Nodes</v-card-title>\n        <v-card-text>{{ nbOfNodes }}</v-card-text>\n      </v-card>\n    </v-col>\n    <v-col>\n      <v-card>\n        <v-card-title>Total Footprint</v-card-title>\n        <v-card-text>{{ totalFootprint }} </v-card-text>\n      </v-card>\n    </v-col>\n    <v-col cols=\"12\">\n      <v-card>\n        <v-card-title>Nodes</v-card-title>\n        <v-card-text>\n          <v-data-table\n            :items=\"sealers\"\n            :headers=\"tableHeaders\"\n            :items-per-page=\"-1\"\n            hide-default-footer\n          >\n            <template v-slot:item.vanity=\"{ item }\">\n              <div>Address: {{ item.address }}</div>\n              <div>Name: {{ item.vanity.custom }}</div>\n            </template>\n            <!-- \n            <template v-slot:item.footprint=\"{ item }\">\n\t\t\t\t{{ item.footprint }}\n              <v-edit-dialog\n                @update:return-value=\"setFootprint\"\n                large\n                persistent\n              >\n                {{ item.footprint }}\n                <template v-slot:input>\n                  <v-text-field\n                    :value=\"item.footprint\"\n                    label=\"Edit\"\n                    single-line\n                    type=\"number\"\n                  ></v-text-field>\n                </template>\n              </v-edit-dialog>\n            </template> -->\n            <template v-slot:item.actions=\"{ item }\">\n              <v-btn\n                color=\"primary\"\n                small\n                @click=\"openUpdateFootprintDialog(item)\"\n              >\n                Update footprint\n              </v-btn>\n            </template>\n          </v-data-table>\n\n          <v-dialog v-model=\"footprintDialog\" width=\"500\">\n            <v-card v-if=\"selectedSealer\">\n              <v-card-title>\n                Update Footprint for {{ selectedSealer.address }}\n              </v-card-title>\n              <v-card-text>\n                <v-row>\n                  <v-col cols=\"6\" class=\"pb-0\">\n                    <v-text-field\n                      type=\"number\"\n                      outlined\n                      dense\n                      v-model=\"newFootprintValue\"\n                    ></v-text-field>\n                  </v-col>\n                  <v-col class=\"pb-0\">\n                    <v-btn @click=\"footprintDialog = false\">Cancel</v-btn>\n                  </v-col>\n                  <v-col class=\"pb-0\">\n                    <v-btn color=\"primary\" @click=\"submitNewFootprint\">\n                      Submit\n                    </v-btn>\n                  </v-col>\n                </v-row>\n              </v-card-text>\n            </v-card>\n          </v-dialog>\n        </v-card-text>\n      </v-card>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nimport { get, call } from \"vuex-pathify\";\n\nexport default {\n  data: () => ({\n    tableHeaders: [\n      { text: \"Node\", value: \"vanity\" },\n      { text: \"Footprint\", value: \"footprint\" },\n      { text: \"Actions\", value: \"actions\", sortable: false },\n    ],\n    tableHeadersAuditors: [\n      { text: \"Auditor\", value: \"address\" },\n      { text: \"Votes courants\", value: \"votes\" },\n      { text: \"Mon Vote\", value: \"actions\", sortable: false },\n    ],\n    footprintDialog: false,\n    selectedSealer: null,\n    newFootprintValue: 0,\n  }),\n  computed: {\n    ...get(\"nodes\", [\"nbOfNodes\", \"totalFootprint\", \"sealers\"]),\n  },\n\n  mounted() {\n    this.fetchAllValues();\n  },\n  methods: {\n    ...call(\"nodes\", [\"fetchAllValues\", \"updateFootprint\"]),\n    openUpdateFootprintDialog(sealer) {\n      this.selectedSealer = sealer;\n      this.newFootprintValue = sealer.footprint;\n      this.footprintDialog = true;\n    },\n\n    async submitNewFootprint() {\n      this.footprintDialog = false;\n      await this.updateFootprint({\n        sealerAddress: this.selectedSealer.address,\n        footprint: this.newFootprintValue,\n      });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Audit.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Audit.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Audit.page.vue?vue&type=template&id=2ca433a3&\"\nimport script from \"./Audit.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Audit.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-tabs',{attrs:{\"centered\":\"\",\"slider-color\":\"primary\"},model:{value:(_vm.currentTab),callback:function ($$v) {_vm.currentTab=$$v},expression:\"currentTab\"}},[_c('v-tab',{attrs:{\"href\":\"#footprints\"}},[_vm._v(\" Footprints \")]),_c('v-tab',{attrs:{\"href\":\"#pledges\"}},[_vm._v(\" Pledges \")])],1),_c('v-tabs-items',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.currentTab),callback:function ($$v) {_vm.currentTab=$$v},expression:\"currentTab\"}},[_c('v-tab-item',{attrs:{\"value\":\"footprints\"}},[_c('v-card',[_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.footprintHistory,\"headers\":_vm.footprintTableHeaders,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.node\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.node))]),_c('div',[_vm._v(_vm._s(item.nodeName))])]}},{key:\"item.explorer\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('explorer',{attrs:{\"type\":\"tx\",\"id\":item.txHash}})]}}])})],1)],1)],1),_c('v-tab-item',{attrs:{\"value\":\"pledges\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Your pledge history\")]),_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.pledgeHistory,\"headers\":_vm.pledgeTableHeaders,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.explorer\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('explorer',{attrs:{\"type\":\"tx\",\"id\":item.txHash}})]}}])})],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row>\n    <v-tabs v-model=\"currentTab\" centered slider-color=\"primary\">\n      <v-tab href=\"#footprints\"> Footprints </v-tab>\n      <v-tab href=\"#pledges\"> Pledges </v-tab>\n    </v-tabs>\n\n    <v-tabs-items v-model=\"currentTab\" style=\"width: 100%\">\n      <v-tab-item value=\"footprints\">\n        <v-card>\n          <v-card-text>\n            <v-data-table\n              :items=\"footprintHistory\"\n              :headers=\"footprintTableHeaders\"\n              :items-per-page=\"-1\"\n              hide-default-footer\n            >\n              <template v-slot:item.node=\"{ item }\">\n                  <div>{{ item.node }}</div>\n                  <div>{{ item.nodeName }}</div>\n              </template>\n              <template v-slot:item.explorer=\"{ item }\">\n                  <explorer type=\"tx\" :id=\"item.txHash\"></explorer>\n              </template>\n            </v-data-table>\n          </v-card-text>\n        </v-card>\n      </v-tab-item>\n      <v-tab-item value=\"pledges\">\n        <v-card>\n          <v-card-title>Your pledge history</v-card-title>\n          <v-card-text>\n            <v-data-table\n              :items=\"pledgeHistory\"\n              :headers=\"pledgeTableHeaders\"\n              :items-per-page=\"-1\"\n              hide-default-footer\n            >\n              <template v-slot:item.explorer=\"{ item }\">\n                    <explorer type=\"tx\" :id=\"item.txHash\"></explorer>\n              </template>\n            </v-data-table>\n          </v-card-text>\n        </v-card>\n      </v-tab-item>\n    </v-tabs-items>\n  </v-row>\n</template>\n\n<script>\nimport { get, call } from \"vuex-pathify\";\nimport Explorer from \"../components/ExplorerRedirect.vue\";\n\nexport default {\n  components: {Explorer},\n  data: () => ({\n    currentTab: \"footprints\",\n    footprintTableHeaders: [\n      { text: \"Block N\", value: \"blockNumber\" },\n      { text: \"Auditor\", value: \"auditorName\" },\n      { text: \"Node\", value: \"node\" },\n      { text: \"Assigned\", value: \"footprint\" },\n      { text: \"\", value: \"explorer\" },\n    ],\n    pledgeTableHeaders: [\n      { text: \"Block N\", value: \"blockNumber\" },\n      // { text: \"Auditor address\", value: \"auditor\" },\n      { text: \"Pledge\", value: \"pledge\" },\n      { text: \"Total\", value: \"total\" },\n      { text: \"\", value: \"explorer\" },\n    ],\n  }),\n\n  computed: {\n    ...get(\"history\", [\"footprintHistory\", \"pledgeHistory\"]),\n  },\n\n  async mounted() {\n    this.fetchAllValues();\n  },\n\n  methods: {\n    ...call(\"history\", [\"fetchAllValues\"]),\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./History.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./History.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./History.page.vue?vue&type=template&id=3cf9b441&\"\nimport script from \"./History.page.vue?vue&type=script&lang=js&\"\nexport * from \"./History.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',{attrs:{\"wrap\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Current Wallet Balance\")]),_c('v-card-text',[_vm._v(\" \"+_vm._s(_vm.toEther(_vm.balance))+\"CRC \")])],1)],1),_c('v-col',{attrs:{\"cols\":\"8\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Pledge Informations\")]),_c('v-card-text',[_c('div',[_vm._v(\" Min pledge to start audit: \"+_vm._s(_vm.toEther(_vm.minPledgeAmount).toFixed(4))+\"CRC \")]),_c('div',[_vm._v(\"Current pledged amount: \"+_vm._s(_vm.pledgedAmount.toFixed(4))+\"CRC\")]),_c('v-btn',{attrs:{\"small\":\"\",\"disabled\":_vm.pledgedAmount === 0 || !_vm.redeemBool},on:{\"click\":_vm.redeemPledge}},[_vm._v(\"Redeem Pledge\")])],1)],1)],1),_c('v-col',[_c('v-card',[_c('v-card-title',[_vm._v(\"Pledge Actions\")]),_c('v-card-text',[_c('v-row',[_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"12\"}},[_c('v-text-field',{attrs:{\"dense\":\"\",\"hide-details\":\"\",\"outlined\":\"\",\"type\":\"number\",\"min\":0,\"placeholder\":\"Amount to add to the pledge\"},model:{value:(_vm.amountToAdd),callback:function ($$v) {_vm.amountToAdd=$$v},expression:\"amountToAdd\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-btn',{staticStyle:{\"width\":\"100%\"},attrs:{\"small\":\"\"},on:{\"click\":_vm.pledgeMore}},[_vm._v(\"Pledge more\")])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row wrap>\n    <v-col cols=\"12\">\n      <v-card>\n        <v-card-title>Current Wallet Balance</v-card-title>\n        <v-card-text> {{ toEther(balance) }}&nbsp;CRC </v-card-text>\n      </v-card>\n    </v-col>\n    <v-col cols=\"8\">\n      <v-card>\n        <v-card-title>Pledge Informations</v-card-title>\n        <v-card-text>\n          <div>\n            Min pledge to start audit: {{ toEther(minPledgeAmount).toFixed(4) }}&nbsp;CRC\n          </div>\n          <div>Current pledged amount: {{ pledgedAmount.toFixed(4) }}&nbsp;CRC</div>\n          <v-btn\n            small\n            @click=\"redeemPledge\"\n            :disabled=\"pledgedAmount === 0 || !redeemBool\"\n            >Redeem Pledge</v-btn\n          >\n        </v-card-text>\n      </v-card>\n    </v-col>\n    <v-col>\n      <v-card>\n        <v-card-title>Pledge Actions</v-card-title>\n        <v-card-text>\n          <v-row>\n            <v-col cols=\"12\" class=\"pb-0\">\n              <v-text-field\n                v-model=\"amountToAdd\"\n                dense\n                hide-details\n                outlined\n                type=\"number\"\n                :min=\"0\"\n                placeholder=\"Amount to add to the pledge\"\n            /></v-col>\n            <v-col cols=\"12\">\n              <v-btn small style=\"width: 100%\" @click=\"pledgeMore\"\n                >Pledge more</v-btn\n              >\n            </v-col>\n          </v-row>\n        </v-card-text>\n      </v-card>\n    </v-col>\n  </v-row>\n</template>\n<script>\nimport { get, call } from \"vuex-pathify\";\nimport { toEther } from \"@/lib/numbers\";\n\nexport default {\n  data: () => ({\n    intervalId: null,\n    amountToAdd: 0,\n  }),\n  computed: {\n    ...get(\"pledge\", [\n      \"balance\",\n      \"minPledgeAmount\",\n      \"pledgedAmount\",\n      \"redeemBool\",\n    ]),\n  },\n  mounted() {\n    this.fetchAllValues();\n    this.intervalId = setInterval(this.fetchAllValues, 60 * 1000);\n  },\n  beforeRouteLeave(to, from, next) {\n    clearInterval(this.intervalId);\n    next();\n  },\n  methods: {\n    toEther,\n    ...call(\"pledge\", [\"fetchAllValues\", \"addToPledge\", \"redeemPledge\"]),\n    async pledgeMore() {\n      await this.addToPledge(this.amountToAdd);\n      this.amountToAdd = 0;\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pledge.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pledge.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Pledge.page.vue?vue&type=template&id=579c75c3&\"\nimport script from \"./Pledge.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Pledge.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-card',{staticClass:\"pa-md-4 mx-lg-auto\"},[(_vm.walletRole != _vm.ROLES.VISITOR)?_c('v-card-title',[_vm._v(\" \"+_vm._s(_vm.walletRole)+\" \"+_vm._s(_vm.wallet)+\" \"),_c('explorer',{attrs:{\"type\":\"account\",\"id\":_vm.wallet}})],1):_c('v-card-title',[_vm._v(\" Visitor\")]),_c('v-card-subtitle',[_vm._v(\" \"+_vm._s(_vm.currentWalletBalanceEth)+\" CRC \")])],1),(_vm.isAuditor)?_c('v-card',{staticClass:\"pa-md-4 mx-lg-auto\"},[_c('v-card-title',[_vm._v(\" Status \")]),(_vm.registered && _vm.approved)?_c('v-card-subtitle',{staticStyle:{\"color\":\"Green\"}},[_vm._v(\" APPROVED \")]):_vm._e(),(_vm.registered && !_vm.approved)?_c('v-card-subtitle',{staticStyle:{\"color\":\"red\"}},[_vm._v(\" AWAITING APPROVAL \")]):_vm._e(),(_vm.registered && !_vm.approved)?_c('v-card-text',[_c('p',{staticStyle:{\"color\":\"black\"}},[_vm._v(\" You have the total vote of \"+_vm._s(_vm.approbationVotes)+\" \")])]):_vm._e()],1):_vm._e(),(_vm.walletRole == _vm.ROLES.USER_CONNECTED)?_c('v-card',{staticClass:\"pa-md-4 mx-lg-auto\"},[_c('v-card-text',[_c('p',[_vm._v(\" If you wish to become an auditor you must register here \"),_c('v-btn',{staticClass:\"mx-2\",attrs:{\"small\":\"\",\"disabled\":_vm.mmIsOpen},on:{\"click\":_vm.selfRegister}},[_vm._v(\" Self register \")])],1)]),_c('v-card-text',[_c('p',[_vm._v(\" If you need this wallet to acts as a delegate for your node, execute the following command from your node eth console \"),_c('code',[_vm._v(_vm._s(_vm.registerDelegateCommandLine))])])])],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n\n  <v-card class=\"pa-md-4 mx-lg-auto\">\n    <v-card-title v-if=\"walletRole != ROLES.VISITOR\"> {{walletRole}} {{wallet}} <explorer type=\"account\" :id=\"wallet\"></explorer></v-card-title>\n    <v-card-title v-else> Visitor</v-card-title>\n    <v-card-subtitle >\n      {{currentWalletBalanceEth}} CRC\n    </v-card-subtitle>  \n  </v-card>\n\n  <v-card class=\"pa-md-4 mx-lg-auto\" v-if=\"isAuditor\">\n    <v-card-title> Status </v-card-title>\n    <v-card-subtitle style=\"color: Green\" v-if=\"registered && approved\">\n      APPROVED\n    </v-card-subtitle>\n    <v-card-subtitle style=\"color: red\" v-if=\"registered && !approved\">\n      AWAITING APPROVAL\n    </v-card-subtitle>\n    <v-card-text v-if=\"registered && !approved\">\n      <p style=\"color: black\">\n        You have the total vote of {{ approbationVotes }}\n      </p>\n    </v-card-text>\n  </v-card>\n\n  <v-card class=\"pa-md-4 mx-lg-auto\" v-if=\"walletRole == ROLES.USER_CONNECTED\">\n    <v-card-text>\n      <p>\n        If you wish to become an auditor you must register here\n        <v-btn small class=\"mx-2\" @click=\"selfRegister\" :disabled=\"mmIsOpen\">\n          Self register\n        </v-btn>\n      </p>\n    </v-card-text>\n    <v-card-text>\n      <p>\n        If you need this wallet to acts as a delegate for your node, execute the following command from your node eth console\n        <code>{{registerDelegateCommandLine}}</code>\n      </p>\n    </v-card-text>\n  </v-card>\n  </div>\n</template>\n\n<script>\nimport { get, call } from \"vuex-pathify\";\nimport { toEther } from \"../lib/numbers\";\nimport { ROLES } from \"../lib/const\";\nimport { getCallData } from \"../lib/api\"\nimport Explorer from \"../components/ExplorerRedirect.vue\";\n\nexport default {\n  components: {Explorer},\n  data: ()=>({\n    registerDelegateCommandLine: \"\"\n  }),\n  computed: {\n    ROLES: ()=>ROLES,\n    mmIsOpen: get(\"mmIsOpen\"),\n    ...get(\"auth\", [\"registered\", \"walletRole\", \"wallet\"]),\n    ...get(\"status\", [\"approved\", \"approbationVotes\"]),\n    ...get(\"nodes\", [\"currentWalletBalanceWei\"]),\n    currentWalletBalanceEth() {\n      return toEther(this.currentWalletBalanceWei).toFixed(4);\n    },\n    isAuditor() {\n      return [ROLES.APPROVED_AUDITOR, ROLES.PENDING_AUDITOR].includes(this.walletRole);\n    },\n  },\n  async mounted() {\n    this.fetchIsRegistered();\n    this.fetchIsApproved();\n    this.fetchApprobationVotes();\n\n    this.registerDelegateCommandLine = await getCallData(\"allowDelegate\", this.wallet)\n  },\n  methods: {\n    ...call(\"auth\", [\"fetchIsRegistered\", \"selfRegister\"]),\n    ...call(\"status\", [\"fetchIsApproved\", \"fetchApprobationVotes\"]),\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Status.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Status.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Status.page.vue?vue&type=template&id=dfa8cca4&\"\nimport script from \"./Status.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Status.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('h2',[_vm._v(\"Manage the confiscated pledge of the auditors\")])]),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Total confiscated pledge\")]),_c('v-card-text',[_vm._v(_vm._s(_vm.totalPledge)+\" CRC\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row>\n    <v-col cols=\"12\">\n      <h2>Manage the confiscated pledge of the auditors</h2>  \n    </v-col>  \n    <v-col cols=\"12\">\n      <v-card>\n        <v-card-title>Total confiscated pledge</v-card-title>\n        <v-card-text>{{ totalPledge }} CRC</v-card-text>\n      </v-card>\n    </v-col>\n\n    \n  </v-row>\n</template>\n<script>\nimport { call } from \"vuex-pathify\";\n\nexport default {\n  data: ()=>({\n    totalPledge:0\n  }),\n\n  async mounted() {\n    this.totalPledge = await this.fetchConfiscatedPledge()\n  },\n\n  methods: {\n    ...call(\"nodeGovernance\", [\"fetchConfiscatedPledge\"])\n  }\n\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfiscatedPledge.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfiscatedPledge.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConfiscatedPledge.page.vue?vue&type=template&id=7ecbdde9&\"\nimport script from \"./ConfiscatedPledge.page.vue?vue&type=script&lang=js&\"\nexport * from \"./ConfiscatedPledge.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Page to manage PoCR improvement proposals.\")])],1)],1),_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"12\"}},[(_vm.isConnected)?_c('v-card',{staticClass:\"pa-2\"},[_c('v-card-subtitle',[_vm._v(\"Create a new proposal.\")]),_c('v-card-text',[_vm._v(\" this action will be done with your connected wallet and will reserve the ID of the Carbon Reduction Improvement Proposal that you must then create as a document in \"),_c('a',{attrs:{\"href\":_vm.CRIPsUrl}},[_vm._v(_vm._s(_vm.CRIPsUrl))])]),_c('v-card-actions',[(!_vm.lastCRIPCreated)?_c('v-btn',{attrs:{\"color\":\"primary\",\"small\":\"\"},on:{\"click\":_vm.reserveCRIP}},[_vm._v(\" Reserve the next CRIP id \")]):_c('v-card-text',[_vm._v(\" You have reserved the CRIP id \"),_c('code',[_vm._v(_vm._s(_vm.lastCRIPCreated))])])],1)],1):_vm._e()],1),_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"12\"}},[_c('v-card',{staticClass:\"pa-2\"},[_c('v-card-title',[_vm._v(\"List of the improvement proposals\")]),_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.CRIPS,\"headers\":_vm.cripsTableHeaders,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.createdBlock\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.createdBlock)+\" \"),_c('explorer',{attrs:{\"type\":\"block\",\"id\":item.createdBlock}})],1)]}},{key:\"item.documentation\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('a',{attrs:{\"href\":item.url}},[_vm._v(\"crip-\"+_vm._s(item.index)+\".md\")])]}},{key:\"item.voteFromBlock\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(_vm.voteFromContent(item.index)))]),_c('div',[_vm._v(\"at \"+_vm._s(item.voteFromBlock))])]}},{key:\"item.voteUntilBlock\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(_vm.voteUntilContent(item.index)))]),_c('div',[_vm._v(\"at \"+_vm._s(item.voteUntilBlock))])]}},{key:\"item.auditors\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(\"Pro: \"+_vm._s(item.auditorsFor))]),_c('div',[_vm._v(\"Cons: \"+_vm._s(item.auditorsAgainst))])]}},{key:\"item.nodes\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(\"Pro: \"+_vm._s(item.nodesFor))]),_c('div',[_vm._v(\"Cons: \"+_vm._s(item.nodesAgainst))])]}},{key:\"item.useraction\",fn:function(ref){\nvar item = ref.item;\nreturn [(_vm.canVote(item.index))?_c('v-radio-group',{on:{\"change\":function($event){return _vm.userVote(item)}},model:{value:(item.vote),callback:function ($$v) {_vm.$set(item, \"vote\", $$v)},expression:\"item.vote\"}},[_c('v-radio',{attrs:{\"label\":\"agree\",\"value\":true}}),_c('v-radio',{attrs:{\"label\":\"reject\",\"value\":false}})],1):_vm._e()]}}])})],1)],1)],1),_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"12\"}},[_c('v-card',{staticClass:\"pa-2\"},[_c('v-card-title',[_vm._v(\"Your votes\")]),_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.userVotes,\"headers\":_vm.votesTableHeaders,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.block\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.block)+\" \"),_c('explorer',{attrs:{\"type\":\"tx\",\"id\":item.txHash}})],1)]}}])})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row>\n    <v-col cols=\"12\" class=\"pb-0\">\n      <v-card>\n        <v-card-title>Page to manage PoCR improvement proposals.</v-card-title>\n      </v-card>\n    </v-col>\n    <v-col cols=\"12\" class=\"pb-0\">\n      <v-card class=\"pa-2\" v-if=\"isConnected\">\n        <v-card-subtitle>Create a new proposal.</v-card-subtitle>\n        <v-card-text>\n          this action will be done with your connected wallet and will reserve the ID of the Carbon Reduction Improvement Proposal that you must then create as a document in \n          <a :href=\"CRIPsUrl\">{{CRIPsUrl}}</a>\n        </v-card-text>\n        <v-card-actions>\n          <v-btn\n            color=\"primary\"\n            small\n            v-if=\"!lastCRIPCreated\"\n            @click=\"reserveCRIP\"\n          >\n            Reserve the next CRIP id\n          </v-btn>\n          <v-card-text  v-else>\n            You have reserved the CRIP id <code>{{lastCRIPCreated}}</code>\n          </v-card-text>\n        </v-card-actions>\n      </v-card>\n    </v-col>\n    \n    <v-col cols=\"12\" class=\"pb-0\">\n      <v-card class=\"pa-2\">\n        <v-card-title>List of the improvement proposals</v-card-title>\n        <v-card-text>\n          <v-data-table\n            :items=\"CRIPS\"\n            :headers=\"cripsTableHeaders\"\n            :items-per-page=\"-1\"\n            hide-default-footer\n          >\n            <template v-slot:item.createdBlock=\"{ item }\">\n              <div>{{item.createdBlock}} <explorer type=\"block\" :id=\"item.createdBlock\"></explorer></div>\n            </template>\n            <template v-slot:item.documentation=\"{ item }\">\n              <a :href=\"item.url\">crip-{{item.index}}.md</a>\n            </template>\n            <template v-slot:item.voteFromBlock=\"{ item }\">\n              <div>{{voteFromContent(item.index)}}</div>\n              <div>at {{item.voteFromBlock}}</div>\n            </template>\n            <template v-slot:item.voteUntilBlock=\"{ item }\">\n              <div>{{voteUntilContent(item.index)}}</div>\n              <div>at {{item.voteUntilBlock}}</div>\n            </template>\n            <template v-slot:item.auditors=\"{ item }\">\n              <div>Pro: {{item.auditorsFor}}</div>\n              <div>Cons: {{item.auditorsAgainst}}</div>\n            </template>\n            <template v-slot:item.nodes=\"{ item }\">\n              <div>Pro: {{item.nodesFor}}</div>\n              <div>Cons: {{item.nodesAgainst}}</div>\n            </template>\n            <template v-slot:item.useraction=\"{ item }\">\n              <v-radio-group v-model=\"item.vote\" v-if=\"canVote(item.index)\" @change=\"userVote(item)\">\n                <v-radio label=\"agree\" :value=\"true\"></v-radio>\n                <v-radio label=\"reject\" :value=\"false\"></v-radio>\n              </v-radio-group>\n            </template>\n          </v-data-table>\n        </v-card-text>\n      </v-card>\n    </v-col>\n    \n    <v-col cols=\"12\" class=\"pb-0\">\n      <v-card class=\"pa-2\">\n        <v-card-title>Your votes</v-card-title>\n        <v-card-text>\n          <v-data-table\n            :items=\"userVotes\"\n            :headers=\"votesTableHeaders\"\n            :items-per-page=\"-1\"\n            hide-default-footer\n          >\n            <template v-slot:item.block=\"{ item }\">\n              <div>{{item.block}} <explorer type=\"tx\" :id=\"item.txHash\"></explorer></div>\n            </template>\n\n          </v-data-table>\n        </v-card-text>\n      </v-card>\n    </v-col>\n\n  </v-row>\n\n</template>\n<script>\nimport { CRIPBaseUrl, ROLES } from \"../lib/const\";\nimport { Web3FunctionProvider } from \"@saturn-chain/web3-functions\";\nimport $store from \"@/store\";\nimport { writeCallWithOptions, handleMMResponse, readOnlyCall } from \"../lib/api\";\nimport Explorer from \"../components/ExplorerRedirect.vue\";\n\nexport default {\n  components: {Explorer},\n  data: ()=>({\n    lastCRIPCreated: undefined,\n    CRIPS: [],\n    userVotes: [],\n    cripsTableHeaders: [\n      { text: \"Created on\", value: \"createdBlock\" },\n      { text: \"Doc\", value: \"documentation\" },\n      { text: \"Start in\", value: \"voteFromBlock\" },\n      { text: \"Auditors votes\", value: \"auditors\" },\n      { text: \"Nodes votes\", value: \"nodes\" },\n      { text: \"Closes on\", value: \"voteUntilBlock\" },\n      { text: \"Action\", value: \"useraction\" },\n    ],\n    votesTableHeaders: [\n      { text: \"Created on\", value: \"block\" },\n      { text: \"CRIP id\", value: \"index\" },\n      { text: \"Decision\", value: \"decision\" },\n    ],\n  }),\n  computed: {\n    blockNumber() {\n      return $store.get(\"nodes/currentBlockNumber\");\n    },\n    CRIPsUrl() {\n      return CRIPBaseUrl\n    },\n    isConnected() {\n      return !!$store.get(\"auth/wallet\")\n    },\n    isNode() {\n      return $store.get(\"auth/walletRole\") == ROLES.AUDITED_NODE\n    },\n    isAuditor() {\n      return $store.get(\"auth/walletRole\") == ROLES.APPROVED_AUDITOR\n    },\n  },\n\n  mounted() {\n    this.fetchCRIPS()\n    this.fetchUserVotes()\n  },\n\n  methods: {\n    async reserveCRIP() {\n      const prov = new Web3FunctionProvider($store.get(\"auth/provider\"), ()=>Promise.resolve($store.get(\"auth/wallet\")))\n      const contract = $store.get(\"auth/contract\");\n      const currentBlock = this.blockNumber;\n\n      await handleMMResponse(writeCallWithOptions(\"newProposal\", {maxGas: 100000}))\n      contract.events.IPChanged(prov.get({fromBlock: currentBlock}), {status: 0})\n      .once(\"log\", (log)=>{\n        this.lastCRIPCreated = log.returnValues.index;\n        this.fetchCRIPS();\n      })\n    },\n\n    async fetchCRIPS() {\n      const count = await readOnlyCall(\"nbImprovementProposals\");\n      const result = [];\n      for (let index = 0; index < count; index++) {\n        const crip = await readOnlyCall(\"getImprovementProposal\", index)\n        crip.index = Number.parseInt(crip.index)\n        crip.voteFromBlock = Number.parseInt(crip.voteFromBlock)\n        crip.voteUntilBlock = Number.parseInt(crip.voteUntilBlock)\n        const url = new URL(`${CRIPBaseUrl}/crip-${crip.index}.md`)\n        crip.url = url.href;\n        result.push(crip)\n      }\n      this.CRIPS = result\n    },\n\n    async fetchUserVotes() {\n      const wallet = $store.get(\"auth/delegatedWallet\") || $store.get(\"auth/wallet\");\n      const prov = new Web3FunctionProvider($store.get(\"auth/provider\"), ()=>Promise.resolve(wallet))\n      const contract = $store.get(\"auth/contract\");\n      this.userVotes = [];\n      contract.events.IPVote(prov.get({fromBlock: 1}), {voter: wallet})\n      .on(\"log\", (log)=>{\n        console.log(\"Vote log\", log);\n        this.userVotes.push({\n          index: Number.parseInt(log.returnValues.index),\n          approval: Number.parseInt(log.returnValues.vote)>0 ? true : false,\n          decision: Number.parseInt(log.returnValues.vote)>0 ? \"Accepted\" : \"Rejected\",\n          txHash: log.transactionHash,\n          block: log.blockNumber\n        });\n      })\n    },\n\n    canVote(index) {\n      const crip = this.CRIPS.find(c=>c.index == index);\n      if (!crip) return false;\n      const currentBlock = this.blockNumber;\n      const inVotingPeriod = crip.voteFromBlock <= currentBlock && crip.voteUntilBlock >= currentBlock\n      return inVotingPeriod && (this.isNode || this.isAuditor)\n    },\n    voteFromContent(index) {\n      const crip = this.CRIPS.find(c=>c.index == index);\n      if (!crip) return \"N/A\";\n      const nbBlocks = crip.voteFromBlock-this.blockNumber;\n      console.log(\"voteFromContent\", index, crip, nbBlocks);\n      if (nbBlocks<=0) return \"Opened\";\n      else return (nbBlocks*4/(3600*24)).toFixed(2) + \" days\";\n    },\n    voteUntilContent(index) {\n      const crip = this.CRIPS.find(c=>c.index == index);\n      if (!crip) return \"N/A\";\n      const nbBlocks = crip.voteUntilBlock-this.blockNumber;\n      console.log(\"voteFromContent\", index, crip, nbBlocks);\n      if (nbBlocks<=0) return \"Closed\";\n      else return (nbBlocks*4/(3600*24)).toFixed(2) + \" days\";\n    },\n\n    async userVote(crip) {\n      console.log(\"User vote\", crip.index, crip.vote);\n      if (typeof crip.vote !== \"boolean\") return;\n      const funct = crip.vote? \"voteForProposal\" : \"voteAgainstProposal\";\n      const response = await handleMMResponse(writeCallWithOptions(funct, {maxGas:100000}, crip.index));\n      if (response === null) crip.vote = null;\n      this.fetchCRIPS();\n      this.fetchUserVotes();\n    }\n  }\n\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Improvements.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Improvements.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Improvements.page.vue?vue&type=template&id=797fe216&\"\nimport script from \"./Improvements.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Improvements.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._l((_vm.logs),function(log){return _c('div',{key:log.key},[_c('v-chip',[_vm._v(_vm._s(log.type))]),_vm._v(\" \"+_vm._s(log.args.map(function (a){ return typeof a==\"object\"?\"OBJ\":a; }).join(' '))+\" \")],1)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div v-for=\"log of logs\" :key=\"log.key\">\n      <v-chip>{{log.type}}</v-chip> {{log.args.map(a=>typeof a==\"object\"?\"OBJ\":a).join(' ')}}\n    </div>\n  </div>\n</template>\n\n<script>\nimport { get } from \"vuex-pathify\";\n\nexport default {\n  data: () => ({}),\n  computed: {\n    ...get([\"logs\"]),\n  },\n\n  mounted() {\n  },\n  methods: {\n    \n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Logger.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Logger.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Logger.page.vue?vue&type=template&id=3b633b5a&\"\nimport script from \"./Logger.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Logger.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport VueRouter from \"vue-router\";\n\nimport InstallMetaMask from \"@/pages/InstallMetaMask.page.vue\";\nimport Auth from \"@/pages/Auth.page.vue\";\n\nimport Welcome from \"@/pages/Welcome.page.vue\";\nimport Dashboard from \"@/pages/Dashboard.page.vue\";\n\nimport Auditors from \"@/pages/Auditors.page.vue\";\n\nimport Audit from \"@/pages/Audit.page.vue\";\nimport History from \"@/pages/History.page.vue\";\nimport Pledge from \"@/pages/Pledge.page.vue\";\nimport Status from \"@/pages/Status.page.vue\";\nimport ConfiscatedPledge from \"@/pages/ConfiscatedPledge.page.vue\";\nimport Improvements from \"@/pages/Improvements.page.vue\";\nimport Logger from \"@/pages/Logger.page.vue\";\n\nimport { ROLES } from \"./lib/const\";\n\nVue.use(VueRouter);\n\n\n// const approvedAuditor = ({ store }) => store.state.status.approved;\n// const isNode = ({ store }) => store.state.auth.isNode;\n// const isNotNode = ({ store }) => !isNode({ store });\nconst walletIsntConnected = ({ store }) => !store.state.auth.wallet;\nconst hasRole = (role)=>{\n    return ({store}) => (store.get(\"auth/walletRole\") == role)\n} \nconst not = (f)=>{\n    return (opts)=>{\n        return !f(opts);\n    }\n}\n\nconst any = (...functions) => {\n    return (opts) => {\n        for (const f of functions) {\n            if (f(opts)) return true;\n        }\n        return false;\n    }\n}\n\n// The order actually matter because it will determine the order in the sidenav\nexport const routes = [\n    //Public\n    { name: \"welcome\", path: \"/welcome\", component: Welcome, meta: { hidden: ()=>true } },\n    { name: \"dashboard\", path: \"/dashboard\", component: Dashboard, meta: { displayInSidenav: \"\" } },\n    {\n        name: \"status\", path: \"/status\", component: Status, meta: {\n            displayInSidenav: \"\",\n            restricted: not(hasRole(ROLES.VISITOR)),\n            forceRedirectTo: \"dashboard\",\n            hidden: hasRole(ROLES.VISITOR)\n        }\n    }, \n    {\n        name: \"improvements\", path: \"/improvements\", component: Improvements, meta: {\n            displayInSidenav: \"\",\n            forceRedirectTo: \"dashboard\",\n        }\n    },\n\n       // Auth\n    { name: \"installMetaMask\", path: \"/installmetamask\", component: InstallMetaMask },\n    {\n        name: \"authentication\", path: \"/auth\", component: Auth, meta: {\n            displayInSidenav: \"\",\n            hidden: ({ store }) => !walletIsntConnected({ store })\n        }\n    },\n\n    // Node views\n    {\n        name: \"auditors\", path: \"/auditors\", component: Auditors, meta: {\n            displayInSidenav: \"Governance\",\n            restricted: any(hasRole(ROLES.AUDITED_NODE), hasRole(ROLES.NEW_NODE)),\n            forceRedirectTo: \"dashboard\",\n            hidden: not(any(hasRole(ROLES.AUDITED_NODE), hasRole(ROLES.NEW_NODE)))\n        }\n    },\n    {\n        name: \"confiscated-pledge\", path: \"/confiscated\", component: ConfiscatedPledge, meta: {\n            displayInSidenav: \"Governance\",\n            restricted: any(hasRole(ROLES.AUDITED_NODE), hasRole(ROLES.NEW_NODE)),\n            forceRedirectTo: \"dashboard\",\n            hidden: not(any(hasRole(ROLES.AUDITED_NODE), hasRole(ROLES.NEW_NODE)))\n        }\n    },\n    // Auditors views\n    {\n        name: \"pledge\", path: \"/pledge\", component: Pledge, meta: {\n            displayInSidenav: \"Audit\",\n            restricted: hasRole(ROLES.APPROVED_AUDITOR),\n            forceRedirectTo: \"status\",\n            hidden: not(any(hasRole(ROLES.PENDING_AUDITOR), hasRole(ROLES.APPROVED_AUDITOR)))\n        }\n    },\n    {\n        name: \"audit\", path: \"/audit\", component: Audit, meta: {\n            displayInSidenav: \"Audit\",\n            restricted: hasRole(ROLES.APPROVED_AUDITOR),\n            forceRedirectTo: \"status\",\n            hidden: not(any(hasRole(ROLES.PENDING_AUDITOR), hasRole(ROLES.APPROVED_AUDITOR)))\n        }\n    },\n    {\n        name: \"history\", path: \"/history\", component: History, meta: {\n            displayInSidenav: \"Audit\",\n            restricted: any(hasRole(ROLES.PENDING_AUDITOR), hasRole(ROLES.APPROVED_AUDITOR)),\n            forceRedirectTo: \"status\",\n            hidden: not(any(hasRole(ROLES.PENDING_AUDITOR), hasRole(ROLES.APPROVED_AUDITOR)))\n        }\n    },\n    {\n        name: \"logs\", path: \"/logs\", component: Logger, meta: {\n            displayInSidenav: \"\",\n            // restricted: any(hasRole(ROLES.PENDING_AUDITOR), hasRole(ROLES.APPROVED_AUDITOR)),\n            forceRedirectTo: \"status\",\n            hidden: ({config})=>!config?.activate_log\n        }\n    },\n    // GdC: For some unknown reason the redirection should not be 'authentication' directly but it works with dashboard\n    { path: \"*\", redirect: \"welcome\" }\n]\n\nconst router = new VueRouter({\n    routes,\n    base: \"\",\n    // mode: \"history\"\n})\n// implement a fix to avoid uncaught promise error caused by the navigation guard\nrouter.oldPush = router.push.bind(router)\nasync function push(to) {\n    try {\n        await this.oldPush(to)\n    } catch (error) {\n        console.log(\"Target page was not reached but this is normal\", error.to.name, \"--->\", this.currentRoute.name)\n    }\n}\nrouter.push = push.bind(router);\nexport default router;","<template>\n  <v-navigation-drawer v-model=\"drawer\" @input=\"drawerChange\" app clipped flat>\n    <v-divider></v-divider>\n    <v-list>\n      <v-list-item-group :value=\"$route.name\" mandatory color=\"primary\">\n        <template\n          v-for=\"(\n            { icon, label, route, disabled, subheader }, index\n          ) in sidenav\"\n        >\n          <v-divider\n            v-if=\"subheader && label !== '' && index !== 0\"\n            :key=\"`${label}-divider`\"\n          ></v-divider>\n          <v-subheader :key=\"label\" v-if=\"subheader && label !== ''\">{{\n            label\n          }}</v-subheader>\n          <v-list-item\n            v-else\n            :key=\"route\"\n            :value=\"route\"\n            @click=\"goTo(route)\"\n            :disabled=\"disabled()\"\n            link\n          >\n            <v-list-item-icon>\n              <v-icon>{{ icon }}</v-icon>\n            </v-list-item-icon>\n\n            <v-list-item-content>\n              <v-list-item-title>{{ label }}</v-list-item-title>\n            </v-list-item-content>\n          </v-list-item>\n        </template>\n      </v-list-item-group>\n    </v-list>\n    <v-spacer ></v-spacer>\n    <img src=\"PoCR_Logo.png\" width=\"100%\">\n  </v-navigation-drawer>\n</template>\n\n<script>\nimport { get } from \"vuex-pathify\";\nimport { routes } from \"@/router\";\n\nexport default {\n  props: {\n    value: Boolean,\n  },\n  data: () => ({\n    drawer: true,\n  }),\n  watch: {\n    value() {\n      this.drawer = this.value;\n    }\n  },\n  computed: {\n    ...get([\"mmIsOpen\", \"config\"]),\n    ...get(\"auth\", [\"registered\"]),\n    ...get(\"status\", [\"approved\"]),\n    sidenav() {\n      // Filter the routes to keep the ones that could appear in the sidenav,\n      // and map them to a more usable object\n      const list = routes\n        .filter((r) => r?.meta?.displayInSidenav !== undefined)\n        .map((r) => ({\n          icon: \"mdi-wallet\",\n          label: r.name.charAt(0).toUpperCase() + r.name.slice(1),\n          route: r.name,\n          meta: r.meta,\n          restricted: r.meta.restricted,\n          disabled: () =>\n            this.mmIsOpen ||\n            (r.meta.restricted && !r.meta.restricted({ store: this.$store })),\n          hidden: r.meta.hidden,\n        }));\n\n      const nav = [];\n      const categories = [];\n      \n      for (const el of list) {\n        if (el.hidden && el.hidden({ store: this.$store, config: this.config })) continue;\n        if (\n          el.meta &&\n          el.meta.displayInSidenav !== \"\" &&\n          !categories.includes(el.meta.displayInSidenav)\n        ) {\n          nav.push({ subheader: true, label: el.meta.displayInSidenav });\n          categories.push(el.meta.displayInSidenav);\n        }\n        nav.push(el);\n      }\n      return nav;\n    },\n  },\n\n  mounted() {\n    console.log(\"routes\", routes);\n  },\n\n  methods: {\n    drawerChange() {\n      // console.log(\"Drawer displayed changed\", this.value, this.drawer);\n      this.$emit(\"input\", this.drawer);\n    },\n    goTo(routeName) {\n      if (this.$route.name === routeName) return;\n      this.$router.push({ name: routeName });\n    },\n  },\n};\n</script>\n\n<style></style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AppMenu.vue?vue&type=template&id=07196983&\"\nimport script from \"./AppMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./AppMenu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-dialog',{attrs:{\"width\":\"500\",\"persistent\":\"\"},model:{value:(_vm.display),callback:function ($$v) {_vm.display=$$v},expression:\"display\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Transaction authentication\")]),_c('v-card-text',[_vm._v(\" Enter the password for the wallet \"+_vm._s(_vm.walletAddress)+\" : \"),_c('v-text-field',{attrs:{\"type\":\"password\"},model:{value:(_vm.walletPassword),callback:function ($$v) {_vm.walletPassword=$$v},expression:\"walletPassword\"}}),_c('div',{staticStyle:{\"color\":\"red\"}},[_vm._v(_vm._s(_vm.errorMessage))])],1),_c('v-card-actions',[_c('v-btn',{on:{\"click\":_vm.cancel}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"loading\":_vm.loading,\"disabled\":_vm.walletPassword === '' || _vm.loading},on:{\"click\":_vm.submit}},[_vm._v(\" Confirm \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-dialog\n    v-model=\"display\"\n    width=\"500\"\n    persistent\n  >\n    <v-card>\n      <v-card-title>Transaction authentication</v-card-title>\n      <v-card-text>\n        Enter the password for the wallet {{ walletAddress }} :\n        <v-text-field type=\"password\" v-model=\"walletPassword\" />\n        <div style=\"color: red\">{{ errorMessage }}</div>\n      </v-card-text>\n      <v-card-actions>\n        <v-btn @click=\"cancel\">Cancel</v-btn>\n        <v-btn\n          @click=\"submit\"\n          :loading=\"loading\"\n          :disabled=\"walletPassword === '' || loading\"\n        >\n          Confirm\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n<script>\nexport default {\n\n  data: () => ({\n    walletAddress: null,\n    errorMessage: null,\n    display: false,\n    loading: false,\n    walletPassword: \"\",\n    // functions as a data fields to be called by the component\n    submit: ()=>{}, \n    cancel: ()=>{}\n  }),\n\n  methods: {\n    /** This method is to be registered in the central store to be passed into the \n     * new Web3CustodyFunctionProvider(provider, custody, wallet, <here>)\n     * to allow user to interact with the authentication process\n     */\n    async authenticate(address, api) {\n      if (!address || !api) throw new Error(\"Invalid call to the authenticate function, missing parameters\");\n      this.walletAddress = address;\n      this.display = true;\n\n      try {\n        // console.log(\"authenticate function with api\",address, api);\n        // create a promise to wait for the user interactions\n        // the body of the promise links two functions (submit and cancel) to the component to receive \n        // the click events\n        const token = await new Promise( (resolve, reject)=>{\n          // function to receive the submit click event\n          async function submit() {\n            if (this.walletAddress && this.walletPassword) {\n              this.loading = true;\n              try {\n                // calls the api to get the token\n                const token = await api.authenticate(this.walletAddress, this.walletPassword);\n                if (!token) throw new Error(\"Missing token from authenticate without real error\") // should not happen\n                // returns the authentication token\n                resolve(token);\n              } catch (error) {\n                this.errorMessage = error.message;\n              } finally {\n                this.loading = false;\n              }\n            } else {\n              reject(new Error(\"No wallet address or password\"))\n            }\n          }\n          // function to receive the cancel click event\n          function cancel() {\n            reject(new Error(\"Authentication cancelled by user\"));\n          }\n          // link the functions to the component (using data instead of methods works fine :-) )\n          this.submit = submit.bind(this);\n          this.cancel = cancel.bind(this);\n        });\n\n        // returns the token obtained from the promise\n        return token;\n      } finally {\n        // in case of exception, we should clear the fields and close the dialog\n        this.walletPassword = \"\";\n        this.errorMessage = null;\n        this.display = false;\n      }\n\n    }\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WalletAuthenticationDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WalletAuthenticationDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WalletAuthenticationDialog.vue?vue&type=template&id=424a8a38&\"\nimport script from \"./WalletAuthenticationDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./WalletAuthenticationDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <v-app id=\"inspire\">\n    <v-container>\n      <app-menu v-model=\"drawerDisplayed\"></app-menu>\n      <v-app-bar app clipped-left flat color=\"teal lighten-2\">\n        <v-app-bar-nav-icon v-if=\"!drawerDisplayed\" @click=\"showDrawer\"></v-app-bar-nav-icon>\n        <v-toolbar-title @click=\"goTo('welcome')\">Proof of Carbon Reduction</v-toolbar-title>\n        <v-spacer></v-spacer>\n        <v-chip\n          class=\"ma-2\"\n          color=\"blue\"\n          text-color=\"white\"\n        >\n          {{walletRole}}\n        </v-chip> \n        <v-chip\n          v-if=\"wallet\"\n          class=\"ma-2\"\n          color=\"blue\"\n          text-color=\"white\"\n        >\n          <v-icon @click=\"disconnect\" class=\"mr-1\">mdi-close</v-icon> {{wallet}}\n        </v-chip>\n        <v-chip\n          class=\"ma-2\"\n          color=\"blue\"\n          text-color=\"white\"\n        >\n          {{currentBlockNumber}}\n        </v-chip> \n        <v-chip\n          class=\"ma-2\"\n          color=\"blue\"\n          text-color=\"white\"\n        >\n          {{chainName}}\n        </v-chip> \n\n      </v-app-bar>\n\n      <v-main>\n        <v-container class=\"py-8\">\n          <router-view></router-view>\n        </v-container>\n      </v-main>\n    </v-container>\n    <v-overlay :value=\"mmIsOpen\">\n      <v-progress-circular indeterminate></v-progress-circular>\n    </v-overlay>\n    <v-overlay :value=\"mmConnecting\">\n      <v-card>\n        <v-card-title>Authorize the connection of the website to the browser wallet</v-card-title>\n        <v-card-actions>\n          <v-btn @click=\"cancelWalletConnection\">Cancel</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-overlay>\n    <v-snackbar\n      v-model=\"displaySnackbar\"\n      multi-line\n      :color=\"snackbarColor\"\n      right\n    >\n      {{ snackbarMessage }}\n    </v-snackbar>\n    <wallet-authentication-dialog\n      ref=\"walletAuthenticationDialog\"\n    ></wallet-authentication-dialog>\n  </v-app>\n</template>\n\n<script>\nimport AppMenu from \"./components/AppMenu.vue\";\nimport WalletAuthenticationDialog from \"./components/WalletAuthenticationDialog.vue\";\nimport { get, sync, call } from \"vuex-pathify\";\nimport $store from \"@/store/index\";\n\nexport default {\n  components: { AppMenu, WalletAuthenticationDialog },\n  data: () => ({\n    drawerDisplayed: true\n  }),\n\n  computed: {\n    ...sync([\"displaySnackbar\", \"snackbarMessage\", \"snackbarColor\"]),\n    ...get([\"mmIsOpen\"]),\n    ...get(\"auth\", [\"wallet\", \"walletRole\", \"chainName\", \"mmConnecting\"]),\n    ...get(\"nodes\", [\"currentBlockNumber\"]),\n  },\n\n  methods: {\n    ...call(\"auth\", [\"detectProvider\", \"disconnect\", \"cancelWalletConnection\"]),\n    showDrawer() {\n      this.drawerDisplayed = true;\n    },\n    goTo(routeName) {\n      if (this.$route.name === routeName) return;\n      this.$router.push({ name: routeName });\n    },\n  },\n\n  mounted() {\n    // record the authentication function to make it available in api.js\n    $store.set(\"auth/walletAuthenticationFunction\", this.$refs.walletAuthenticationDialog.authenticate);\n    // this.detectProvider();\n  }\n};\n</script>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=0fe1e1ca&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport Vuetify from \"vuetify\";\nimport \"vuetify/dist/vuetify.min.css\";\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n    theme: {\n        themes: {\n            light: {\n                primary: \"#607d8b\",\n                secondary: \"#009688\",\n                accent: \"#4caf50\",\n                error: \"# e91e63\",\n                warning: \"#cddc39\",\n                info: \"#3f51b5\",\n                success: \"#8bc34\",\n            },\n        },\n    },\n});","\nexport function setupAuthNavigationGuard(router, store) {\n  router.beforeEach(async (to, from, next) => {\n    console.log(from.name,\"--->\", to.name , store.state.initialized, store.state.auth.providerModel)\n    if (to.name == \"welcome\") return next();\n    if (to.name == \"logs\") return next();\n    if (!store.state.initialized) return next({name:\"welcome\"})\n\n    \n    try {\n      if (to.name == \"installMetaMask\") return next();\n      if (store.state.auth.providerModel == \"none\") return next({name:\"installMetaMask\"});\n      if (to.name == \"authentication\") return next();\n      if (store.state.auth.providerModel == \"both\") return next({name:\"authentication\"});\n      if (store.state.auth.providerModel == \"switchMetamask\") return next({name:\"installMetaMask\"});\n      \n      // You're going to a non-auth route, keep going.\n      if (!to.meta || typeof to.meta.restricted !== \"function\") return next();\n      // check that the current connected user has the right to go there\n      if (!to.meta.restricted({ store })) return next({ name: to.meta.forceRedirectTo || \"dashboard\" });\n\n      console.log(from.name,\"--->\", to.name, \"ends\") \n      return next()\n    } catch (error) {\n        console.error(\"Something happened when routing from \"+from.name+\" to \"+to.name, error.message)\n        return next({name:\"welcome\"})\n    }\n  })\n}\n","import Vue from 'vue'\nimport App from './App.vue'\nimport vuetify from './plugins/vuetify'\nimport 'roboto-fontface/css/roboto/roboto-fontface.css'\nimport '@mdi/font/css/materialdesignicons.css'\nimport '@mdi/js'\n\nimport store from \"./store/index\"\nimport router from './router'\nimport { setupAuthNavigationGuard } from '@/lib/initialization'\n\nVue.config.productionTip = false\n\nsetupAuthNavigationGuard(router, store);\n\nnew Vue({\n  vuetify,\n  store,\n  router,\n  render: h => h(App)\n}).$mount('#app');"],"sourceRoot":""}