{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/lib/bigint-polyfill.js","webpack:///./src/components/ClimateIndicator.vue?35de","webpack:///./src/App.vue?bc37","webpack:///./src/components/AppMenu.vue?b603","webpack:///./src/pages/InstallMetaMask.page.vue?14f4","webpack:///./src/lib/config-file.js","webpack:///./src/lib/ethereum-compatible-wallet.js","webpack:///src/pages/InstallMetaMask.page.vue","webpack:///./src/pages/InstallMetaMask.page.vue?4233","webpack:///./src/pages/InstallMetaMask.page.vue","webpack:///./src/pages/Auth.page.vue?8a81","webpack:///./src/plugins/pathify.js","webpack:///./src/lib/const.js","webpack:///./src/store/nodes.js","webpack:///./src/store/auth.js","webpack:///./src/lib/numbers.js","webpack:///./src/store/history.js","webpack:///./src/store/pledge.js","webpack:///./src/store/status.js","webpack:///./src/store/nodeGovernance.js","webpack:///./src/store/climate.js","webpack:///./src/store/index.js","webpack:///./src/lib/async-local-storage.js","webpack:///./src/lib/api.js","webpack:///src/pages/Auth.page.vue","webpack:///./src/pages/Auth.page.vue?c349","webpack:///./src/pages/Auth.page.vue","webpack:///./src/pages/Welcome.page.vue?bf1e","webpack:///src/pages/Welcome.page.vue","webpack:///./src/pages/Welcome.page.vue?10e8","webpack:///./src/pages/Welcome.page.vue","webpack:///./src/pages/Dashboard.page.vue?dbc5","webpack:///./src/lib/colors.js","webpack:///./src/components/ExplorerRedirect.vue?f22e","webpack:///src/components/ExplorerRedirect.vue","webpack:///./src/components/ExplorerRedirect.vue?5534","webpack:///./src/components/ExplorerRedirect.vue","webpack:///./src/components/ClimateIndicator.vue?61e0","webpack:///src/components/ClimateIndicator.vue","webpack:///./src/components/ClimateIndicator.vue?350b","webpack:///./src/components/ClimateIndicator.vue?f60c","webpack:///src/pages/Dashboard.page.vue","webpack:///./src/pages/Dashboard.page.vue?384f","webpack:///./src/pages/Dashboard.page.vue","webpack:///./src/pages/Auditors.page.vue?adbe","webpack:///src/pages/Auditors.page.vue","webpack:///./src/pages/Auditors.page.vue?2562","webpack:///./src/pages/Auditors.page.vue","webpack:///./src/pages/Audit.page.vue?da3f","webpack:///src/pages/Audit.page.vue","webpack:///./src/pages/Audit.page.vue?8ac8","webpack:///./src/pages/Audit.page.vue","webpack:///./src/pages/History.page.vue?4857","webpack:///src/pages/History.page.vue","webpack:///./src/pages/History.page.vue?d2e4","webpack:///./src/pages/History.page.vue","webpack:///./src/pages/Pledge.page.vue?b6c7","webpack:///src/pages/Pledge.page.vue","webpack:///./src/pages/Pledge.page.vue?6915","webpack:///./src/pages/Pledge.page.vue","webpack:///./src/pages/Status.page.vue?625a","webpack:///src/pages/Status.page.vue","webpack:///./src/pages/Status.page.vue?bae4","webpack:///./src/pages/Status.page.vue","webpack:///./src/pages/ConfiscatedPledge.page.vue?3968","webpack:///src/pages/ConfiscatedPledge.page.vue","webpack:///./src/pages/ConfiscatedPledge.page.vue?e160","webpack:///./src/pages/ConfiscatedPledge.page.vue","webpack:///./src/pages/Improvements.page.vue?0448","webpack:///src/pages/Improvements.page.vue","webpack:///./src/pages/Improvements.page.vue?28f9","webpack:///./src/pages/Improvements.page.vue","webpack:///./src/pages/Logger.page.vue?bd6b","webpack:///src/pages/Logger.page.vue","webpack:///./src/pages/Logger.page.vue?f5fd","webpack:///./src/pages/Logger.page.vue","webpack:///./src/router.js","webpack:///src/components/AppMenu.vue","webpack:///./src/components/AppMenu.vue?55d1","webpack:///./src/components/AppMenu.vue","webpack:///./src/components/WalletAuthenticationDialog.vue?5440","webpack:///src/components/WalletAuthenticationDialog.vue","webpack:///./src/components/WalletAuthenticationDialog.vue?3cad","webpack:///./src/components/WalletAuthenticationDialog.vue","webpack:///src/App.vue","webpack:///./src/App.vue?60d0","webpack:///./src/App.vue","webpack:///./src/plugins/vuetify.js","webpack:///./src/lib/initialization.js","webpack:///./src/lib/track.js","webpack:///./src/main.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","nativeBigInt","global","BigInt","supportsNative","_BigInt","require","nativeFunction","operator","a","b","this","Proxy","obj","field","equals","toString","radix","littleEndian","elements","arr","ArrayBuffer","view","DataView","setBigUint64","Uint8Array","uint8arr","intarr","toArray","set","reverse","_toUint8ArrayNative","_toUint8Array","array","detectSupport","buffer","getBigUint64","Array","from","fromArray","_vm","_h","$createElement","_c","_self","attrs","model","callback","$$v","drawerDisplayed","expression","_e","on","showDrawer","$event","goTo","_v","staticClass","_s","walletRole","disconnect","wallet","currentBlockNumber","chainName","mmIsOpen","mmConnecting","cancelWalletConnection","snackbarColor","displaySnackbar","snackbarMessage","ref","staticRenderFns","drawerChange","drawer","$route","_l","index","icon","label","route","disabled","subheader","providerMetamask","_m","network","chainId","title","activateOrInstall","parseUrl","url","acceptedProtocols","isArray","map","endsWith","toLowerCase","u","URL","includes","protocol","error","cleanUpConfig","config","activate_log","networks","explorers","nodeUrl","walletCustodyAPIBaseUrl","explorerUrl","chainID","getDefaultNetwork","find","default","changeDefaultNetwork","getNetworkList","getExplorerUrl","detectEthereumProvider","mustBeMetaMask","silent","timeout","_validateInputs","handled","Promise","resolve","handleEthereum","console","log","removeEventListener","ethereum","isMetaMask","message","undefined","addEventListener","once","setTimeout","Error","getEthereumProviderChainInfo","provider","connected","request","method","isConnected","Number","chainIdHex","networkVersion","getEthereumProviderConnectedAccounts","completed","then","accounts","catch","errorLike","providerError","code","decoded","JSON","parse","unlockEthereumProviderAccounts","notifier","reject","switchEthereumProviderNetwork","address","test","params","switchError","computed","mounted","methods","noRedirect","info","rpcUrls","nativeCurrency","blockExplorerUrls","router","component","openWeb3DirectAnonymousConnection","prepareOpenMetaMaskConnectionDialog","goToInstallMetamask","prepareOpenWeb3DirectConnectionDialog","selectedNetwork","wallets","updateWallet","show","password","pathify","options","mapping","ROLES","VISITOR","AUDITED_NODE","NEW_NODE","APPROVED_AUDITOR","PENDING_AUDITOR","USER_CONNECTED","CRIPBaseUrl","governanceAddress","totalCRCAddress","sessionVariableTotalPocRCoins","GeneratedCRCTotalHash","web3","utils","keccak256","MAX_BLOCKS_TO_KEEP","state","nbOfNodes","totalFootprint","totalCrypto","sealers","chainUpdateSubscription","blocks","currentWalletBalanceWei","backupLoop","timeSinceLastBlock","average","reduce","getters","rewardsByBlock","rewards","sealer","lastReward","unshift","averageReward","averageDelaySec","minIndex","Math","min","delays","previousBlock","lastBlock","receivedAt","sum","v","lastBlockNumber","block","number","mutations","make","updateSealerDetails","carbonFootprint","$store","intf","_intf","eth","getBalance","balance","toBN","bal","parseFloat","fromWei","footprint","processBlock","Date","toTimeString","difficulty","blockNumber","totalCryptoB4","getStorageAt","poaBlockHashToSealerInfo","delta","sub","nbNodes","parseInt","now","warn","rewindToCommonRoot","removeLastBlock","pop","vanity","custom","hash","si","findIndex","sealedBlocks","last","parentHash","getBlock","actual","logicOnNewBloc","actions","fetchAllValues","dispatch","initBackupLoop","commit","clearInterval","setInterval","root","fetchNumberOfNodes","readOnlyCall","fetchTotalFootprint","updateNodesStatus","isActive","subscribeToChainUpdates","rootState","unsubscribe","auth","lastBlockInMemory","subscription","subscribeNewBlocks","maxBlocks","firstBlock","blockProcessing","blocksWaiting","processingFunc","baseFeePerGas","ok","unsubscribeToChainUpdates","insertNewBlock","getWalletBalance","discoverNotRunningSealers","contract","prov","Web3FunctionProvider","deployedAt","sealerAddress","found","isSealer","discoverNotRunningSealersOld","events","CarbonFootprintUpdate","fromBlock","returnValues","node","fetchChainInformations","getChainId","blockNumbers","nodes","getBlockNumber","max","all","loadedBlocks","fetchOneNodeInfo","updateFootprint","handleMMResponse","writeCall","namespaced","chainsNetworks","providerDirect","providerAnonymous","providerModel","custodyModel","custodyApiUrl","delegatedWallet","registered","isNode","isVoterNode","isAuditor","isAuditorApproved","walletAuthenticationFunction","mmConnectionNotifier","EventEmitter","detectMetamask","chainChanged","location","pathname","origin","href","removeListener","chain","detectDirectAccess","existingProvider","defaultNetwork","getWeb3ProviderFromUrl","getAnonymounsDefaultNetwork","createDirectAnonymousAccess","rpc","stringify","wsRpc","startsWith","explorer","e","checkNetworkProofOfCarbonReduction","setWalletAttributes","fetchRole","sealerNode","delegateOf","setConnection","store","Web3","ens","myWeb3","detectProvider","renew","fetch","res","json","filter","getContractInstance","currentModel","nbProviders","attemptToConnectWallet","reactToMetamaskLockUnlock","addresses","getCustodyLastWallets","emit","openMetaMaskConnectionDialog","openWeb3DirectConnectionDialog","verifyCustodyAuthentication","token","fetchIsRegistered","selfRegister","writeCallWithOptions","maxGas","GWEI_FACTOR","pow","ETH_FACTOR","toWebBigInt","bi","BigNumber","toEther","div","toWei","multipliedBy","to1000s","decimals","intl","Intl","NumberFormat","style","minimumFractionDigits","maximumFractionDigits","format","pledgeHistory","footprintHistory","appendFootprint","appendPledge","allContracts","at","fetchFootprintHistory","getTransaction","transactionHash","tx","auditor","txHash","foundSealer","nodeName","auditorName","fetchPledgeHistory","AmountPledged","pledge","amountAdded","amountRemoved","total","minPledgeAmount","pledgedAmount","redeemBool","fetchBalance","fetchCanTransferPledge","fetchMinPledgeAmount","fetchPledgedAmount","addToPledge","amount","redeemPledge","approved","approbationVotes","fetchIsApproved","fetchApprobationVotes","votes","nbAuditors","auditors","fetchAllAuditorsValues","fetchNbAuditors","fetchAuditorsInfos","nodeAdr","floor","minVotes","nbVotes","currentVote","isApproved","fetchConfiscatedPledge","confiscated","voteAuditor","context","auditorAddress","accept","indicators","totalWeight","efDecimals","functionalUnit","fromSingleIndicator","reverseSingleIndicator","toSingleIndicator","values","calculateSingleIndicator","processIndicators","conf","indicator","definition","unit","normalisationFactor","weight","valueEq","indicatorValues","w","fetchIndicators","envUrl","searchParams","has","uConf","delete","status","processed","Vue","use","Vuex","initialized","tryingToConnect","logs","Store","history","nodeGovernance","climate","plugins","plugin","errorFlash","fetchConfig","configUrl","startInitialization","wrapConsoleLogging","failMsg","watch","oldLog","oldError","oldWarn","addLineInBody","payload","document","getElementById","body","createElement","setAttribute","insertBefore","firstElementChild","pre","innerHTML","type","args","join","appendChild","AsyncLocalStorage","keys","keyList","localStorage","getItem","setItem","removeItem","group","LocalStorage","currentProvider","walletAddress","getContractInstanceByName","contractName","instance","getCustodyApi","custodyUrl","custody","WalletCustodyApiImpl","savedWallets","Set","api","authenticate","list","authFunction","Web3CustodyFunctionProvider","globalTimerList","globalTimerIndex","globalTimerId","globalTimerLastExecution","globalTimerFunction","id","when","setImmediate","initGlobalTimer","cb","delayMs","startAt","MAX_SAFE_INTEGER","clearTimeout","forEach","ev","__id","providerSendAsync","sendAsync","skipCache","send","rej","getBlockByNumber","subs","captureRejections","timer","runLoop","props","lastCheck","methodName","readOnlyCallWithOptions","wrapSend","convertMMErrorMessage","split","comment","target","err","collectDataFunction","cmd","isTx","getCallData","promise","errorCallback","response","blockHash","gasUsed","hasProviderMetamask","hasProviderDirect","hasCustodyApi","metamask","$router","goToDashboard","routeName","lastBlockNoTurnSealing","toFixed","avgFootprint","minFootprint","maxFootprint","gradientGreenToRed","scopedSlots","_u","fn","sealersHeaders","item","totalSealedBlocks","colorGradient","fadeFraction","rgbColor1","rgbColor2","rgbColor3","color1","color2","fade","diffRed","red","diffGreen","green","diffBlue","blue","gradient","highColor","mediumColor","lowColor","open","validator","displayed","ind","_g","_b","components","Explorer","ClimateIndicator","nbBlocksToKeep","sealerMap","sealersReward","text","align","sealersSorted","nb","sealersFootprint","sealersAddress","sealersLabels","tableHeadersAuditors","nodeVote","computeLabel","sortable","switchState","tableHeaders","openUpdateFootprintDialog","footprintDialog","selectedSealer","newFootprintValue","submitNewFootprint","staticStyle","editingIndicator","cancelEditField","applyEditField","$set","editField","editingIndicators","newFootprintValueDisplay","currentTab","footprintTableHeaders","pledgeTableHeaders","amountToAdd","pledgeMore","intervalId","beforeRouteLeave","to","next","currentWalletBalanceEth","registerDelegateCommandLine","totalPledge","CRIPsUrl","lastCRIPCreated","reserveCRIP","CRIPS","cripsTableHeaders","createdBlock","voteFromContent","voteFromBlock","voteUntilContent","voteUntilBlock","auditorsFor","auditorsAgainst","nodesFor","nodesAgainst","canVote","userVote","userVotes","votesTableHeaders","fetchCRIPS","fetchUserVotes","currentBlock","count","crip","voter","approval","decision","inVotingPeriod","nbBlocks","funct","VueRouter","walletIsntConnected","hasRole","role","not","f","opts","any","functions","routes","path","Welcome","meta","hidden","Dashboard","displayInSidenav","Status","restricted","forceRedirectTo","Improvements","InstallMetaMask","Auth","Auditors","ConfiscatedPledge","Pledge","Audit","History","Logger","redirect","base","oldPush","currentRoute","sidenav","el","nav","categories","$emit","display","walletPassword","errorMessage","cancel","loading","submit","AppMenu","WalletAuthenticationDialog","sync","Vuetify","theme","themes","light","primary","secondary","accent","warning","success","setupAuthNavigationGuard","beforeEach","appInsights","ApplicationInsights","connectionString","enableAutoRouteTracking","trackPageView","hostname","uri","loadAppInsights","event","trackException","exception","reason","productionTip","vuetify","render","h","App","$mount"],"mappings":"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","file":"js/index.936c29ca.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"index\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","const nativeBigInt = (typeof global !== 'undefined') && global.BigInt || (typeof window !== 'undefined') && window.BigInt;\nconst supportsNative = typeof nativeBigInt === 'function';\nconst _BigInt = require('big-integer');\n\nconst nativeFunction = function (operator, a) {\n    switch (operator) {\n      // Arithmetic operators\n      case 'add': return (b) => new BigInt(a + b);\n      case 'subtract': return (b) => new BigInt(a - b);\n      case 'multiply': return (b) => new BigInt(a * b);\n      case 'divide': return (b) => new BigInt(a / b);\n      case 'remainder': return (b) => new BigInt(a % b);\n      case 'pow': return (b) => new BigInt(a ** b);\n      // Bitwise shift operators\n      case 'shiftLeft': return (b) => new BigInt(a << b);\n      case 'shiftRight': return (b) => new BigInt(a >> b);\n      // Binary bitwise operators\n      case 'and': return (b) => new BigInt(a & b);\n      case 'or': return (b) => new BigInt(a | b);\n      case 'xor': return (b) => new BigInt(a ^ b);\n      // Relational operators\n      case 'lt': return (b) => a < b;\n      case 'gt': return (b) => a > b;\n      case 'leq': return (b) => a <= b;\n      case 'geq': return (b) => a >= b;\n      case 'eq': return (b) => a === b;\n      case 'neq': return (b) => a !== b;\n      // Unary operators\n      case 'negate': return () => new BigInt(- a);\n      case 'not': return () => new BigInt(~ a);\n      case 'next': return () => new BigInt(++a);\n      case 'prev': return () => new BigInt(--a);\n    }\n    return undefined;\n};\n\n/**\n * A proxy for BigInt that supports both native and polyfill implementations.\n * Also includes convenience functions for conversion to and from uint8 arrays\n * with both big and little endian byte order.\n * \n * Examples:\n *     const biNative = new BigInt(2n ** 63n - 1n));\n *     biNative.toUint8Array()\n * \n *     const biNonNative = new BigInt('9223372036854775807');\n *     biNonNative.toUint8Array()\n */\nclass BigInt {\n    constructor(value) {\n        if (typeof value === 'bigint') {\n            this.value = value;\n        } else if (value instanceof BigInt) {\n            return value; \n        } else {\n            this.value = new _BigInt(value);\n        }\n        // Proxy method calls to _BigInt if possible\n        return new Proxy(this, {\n            get(obj, field) {\n                if (field in obj) return obj[field];\n                if (typeof obj.value === 'bigint') return nativeFunction(field, obj.value);\n                if (typeof obj.value !== 'bigint' && field in obj.value) return obj.value[field].bind(obj.value);\n                return undefined;\n            }\n        });\n    }\n\n    valueOf() {\n        if (typeof this.value === 'bigint') {\n            return this.value;\n        } else {\n            return this;\n            //throw new Error('Cannot implicitly cast polyfilled BigInt into number')\n        }\n    }\n\n    equals(b) {\n        if (typeof this.value === 'bigint') {\n            return this.value === b.value;\n        } else if (b instanceof BigInt) {\n            if (typeof b.value === 'bigint') {\n                return this.value.equals(new _BigInt(b.toString()));\n            } else {\n                return this.value.equals(new _BigInt(b.value));\n            } \n        } else {\n            return this.value.equals(new _BigInt(b));\n        }\n    }\n\n    toString(radix) {\n        return this.value.toString(radix);\n    }\n\n    _toUint8ArrayNative(littleEndian = false, elements = 8) {\n        const arr = new ArrayBuffer(elements);\n        const view = new DataView(arr);\n        view.setBigUint64(0, this.value, littleEndian);\n        return new Uint8Array(arr);\n    }\n\n    _toUint8Array(littleEndian = false, elements = 8) {\n        const arr = new ArrayBuffer(elements);\n        const uint8arr = new Uint8Array(arr);\n        const intarr = this.value.toArray(2**8).value;\n        if (littleEndian) uint8arr.set(intarr.reverse(), 0);\n        else uint8arr.set(intarr, elements - intarr.length);\n        return uint8arr;\n    }\n\n    toUint8Array(littleEndian = false, elements = 8) {\n        if (typeof this.value === 'bigint') {\n            return this._toUint8ArrayNative(littleEndian, elements);\n        } else {\n            return this._toUint8Array(littleEndian, elements);\n        }\n    }\n\n    /**\n     * Get BigInt from a uint8 array in specified endianess.\n     * Uses native BigInt if the environment supports it and detectSupport is true.\n     * \n     * @param {Uint8Array} uint8arr\n     * @param {boolean} littleEndian use little endian byte order, default is false\n     * @param {boolean} detectSupport auto-detect support for native BigInt, default is true\n     */\n    static fromUint8Array(uint8arr, littleEndian = false, detectSupport = true) {\n        if (supportsNative && detectSupport) {\n            const view = new DataView(uint8arr.buffer);\n            return new BigInt(view.getBigUint64(0, littleEndian));\n        }\n        let array;\n        if (littleEndian) {\n            array = Array.from(uint8arr).reverse();\n        } else {\n            array = Array.from(uint8arr);\n        }\n        return new BigInt(_BigInt.fromArray(array, 2**8));\n    }\n}\n\nmodule.exports = BigInt;\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClimateIndicator.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{attrs:{\"id\":\"inspire\"}},[_c('v-container',[_c('app-menu',{model:{value:(_vm.drawerDisplayed),callback:function ($$v) {_vm.drawerDisplayed=$$v},expression:\"drawerDisplayed\"}}),_c('v-app-bar',{attrs:{\"app\":\"\",\"clipped-left\":\"\",\"flat\":\"\",\"color\":\"teal lighten-2\"}},[(!_vm.drawerDisplayed)?_c('v-app-bar-nav-icon',{on:{\"click\":_vm.showDrawer}}):_vm._e(),_c('v-toolbar-title',{on:{\"click\":function($event){return _vm.goTo('welcome')}}},[_vm._v(\"Proof of Climate awaReness\")]),_c('v-spacer'),_c('v-chip',{staticClass:\"ma-2\",attrs:{\"color\":\"blue\",\"text-color\":\"white\"}},[_vm._v(\" \"+_vm._s(_vm.walletRole)+\" \")]),(_vm.wallet)?_c('v-chip',{staticClass:\"ma-2\",attrs:{\"color\":\"blue\",\"text-color\":\"white\"}},[_c('v-icon',{staticClass:\"mr-1\",on:{\"click\":_vm.disconnect}},[_vm._v(\"mdi-close\")]),_vm._v(\" \"+_vm._s(_vm.wallet)+\" \")],1):_vm._e(),_c('v-chip',{staticClass:\"ma-2\",attrs:{\"color\":\"blue\",\"text-color\":\"white\"}},[_vm._v(\" \"+_vm._s(_vm.currentBlockNumber)+\" \")]),_c('v-chip',{staticClass:\"ma-2\",attrs:{\"color\":\"blue\",\"text-color\":\"white\"}},[_vm._v(\" \"+_vm._s(_vm.chainName)+\" \")])],1),_c('v-main',[_c('v-container',{staticClass:\"py-8\"},[_c('router-view')],1)],1)],1),_c('v-overlay',{attrs:{\"value\":_vm.mmIsOpen}},[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\"}})],1),_c('v-overlay',{attrs:{\"value\":_vm.mmConnecting}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Authorize the connection of the website to the browser wallet\")]),_c('v-card-actions',[_c('v-btn',{on:{\"click\":_vm.cancelWalletConnection}},[_vm._v(\"Cancel\")])],1)],1)],1),_c('v-snackbar',{attrs:{\"multi-line\":\"\",\"color\":_vm.snackbarColor,\"right\":\"\"},model:{value:(_vm.displaySnackbar),callback:function ($$v) {_vm.displaySnackbar=$$v},expression:\"displaySnackbar\"}},[_vm._v(\" \"+_vm._s(_vm.snackbarMessage)+\" \")]),_c('wallet-authentication-dialog',{ref:\"walletAuthenticationDialog\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-navigation-drawer',{attrs:{\"app\":\"\",\"clipped\":\"\",\"flat\":\"\"},on:{\"input\":_vm.drawerChange},model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:\"drawer\"}},[_c('v-divider'),_c('v-list',[_c('v-list-item-group',{attrs:{\"value\":_vm.$route.name,\"mandatory\":\"\",\"color\":\"primary\"}},[_vm._l((_vm.sidenav),function(ref,index){\nvar icon = ref.icon;\nvar label = ref.label;\nvar route = ref.route;\nvar disabled = ref.disabled;\nvar subheader = ref.subheader;\nreturn [(subheader && label !== '' && index !== 0)?_c('v-divider',{key:(label + \"-divider\")}):_vm._e(),(subheader && label !== '')?_c('v-subheader',{key:label},[_vm._v(_vm._s(label))]):_c('v-list-item',{key:route,attrs:{\"value\":route,\"disabled\":disabled(),\"link\":\"\"},on:{\"click\":function($event){return _vm.goTo(route)}}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(_vm._s(icon))])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(label))])],1)],1)]})],2)],1),_c('v-spacer'),_c('img',{attrs:{\"src\":\"PoCR_Logo.svg\",\"width\":\"100%\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.providerMetamask)?_c('div',[_c('div',[_vm._v(\"Install MetaMask and then reload this application.\")]),_vm._m(0)]):_vm._e(),(_vm.providerMetamask)?_c('div',[_c('v-row',_vm._l((_vm.networks),function(network){return _c('v-col',{key:network.chainId},[_c('v-card',[_c('v-card-title',[_vm._v(_vm._s(network.name))]),_c('v-card-text',[_c('div',[_vm._v(_vm._s(network.title))]),_c('div',[_vm._v(\"chainID: \"+_vm._s(network.chainId))])]),_c('v-card-actions',[_c('v-btn',{on:{\"click\":function($event){return _vm.activateOrInstall(network)}}},[_vm._v(\"Activate\")])],1)],1)],1)}),1)],1):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"Installation instructions available at \"),_c('a',{attrs:{\"href\":\"https://metamask.io/download/\",\"target\":\"_blank\"}},[_vm._v(\"https://metamask.io/download/\")])])}]\n\nexport { render, staticRenderFns }","\n\nexport function parseUrl(url, acceptedProtocols) {\n  if (acceptedProtocols && !Array.isArray(acceptedProtocols)) acceptedProtocols = [acceptedProtocols];\n  if (acceptedProtocols) acceptedProtocols = acceptedProtocols.map(p=>(p.endsWith(\":\")? p : p+':').toLowerCase());\n  \n  if (!url) return undefined;\n  try {\n      const u = new URL(url)\n      if (acceptedProtocols) {\n          if (!acceptedProtocols.includes(u.protocol)) return undefined\n      }\n      return u;\n  } catch (error) {\n      return undefined;\n  }\n}\n\nexport async function cleanUpConfig(config) {\n  // Configuration of the internal network is optional and may contains no, one or several networks\n\n  if (config.activate_log) {\n    config.activate_log = true;\n  } else {\n    config.activate_log = false;\n  }\n  // check the url of the server handling the private keys if not metamask\n  if ( !Array.isArray(config.networks)) config.networks = [];\n  const explorers = config.explorers||{};\n  for (const chainId in explorers) {\n    const url = explorers[chainId];\n    if (!parseUrl(url, [\"http\", \"https\"])) {\n      delete explorers[chainId];\n    }\n  }\n  config.explorers = explorers;\n\n  for (const network of config.networks) {\n    if (!parseUrl(network.nodeUrl, [\"http\", \"https\", \"ws\", \"wss\"])) {\n      delete network.nodeUrl;\n    }\n    if (!parseUrl(network.walletCustodyAPIBaseUrl, [\"http\", \"https\"])) {\n        delete network.walletCustodyAPIBaseUrl\n    }\n    if (!parseUrl(network.explorerUrl, [\"http\", \"https\"])) {\n      delete network.explorerUrl;\n    }\n    if (!network.explorerUrl) { // try to find a url in the explorers field\n      if (config.explorers[network.chainID]) {\n        network.explorerUrl = config.explorers[network.chainID];\n      }\n    }\n    // may add later some other verifications like the chain id matches the node \n  }\n  if (config.networks.length==0) {\n    config.networks.push({name: \"No network defined in the configuration\"})\n  }\n  return config;\n}\n\nexport function getDefaultNetwork(config) {\n  let result = config.networks.find( n=>n.default );\n  if (!result && config.networks.length>0) result = config.networks[0];\n  return result;\n}\n\nexport function changeDefaultNetwork(config, url) {\n  for (const network of config.networks) {\n    if (network.nodeUrl == url) {\n      network.default = true;\n    } else {\n      network.default = false;\n    }\n  }\n  return config;\n}\n\nexport function getNetworkList(config) {\n  return config.networks;\n}\n\nexport function getExplorerUrl(config, chainID) {\n  if (!config) return undefined;\n  if (!chainID) { // assume the default config\n    const network = getDefaultNetwork(config)\n    if (network && network.chainID) {\n      if (network.explorerUrl) return network.explorerUrl;\n      else return getExplorerUrl(config, network.chainID);\n    } else {\n      return undefined;\n    }\n  } else { // use the chain ID\n    if (config.explorers[chainID]) {\n      return config.explorers[chainID];\n    } \n  }\n  return undefined;\n}","\n\n/**\n * Test in the window object if the ethereum compatible wallet has been registered\n * @param {{mustBeMetaMask: boolean, silent: boolean, tiemout: number}} options: configure the behavior of the function. Default are  mustBeMetaMask = false, silent = false, timeout = 3000\n * @returns {Promise<Provider|undefined>} returns the web3 compatible provider that also support the following api https://docs.metamask.io/guide/ethereum-provider.html#table-of-contents\n * Does not raise Error\n */\nexport function detectEthereumProvider({\n  mustBeMetaMask = false,\n  silent = false,\n  timeout = 3000,\n} = {}) {\n  _validateInputs();\n  let handled = false;\n  return new Promise((resolve) => {\n    // Is the ethereum provider alredy registered ?\n    if (window.ethereum) {\n      handleEthereum();\n    } else {\n      // No, then await for the event that says so or the timeout duration\n      if (!silent) console.log(\n        \"detectEthereumProvider - no ethereum yet - wait for event or timeout\"\n      );\n      window.addEventListener(\"ethereum#initialized\", handleEthereum, {\n        once: true,\n      });\n      setTimeout(() => {\n        handleEthereum();\n      }, timeout);\n    }\n    function handleEthereum() {\n      // Now let's decide what to return\n      if (!silent) console.log(\"detectEthereumProvider - handleEthereum()\", handled);\n      if (handled) {\n        return;\n      }\n      handled = true;\n      window.removeEventListener(\"ethereum#initialized\", handleEthereum);\n      const { ethereum } = window;\n      if (!silent) console.log(\n        \"detectEthereumProvider - decide return value\",\n        ethereum,\n        mustBeMetaMask\n      );\n      if (ethereum && (!mustBeMetaMask || ethereum.isMetaMask)) {\n        resolve(ethereum);\n      } else {\n        const message =\n          mustBeMetaMask && ethereum\n            ? \"Non-MetaMask window.ethereum detected.\"\n            : \"Unable to detect window.ethereum.\";\n        !silent && console.error(\"detectEthereumProvider:\", message);\n        resolve(undefined);\n      }\n    }\n  });\n  function _validateInputs() {\n    if (typeof mustBeMetaMask !== \"boolean\") {\n      throw new Error(\n        `detectEthereumProvider: Expected option 'mustBeMetaMask' to be a boolean.`\n      );\n    }\n    if (typeof silent !== \"boolean\") {\n      throw new Error(\n        `detectEthereumProvider: Expected option 'silent' to be a boolean.`\n      );\n    }\n    if (typeof timeout !== \"number\") {\n      throw new Error(\n        `detectEthereumProvider: Expected option 'timeout' to be a number.`\n      );\n    }\n  }\n}\n\n/**\n * Returns the connected node info\n * @param {Provider} provider \n * @returns {{connected:boolean, chainId?: number, chainIdHex?: string, networkVersion?: number}}\n */\nexport async function getEthereumProviderChainInfo(provider) {\n  if (!provider) return {connected: false};\n  const chainId = await provider.request({ method: 'eth_chainId' })\n  \n  return {\n    connected: provider.isConnected(),\n    chainId: Number(chainId),\n    chainIdHex: `0x${ Number(chainId).toString(16)}`,\n    networkVersion: Number(provider.networkVersion),\n  }\n}\n\n/**\n * \n * @param {Provider} provider \n * @param {{timeout: boolean}} options with default {timeout=500 ms} \n * @returns {Promise<string[]>} an array of account address or an empty array if the wallet is locked. The first address of the array is the selected wallet.\n */\nexport async function getEthereumProviderConnectedAccounts(provider, {timeout = 500}={}) {\n  return new Promise((resolve) => {\n    console.log(\"getEthereumProviderConnectedAccounts\", timeout);\n    let completed = false;\n    // set the timeout to respond in case of blocked call on eth_accounts\n    setTimeout(() => {\n      if (completed) return;\n      console.log(\"getEthereumProviderConnectedAccounts Timed out\");\n      completed = true;\n      resolve([]);\n    }, timeout);\n    // submit the request to the wallet\n    // this mehod can block on brave wallet, but doesn't on metamask, hence the timeout\n    provider\n      .request({ method: \"eth_accounts\" })\n      .then((accounts) => {\n        if (completed) return;\n        console.log(\"getEthereumProviderConnectedAccounts got a result\", accounts);\n        completed = true;\n        resolve(accounts);\n      })\n      .catch(() => {\n        if (completed) return;\n        completed = true;\n        resolve([]);\n      });\n  });\n}\n\nfunction errorLike(error) {\n  return typeof error.message !== \"undefined\";\n}\n\n/**\n * Ensure the error is properly formatted as bet specification\n * @param {Error | string | any} error that will be converted into an Error \n * @param {number|undefined} code will be set to the resulting error if defined\n * @param {any|undefined} data will be set to the resulting error if defined\n * @returns \n */\nfunction providerError(error, code, data) {\n  if (!error) return undefined;\n  let result = error;\n  if (typeof result == \"string\") result = new Error(result);\n  if (!errorLike(result)) result = new Error(result);\n  if (typeof !result.code && typeof result.message == \"string\") {\n    try {\n      const decoded = JSON.parse(result.message);\n      result.code = decoded.code;\n      result.data = decoded.data;\n      result.message = decoded.message;\n    } catch (error) {\n      result.code = code || 0;\n    }\n  }\n  if (code) result.code = code;\n  if (data) result.data = data;\n  return result;\n}\n\n/**\n * Request the user to unlock the wallet and returns selected accounts\n * @param {Provider} provider \n * @param {EventEmitter} notifier an emmiter provided by the caller to request cancellation by emitting the 'cancel' event\n * @returns {Promise<string[]>} the connected account\n * If the wallet is not unlocked then the call remains pending until the `notifier.emit('cancel')` is called. In such case an error is raised with `error.code == 4001`.    \n * It can also raise an error with code `-32602` if there is already a pending request to unlock the wallet by this page or another\n */\nexport async function unlockEthereumProviderAccounts(provider, notifier) {\n  return await new Promise((resolve, reject) => {\n    let completed = false;\n    // catch the cancel event that can be provided by the user\n    notifier.once(\"cancel\", () => {\n      if (completed) return;\n      completed = true;\n      reject(providerError(\"Cancelled login\", 4001));\n    });\n    provider\n      .request({ method: \"eth_requestAccounts\" })\n      .then((accounts) => {\n        if (completed) return;\n        completed = true;\n        resolve(accounts);\n      })\n      .catch((error) => {\n        if (completed) return;\n        completed = true;\n        reject(providerError(error));\n      });\n  });\n}\n\n/**\n * Request switching to the provided network chainId and if it does not exists try creating the network if the info are provided and an address is provided\n * @param {Provider} provider \n * @param {{\n      chainId: string; \n      chainName?: string;\n      nativeCurrency?: {\n        name: string;\n        symbol: string; \n        decimals: number;\n      };\n      rpcUrls?: string[];\n      blockExplorerUrls?: string[];\n      iconUrls?: string[];\n    }} network information for selecting the network. If the optional info are not provided, the network won't be created \n * @param {string|undefined} address the account needed to request the network creation\n * @returns {Promise<void>}\n */\nexport async function switchEthereumProviderNetwork(provider, network, address) {\n  if (!provider) throw providerError(\"missing a valid provider\", -32602);\n  if (!network) throw providerError(\"missing the network parameter\", -32602);\n  if (!/0x[0-9a-fA-F]+/.test(network.chainId)) throw providerError(\"missing the network chainId as an hex string (0x123)\", -32602);\n  try {\n    await provider.request({\n      method: 'wallet_switchEthereumChain',\n      params: [{ chainId: network.chainId }],\n    });\n  } catch (switchError_) {\n    let switchError = providerError(switchError_);\n    // in mobile metamask wallet, the error code 4902 is not set but the error message contains the name of the function to use\n    if (/wallet_addEthereumChain/.test(switchError.message)) switchError.code = 4902;\n    // console.log(\"Fail switching to the network:\", switchError.code, switchError.message, address, network.chainName, \"test message\", /wallet_addEthereumChain/.test(switchError.message))\n    // This error code indicates that the chain has not been added to MetaMask.\n    if (switchError.code == 4902) {\n      if ( address && network.chainName ) {\n        try {\n          await provider.request({\n            method: 'wallet_addEthereumChain',\n            params: [\n              network, address\n            ],\n          });\n          \n        } catch (addError) {\n          // handle \"add\" error\n          // console.log(\"Fail adding network\", addError.message)\n          throw providerError(addError);\n        }\n      } else {\n        throw providerError(\"Cannot switch to the network because it does not exist and the call misses the network info and a valid account\", -32602, network)\n      }\n    }\n    // handle other \"switch\" errors\n    // console.log(\"Fail switching to the network:\"+switchError.message)\n    throw switchError;\n  }\n}","<template>\n  <div>\n    <div v-if=\"!providerMetamask\">\n      <div>Install MetaMask and then reload this application.</div>\n      <div>Installation instructions available at <a href=\"https://metamask.io/download/\" target=\"_blank\">https://metamask.io/download/</a></div>\n    </div>\n    <div v-if=\"providerMetamask\">\n      <v-row>\n        <v-col  v-for=\"network of networks\" :key=\"network.chainId\">\n          <v-card>\n            <v-card-title>{{network.name}}</v-card-title>\n            <v-card-text>\n              <div>{{network.title}}</div>\n              <div>chainID: {{network.chainId}}</div>\n            </v-card-text>\n            <v-card-actions>\n              <v-btn @click=\"activateOrInstall(network)\">Activate</v-btn>\n            </v-card-actions>\n          </v-card>\n        </v-col>\n      </v-row>\n    </div>\n  </div>\n</template>\n<script>\nimport { get, call } from \"vuex-pathify\";\nimport { getExplorerUrl } from '../lib/config-file';\nimport {switchEthereumProviderNetwork, getEthereumProviderChainInfo} from \"../lib/ethereum-compatible-wallet\";\nimport router from \"../router.js\";\n\nexport default {\n  data: ()=>({\n    // networks: []\n  }),\n  computed: {\n    ...get([\"config\"]),\n    ...get(\"auth\", [\"provider\", \"providerModel\", \"providerMetamask\", \"wallet\", \"chainsNetworks\"]),\n    networks(){ return this.chainsNetworks }\n  },\n\n  async mounted() {\n    // await this.detectProvider();\n    // const res = await fetch('https://chainid.network/chains.json')\n    // const all = await res.json()\n    // this.networks = all.filter(n=>n.chain == 'CRC')\n  },\n\n  methods: {\n    ...call([\"errorFlash\"]),\n    ...call(\"auth\", [\"detectProvider\", \"openMetaMaskConnectionDialog\", \"attemptToConnectWallet\"]),\n    async activateOrInstall(network) {\n      if (!this.providerMetamask) throw new Error(\"metamask has not been installed\")\n      const ethereum = this.providerMetamask.provider;\n      const chainId = '0x'+Number(network.chainId).toString(16);\n      const explorerUrl = getExplorerUrl(this.config, network.chainId);\n      try {\n        await this.openMetaMaskConnectionDialog({noRedirect: true});\n\n        if (!this.wallet) throw new Error(\"Could not find an account\");\n        const info = await getEthereumProviderChainInfo(ethereum);\n        if (info.chainId != network.chainId) {\n          await switchEthereumProviderNetwork(ethereum, {\n            chainId, \n            chainName: network.name,\n            rpcUrls: [...network.rpc],\n            nativeCurrency: network.nativeCurrency,\n            blockExplorerUrls: network.explorers.filter(e=>e.standard=='EIP3091').map(e=>e.url).concat(explorerUrl)\n          }, this.wallet)\n        } else {\n          this.attemptToConnectWallet()\n        }\n        router.push({ name: \"dashboard\" });\n      } catch (addError) {\n        // handle \"add\" error\n        this.errorFlash(\"Fail adding the network:\"+addError.message)\n      }\n    }\n  }\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InstallMetaMask.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InstallMetaMask.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InstallMetaMask.page.vue?vue&type=template&id=5625f91a&\"\nimport script from \"./InstallMetaMask.page.vue?vue&type=script&lang=js&\"\nexport * from \"./InstallMetaMask.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_vm._v(\"Anonymous access:\")]),_c('v-row',_vm._l((_vm.chainsNetworks),function(network){return _c('v-col',{key:network.chainId},[_c('v-btn',{staticClass:\" mr-3\",attrs:{\"color\":\"teal\",\"dark\":\"\"},on:{\"click\":function($event){return _vm.openWeb3DirectAnonymousConnection(network)}}},[_vm._v(_vm._s(network.name))]),_c('div',{staticClass:\"text-caption\"},[_vm._v(_vm._s(network.title))])],1)}),1),_c('br'),_c('br'),(_vm.hasProviderMetamask)?_c('div',[_c('div',[_vm._v(\"Authenticated access via Metamask:\")]),_c('v-row',[_c('v-col',[_c('v-btn',{staticClass:\" my-3\",attrs:{\"color\":\"teal\",\"dark\":\"\"},on:{\"click\":_vm.prepareOpenMetaMaskConnectionDialog}},[_vm._v(\"Connect Metamask Wallet\")])],1),_c('v-col',[_c('v-btn',{staticClass:\"mx-3 my-3\",attrs:{\"color\":\"teal\",\"dark\":\"\"},on:{\"click\":_vm.goToInstallMetamask}},[_vm._v(\"Switch / Install network\")])],1)],1)],1):_c('div',[_c('div',[_vm._v(\"Install Metamask to authenticate and then reload this application.\")]),_vm._m(0)]),_c('br'),_c('br'),(_vm.hasProviderDirect)?_c('div',[_c('div',[_vm._v(\"Authenticated access via wallet custody:\")]),_c('v-btn',{attrs:{\"color\":\"teal\",\"dark\":\"\"},on:{\"click\":_vm.prepareOpenWeb3DirectConnectionDialog}},[_vm._v(\"Connect with below configuration\")]),_vm._v(\" \"),_c('br'),_c('br'),_c('v-select',{attrs:{\"hint\":(\"node: \" + (_vm.selectedNetwork.nodeUrl) + \"; custody: \" + (_vm.selectedNetwork.walletCustodyAPIBaseUrl)),\"items\":_vm.networks,\"item-text\":\"name\",\"item-value\":\"nodeUrl\",\"persistent-hint\":\"\",\"return-object\":\"\",\"single-line\":\"\"},model:{value:(_vm.selectedNetwork),callback:function ($$v) {_vm.selectedNetwork=$$v},expression:\"selectedNetwork\"}}),(_vm.hasCustodyApi)?_c('div',[_c('br'),_c('v-combobox',{attrs:{\"label\":\"Enter the wallet address\",\"placeholder\":\"capture your wallet address\",\"outlined\":\"\",\"counter\":\"\",\"clearable\":\"\",\"search-input\":_vm.wallet,\"items\":_vm.wallets},on:{\"update:search-input\":_vm.updateWallet}}),_c('v-text-field',{attrs:{\"label\":\"Enter the wallet password\",\"placeholder\":\"capture your wallet password\",\"outlined\":\"\",\"type\":_vm.show?'text' : 'password'},on:{\"click:append\":function($event){_vm.show = !_vm.show}},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})],1):_vm._e()],1):_vm._e()],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"Installation instructions available at \"),_c('a',{attrs:{\"href\":\"https://metamask.io/download/\",\"target\":\"_blank\"}},[_vm._v(\"https://metamask.io/download/\")])])}]\n\nexport { render, staticRenderFns }","import pathify from 'vuex-pathify'\nexport default pathify\n\n// options\npathify.options.mapping = 'simple'\n// pathify.options.deep = false","import web3 from \"web3\";\n\nexport const ROLES = {\n  VISITOR : \"Visitor\",\n  AUDITED_NODE : \"Audited node\",\n  NEW_NODE : \"New node\",\n  APPROVED_AUDITOR : \"Approved auditor\",\n  PENDING_AUDITOR : \"Auditor\",\n  USER_CONNECTED : \"User\",\n}\n\nexport const CRIPBaseUrl = \"https://github.com/ethereum-pocr/CRIPs/blob/main/CRIPS\"\n\n\nexport const governanceAddress = \"0x0000000000000000000000000000000000000100\";\nexport const totalCRCAddress = \"0x0000000000000000000000000000000000000101\";\nconst sessionVariableTotalPocRCoins = \"GeneratedPocRTotal\";\nexport const GeneratedCRCTotalHash = web3.utils.keccak256(sessionVariableTotalPocRCoins);","import { make } from \"vuex-pathify\";\nimport { poaBlockHashToSealerInfo } from \"pocr-utils\";\nimport { Web3FunctionProvider } from \"@saturn-chain/web3-functions\";\nimport { readOnlyCall, intf as _intf, writeCall, handleMMResponse, getWalletBalance, subscribeNewBlocks } from \"@/lib/api\";\nimport { totalCRCAddress, GeneratedCRCTotalHash } from \"@/lib/const\";\nimport $store from \"@/store/index\";\n\nlet MAX_BLOCKS_TO_KEEP = 20;\n\nconst state = () => ({\n    chainId: 0,\n    nbOfNodes: 0,\n    totalFootprint: 0,\n    totalCrypto: 0,\n    sealers: [],\n    chainUpdateSubscription: null,\n    blocks: [],\n    currentBlockNumber: 0,\n    currentWalletBalanceWei: 0,\n    backupLoop: null,\n    timeSinceLastBlock: 0\n})\n\nconst average = (arr) => arr.reduce((a, b) => a + b, 0) / arr.length;\n\nconst getters = {\n    rewardsByBlock(state) {\n        const rewards = state.blocks.map((d) => d.sealer.lastReward);\n        rewards.unshift(0);\n        return rewards;\n    },\n    averageReward(state) {\n        if (state.blocks.length === 0) return 0;\n        const rewards = state.blocks.map((d) => d.sealer.lastReward);\n        return average(rewards);\n    },\n    averageDelaySec(state) {\n        if (state.blocks.length < 2) return 0;\n        const minIndex = state.blocks.length-Math.min(state.blocks.length, 11)\n        const delays = [];\n        for (let i=state.blocks.length-1; i>minIndex; i--) {\n            const previousBlock = state.blocks[i - 1];\n            const lastBlock = state.blocks[i];\n            delays.push((lastBlock.receivedAt - previousBlock.receivedAt) / 1000)\n        }\n        // console.log(\"Debug averageDelaySec\", minIndex, state.blocks.length, delays);\n        if (delays.length == 0) return 0;\n        return delays.reduce( (sum, v)=>v+sum, 0) / delays.length;\n    },\n    lastBlock(state) {\n        if (state.blocks.length === 0) return null;\n        return state.blocks[state.blocks.length - 1];\n    },\n    lastBlockNumber(state, getters) {\n        return getters.lastBlock?.block.number;\n    }\n}\n\nconst mutations = make.mutations(state);\n\nasync function updateSealerDetails(web3, sealer) {\n    const carbonFootprint = $store.get(\"auth/contract\");\n    const intf = _intf(web3);\n    const balance = web3.utils.toBN(await web3.eth.getBalance(sealer.address));\n    const bal = Number.parseFloat(web3.utils.fromWei(balance, \"ether\"));\n    const footprint = await carbonFootprint.footprint(intf.call(), sealer.address);\n    sealer.footprint = Number.parseFloat(footprint);\n    sealer.balance = bal;\n    sealer.lastReward = 0; //delta //normalRewardForFootprint(data.sealer.footprint, data.totalFootprint, data.nbNodes);\n\n    return sealer;\n}\n\nasync function processBlock(web3, block) {\n    console.log(\"ProcessBloc\", block.number, new Date().toTimeString());\n    const intf = _intf($store.get(\"auth/provider\"));\n    const carbonFootprint = $store.get(\"auth/contract\");\n\n    const data = { block, sealer: undefined }\n    try {\n        // if (typeof block.difficulty === \"string\" && !block.difficulty.startsWith('0x')) block.difficulty = Number.parseInt(block.difficulty);\n        block.difficulty = Number(block.difficulty||1);\n        const blockNumber = Number(block.number||0);\n        // Total and delta\n        let totalCryptoB4 = web3.utils.toBN(0);\n        let totalCrypto = web3.utils.toBN(0);\n        try {\n            totalCryptoB4 = web3.utils.toBN(await web3.eth.getStorageAt(totalCRCAddress, GeneratedCRCTotalHash, blockNumber -1))\n            totalCrypto = web3.utils.toBN(await web3.eth.getStorageAt(totalCRCAddress, GeneratedCRCTotalHash, blockNumber))\n        } catch (error) {\n            // can typically fails when the blockNumber is 128 block before the last block because of missing trie node\n            // In that case we ignore the calculation (zero)\n        }\n        // extract the sealer data\n        data.sealer = poaBlockHashToSealerInfo(block);\n        data.sealer = await updateSealerDetails(web3, data.sealer);\n        const delta = Number.parseFloat(web3.utils.fromWei(totalCrypto.sub(totalCryptoB4), \"ether\"));\n        data.sealer.lastReward = delta;\n        data.block.number = blockNumber;\n\n        const totalFootprint = await carbonFootprint.totalFootprint(intf.call())\n        const nbNodes = await carbonFootprint.nbNodes(intf.call())\n\n        data.totalFootprint = Number.parseInt(totalFootprint)\n        data.totalCrypto = Number.parseFloat(web3.utils.fromWei(totalCrypto, \"ether\"))\n        data.nbNodes = Number.parseInt(nbNodes)\n        data.receivedAt = Date.now();\n\n    } catch (error) {\n        console.warn(\"Error in preparing block\", error)\n        throw new Error(\"Fail processing block \"+block.number)\n    }\n    return data;\n}\n\nasync function rewindToCommonRoot(web3, blocks, sealers, block) {\n    // console.log(\"===> Rewinding\", \"block:\", block.number, \"nbblocks:\", blocks.length, \"head:\", blocks[blocks.length-1].block);\n    function removeLastBlock() {\n        const b = blocks.pop();\n        console.log(\"===> Removing\", b.block.number, b.sealer.vanity.custom, b.block.hash);\n        if (b && b.sealer && b.sealer.address) {\n            // we remove a blok so update the sealer counter\n            let si = sealers.findIndex(s=>s.address == b.sealer.address);\n            if (si>=0) {\n                sealers[si].sealedBlocks --;\n            }\n        }\n    }\n    if (blocks.length == 0) {\n        // console.log(\"===> blocks is empty, returning empty arrays\");\n        return {blocks:[], sealers:[]}\n    }\n    let last = blocks[blocks.length-1].block;\n    // if (last.hash == block.hash) console.log(\"===> Same head\", \"last \", \"hash:\", last.hash, \"parentHash:\", last.parentHash);\n    // if (last.hash == block.parentHash) console.log(\"===> Parent is the head\", \"block\", \"hash:\", last.hash, \"parentHash:\", block.parentHash); \n    // if (last.parentHash == block.parentHash) console.log(\"===> Same parents\", \"same hashes:\", last.hash == block.hash, \"same parentHashes:\", last.parentHash == block.parentHash);\n    if (last.hash == block.hash) return {blocks, sealers}; // the memory head is already the new block\n    if (last.hash == block.parentHash) return {blocks, sealers}; // the memory head is the parent of the new block\n    if (last.parentHash == block.parentHash) {\n        // the new block is not the same as the last saved one but it has the same root\n        // delete the last block and let process this new block\n        removeLastBlock();\n        return {blocks, sealers};\n    }\n    // the new block has nothing to do with the head of the local chain\n    // remove the last block in memory, get the actual previous block and try again\n    removeLastBlock();\n    const actual = await web3.eth.getBlock(block.parentHash, false);\n    ({blocks, sealers} = await rewindToCommonRoot(web3, blocks, sealers, actual));\n    return {blocks, sealers};\n}\n\nasync function logicOnNewBloc(web3, blocks, sealers, block) {\n    if (blocks.length>0 && blocks[blocks.length-1].block.hash == block.hash) return;\n    const data = await processBlock(web3, block);\n    // we have a block that is before the current block, remove the block up to that block\n    while (blocks.length>0 && blocks[blocks.length-1].block.number >= block.number) {\n        const b = blocks.pop();\n        if (b && b.sealer && b.sealer.address) {\n            // we remove a blok so update the sealer counter\n            let si = sealers.findIndex(s=>s.address == b.sealer.address);\n            if (si>=0) {\n                sealers[si].sealedBlocks --;\n            }\n        }\n    }\n    // let sealer = sealers.find(s=>s.address == data.sealer.address)\n    // console.log(\"logic on new block\", block.number, \"sealer:\", data.sealer.vanity.custom,\"hash:\", block.hash, \"parent:\", block.parentHash, \"nbBlocks:\", sealer?.sealedBlocks);\n    blocks.push(data);\n    while (blocks.length > MAX_BLOCKS_TO_KEEP) {\n        blocks.shift();\n    }\n\n    // Update the sealer of the block\n    let si = sealers.findIndex(s=>s.address == data.sealer.address);\n    if (si<0) { // not found\n        const sealer = {...data.sealer,sealedBlocks: 1}\n        console.log(\"Creating new sealer\", sealer);\n        sealers.push(sealer);\n    } else {\n        const sealer = {...sealers[si], ...data.sealer};\n        sealer.sealedBlocks ++;\n        sealers[si] = sealer;\n    }\n    return {blocks, sealers};\n\n}\n\nconst actions = {\n    async fetchAllValues({ dispatch }) {\n        await dispatch(\"fetchNumberOfNodes\");\n        await dispatch(\"fetchTotalFootprint\");\n        await dispatch(\"updateNodesStatus\");\n    },\n\n    async initBackupLoop({state, commit, dispatch}) {\n        if (state.backupLoop) {clearInterval(this.backupLoop)}\n        commit(\"timeSinceLastBlock\", 0)\n        const backupLoop = setInterval( async ()=>{\n            const lastBlock = $store.get(\"nodes/lastBlock\");\n            if (!lastBlock) return;\n            const timeSinceLastBlock = Date.now()-lastBlock.receivedAt;\n            if (timeSinceLastBlock > 60*1000) {\n                console.warn(\"No block update since more than 60 seconds. Force a subscription\");\n                // window.location.reload();\n                clearInterval(backupLoop);\n                try {\n                    await dispatch(\"unsubscribeToChainUpdates\");\n                    await dispatch(\"auth/disconnect\",{}, {root:true})\n                    // await dispatch(\"auth/detectProvider\", {renew: true}, {root:true})\n                    // await dispatch(\"subscribeToChainUpdates\")\n                } catch(error) {\n                    console.warn(\"Could not reinitialize the connection:\", error.message);\n                } finally {\n                    //setTimeout(()=>dispatch(\"initBackupLoop\"), 4000)\n                }\n            }\n            commit(\"timeSinceLastBlock\", timeSinceLastBlock)\n        }, 200);\n\n        commit(\"backupLoop\", backupLoop);\n    },\n\n    async fetchNumberOfNodes() {\n        const nbNodes = await readOnlyCall(\"nbNodes\");\n        $store.set(\"nodes/nbOfNodes\", Number.parseInt(nbNodes));\n    },\n\n    async fetchTotalFootprint() {\n        const totalFootprint = await readOnlyCall(\"totalFootprint\");\n        $store.set(\"nodes/totalFootprint\", Number.parseInt(totalFootprint));\n    },\n\n    async updateNodesStatus() {\n        const sealers = $store.get(\"nodes/sealers\")\n        for (const sealer of sealers) {\n            const s = await readOnlyCall(\"isSealer\", sealer.address)\n            // console.log(\"isSealer\", sealer);\n            sealer.isActive = s\n        }\n        $store.set(\"nodes/sealers\", sealers)\n    },\n\n    async subscribeToChainUpdates({ state, rootState, dispatch }) {\n        if (state.chainUpdateSubscription !== null) {\n            state.chainUpdateSubscription.unsubscribe();\n            $store.set(\"nodes/chainUpdateSubscription\", null);\n        }\n        await dispatch(\"fetchChainInformations\");\n\n        const web3 = rootState.auth.web3;\n        const lastBlockInMemory = state.blocks.length>0 ? state.blocks[state.blocks.length-1].block.number : undefined;\n        const subscription = subscribeNewBlocks(web3, {maxBlocks: MAX_BLOCKS_TO_KEEP, firstBlock:lastBlockInMemory}) //web3.eth.subscribe(\"newBlockHeaders\");\n        let blockProcessing = false;\n        let blocksWaiting = [];\n        const processingFunc = async (block) => {\n            try {\n                if (block.baseFeePerGas == undefined) block = await web3.eth.getBlock(block.number);\n                await dispatch(\"insertNewBlock\", block);\n                return true;\n            } catch (error) {\n                // some error on the subscription processing\n                // if the error is due to the loss of connection it needs a reset of the connection\n                console.warn(\"Error on receiving a new block\", error);\n                blocksWaiting = []; // clear\n                return false;\n            }\n        }\n        subscription.on(\"data\", async block =>{\n            if (blockProcessing) blocksWaiting.push(block);\n            else try {\n                blockProcessing = true;\n                let ok = await processingFunc(block);\n                while( ok && (block = blocksWaiting.shift()) ) {\n                    ok = await processingFunc(block);\n                }\n\n                // if (!ok) {\n                //     subscription.unsubscribe();\n                //     $store.set(\"nodes/chainUpdateSubscription\", null);\n    \n                //     dispatch(\"subscribeToChainUpdates\");\n                // }\n\n            } finally {\n                blockProcessing = false;\n            }\n        });\n        $store.set(\"nodes/chainUpdateSubscription\", subscription);\n    },\n\n    unsubscribeToChainUpdates({commit, state}) {\n        if (state.chainUpdateSubscription !== null) {\n            state.chainUpdateSubscription.unsubscribe();\n            commit(\"chainUpdateSubscription\", null);\n        }\n    },\n\n\n\n    async insertNewBlock({ state, rootState, commit, dispatch }, block) {\n        const web3 = $store.get(\"auth/web3\");\n        commit(\"currentBlockNumber\", block.number);\n        if (rootState.auth.wallet) {\n            const bal = await getWalletBalance(rootState.auth.wallet);\n            commit(\"currentWalletBalanceWei\", bal);\n        }\n        try {\n\n            let {blocks, sealers} = await rewindToCommonRoot(web3, [...state.blocks], [...state.sealers], block);\n            ({blocks, sealers} = await logicOnNewBloc(web3, blocks, sealers, block));\n            \n            $store.set(\"nodes/blocks\", blocks);\n            $store.set(\"nodes/sealers\", sealers);\n            if (blocks.length>0) {\n                $store.set(\"nodes/totalCrypto\", blocks[blocks.length-1].totalCrypto)\n            }\n        } catch (error) {\n            // ignore that block\n        }\n        dispatch(\"fetchAllValues\");\n    },\n\n    async discoverNotRunningSealers({rootState, state}) {\n        const web3 = rootState.auth.web3;\n        const carbonFootprint = rootState.auth.contract;\n        const prov = new Web3FunctionProvider(rootState.auth.provider, ()=>Promise.resolve(carbonFootprint.deployedAt));\n        const sealers = [...state.sealers]; // make a copy of the sealers from the store\n        \n        const nbNodes = state.nbOfNodes;\n\n        // read the sealers from the contract\n        for (let index = 0; index < nbNodes; index++) {\n            const sealerAddress = await carbonFootprint.sealers(prov.call(), index);\n            let found = sealers.find(s=>s.address.toLowerCase() == sealerAddress.toLowerCase())\n            if (!found) {\n                const sealer = await updateSealerDetails(web3, {\n                    address: sealerAddress.toLowerCase(), \n                    vanity: {custom:\"Unknown innactive node\"},\n                    sealedBlocks: 0\n                })\n                // check again if it not already added, as the above can execute concurrently\n                const isSealer = await carbonFootprint.isSealer(prov.call(), sealer.address)\n                found = sealers.find(s=>s.address.toLowerCase() == sealer.address)\n                // we have collected the node data, but maybe it is not a node anymore\n                if (isSealer && found===undefined) {\n                    console.log(\"Adding an innactive sealer\", sealer);\n                    // keep in the local array variable \n                    sealers.push(sealer);\n                    // but also update the store with some delay to prevent concurrent race in other state setter\n                    setTimeout( ()=>$store.set(\"nodes/sealers\", sealers), 200);\n                }\n            }\n        }\n    },\n    discoverNotRunningSealersOld({rootState, state}) {\n        const web3 = rootState.auth.web3;\n        const contract = rootState.auth.contract;\n        const prov = new Web3FunctionProvider(rootState.auth.provider, ()=>Promise.resolve(contract.deployedAt));\n        const sealers = [...state.sealers]; // make a copy of the sealers from the store\n        contract.events.CarbonFootprintUpdate(prov.get({fromBlock: 1}), {})\n        .on(\"log\", async log=>{\n            // try to find the sealer in the list\n            let found = sealers.find(s=>s.address.toLowerCase() == log.returnValues.node.toLowerCase())\n            if (!found) {\n                const sealer = await updateSealerDetails(web3, {\n                    address: log.returnValues.node.toLowerCase(), \n                    vanity: {custom:\"Unknown innactive node\"},\n                    sealedBlocks: 0\n                })\n                // check again if it not already added, as the above can execute concurrently\n                found = sealers.find(s=>s.address.toLowerCase() == sealer.address)\n                // we have collected the node data, but maybe it is not a node anymore\n                if (sealer.footprint>0 && found===undefined) {\n                    console.log(\"Adding an innactive sealer\", sealer);\n                    // keep in the local array variable \n                    sealers.push(sealer);\n                    // but also update the store with some delay to prevent concurrent race in other state setter\n                    setTimeout( ()=>$store.set(\"nodes/sealers\", sealers), 200);\n                }\n            }\n        })\n    },\n\n    async fetchChainInformations({ rootState, dispatch }) {\n        const web3 = rootState.auth.web3;\n        // get the current chainId to knwow when the network changes\n        const chainId = await web3.eth.getChainId();\n        console.log(\"fetchChainInformations on\", chainId);\n        let blocks = [];\n        // the sealers array or create it\n        let sealers = [];\n        let blockNumbers = [];\n        if (chainId == rootState.nodes.chainId) {\n            // same chain, so keep existing info if any\n            // gets the eventually already available blocks to only request the new ones\n            blocks = [...(rootState.nodes.blocks||[])];\n            // the sealers array or create it\n            sealers = [...(rootState.nodes.sealers||[])];\n        } else {\n            // force an update of the data to reset\n            $store.set(\"nodes/blocks\", blocks);\n            $store.set(\"nodes/sealers\", sealers);    \n        }\n        $store.set(\"nodes/chainId\", chainId);\n        const lastBlockInMemory = blocks.length>0 ? blocks[blocks.length-1].block.number : 0;\n        const blockNumber = await web3.eth.getBlockNumber();\n        this.blockNumber = blockNumber;\n\n        MAX_BLOCKS_TO_KEEP = Math.max(rootState.nodes.nbOfNodes + 2, MAX_BLOCKS_TO_KEEP);\n\n        let index = Math.max(lastBlockInMemory+1, blockNumber - MAX_BLOCKS_TO_KEEP);\n        console.log(\"From block\", index, \"to\", blockNumber, \"sealers count\", sealers.length, \"blocks count\", blocks.length);\n\n        for (; index < blockNumber; index++) blockNumbers.push(index);\n        const loadedBlocks = await Promise.all(blockNumbers.map(index=>web3.eth.getBlock(index, false)));\n        for (const block of loadedBlocks) {\n            try {\n                const r = await logicOnNewBloc(web3, blocks, sealers, block);\n                blocks = r.blocks;\n                sealers = r.sealers;\n            } catch (error) {\n                // ignore block                \n            }\n        }\n        if (blocks.length>0) {\n            $store.set(\"nodes/totalCrypto\", blocks[blocks.length-1].totalCrypto)\n        }\n        $store.set(\"nodes/blocks\", blocks);\n        $store.set(\"nodes/sealers\", sealers);\n        // We may have nodes that are not running, let's find them \n        await dispatch(\"discoverNotRunningSealers\");\n        // The below is asynchronous as it does not prevent the dashboard from starting\n        $store.dispatch(\"auth/fetchRole\");\n    },\n\n    async fetchOneNodeInfo({rootState}, address) {\n        const web3 = rootState.auth.web3;\n        // ensure blocks are loaded, because it needs the blocks to find the node\n        const sealers = rootState.nodes.sealers || [];\n        let found = sealers.findIndex(s=>s.address == address.toLowerCase());\n        if (found>=0) {\n            sealers[found] = await updateSealerDetails(web3, sealers[found]);\n            $store.set(\"nodes/sealers\", sealers);\n            return sealers[found];\n        } else {\n            return undefined; //await updateSealerDetails(web3, {address})\n        }\n    },\n\n    async updateFootprint({dispatch}, { sealerAddress, footprint }) {\n        await handleMMResponse(writeCall(\"setFootprint\", sealerAddress, footprint));\n        dispatch(\"fetchOneNodeInfo\", sealerAddress);\n        dispatch(\"fetchAllValues\")\n    }\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","// import ready from \"document-ready-promise\";\n// import detectEthereumProvider from '@metamask/detect-provider';\nimport Web3 from \"web3\";\nimport EventEmitter from 'events';\nimport { make } from \"vuex-pathify\";\nimport { readOnlyCall, writeCallWithOptions, handleMMResponse, getWeb3ProviderFromUrl, verifyCustodyAuthentication, getCustodyLastWallets } from \"@/lib/api\";\nimport { getDefaultNetwork, changeDefaultNetwork, getExplorerUrl } from \"@/lib/config-file\";\nimport { detectEthereumProvider, getEthereumProviderConnectedAccounts, unlockEthereumProviderAccounts, getEthereumProviderChainInfo} from '@/lib/ethereum-compatible-wallet';\n\nimport $store from \"@/store/index\";\nimport router from \"../router.js\";\nimport {ROLES} from \"../lib/const\"\nimport { poaBlockHashToSealerInfo } from '@root/../pocr-utils/build/index.js';\nimport { intf, getContractInstance } from '../lib/api.js';\n\nconst state = () => ({\n    web3: null, // the web3 instance to avoid recreating it each time, because it has a side effect on the events of the provider\n    intf: null, // similarly the intf instance should not be recreated each time\n    chainsNetworks: [],\n    provider: null,\n    providerMetamask: null,\n    providerDirect: null,\n    providerAnonymous: null,\n    providerModel: null, // \"metamask\" or \"direct\" or \"anonymous\" or \"both\" (if both are available)\n    custodyModel: null, // \"metamask\" or \"api\" or null if not available\n    custodyApiUrl: null, // the url of the custody api when the custody model is \"api\"\n    wallet: null,\n    delegatedWallet: null,\n    contract: null,\n    registered: false,\n    // roles\n    isNode: false,\n    isVoterNode: false,\n    isAuditor: false,\n    isAuditorApproved: false,\n    walletAuthenticationFunction: null,\n    mmConnecting: false,\n    mmConnectionNotifier : new EventEmitter(),\n})\n\nconst getters = {\n    walletRole(state) {\n        if (!state.wallet) return ROLES.VISITOR;\n        if (state.isVoterNode) return ROLES.AUDITED_NODE;\n        if (state.isNode) return ROLES.NEW_NODE;\n        if (state.isAuditorApproved) return ROLES.APPROVED_AUDITOR;\n        if (state.isAuditor) return ROLES.PENDING_AUDITOR;\n\n        return ROLES.USER_CONNECTED;\n    },\n    explorerUrl(state) {\n        if (state.providerModel == \"metamask\") {\n            return state.providerMetamask.explorerUrl;\n        }\n        if (state.providerModel == \"direct\") {\n            return state.providerDirect.explorerUrl;\n        }\n        if (state.providerModel == \"anonymous\") {\n            return state.providerAnonymous.explorerUrl;\n        }\n        return undefined;\n    },\n    chainName(state) {\n        let chainId=0;\n        switch (state.providerModel) {\n            case \"direct\": chainId=state.providerDirect.chainID; break;\n            case \"metamask\": chainId=state.providerMetamask.chainID; break;\n        }\n        switch (chainId) {\n            case 1804: return \"Kerleano\";\n            case 2606: return \"PoCRNet\";\n        }\n        return \"Unknown\"\n    }\n}\n\nconst mutations = make.mutations(state);\n\n// function to generalize the web3 provider and signature api options\nasync function detectMetamask() {\n    console.log(\"Entering detect Metamask\")\n    const config = $store.get(\"config\");\n    let providerMetamask = undefined;\n    try {\n        providerMetamask = await detectEthereumProvider({timeout:2000});\n    } catch (error) {\n        console.log(\"fail detectEthereumProvider\");\n    }\n    function chainChanged() {\n        window.location = new URL(window.location.pathname, window.location.origin).href;\n    }\n    if (providerMetamask) {\n        // providerMetamask.on(\"connect\", chaininfo=>{\n        //         console.log(\"Connect : Metamask chain info\", chaininfo);\n        // })\n        // providerMetamask.on(\"disconnect\", error=>{\n        //         console.log(\"Disconnect :\", error);\n        // })\n        providerMetamask.on('accountsChanged', (accounts) => {\n            console.log(\"Account changed :\", accounts);\n        })\n        providerMetamask.removeListener('chainChanged', chainChanged);\n        providerMetamask.on('chainChanged', chainChanged);\n        const chain = await getEthereumProviderChainInfo(providerMetamask)\n        // const explorerUrl = getExplorerUrl(config, chainID)\n        const explorerUrl = getExplorerUrl(config, chain.chainId)\n        console.log(\"Explorer url defined\", explorerUrl)\n        return {\n            providerModel: \"metamask\",\n            provider: providerMetamask,\n            custodyModel: \"metamask\",\n            custodyApiUrl: null,\n            chainID: chain.chainId,\n            explorerUrl\n        }\n    } else return undefined;\n}\n\nasync function detectDirectAccess() {\n    const config = $store.get(\"config\");\n    const existingProvider = $store.state.auth.providerDirect;\n    if (existingProvider) {\n        // console.log(\"detectDirectAccess connection state\", existingProvider?.provider?.connected, existingProvider?.provider?.connection?.readyState, directConnectionState($store.state))\n        // need to close the connection and release what resources have been used\n        if (existingProvider.provider && existingProvider.provider.disconnect && existingProvider.provider.connected) {\n            existingProvider.provider.disconnect(3000, \"Not needed anymore\")\n        }\n    }\n    const defaultNetwork = getDefaultNetwork(config);\n    // if we have a nodeUrl, we can connect to the network\n    if (defaultNetwork.nodeUrl) {\n        // first create a direct provider without the wallet custody\n        const result = {\n            providerModel: \"direct\",\n            provider: getWeb3ProviderFromUrl(defaultNetwork.nodeUrl),\n            custodyModel: null,\n            custodyApiUrl: null,\n            chainID: Number.parseInt(defaultNetwork.chainID),\n            explorerUrl: getExplorerUrl(config) // will use the default network\n        }\n        // if we also have the wallet custody, then add it in the result\n        if (defaultNetwork.walletCustodyAPIBaseUrl) {\n            result.custodyModel = \"api\",\n            result.custodyApiUrl = defaultNetwork.walletCustodyAPIBaseUrl\n        } else {\n            console.log(\"Note: No company's wallet custody configured\");\n        }\n        return result;\n    } else {\n        console.log(\"Note: No direct web3 access configured\");\n        return undefined\n    }\n}\n\nfunction getAnonymounsDefaultNetwork(chainsNetworks) {\n    const network = chainsNetworks.find(n=>n.chainId==2606)\n    return network;\n}\n\nasync function createDirectAnonymousAccess(network) {\n    if (!network || !network.rpc) throw new Error(\"Invalid network config: \"+JSON.stringify(network));\n    const existingProvider = $store.state.auth.providerDirect;\n    if (existingProvider) {\n        // console.log(\"detectDirectAccess connection state\", existingProvider?.provider?.connected, existingProvider?.provider?.connection?.readyState, directConnectionState($store.state))\n        // need to close the connection and release what resources have been used\n        if (existingProvider.provider && existingProvider.provider.disconnect && existingProvider.provider.connected) {\n            existingProvider.provider.disconnect(3000, \"Not needed anymore\")\n        }\n    }\n    const wsRpc = network.rpc.find(rpc=>rpc.startsWith(\"ws\"));\n    const explorer = network.explorers.find(e=>e.url);\n    if (wsRpc) {\n        // first create a direct provider without the wallet custody\n        const result = {\n            providerModel: \"anonymous\",\n            provider: getWeb3ProviderFromUrl(wsRpc),\n            custodyModel: null,\n            custodyApiUrl: null,\n            chainID: network.chainId,\n            explorerUrl: explorer?explorer.url:undefined\n        }\n        return result;\n    } else {\n        console.log(\"Note: No direct anonymous web3 access possible\");\n        return undefined\n    }\n}\n\nconst actions = {\n\n    async checkNetworkProofOfCarbonReduction() {\n        const web3 = $store.get(\"auth/web3\");\n        if (!web3) return \"No web3 connection established yet\";\n        const carbonFootprint = $store.get(\"auth/contract\");\n        console.log(\"checkNetworkProofOfCarbonReduction\", web3);\n        try {\n            // try getting the blocknumber\n            const blockNumber = await web3.eth.getBlockNumber()\n            // try getting the poaInfo of the block\n            const block = await web3.eth.getBlock(blockNumber);\n            if (typeof block.difficulty === \"string\" && !block.difficulty.startsWith('0x')) block.difficulty = Number.parseInt(block.difficulty);\n            poaBlockHashToSealerInfo(block);\n            // try getting the number of sealers/nodes\n            await carbonFootprint.nbNodes(intf().call())\n            \n        } catch (error) {\n            console.error(\"Fail in checkNetworkProofOfCarbonReduction\", error);\n            return error.message;\n        }\n        return false;\n    },\n\n    async setWalletAttributes({dispatch}) {\n        dispatch(\"fetchIsRegistered\");\n        dispatch(\"status/fetchIsApproved\", null, { root: true });\n        dispatch(\"fetchRole\");\n    },\n\n    async fetchRole() {\n        console.log(\"fetchRole called\");\n        // Possibles roles are simple visitor (no wallet), authenticated visitor, auditor, node operator\n        // Reset the states\n        $store.set(\"auth/isAuditor\", false);\n        $store.set(\"auth/isNode\", false);\n        $store.set(\"auth/isVoterNode\", false);\n\n        // get the current address\n        const wallet = $store.get(\"auth/wallet\");\n        if (wallet) {\n            // check if it's Auditor\n            const isAuditor = await readOnlyCall(\"auditorRegistered\", wallet);\n            const isAuditorApproved = await readOnlyCall(\"auditorApproved\", wallet);\n            // see if the node is a sealer and get the value of the footprint if it exists\n            let sealerNode = await $store.dispatch(\"nodes/fetchOneNodeInfo\", wallet);\n            // console.log(\"sealerNode\", sealerNode);\n            if (!sealerNode) { // wallet is not a node, is the wallet a delegate of a node\n                try {\n                    const delegateOf = await readOnlyCall(\"delegateOf\", wallet);\n                    // console.log(\"retrieved delegateOf\", delegateOf);\n                    sealerNode = await $store.dispatch(\"nodes/fetchOneNodeInfo\", delegateOf);\n                } catch (error) {\n                    // console.log(\"retrieved delegateOf impossible - ealier version of the genesis\");\n                }\n            }\n            if (sealerNode) { // wallet found as sealer or delegate of a sealer\n                $store.set(\"auth/isNode\", true);\n                let isVoterNode = false;\n                try { // to keep compatibility with the old genesis\n                    isVoterNode = await readOnlyCall(\"canActAsSealerNode\", wallet);\n                } catch (error) {\n                    const footprint = await readOnlyCall(\"footprint\", wallet);\n                    isVoterNode = footprint > 0;\n                }\n                $store.set(\"auth/isVoterNode\", isVoterNode);\n                $store.set(\"auth/delegatedWallet\", sealerNode.address);\n            } \n            // set the values to the store\n            $store.set(\"auth/isAuditor\", isAuditor);\n            $store.set(\"auth/isAuditorApproved\", isAuditorApproved);\n\n        }\n    },\n\n    async setConnection(store, provider) {\n        console.log(\"Setting connection:\", provider.providerModel);\n        $store.set(\"auth/provider\", provider.provider);\n        $store.set(\"auth/providerModel\", provider.providerModel);\n        if (provider.providerModel == \"metamask\") $store.set(\"auth/providerMetamask\", provider);\n        if (provider.providerModel == \"direct\") $store.set(\"auth/providerDirect\", provider);\n        const web3 = new Web3(provider.provider);\n        web3.eth.ens = null\n        $store.set(\"auth/web3\", web3);\n        window.myWeb3 = web3;\n        $store.set(\"auth/intf\", null); // will created on the fly by the intf() function\n    },\n\n    async detectProvider({dispatch, commit, state, rootState}, {renew=false}={}) {\n        // If there is not yet the loaded networks load them\n        if (state.chainsNetworks.length==0) {\n            const res = await fetch('https://chainid.network/chains.json')\n            const all = await res.json()\n            commit(\"chainsNetworks\", all.filter(n=>n.chain == 'CRC'));\n        }\n\n        // Just to make sure, if you do not have the smart contract instance yet, we instanciate it.\n        if (!state.contract) {\n            commit(\"contract\", getContractInstance())\n        }  \n        console.log(\"Before detecting providers\", renew);\n        const currentModel = $store.get(\"auth/providerModel\");\n        if (![\"metamask\", \"direct\", \"anonymous\"].includes(currentModel) && renew) { renew = false; }\n        try {\n            if (!rootState.config) await $store.dispatch(\"fetchConfig\");\n            let nbProviders = 0;\n\n            let providerMetamask = undefined;\n            let providerDirect = undefined;\n            let providerAnonymous = undefined;\n\n            if (!renew || (renew && currentModel==\"metamask\")) {\n                providerMetamask = await detectMetamask();\n                if (providerMetamask) {\n                    nbProviders ++;\n                }\n            }\n \n            if (!renew || (renew && currentModel==\"direct\")) {\n                providerDirect = await detectDirectAccess();\n                if (providerDirect) {\n                    nbProviders ++;\n                } \n            }\n \n            if (!renew || (renew && currentModel==\"anonymous\")) {\n                const network = getAnonymounsDefaultNetwork($store.get(\"auth/chainsNetworks\"))\n                if (network) providerAnonymous = await createDirectAnonymousAccess(network);\n                if (providerAnonymous) {\n                    nbProviders ++;\n                } \n            }\n            if (nbProviders == 0) {\n                // router.push({ name: \"installMetaMask\" }); \n                $store.set(\"auth/providerModel\", \"none\");\n                return;\n            }\n            \n            $store.set(\"auth/providerMetamask\", providerMetamask);\n            $store.set(\"auth/providerDirect\", providerDirect);\n            $store.set(\"auth/providerAnonymous\", providerAnonymous);\n\n            if (nbProviders > 1) {\n                $store.set(\"auth/providerModel\", \"both\");\n                // return router.push({ name: \"authentication\" }); \n            } else { // a single provider detected, can skip the decision process\n                const provider = providerDirect || providerMetamask || providerAnonymous; // will get one that is not null\n                await dispatch(\"setConnection\", provider);\n                // $store.set(\"auth/provider\", provider.provider);\n                // $store.set(\"auth/providerModel\", provider.providerModel);\n            }\n        } catch (error) {\n            console.error(\"Fail detecting a valid provider\", error.message)\n        }\n        console.log(\"Finishing detecting providers\");\n    },\n\n    async attemptToConnectWallet() {\n        function reactToMetamaskLockUnlock(accounts) {\n            const model = $store.get(\"auth/providerModel\");\n            if (model != \"metamask\") return;\n            const address = accounts[0];\n            $store.set(\"auth/wallet\", address);\n        }\n        let addresses = [];\n        const providerMetamask = $store.get(\"auth/providerMetamask\");\n        // const providerDirect = $store.get(\"auth/providerDirect\");\n        const model = $store.get(\"auth/providerModel\");\n        \n        if (model == \"metamask\") {\n            addresses = await getEthereumProviderConnectedAccounts(providerMetamask.provider, {timeout:1000});\n            providerMetamask.provider.removeListener(\"accountsChanged\", reactToMetamaskLockUnlock)\n            providerMetamask.provider.on(\"accountsChanged\", reactToMetamaskLockUnlock);\n        }\n        if (model == \"direct\" && addresses.length == 0) addresses = await getCustodyLastWallets();\n        console.log(\"wallets found [\", ...addresses, \"]\");\n        const address = addresses.length > 0 ? addresses[0] : null;\n        if (!address) return;\n        $store.set(\"auth/wallet\", address);\n        // We do it here because stuff breaks if we try to instanciate the interface before we know the address\n        return address;\n    },\n\n    async cancelWalletConnection({ state}) {\n        if (state.mmConnecting) {\n            state.mmConnectionNotifier.emit(\"cancel\");\n        }\n    },\n\n    async openMetaMaskConnectionDialog({ dispatch, state, commit }, {noRedirect = false}={}) {\n        const provider = $store.get(\"auth/providerMetamask\");\n        $store.set(\"auth/wallet\", null);\n        // const notifier = new EventEmitter();\n        // setTimeout( ()=>notifier.emit(\"cancel\"), 10000);\n        let accounts = await getEthereumProviderConnectedAccounts(provider.provider, {timeout: 500});\n        if (accounts.length==0) {\n            try {\n                commit(\"mmConnecting\", true)\n                accounts = await unlockEthereumProviderAccounts(provider.provider, state.mmConnectionNotifier)\n            } finally {\n                commit(\"mmConnecting\", false)\n            }\n        }\n        if (accounts.length === 0) return;\n        $store.set(\"auth/wallet\", accounts[0]);\n        // it's decided, the provider is metamask\n        dispatch(\"setConnection\", provider);\n        // $store.set(\"auth/provider\", provider.provider);\n        // $store.set(\"auth/providerModel\", provider.providerModel);\n        // TODO: call fetchRole here to do a selective redirect? Or, just assume it's a first connect and don't care.\n        if (!noRedirect) {\n            await dispatch(\"fetchRole\");\n            router.push({ name: \"dashboard\" });\n        }\n    },\n\n    async openWeb3DirectConnectionDialog({ dispatch }, {wallet, password, nodeUrl}) {\n        // force reset the wallet\n        $store.set(\"auth/wallet\", null);\n        // update the default config\n        let config = $store.get(\"config\");\n        config = changeDefaultNetwork(config, nodeUrl);\n        $store.set(\"config\", config);\n\n        const provider = await detectDirectAccess(); // read again the default config now that it is chaged\n        dispatch(\"setConnection\", provider);\n        // $store.set(\"auth/provider\", provider.provider);\n        // $store.set(\"auth/providerModel\", provider.providerModel);\n        \n        if (provider.custodyModel == \"api\") {\n            const token = await verifyCustodyAuthentication(wallet, password)\n            \n            // console.log(\"openWeb3DirectConnectionDialog\", wallet, password, token);\n            if (token) {\n                $store.set(\"auth/wallet\", wallet);\n            }\n        }\n        await dispatch(\"fetchRole\");\n        router.push({ name: \"dashboard\" });\n    },\n\n    async openWeb3DirectAnonymousConnection({ dispatch }, network) {\n        // force reset the wallet\n        $store.set(\"auth/wallet\", null);\n\n        const provider = await createDirectAnonymousAccess(network); // read again the default config now that it is chaged\n        $store.set(\"auth/providerAnonymous\", provider);\n        dispatch(\"setConnection\", provider);\n        await dispatch(\"fetchRole\");\n        router.push({ name: \"dashboard\" });\n    },\n\n    async disconnect() {\n        await router.push({ name: \"authentication\" });\n        $store.set(\"auth/wallet\", null);\n    },\n\n    async fetchIsRegistered({ state }) {\n        $store.set(\"auth/registered\", false);\n        if (state.wallet) {\n            const registered = await handleMMResponse(readOnlyCall(\"auditorRegistered\", state.wallet));\n            $store.set(\"auth/registered\", registered);\n        }\n    },\n\n    async selfRegister({ dispatch }) {\n        await handleMMResponse(writeCallWithOptions(\"selfRegisterAuditor\", {maxGas:200000}));\n        dispatch(\"setWalletAttributes\");\n    }\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","import { BigNumber } from \"bignumber.js\";\nexport const GWEI_FACTOR = Math.pow(10, 9)\nexport const ETH_FACTOR = Math.pow(10, 18)\n/**\n * Convert to BigNumber\n * @param {bigint|string|number} bi \n * @returns BigNumber\n */\nexport function toWebBigInt(bi) {\n  return new BigNumber(bi);\n}\n\n/**\n * Convert to normal number\n * @param {BigNumber} bi \n * @returns Number\n */\nexport function toNumber(bi) {\n  return bi.toNumber();\n}\n\n/**\n * Convert wei to gwei\n * @param {bigint|string|number} bi \n * @returns BigNumber\n */\nexport function toGWei(bi) {\n  return toWebBigInt(bi).div(toWebBigInt(GWEI_FACTOR));\n}\n/**\n * Convert wei to Ether\n * @param {bigint|string|number} bi \n * @returns BigNumber\n */\nexport function toEther(bi) {\n  return toWebBigInt(bi).div(toWebBigInt(ETH_FACTOR));\n}\n\nexport function toWei(bi, from) {\n  const n = toWebBigInt(bi);\n  if(from === \"ether\") return n.multipliedBy(ETH_FACTOR)\n  if(from === \"gwei\") return n.multipliedBy(GWEI_FACTOR)\n  return n\n}\n\n/** Convert a big int to a smart contract parameter call \n * @param {BigNumber} bi\n * @return {string}\n*/\nexport function toParam(bi) {\n  // return bi.toFormat(0, BigNumber.ROUND_DOWN, {groupSeparator:''})\n  return '0x'+bi.toString(16)\n}\n\n\nexport function toCurrency(value, currency) {\n  const intl = Intl.NumberFormat(undefined,{style:\"currency\", currency:currency??\"XXX\"})\n  return intl.format(value);\n}\n\nexport function to1000s(value, decimals=0) {\n  const intl = Intl.NumberFormat(undefined,{style:\"decimal\", minimumFractionDigits:decimals, maximumFractionDigits:decimals})\n  return intl.format(value);\n}\n\n// window.Numberlib = {\n//   toWebBigInt,\n//   toNumber,\n//   toEther,\n//   toGWei,\n//   toWei,\n//   toParam\n// }","import { make } from \"vuex-pathify\";\nimport { governanceAddress } from \"@/lib/const\";\nimport { Web3FunctionProvider } from \"@saturn-chain/web3-functions\";\nimport allContracts from \"sc-carbon-footprint\";\nimport { toEther } from \"@/lib/numbers\";\n\n// eslint-disable-next-line \nimport { SmartContractInstance } from \"@saturn-chain/smart-contract\" // needed only for typings resolution in the code\nimport $store from \"@/store/index\";\n\nconst state = () => ({\n    pledgeHistory: [],\n    footprintHistory: []\n})\n\nconst getters = {}\n\nconst mutations = {\n    ...make.mutations(state),\n    appendFootprint: (state, value) => {\n        state.footprintHistory.push(value)\n    },\n    appendPledge: (state, value) => {\n        state.pledgeHistory.push(value)\n    },\n};\n\nconst actions = {\n    fetchAllValues({ dispatch }) {\n        const prov = new Web3FunctionProvider($store.get(\"auth/provider\"), ()=>Promise.resolve($store.get(\"auth/wallet\")))\n        const contract = allContracts.get(\"Governance\").at(governanceAddress);\n\n        dispatch(\"fetchFootprintHistory\", {contract, prov});\n        dispatch(\"fetchPledgeHistory\", {contract, prov});\n    },\n\n    /**\n     * Get the list of setting footprint from the begining.     \n     * TODO: Replace by a pagination scheme \n     * @param {*} empty \n     * @param {{contract:SmartContractInstance, prov:Web3FunctionProvider} param1 \n     */\n    async fetchFootprintHistory({commit, rootState}, {contract, prov}) {\n        const web3 = $store.get(\"auth/web3\");\n        const sealers = rootState.nodes.sealers;\n        const wallet = rootState.auth.wallet;\n        $store.set(\"history/footprintHistory\", []);\n        contract.events.CarbonFootprintUpdate(prov.get({fromBlock: 1}), {})\n        .on(\"log\", async log=>{\n            // console.log(\"get logs \", log);\n            const tx = await web3.eth.getTransaction(log.transactionHash)\n            // console.log('tx=', tx);\n            const footprint = {\n                blockNumber: log.blockNumber,\n                auditor: tx?tx.from.toLowerCase():'no sealer!',\n                node: log.returnValues.node.toLowerCase(),\n                footprint: log.returnValues.footprint,\n                txHash: log.transactionHash\n            };\n            const foundSealer = sealers.find(s=>s.address == footprint.node);\n            if (foundSealer) {\n                footprint.nodeName = foundSealer.vanity.custom;\n            } else {\n                footprint.nodeName = 'Not a node';\n            }\n            if (footprint.auditor == wallet) {\n                footprint.auditorName = \"Me\";\n            } else {\n                footprint.auditorName = footprint.auditor;\n            }\n            commit(\"appendFootprint\", footprint);\n        })\n    },\n\n    /**\n     * Get the list of pledging from the begining.     \n     * TODO: Replace by a pagination scheme \n     * @param {*} empty \n     * @param {{contract:SmartContractInstance, prov:Web3FunctionProvider} param1 \n     */\n    async fetchPledgeHistory({commit, rootState}, {contract, prov}) {\n        const wallet = rootState.auth.wallet;\n        $store.set(\"history/pledgeHistory\", []);\n        // get the logs of the current auditor only\n        contract.events.AmountPledged(prov.get({fromBlock: 1}), {from: wallet})\n        .on(\"log\", async log=>{\n            // console.log(\"get logs \", log, \"filter\", {from: wallet});\n            const pledge = {\n                blockNumber: log.blockNumber,\n                auditor: log.returnValues.from,\n                pledge: toEther(log.returnValues.amountAdded)-toEther(log.returnValues.amountRemoved),\n                total: toEther(log.returnValues.total),\n                txHash: log.transactionHash\n            };\n            commit(\"appendPledge\", pledge)\n        })\n    }\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","import { make } from \"vuex-pathify\";\nimport { readOnlyCall, writeCall, writeCallWithOptions, handleMMResponse } from \"@/lib/api\";\nimport $store from \"@/store/index\";\nimport { toWei, toEther } from \"@/lib/numbers\";\nimport { getWalletBalance } from \"@/lib/api\";\n\nconst state = () => ({\n    balance: 0,\n    minPledgeAmount: 0,\n    pledgedAmount: 0,\n    redeemBool: false,\n})\n\nconst getters = {}\n\nconst mutations = make.mutations(state);\n\nconst actions = {\n    fetchAllValues({ dispatch }) {\n        dispatch(\"fetchBalance\");\n        dispatch(\"fetchMinPledgeAmount\");\n        dispatch(\"fetchPledgedAmount\");\n        dispatch(\"fetchCanTransferPledge\");\n    },\n\n    async fetchBalance({ rootState }) {\n        const balance = await getWalletBalance(rootState.auth.wallet);\n        $store.set(\"pledge/balance\", balance);\n    },\n\n    async fetchCanTransferPledge() {\n        const wallet = $store.get(\"auth/wallet\");\n        const redeemBool = await readOnlyCall(\"canTransferPledge\", wallet,\"1\");\n        console.log(\"just trying\", redeemBool);\n        $store.set(\"pledge/redeemBool\", redeemBool);\n    },\n\n    async fetchMinPledgeAmount() {\n        const wallet = $store.get(\"auth/wallet\");\n        const minPledgeAmount = await readOnlyCall(\"minPledgeAmountToAuditNode\", wallet);\n        $store.set(\"pledge/minPledgeAmount\", minPledgeAmount);\n    },\n\n    async fetchPledgedAmount() {\n        const wallet = $store.get(\"auth/wallet\");\n        const pledgedAmount = await readOnlyCall(\"pledgedAmount\", wallet);\n        $store.set(\"pledge/pledgedAmount\", toEther(pledgedAmount));\n    },\n\n    async addToPledge({ dispatch }, amount) {\n        console.log(\"Pledging\", amount)\n        await handleMMResponse(writeCallWithOptions(\"pledge\", { amount: toWei(amount, \"ether\"), maxGas: 300000}));\n        dispatch(\"fetchPledgedAmount\");\n        dispatch(\"fetchBalance\");\n    },\n\n    async redeemPledge({ dispatch }) {\n        // when the smart contract is redeployed with the getPledgeBack function replace the below code\n        // const wallet = $store.get(\"auth/wallet\");\n        // const amount = $store.get(\"pledge/pledgedAmount\");\n        await handleMMResponse(writeCall(\"getPledgeBack\"));\n        // replace with:\n        // await handleMMResponse(writeCall(\"getPledgeBack\"));\n        dispatch(\"fetchPledgedAmount\");\n        dispatch(\"fetchBalance\");\n    }\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","import { make } from \"vuex-pathify\";\nimport { readOnlyCall } from \"@/lib/api\";\nimport $store from \"@/store/index\";\n\nconst state = () => ({\n    approved: false,\n    approbationVotes: 0\n})\n\nconst getters = {}\n\nconst mutations = make.mutations(state);\n\nconst actions = {\n    async fetchIsApproved() {\n        $store.set(\"status/approved\", false);\n        const wallet = $store.get(\"auth/wallet\");\n        if (wallet) {\n            const approved = await readOnlyCall(\"auditorApproved\", wallet);\n            $store.set(\"status/approved\", approved);\n        }\n    },\n    async fetchApprobationVotes() {\n        const wallet = $store.get(\"auth/wallet\");\n        const votes = await readOnlyCall(\"auditorVotes\", wallet);\n\n        $store.set(\"status/approbationVotes\", Number(votes));\n    }\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","import { make } from \"vuex-pathify\";\nimport { toEther } from \"@/lib/numbers\";\nimport {\n    handleMMResponse,\n    readOnlyCall,\n    writeCallWithOptions,\n} from \"@/lib/api\";\nimport $store from \"@/store/index\";\n\nconst state = () => ({\n    nbAuditors: 0,\n    auditors: [],\n})\n\nconst getters = {}\n\nconst mutations = make.mutations(state);\n\nconst actions = {\n    async fetchAllAuditorsValues({ dispatch }) {\n        await dispatch(\"fetchNbAuditors\");\n        await dispatch(\"fetchAuditorsInfos\");\n    },\n\n    async fetchNbAuditors() {\n        const nbAuditors = await readOnlyCall(\"nbAuditors\");\n        $store.set(\"nodeGovernance/nbAuditors\", nbAuditors);\n    },\n\n    async fetchAuditorsInfos() {\n        const nbAuditors = await readOnlyCall(\"nbAuditors\");\n        const nodeAdr = $store.get(\"auth/wallet\");\n        const minVotes = Math.floor((await readOnlyCall(\"nbNodes\")) / 2) + 1;\n        const auditors = [];\n        for (let i = 0; i < nbAuditors; i++) {\n            const address = await readOnlyCall(\"auditorAddress\", i);\n            const nbVotes = await readOnlyCall(\"auditorVotes\", address);\n            const currentVote = await readOnlyCall(\"currentAuditorVote\", address, nodeAdr);\n            const isApproved = await readOnlyCall(\"auditorApproved\", address);\n            auditors[i] = {\n                address,\n                nbVotes,\n                minVotes,\n                currentVote,\n                isApproved\n            };\n        }\n        $store.set(\"nodeGovernance/auditors\", auditors);\n    },\n\n    async fetchConfiscatedPledge() {\n        const confiscated = await readOnlyCall(\"confiscatedAmount\");\n        console.log(\"confiscated pledge\", confiscated, typeof confiscated);\n        return toEther(confiscated)\n    },\n\n    async voteAuditor(context, {auditorAddress, accept}) {\n        return handleMMResponse(writeCallWithOptions(\"voteAuditor\", {maxGas:200000}, auditorAddress, accept));\n    }\n\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","import { make } from \"vuex-pathify\";\n\nconst state = () => ({\n    indicators: [],\n    totalWeight: 1,\n    efDecimals: 6,\n    functionalUnit: \"\",\n})\n\nconst getters = {\n    fromSingleIndicator: (state) => (si)=>{\n        return reverseSingleIndicator(si, state.indicators, state.totalWeight, state.efDecimals)\n    },\n    toSingleIndicator: (state) => (values)=>{\n        return calculateSingleIndicator(values, state.indicators, state.totalWeight, state.efDecimals)\n    }\n}\n\nconst mutations = make.mutations(state);\n\nfunction processIndicators(conf) {\n    if (!conf) throw new Error(\"Invalid configuration\")\n    if (! Array.isArray(conf.indicators)) throw new Error(\"The indicators field is missing or is not an array\")\n    const indicators = [];\n    for (const indicator of conf.indicators) {\n        indicators.push({\n            name: indicator.name || \"missing name\",\n            definition: indicator.definition || \"missing definition\",\n            unit: indicator.unit || \"missing unit\",\n            normalisationFactor : indicator.normalisationFactor || 1,\n            weight : indicator.weight || 0\n        })\n    }\n\n    const totalWeight = indicators.reduce( (p, i)=>i.weight+p, 0);\n    if (totalWeight == 0) throw new Error(\"Cannot work with a set of indicators whose total weigth is zero\")\n\n    return {\n        indicators, totalWeight, \n        efDecimals: conf.efDecimals || 6,\n        functionalUnit: conf.functionalUnit || \"Undefined FU\" \n    };\n}\n\nfunction reverseSingleIndicator(si, indicators, totalWeight, efDecimals) {\n    // if (totalWeight == 0) throw new Error(\"Cannot work with a total weight of zero\")\n    // It is not possible from a single indicator to retrieve the 4 indicators from the weight only.\n    // So this function project the single indicator as if it was all on a one indicator\n    si = si / Math.pow(10, efDecimals);\n    const result = indicators.map( i=> {\n        //const w = i.weight / totalWeight;\n        // const c = si * w ;\n        const v = si * i.normalisationFactor;\n        return {...i, valueEq: v};\n    })\n    return result;\n}\n\nfunction calculateSingleIndicator(indicatorValues, indicators, totalWeight, efDecimals) {\n    let si = 0;\n    // console.log(\"calculateSingleIndicator\", indicatorValues)\n    for(let index=0; index<indicators.length; index++) {\n        const i = indicators[index];\n        const w = i.weight / totalWeight;\n        const v = indicatorValues.length>index ? indicatorValues[index] : 0;\n        const c = v * w / i.normalisationFactor;\n        si += c ;\n    }\n    return si * Math.pow(10, efDecimals);\n}\n\nconst actions = {\n    async fetchIndicators({ commit }) {\n        try {\n            let envUrl = \"./envirnonmental.json\";\n            const url = new URL(window.location.href);\n            if (url.searchParams.has(\"envirnonmental\")) {\n                const uConf = new URL(url.searchParams.get(\"envirnonmental\"));\n                envUrl = uConf.href;\n                url.searchParams.delete(\"envirnonmental\")\n            }\n            const res = await fetch(envUrl)\n            if( res.status === 200 ) {\n                const config = await res.json();\n                const processed = processIndicators(config);\n                \n                commit(\"indicators\", processed.indicators)\n                commit(\"totalWeight\", processed.totalWeight)\n                commit(\"efDecimals\", processed.efDecimals)\n                commit(\"functionalUnit\", processed.functionalUnit)\n            }\n        } catch (error) {\n            console.error(\"Could not process the environmental configuration\", error.message)\n            commit(\"indicators\", [])\n            commit(\"totalWeight\", 1)\n        }\n    },\n\n}\n\nexport default {\n    state,\n    getters,\n    mutations,\n    actions,\n    namespaced: true\n}","import Vue from \"vue\";\nimport Vuex from \"vuex\";\n\nimport pathify from '@/plugins/pathify';\nimport {cleanUpConfig} from \"@/lib/config-file\";\nimport { getContractInstance } from \"@/lib/api\";\nimport { make } from \"vuex-pathify\";\n// import createPersistedState from \"vuex-persistedstate\";\n\nimport nodes from \"./nodes\"\nimport auth from \"./auth\"\nimport history from \"./history\";\nimport pledge from \"./pledge\"\nimport status from \"./status\"\nimport nodeGovernance from \"./nodeGovernance\"\nimport climate from \"./climate\"\n\nVue.use(Vuex);\n// let _logIndexCounter=0;\n\nconst state = {\n    initialized: false,\n    // used for a nicer UX: if this is true, ignore the values above, we probably don't know the actual values yet\n    tryingToConnect: false,\n    mmIsOpen: false,\n\n    displaySnackbar: false,\n    snackbarMessage: \"\",\n    snackbarColor: \"error\",\n    config: undefined,\n}\nconst logs = [];\n\nconst store = new Vuex.Store({\n    modules: {\n        nodes,\n        auth,\n        history,\n        pledge,\n        status,\n        nodeGovernance,\n        climate\n    },\n    plugins: [\n        pathify.plugin,\n        // createPersistedState({ key: \"wallets\", paths: [\"wallets\"] })\n    ],\n    state,\n    mutations: make.mutations(state),\n    getters: {\n        logs() {\n            return logs;\n        }\n    },\n    actions: {\n        errorFlash({ commit }, message) {\n            commit(\"snackbarMessage\", message);\n            commit(\"snackbarColor\", \"error\");\n            commit(\"displaySnackbar\", true);\n        },\n        async fetchConfig({ commit }) {\n            console.log(\"Inside fetchConfig\")\n            try {\n                let configUrl = \"./config.json\";\n                const url = new URL(window.location.href);\n                if (url.searchParams.has(\"config\")) {\n                    const uConf = new URL(url.searchParams.get(\"config\"));\n                    configUrl = uConf.href;\n                    url.searchParams.delete(\"config\")\n                    // window.history.replaceState(null, null, url);\n                }\n                const res = await fetch(configUrl)\n                if( res.status === 200 ) {\n                    const config = await res.json();\n                    commit(\"config\", await cleanUpConfig(config))\n                }\n            } catch (error) {\n                console.error(\"Could not process the config\", error.message)\n                commit(\"config\", undefined)\n            }\n        },\n\n        async startInitialization({commit, state, dispatch}) {\n            console.log(\"RootStore\", this)\n            try {\n                commit(\"initialized\", false);\n                await dispatch(\"climate/fetchIndicators\");\n                console.log(\"Fetching config\");\n                await dispatch(\"fetchConfig\");\n                if (state.config.activate_log) wrapConsoleLogging();\n                console.log(\"Fetching config - done\");\n                store.commit(\"auth/contract\", getContractInstance())\n                console.log(\"Detecting providers\");\n                await dispatch(\"auth/detectProvider\");\n                console.log(\"Detected provider model\", state.auth.providerModel);\n                if (state.auth.providerModel == \"metamask\") {\n                    const failMsg = await dispatch(\"auth/checkNetworkProofOfCarbonReduction\");\n                    if (failMsg) {\n                        console.log(\"Verification of PoCR netowrk failed:\", failMsg);\n                        commit(\"auth/providerModel\", \"switchMetamask\")\n                    }\n                }\n\n                // record a watcher for state.auth.wallet\n                // this watch function first param is a reactive function like if used in the vue template\n                this.watch((state)=>state.auth.wallet, ()=>{\n                    console.log(\"wallet has been changed:\", state.auth.wallet)\n                    dispatch(\"auth/setWalletAttributes\")\n                })\n\n                await dispatch(\"auth/attemptToConnectWallet\");\n                \n                commit(\"initialized\", true);\n            } catch (error) {\n                await dispatch(\"errorFlash\", \"Initialization failed - reload page: \"+error.message)\n            }\n        },\n    },\n\n});\nexport default store;\n\nexport function wrapConsoleLogging() {\n    const oldLog = console.log;\n    const oldError = console.error;\n    const oldWarn = console.warn;\n    \n    function addLineInBody(payload) {\n        if (!window.document) return;\n        let logs = window.document.getElementById(\"--logs--\")\n        if (!logs) {\n            // const body = window.document.getElementsByClassName(\"body\")\n            if (!document.body) return;\n            logs = document.createElement(\"div\")\n            logs.setAttribute(\"id\", \"--logs--\")\n            logs.setAttribute(\"style\", \"position: relative; z-index: 100;\")\n            document.body.insertBefore(logs, document.body.firstElementChild)\n        }\n        const pre = document.createElement(\"pre\");\n        pre.innerHTML=`<b>${payload.type}</b> : ${payload.args.map(a=>(typeof a==\"object\"?'Object':typeof a == \"undefined\"?'Undef':a)).join(', ')}`\n        logs.appendChild(pre);\n    }\n    \n    console.log = (...args) => {\n        oldLog(...args)\n        addLineInBody({type:\"info\", args})\n    }\n    console.warn = (...args) => {\n        oldWarn(...args)\n        addLineInBody({type:\"warn\", args})\n    }\n    console.error = (...args) => {\n        oldError(...args)\n        addLineInBody({type:\"error\", args})\n    }\n}\n","\nexport class AsyncLocalStorage {\n  constructor(keys) {\n    this.keyList = keys || [];\n  }\n  async getItem(key) {\n    if (!key) return;\n    if (!this.keyList.includes(key)) this.keyList.push(key);\n    const v = window.localStorage.getItem(key);\n    if (!v) return undefined;\n    return JSON.parse(v);\n  }\n  async setItem(key, value) {\n    if (!key) return;\n    if (!this.keyList.includes(key)) this.keyList.push(key);\n    if (!value) window.localStorage.removeItem(key)\n    else window.localStorage.setItem(key, JSON.stringify(value));\n    return;\n  }\n  async getAll() {\n    const result = {};\n    for (const key of this.keyList) {\n      result[key] = await this.getItem(key);\n    }\n    return result\n  }\n  async setAll(group) {\n    for (const key of Object.keys(group)) {\n      await this.setItem(key, group[key]);\n    }\n  }\n}\n","import Web3 from \"web3\";\nimport BigInt from \"./bigint-polyfill\";\nimport { Web3FunctionProvider } from \"@saturn-chain/web3-functions\";\nimport { Web3CustodyFunctionProvider } from \"@saturn-chain/web3-custody-functions\";\nimport { WalletCustodyApiImpl } from \"@saturn-chain/wallet-custody-rest-api\";\nimport allContracts from \"sc-carbon-footprint\";\nimport $store from \"@/store/index\";\nimport { AsyncLocalStorage } from \"./async-local-storage\";\n\nimport { EventEmitter } from \"events\";\n\nimport { governanceAddress } from \"./const\";\n\nconst LocalStorage = new AsyncLocalStorage();\n\n\nexport function getWeb3ProviderFromUrl(url) {\n    const web3 = new Web3(url)\n    return web3.currentProvider;\n}\n\nexport async function getWalletBalance(walletAddress) {\n    return await $store.get(\"auth/web3\").eth.getBalance(walletAddress);\n}\n\n\nexport function getContractInstanceByName(contractName) {\n    const contract = allContracts.get(contractName);\n    const instance = contract.at(governanceAddress);\n    console.log(\"Instance\", instance);\n    return instance;\n}\n\nexport function getContractInstance() {\n    return getContractInstanceByName(\"Governance\");\n}\n\nexport function getCustodyApi() {\n    const custodyUrl = $store.get(\"auth/providerDirect\").custodyApiUrl;\n    const custody = new WalletCustodyApiImpl(custodyUrl, \"eth\");\n    return custody;    \n}\n\nexport async function verifyCustodyAuthentication(wallet, password) {\n    let savedWallets = (await LocalStorage.getItem(\"custody.wallets\")) || [];\n    savedWallets.unshift(wallet);\n    savedWallets = [...new Set(savedWallets)];\n    LocalStorage.setItem(\"custody.wallets\", savedWallets)\n    const api = getCustodyApi();\n    const token = await handleMMResponse(api.authenticate(wallet, password));\n    return token\n}\n\nexport async function getCustodyLastWallets() {\n    return (await LocalStorage.getItem(\"custody.wallets\")) || [];\n}\n\nexport function intf(provider) {\n    let result = $store.get(\"auth/intf\");\n    if (result) return result;\n    // TODO (suggestion): This approach work, but why not storing in the \"store\" the intf result instead of the web3 provider ?\n    //      you would save writing the intf(provider)\n    if (!provider) provider = $store.get(\"auth/provider\");\n    if (!provider) throw new Error(\"Should not be calling the api functions without a provider connected\")\n    const model = $store.get(\"auth/providerModel\");\n    if (model == \"metamask\") {\n        const web3 = $store.get(\"auth/web3\");\n        result = new Web3FunctionProvider(web3, (list) => Promise.resolve(list[0]))\n    }\n    if (model == \"direct\" || model == \"anonymous\") {\n        const wallet = $store.get(\"auth/wallet\");\n        if (wallet) {\n            const custody = getCustodyApi();\n            const authFunction = $store.state.auth.walletAuthenticationFunction;\n            result = new Web3CustodyFunctionProvider(provider, custody, wallet, authFunction );\n        } else {\n            // returns a fake identity using any address. Only read function will be available\n            result = new Web3FunctionProvider(provider, ()=>Promise.resolve(governanceAddress))\n        }\n    }\n    if (result) {\n        // remove the ens that breaks the vue inspector\n        result.web3.eth.ens = null;\n        $store.set(\"auth/intf\", result);\n        return result;\n    } \n\n    throw new Error(\"should not be calling the api functions without deciding the provider (metamask or direct or anonymous)\")\n}\n\nconst globalTimerList={};\nlet globalTimerIndex=1;\nlet globalTimerId=0;\nlet globalTimerLastExecution=0;\nconst globalTimerFunction = ()=>{\n    //console.log(\"interval\");\n    globalTimerLastExecution = Date.now();\n    for (const id of Object.keys(globalTimerList)) {\n        const timeout = globalTimerList[id];\n        if (timeout.when<=globalTimerLastExecution) {\n            // console.log(\"Calling the timer callback\");\n            setImmediate(timeout.callback);\n        }\n    }\n}\nconst initGlobalTimer = ()=>{\n    if (globalTimerId>0) clearInterval(globalTimerId);\n    globalTimerLastExecution = Date.now();\n    globalTimerId = setInterval(globalTimerFunction, 50);\n}\n\n['load', 'message', 'online', 'offline', 'pageshow'].forEach(ev=>\nwindow.addEventListener(ev, () => { \n    // console.log(\"Should reset the timer\", Date.now(), globalTimerLastExecution, Date.now() - globalTimerLastExecution > 30*1000);\n    if (Date.now() - globalTimerLastExecution > 30*1000) {\n        console.log(\"Setting the global timer\");\n        initGlobalTimer()\n    }\n}));\n\n// Function that hides the standard setTimeout function to try using a permanent unique interval loop\nfunction setTimeout(cb, delayMs) {\n    let startAt = Date.now();\n    globalTimerIndex = (globalTimerIndex + 1)%Number.MAX_SAFE_INTEGER\n    const id=globalTimerIndex;\n    globalTimerList[id]={when: startAt + delayMs, callback(){ \n        delete globalTimerList[id];\n        try {cb()} catch(e) {\n            console.log(\"timer callback failed - so what?\", e);\n        }\n    }}\n    return id;\n}\nfunction clearTimeout(id) {\n    delete globalTimerList[id];\n}\n\n\n\nlet __id= 1000;\nexport function subscribeNewBlocks(web3, {maxBlocks=0, firstBlock=undefined}={}) {\n    if (!web3) web3 = $store.get(\"auth/web3\");\n    if (!web3) throw new Error(\"Should not be calling the api functions without a provider connected\")\n    const provider = $store.get(\"auth/provider\");\n    const model = $store.get(\"auth/providerModel\");\n    const providerSendAsync = model == \"metamask\" ? \n    // With metamask the send async exists and the skip cache should be activated to bypass the cached block request\n    (r, cb)=> {\n        provider.sendAsync({...r, skipCache:true}, cb)\n    } \n    // else use the normal provider send method\n    : provider.send.bind(provider);\n    //provider.sendAsync? provider.sendAsync.bind(provider) : provider.send.bind(provider);\n\n\n    async function getBlockNumber() {\n        const r = await new Promise( (res, rej)=>{\n            providerSendAsync({method:\"eth_blockNumber\", id: __id++, params:[]}, (e,r)=>{\n                // console.log(\"send Async response\", e, r)\n                if (e) rej(e);\n                else if (r.result) res(r.result);\n                else if (typeof r == \"string\") res(r); // the brave wallet on mobile respond with the value directly rather than the {result:\"\"} structure\n                else rej(new Error('No error or response!'))\n            })\n        })\n        // console.log(\"Request eth_blockNumber\", Number(r));\n        return Number(r);\n    }\n\n    async function getBlockByNumber(block, tx=false) {\n        const r = await new Promise( (res, rej)=>{\n            providerSendAsync({method:\"eth_getBlockByNumber\", id: __id++, params:[`0x${Number(block).toString(16)}`, tx]}, (e,r)=>{\n                // console.log(\"send Async response\", e, r)\n                if (e) rej(e);\n                else if (r.result) res(r.result);\n                else if (typeof r == \"string\") res(r); // the brave wallet on mobile respond with the value directly rather than the {result:\"\"} structure\n                else rej(new Error('No error or response!'))\n            })\n        })\n        // console.log(\"Request eth_blockNumber\", Number(r));\n        return {...r, number:Number(r.number)};\n    }\n\n    const subs = new EventEmitter({captureRejections: true});\n    subs.unsubscribe = ()=>{\n        if (subs.timer) {\n            clearTimeout(subs.timer);\n            subs.timer = null;\n        }\n    }\n    const delayMs = 1000;\n    \n    async function runLoop() {\n        // console.log(\"Number of active timer\", Object.keys(globalTimerList).length, subs.timer);\n        try {\n            // console.log(\"Starting the block receiving loop\")\n            if (!subs.props) {\n                // first execution: initialized the props and loop\n                subs.props = {lastBlock: firstBlock || await getBlockNumber(), lastCheck: Date.now()};\n            } else {\n                let lastBlock = await getBlockNumber();\n    \n                const lastCheck = Date.now();\n                //console.log(\"runLoop:\", subs.props, {lastBlock, lastCheck});\n                if (lastBlock >= subs.props.lastBlock) {\n                    // get the first block to process that is the new block or the next of the last received but not earlier than the max blocks backward\n                    const firstBlock = Math.max(Math.min(subs.props.lastBlock+1, lastBlock), lastBlock-maxBlocks);\n                    if (subs.props.lastBlock+1<firstBlock) {\n                        console.log(\"Skipping blocks that are too old:\", subs.props.lastBlock+1, \"...\", firstBlock-1);\n                    }\n                    for (let b=firstBlock; b<=lastBlock; b++) {\n                        try {\n                            const block = await getBlockByNumber(b, false); // get block ignoring cache if any\n                            // console.log(`Block ${block.number} emitted`);\n                            subs.emit(\"data\", block);\n                        } catch (error) {\n                            console.warn(\"Fail getting block \"+b, error.message)\n                        }\n                    }\n                }\n                subs.props = {lastBlock, lastCheck};\n            }\n        } catch (error) {\n            console.warn(\"Something went wront when processing the loop. Ignoring.\", error.message);\n        }    \n\n        // do not reinitialize the loop if the subscription has been cancelled\n        if (subs.timer) {\n            // restart the loop after the delay\n            subs.timer = setTimeout( runLoop , delayMs);\n        }\n    }\n    // initialize the loop in 10 ms to initialize the props\n    subs.timer = setTimeout( runLoop , 10);\n    return subs\n}\n\n\n\nexport async function readOnlyCall(methodName, ...args) {\n    return readOnlyCallWithOptions(methodName, { maxGas: 10000000 }, ...args)\n}\n\nexport async function readOnlyCallWithOptions(methodName, options, ...args) {\n    const provider = $store.get(\"auth/provider\");\n    const contract = $store.get(\"auth/contract\");\n    if (!(methodName in contract)) return Promise.reject(new Error(`Method ${methodName} does not exists in contract`));\n    return contract[methodName](\n        wrapSend(intf(provider).call(options)), \n        ...args\n    );\n}\n\nexport function writeCall(methodName, ...args) {// return writeCallWithOptions(methodName, {maxGas: 1000000}, ...args);\n    return writeCallWithOptions(methodName, {}, ...args);\n}\n\nfunction convertMMErrorMessage(message) {\n    if(typeof message !== \"string\") message = `\\n {\"message\":\"invalid error message\"}`;\n    let split = message.split(\"\\n\");\n    if(split.length==1) split =  `\\n ${JSON.stringify({message})}`.split('\\n');\n    try {\n        const obj = JSON.parse(split.splice(1).join(\" \"))\n        return obj;\n    } catch (error) {\n        return {\n            message,\n            comment: \"invalid JSON message\"\n        }\n    }\n}\n\nfunction wrapSend(send) {\n    return (target, data) => {\n        //console.log(\"Wrapped sender\", target, data);\n        return send(target, data)\n    }\n}\n\nexport function writeCallWithOptions(methodName, options, ...args) {\n    const wallet = $store.get(\"auth/wallet\");\n    if (!wallet) {\n        return Promise.reject(new Error(\"You are not authenticated with a wallet, you cannot update the blockchain\"));\n    }\n    const provider = $store.get(\"auth/provider\");\n    const contract = $store.get(\"auth/contract\");\n    if (!(methodName in contract)) return Promise.reject(new Error(`Method ${methodName} does not exists in contract`));\n    if (options.amount) options.amount=new BigInt(options.amount.toString(10))\n\n    return new Promise( (resolve, reject)=>{\n        // First test the execution with the node using the call approach\n        readOnlyCallWithOptions(methodName, options, ...args)\n        .then(async v=>{\n            console.log(\"Tested call\", options, v)\n            resolve(\n                // as it succeeded, try executing it as a transaction\n                await contract[methodName](\n                    wrapSend(intf(provider).send(options)),\n                    ...args\n                )\n            )\n        })\n        .catch(e => {\n            const err = convertMMErrorMessage(e.message)\n            reject(err)\n        })\n    });\n}\n\nasync function collectDataFunction(target, data) {\n    const cmd = `eth.sendTransaction({from: eth.coinbase, to:\"${target}\", data:\"${data}\"})`\n    return {isTx: true, result: cmd}\n}\nexport async function getCallData(methodName, ...args) {\n    const contract = $store.get(\"auth/contract\");\n    const cmd = await contract[methodName]( collectDataFunction, ...args)\n    console.log(cmd)\n    return cmd;\n}\n\nexport async function handleMMResponse(promise, errorCallback) {\n    let response = null;\n    try {\n        $store.set(\"mmIsOpen\", true);\n        response = await promise;\n    }\n    catch (err) {\n        let message = err.message;\n        // In some cases of lack of gas in the transaction, the err contains a tx info\n        if (err.blockHash && err.gasUsed && err.status==false) {\n            message = `Not enough gas to complete the transaction: ${err.gasUsed} provided`\n        }\n        console.warn(\"Submitted transaction failed with error:\", message);\n        $store.dispatch(\"errorFlash\", message);\n        errorCallback && errorCallback(err);\n    }\n    finally {\n        $store.set(\"mmIsOpen\", false);\n    }\n    return response;\n}\n\n// Not used currently but lets you run any arbitrary code and the mmIsOpen flag is handled automatically\n// aswell as the error flash production if you decide to trigger an exception.\nexport async function handleMM(func) {\n    try {\n        $store.set(\"mmIsOpen\", true);\n        await func();\n    }\n    catch (err) {\n        console.log(err);\n        $store.dispatch(\"errorFlash\", err.message);\n    }\n    finally {\n        $store.set(\"mmIsOpen\", false);\n    }\n}","<template>\n  <div>\n    <div>Anonymous access:</div>\n    <v-row>\n      <v-col v-for=\"network of chainsNetworks\" :key=\"network.chainId\">\n        <v-btn \n          color=\"teal\" class=\" mr-3\" dark\n          @click=\"openWeb3DirectAnonymousConnection(network)\"\n        >{{ network.name }}</v-btn>\n        <div class=\"text-caption\">{{ network.title }}</div>\n      </v-col>\n    </v-row>\n    <br><br>\n    <div v-if=\"hasProviderMetamask\">\n      <div>Authenticated access via Metamask:</div>\n      <v-row>\n        <v-col>\n          <v-btn color=\"teal\" class=\" my-3\" dark @click=\"prepareOpenMetaMaskConnectionDialog\"\n            >Connect Metamask Wallet</v-btn>\n        </v-col>\n        <v-col>\n          <v-btn class=\"mx-3 my-3\" color=\"teal\" dark @click=\"goToInstallMetamask\"\n            >Switch / Install network</v-btn>\n        </v-col>\n      </v-row>\n\n    </div>\n    <div v-else>\n      <div>Install Metamask to authenticate and then reload this application.</div>\n      <div>Installation instructions available at <a href=\"https://metamask.io/download/\" target=\"_blank\">https://metamask.io/download/</a></div>\n    </div>\n    <br><br>\n    <div v-if=\"hasProviderDirect\">\n      <div>Authenticated access via wallet custody:</div>\n      <v-btn color=\"teal\" dark @click=\"prepareOpenWeb3DirectConnectionDialog\"\n        >Connect with below configuration</v-btn\n      > <br><br>\n      <v-select\n          v-model=\"selectedNetwork\"\n          :hint=\"`node: ${selectedNetwork.nodeUrl}; custody: ${selectedNetwork.walletCustodyAPIBaseUrl}`\"\n          :items=\"networks\"\n          item-text=\"name\"\n          item-value=\"nodeUrl\"\n          persistent-hint\n          return-object\n          single-line\n        ></v-select>\n      <div v-if=\"hasCustodyApi\">\n        <br>\n        <v-combobox\n              label=\"Enter the wallet address\"\n              placeholder=\"capture your wallet address\"\n              outlined counter clearable\n              :search-input=\"wallet\"\n              @update:search-input=\"updateWallet\"\n              :items=\"wallets\"\n            ></v-combobox>\n        <v-text-field\n              label=\"Enter the wallet password\"\n              placeholder=\"capture your wallet password\"\n              outlined \n              :type=\"show?'text' : 'password'\"\n              @click:append=\"show = !show\"\n              v-model=\"password\"\n            ></v-text-field>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport { call, get } from \"vuex-pathify\";\nimport { getCustodyLastWallets } from \"../lib/api\";\nimport { getDefaultNetwork, getNetworkList } from \"../lib/config-file\";\n\nexport default {\n  data() {\n    return {\n      wallet: undefined,\n      wallets: [],\n      networks: [],\n      selectedNetwork: {name: \"undefined\"},\n      password: undefined,\n      show: false,\n    }\n  },\n  async mounted() {\n\n    const wallets = await getCustodyLastWallets();\n    if (wallets.length>0) this.wallet = wallets[0];\n    this.wallets = wallets;\n\n    this.disconnect();\n    const config = this.$store.get(\"config\");\n    this.networks = getNetworkList(config);\n    this.selectedNetwork = getDefaultNetwork(config);\n  },\n  computed: {\n    ...get(\"auth\",[\"chainsNetworks\"]),\n    hasProviderMetamask() {\n      if (this.$store.state.auth.providerMetamask) return true;\n      else return false;\n    },\n    hasProviderDirect() {\n      if (this.$store.state.auth.providerDirect) return true;\n      else return false;\n    },\n    hasCustodyApi() {\n      if (this.$store.state.auth.providerDirect && this.$store.state.auth.providerDirect.custodyModel == \"api\" ) return true;\n      else return false;\n    },\n  },\n  methods: {\n    ...call([\"errorFlash\"]),\n    ...call(\"auth\", [\"openMetaMaskConnectionDialog\", \"openWeb3DirectConnectionDialog\", \"openWeb3DirectAnonymousConnection\", \"setConnection\", \"checkNetworkProofOfCarbonReduction\", \"disconnect\"]),\n    updateWallet(v) {\n      this.wallet = v;\n    },\n    async prepareOpenMetaMaskConnectionDialog() {\n      const metamask = this.$store.state.auth.providerMetamask;\n      if (!metamask) return;\n\n      await this.setConnection(metamask);\n\n      if (!await this.checkNetworkProofOfCarbonReduction()) {\n        try {\n          await this.openMetaMaskConnectionDialog()\n        } catch (error) {\n          this.errorFlash(\"Could not connect an account from the wallet: \" + error.message);\n          return;\n        }\n        this.goToDashboard()\n      } else {\n        this.goToInstallMetamask()\n      }\n\n    },\n    async prepareOpenWeb3DirectConnectionDialog() {\n      await this.openWeb3DirectConnectionDialog({wallet: this.wallet, password: this.password, nodeUrl: this.selectedNetwork.nodeUrl});\n      this.wallets = await getCustodyLastWallets();\n    },\n\n    goToInstallMetamask() {\n      this.$router.push({ name: 'installMetaMask' })\n    },\n\n    goToDashboard() {\n      this.$router.push({ name: 'dashboard' })\n    }\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auth.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auth.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Auth.page.vue?vue&type=template&id=f26706f0&\"\nimport script from \"./Auth.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Auth.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h2',[_vm._v(\"Proof of Climate awaReness\")]),_c('div',[_vm._v(\"The consensus that incentivizes nodes to improving their environmental footprint by earning tokens (CRC / ₡)\")]),_c('img',{attrs:{\"src\":\"https://github.com/ethereum-pocr/.github/raw/main/profile/PoCR-Marketing.png\",\"width\":\"90%\"}}),_c('v-divider',{staticClass:\"my-4\"}),_vm._m(0),_c('v-divider',{staticClass:\"my-4\"}),_c('div',[_vm._v(\"This application gives you a view on the network and the nodes in the \"),_c('a',{on:{\"click\":function($event){return _vm.goTo('dashboard')}}},[_c('u',[_vm._v(\"Dashboard\")])])]),_c('div',[_c('a',{on:{\"click\":function($event){return _vm.goTo('authentication')}}},[_c('u',[_vm._v(\"Connect\")])]),_vm._v(\" with a wallet to operate as a node or as an auditor of carbon footprint \")]),_vm._m(1),_c('v-divider',{staticClass:\"my-4\"}),_vm._m(2),_c('v-divider',{staticClass:\"my-4\"})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"To read the detail of this consensus and methodology go to the \"),_c('a',{attrs:{\"href\":\"https://github.com/ethereum-pocr/whitepaper\",\"target\":\"_blank\"}},[_vm._v(\"whitepaper\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"A basic block and transaction explorer is available \"),_c('a',{attrs:{\"href\":\"https://ethereum-pocr.github.io/explorer/\",\"target\":\"_blank\"}},[_vm._v(\"here\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"This application is open sourced and its code is available in \"),_c('a',{attrs:{\"href\":\"https://github.com/ethereum-pocr/ethereum-pocr.github.io/tree/main/vue-auditor\",\"target\":\"_blank\"}},[_vm._v(\"github\")])])}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <h2>Proof of Climate awaReness</h2>\n    <div>The consensus that incentivizes nodes to improving their environmental footprint by earning tokens (CRC / ₡)</div>\n    <img src=\"https://github.com/ethereum-pocr/.github/raw/main/profile/PoCR-Marketing.png\" width=\"90%\"/>\n    <v-divider class=\"my-4\"></v-divider>\n    <div>To read the detail of this consensus and methodology go to the <a href=\"https://github.com/ethereum-pocr/whitepaper\" target=\"_blank\">whitepaper</a></div>\n    <v-divider class=\"my-4\"></v-divider>\n    <div>This application gives you a view on the network and the nodes in the  <a @click=\"goTo('dashboard')\"><u>Dashboard</u></a></div>\n    <div><a @click=\"goTo('authentication')\"><u>Connect</u></a> with a wallet to operate as a node or as an auditor of carbon footprint  </div>\n    <div>A basic block and transaction explorer is available <a href=\"https://ethereum-pocr.github.io/explorer/\" target=\"_blank\">here</a></div>\n    <v-divider class=\"my-4\"></v-divider>\n    <div>This application is open sourced and its code is available in <a href=\"https://github.com/ethereum-pocr/ethereum-pocr.github.io/tree/main/vue-auditor\" target=\"_blank\">github</a></div>\n\n    <v-divider class=\"my-4\"></v-divider>\n  </div>\n</template>\n\n<script>\nimport { call } from \"vuex-pathify\";\nexport default {\n\n\n  mounted() {\n    this.startInitialization()\n  },\n  methods: {\n    ...call([\"startInitialization\"]),\n    goTo(routeName) {\n      if (this.$route.name === routeName) return;\n      this.$router.push({ name: routeName });\n    },\n  }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Welcome.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Welcome.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Welcome.page.vue?vue&type=template&id=546257ea&\"\nimport script from \"./Welcome.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Welcome.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{attrs:{\"col\":\"\",\"wrap\":\"\"}},[_c('v-card',{staticClass:\"my-6 ma-auto\",attrs:{\"height\":\"200\",\"width\":\"300\"}},[_c('v-card-subtitle',[_vm._v(\"Block \"),_c('explorer',{attrs:{\"type\":\"block\",\"id\":_vm.lastBlock?_vm.lastBlock.block.number:0}})],1),_c('v-card-title',{staticClass:\"align-center\"},[_c('span',{staticClass:\"text-h4 ma-auto\",style:(_vm.lastBlockNoTurnSealing?'color:red':'')},[_vm._v(_vm._s(_vm.lastBlock && _vm.to1000s(_vm.lastBlock.block.number)))])]),_c('v-card-subtitle',[_vm._v(\"Total of \"+_vm._s(_vm.to1000s(_vm.totalCrypto,2))+\" ₡ created\")]),_c('v-card-subtitle',[_vm._v(_vm._s((_vm.timeSinceLastBlock/1000).toFixed(2))+\" sec. since last update\")])],1),_c('v-card',{staticClass:\"my-6 ma-auto\",attrs:{\"height\":\"200\",\"width\":\"200\"}},[_c('v-card-subtitle',[_vm._v(\"Audited nodes\")]),_c('v-card-title',{staticClass:\"align-center\"},[_c('span',{staticClass:\"text-h2 ma-auto\"},[_vm._v(_vm._s(_vm.nbOfNodes))])])],1),_c('v-card',{staticClass:\"my-6 ma-auto\",attrs:{\"height\":\"200\",\"width\":\"300\"}},[_c('v-card-subtitle',[_vm._v(\"Total environmental footprint (EF)\")]),_c('v-card-title',{staticClass:\"align-center\"},[_c('span',{staticClass:\"text-h4 ma-auto\"},[_c('climate-indicator',{attrs:{\"value\":_vm.totalFootprint}})],1)]),_c('v-card-subtitle',{staticClass:\"mt-3\"},[_vm._v(\"Average: \"),_c('climate-indicator',{attrs:{\"value\":_vm.avgFootprint}}),_vm._v(\" EF \")],1)],1),_c('v-row',[(_vm.lastBlock)?_c('v-col',{staticClass:\"py-8\",attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Environmental Footprint of the sealers\")]),_c('v-card-subtitle',[_vm._v(\" Last block sealer: \"+_vm._s(_vm.lastBlock.sealer.address)+\" / \"+_vm._s(_vm.lastBlock.sealer.vanity.custom)+\". Footprint: \"),_c('climate-indicator',{attrs:{\"value\":_vm.lastBlock.sealer.footprint}}),_vm._v(\" EF \")],1),_c('v-card-text',_vm._l((_vm.sealersSorted),function(sealer){return _c('v-progress-linear',{key:sealer.address,staticClass:\"my-1\",attrs:{\"height\":\"2em\",\"value\":(sealer.footprint-_vm.minFootprint) / (_vm.maxFootprint-_vm.minFootprint) * 100,\"color\":_vm.gradientGreenToRed((sealer.footprint-_vm.minFootprint) / (_vm.maxFootprint-_vm.minFootprint))},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){return [_vm._v(\" \"+_vm._s(sealer.vanity.custom)+\" -   \"),_c('strong',[_c('climate-indicator',{attrs:{\"value\":sealer.footprint}})],1),_vm._v(\"   EF \")]}}],null,true)})}),1)],1)],1):_vm._e(),(_vm.lastBlock)?_c('v-col',{staticClass:\"pb-8\",attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Sealers\")]),_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.sealers,\"headers\":_vm.sealersHeaders,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.name\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_c('v-icon',[_vm._v(_vm._s(item.isActive?\"mdi-lock-open-check-outline\":\"mdi-lock-remove\"))]),_vm._v(\" \"+_vm._s(item.vanity.custom))],1),_c('div',[_vm._v(_vm._s(item.address))])]}},{key:\"item.footprint\",fn:function(ref){\nvar item = ref.item;\nreturn [(item.footprint==0)?_c('div',{staticClass:\"text-caption\"},[_vm._v(\"Pending audit\")]):_c('climate-indicator',{attrs:{\"value\":item.footprint}})]}},{key:\"item.ratio\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s((100 * item.sealedBlocks / _vm.totalSealedBlocks).toFixed(2))+\" %\")]),_c('div',[_vm._v(_vm._s(item.sealedBlocks)+\" / \"+_vm._s(_vm.totalSealedBlocks))])]}},{key:\"item.balance\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(_vm.to1000s(item.balance, 4)))])]}},{key:\"item.lastReward\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(_vm.to1000s(item.lastReward,4)))])]}},{key:\"item.lastSealer\",fn:function(ref){\nvar item = ref.item;\nreturn [(item.address==_vm.lastBlock.sealer.address)?_c('v-icon',[_vm._v(\"mdi-seal\")]):_vm._e()]}}],null,false,164104628)})],1)],1)],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\nexport function colorGradient(fadeFraction, rgbColor1, rgbColor2, rgbColor3) {\n  var color1 = rgbColor1;\n  var color2 = rgbColor2;\n  var fade = fadeFraction;\n\n  // Do we have 3 colors for the gradient? Need to adjust the params.\n  if (rgbColor3) {\n    fade = fade * 2;\n\n    // Find which interval to use and adjust the fade percentage\n    if (fade >= 1) {\n      fade -= 1;\n      color1 = rgbColor2;\n      color2 = rgbColor3;\n    }\n  }\n\n  var diffRed = color2.red - color1.red;\n  var diffGreen = color2.green - color1.green;\n  var diffBlue = color2.blue - color1.blue;\n\n  var gradient = {\n    red: parseInt(Math.floor(color1.red + (diffRed * fade)), 10),\n    green: parseInt(Math.floor(color1.green + (diffGreen * fade)), 10),\n    blue: parseInt(Math.floor(color1.blue + (diffBlue * fade)), 10),\n  };\n\n  return 'rgb(' + gradient.red + ',' + gradient.green + ',' + gradient.blue + ')';\n}\n\nconst highColor = {\n  red: 217,\n  green: 83,\n  blue: 79\n};\nconst mediumColor = {\n  red: 240,\n  green: 173,\n  blue: 78\n};\nconst lowColor = {\n  red: 92,\n  green: 184,\n  blue: 91\n};\n\nexport function gradientGreenToRed(fadeFraction) {\n  return colorGradient(fadeFraction, lowColor, mediumColor, highColor);\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-icon',{attrs:{\"small\":\"\",\"color\":\"blue\"},on:{\"click\":function($event){return _vm.open(_vm.url)}}},[_vm._v(\"mdi-open-in-new\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-icon small color=\"blue\" @click=\"open(url)\">mdi-open-in-new</v-icon>\n</template>\n\n<script>\nimport $store from \"@/store\";\n\nexport default {\n  props: {\n    id: [String, Number],\n    type: { \n      type: String,\n      validator(value) {\n        // The value must match one of these strings\n        return ['block', 'tx', 'token', 'account'].includes(value)\n      }\n    },\n  },\n\n  computed: {\n    url() {\n      let explorerUrl = $store.get(\"auth/explorerUrl\");\n      if (!explorerUrl) return undefined;\n      while (explorerUrl.endsWith('/')) explorerUrl = explorerUrl.slice(0, explorerUrl.length-1)\n      const u = new URL(`${this.type}/${this.id}`, `${explorerUrl}/`)\n      return u.href;\n    }\n  },\n\n  methods: {\n    open(url) {\n      window.open(url, 'POCR-EXPLORER')\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExplorerRedirect.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExplorerRedirect.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ExplorerRedirect.vue?vue&type=template&id=6eff6f16&\"\nimport script from \"./ExplorerRedirect.vue?vue&type=script&lang=js&\"\nexport * from \"./ExplorerRedirect.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('span',{staticClass:\"helper\",on:{\"click\":function($event){_vm.displayed=!_vm.displayed}}},[_vm._v(\" \"+_vm._s(_vm.to1000s(_vm.value))+\" \"),_c('v-dialog',{attrs:{\"width\":\"auto\"},model:{value:(_vm.displayed),callback:function ($$v) {_vm.displayed=$$v},expression:\"displayed\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Environmental footprint of \"+_vm._s(_vm.to1000s(_vm.value))+\"   \"),_c('span',{staticClass:\"text-caption\"},[_vm._v(\"1/\"+_vm._s(_vm.to1000s(Math.pow(10, _vm.efDecimals)))+\"th\")]),_vm._v(\" EF is equivalent to\")]),_c('v-card-text',[_c('div',[_c('i',[_vm._v(\"1 Environmental footprint (EF) is a normalized indicator of the impact of 1 human being. \"),_c('a',{attrs:{\"href\":\"https://eplca.jrc.ec.europa.eu/EnvironmentalFootprint.html\",\"target\":\"_blank\"}},[_vm._v(\"Source\")]),_vm._v(\".\")])]),_c('div',[_c('i',[_vm._v(\"The table show equivalence of the environmental footprint in each of the indicators\")])]),_c('v-simple-table',[_c('thead',[_c('tr',[_c('th',{staticClass:\"text-left\"},[_vm._v(\" Indicator \")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\" \"+_vm._s(_vm.to1000s(_vm.value / Math.pow(10, _vm.efDecimals), _vm.efDecimals))+\" EF equivalent to \")])])]),_c('tbody',_vm._l((_vm.fromSingleIndicator(_vm.value)),function(ind){return _c('tr',{key:ind.name},[_c('td',[_vm._v(_vm._s(ind.name)+\" \"),_c('v-tooltip',{attrs:{\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nvar attrs = ref.attrs;\nreturn [_c('v-icon',_vm._g(_vm._b({attrs:{\"color\":\"blue\",\"dense\":\"\"}},'v-icon',attrs,false),on),[_vm._v(\"mdi-information-outline\")])]}}],null,true)},[_c('span',[_vm._v(_vm._s(ind.definition))])])],1),_c('td',[_vm._v(_vm._s(_vm.to1000s(ind.valueEq, 2))+\" \"+_vm._s(ind.unit))])])}),0)]),_c('div',[_vm._v(\"Measure of EF are for 1 F.U. as per LCA methodology (or multiple FU in the case of the whole network)\")]),_c('div',[_vm._v(\"Functional Unit: \"),_c('i',[_vm._v(_vm._s(_vm.functionalUnit))])])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <span class=\"helper\" @click=\"displayed=!displayed\">\n      {{to1000s(value)}}\n      <v-dialog v-model=\"displayed\" width=\"auto\">\n        <v-card>\n          <v-card-title>Environmental footprint of {{to1000s(value)}} &nbsp; <span class=\"text-caption\">1/{{to1000s(Math.pow(10, efDecimals))}}th</span> EF is equivalent to</v-card-title>\n          <v-card-text>\n            <div><i>1 Environmental footprint (EF) is a normalized indicator of the impact of 1 human being. <a href=\"https://eplca.jrc.ec.europa.eu/EnvironmentalFootprint.html\" target=\"_blank\">Source</a>.</i></div>\n            <div><i>The table show equivalence of the environmental footprint in each of the indicators</i></div>\n            <v-simple-table>\n              <thead>\n                <tr>\n                  <th class=\"text-left\">\n                    Indicator\n                  </th>\n                  <th class=\"text-left\">\n                    {{to1000s(value / Math.pow(10, efDecimals), efDecimals)}} EF equivalent to \n                  </th>\n                  <!-- <th class=\"text-left\">\n                    Normalized value\n                  </th> -->\n                </tr>\n              </thead>\n              <tbody>\n                  <tr v-for=\"ind of fromSingleIndicator(value)\" :key=\"ind.name\">\n                    <td>{{ind.name}} \n                      <v-tooltip top>\n                        <template v-slot:activator=\"{ on, attrs }\">\n                          <v-icon color=\"blue\" dense v-on=\"on\" v-bind=\"attrs\">mdi-information-outline</v-icon>\n                        </template>\n                        <span>{{ind.definition}}</span>\n                      </v-tooltip>\n                    </td>\n                    <td>{{ to1000s(ind.valueEq, 2) }} {{ind.unit}}</td>\n                    <!-- <td>{{ to1000s(ind.contribution/Math.pow(10, efDecimals), efDecimals) }} EF ({{to1000s(100*ind.contribution/value,2)}}%)</td> -->\n                  </tr>\n              </tbody>\n            </v-simple-table>\n            <div>Measure of EF are for 1 F.U. as per LCA methodology (or multiple FU in the case of the whole network)</div>\n            <div>Functional Unit: <i>{{functionalUnit}}</i></div>\n          </v-card-text>\n        </v-card>\n      </v-dialog>\n    </span>\n\n</template>\n\n<script>\nimport { get } from \"vuex-pathify\";\nimport {to1000s} from \"../lib/numbers\";\nexport default {\n  props: {\n    value: {type: Number},\n  },\n  data: () => ({\n    displayed:false\n  }),\n  computed: {\n    ...get(\"climate\", [\"fromSingleIndicator\", \"efDecimals\", \"functionalUnit\"]),\n  },\n  methods: {\n    to1000s,\n    \n  }\n}\n</script>\n\n<style>\n.helper {\n  cursor: help;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClimateIndicator.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ClimateIndicator.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ClimateIndicator.vue?vue&type=template&id=52edc082&\"\nimport script from \"./ClimateIndicator.vue?vue&type=script&lang=js&\"\nexport * from \"./ClimateIndicator.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ClimateIndicator.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <v-layout col wrap>\n    <v-card height=\"200\" width=\"300\" class=\"my-6 ma-auto\">\n      <v-card-subtitle>Block <explorer type=\"block\" :id=\"lastBlock?lastBlock.block.number:0\"></explorer></v-card-subtitle>\n      <v-card-title class=\"align-center\">\n        <span class=\"text-h4 ma-auto\" :style=\"lastBlockNoTurnSealing?'color:red':''\">{{\n          lastBlock && to1000s(lastBlock.block.number)\n        }}</span>\n      </v-card-title>\n      <v-card-subtitle>Total of {{ to1000s(totalCrypto,2) }} ₡ created</v-card-subtitle>\n      <v-card-subtitle>{{ (timeSinceLastBlock/1000).toFixed(2) }} sec. since last update</v-card-subtitle>\n    </v-card>\n\n    <v-card height=\"200\" width=\"200\" class=\"my-6 ma-auto\">\n      <v-card-subtitle>Audited nodes</v-card-subtitle>\n      <v-card-title class=\"align-center\">\n        <span class=\"text-h2 ma-auto\">{{ nbOfNodes }}</span>\n      </v-card-title>\n    </v-card>\n    <v-card height=\"200\" width=\"300\" class=\"my-6 ma-auto\">\n      <v-card-subtitle>Total environmental footprint (EF)</v-card-subtitle>\n      <v-card-title class=\"align-center\">\n        <span class=\"text-h4 ma-auto\"><climate-indicator :value=\"totalFootprint\"></climate-indicator></span>\n      </v-card-title>\n      <v-card-subtitle class=\"mt-3\"\n        >Average: <climate-indicator :value=\"avgFootprint\"></climate-indicator> EF\n      </v-card-subtitle\n      >\n    </v-card>\n    <v-row>\n      <v-col cols=\"12\" class=\"py-8\" v-if=\"lastBlock\">\n        <v-card>\n        <v-card-title>Environmental Footprint of the sealers</v-card-title>\n        <v-card-subtitle>\n          Last block sealer: {{ lastBlock.sealer.address }} /\n          {{ lastBlock.sealer.vanity.custom }}. Footprint: <climate-indicator :value=\"lastBlock.sealer.footprint\"></climate-indicator> EF\n        </v-card-subtitle>\n        <v-card-text>\n          <v-progress-linear v-for=\"sealer of sealersSorted\" :key=\"sealer.address\" \n            height=\"2em\" class=\"my-1\"\n            :value=\"(sealer.footprint-minFootprint) / (maxFootprint-minFootprint) * 100\"\n            :color=\"gradientGreenToRed((sealer.footprint-minFootprint) / (maxFootprint-minFootprint))\"\n          >\n            <template v-slot:default=\"{  }\">\n              {{sealer.vanity.custom}} -  &nbsp; <strong><climate-indicator :value=\"sealer.footprint\"></climate-indicator> </strong> &nbsp; EF\n            </template>\n          </v-progress-linear>\n        </v-card-text>\n\n        </v-card>\n      </v-col>\n\n      <v-col cols=\"12\" class=\"pb-8\" v-if=\"lastBlock\">\n        <v-card>\n          <v-card-title>Sealers</v-card-title>\n          <v-card-text>\n            <v-data-table\n              :items=\"sealers\"\n              :headers=\"sealersHeaders\"\n              :items-per-page=\"-1\"\n              hide-default-footer\n            >\n              <template v-slot:item.name=\"{ item }\">\n                <div><v-icon>{{item.isActive?\"mdi-lock-open-check-outline\":\"mdi-lock-remove\"}}</v-icon> {{ item.vanity.custom }}</div>\n                <div>{{ item.address }}</div>\n              </template>\n              <template v-slot:item.footprint=\"{ item }\">\n                <div v-if=\"item.footprint==0\" class=\"text-caption\">Pending audit</div>\n                <climate-indicator v-else :value=\"item.footprint\"></climate-indicator>\n              </template>\n              <template v-slot:item.ratio=\"{ item }\">\n                <div>{{ (100 * item.sealedBlocks / totalSealedBlocks).toFixed(2) }} %</div>\n                <div>{{ item.sealedBlocks }} / {{ totalSealedBlocks }}</div>\n              </template>\n              <template v-slot:item.balance=\"{ item }\">\n                <div>{{ to1000s(item.balance, 4) }}</div>\n              </template>\n              <template v-slot:item.lastReward=\"{ item }\">\n                <div>{{ to1000s(item.lastReward,4) }}</div>\n              </template>\n              <template v-slot:item.lastSealer=\"{ item }\">\n                <v-icon v-if=\"item.address==lastBlock.sealer.address\">mdi-seal</v-icon>\n              </template>\n            </v-data-table>\n          </v-card-text>\n        </v-card>\n      </v-col>\n<!-- \n      <v-col cols=\"12\" class=\"pa-8\" v-if=\"lastBlock\">\n        <v-card-title>Block reward per node</v-card-title>\n        <v-card-subtitle>\n          Last block sealer: {{ lastBlock.sealer.address }} /\n          {{ lastBlock.sealer.vanity.custom }}. Footprint:\n          {{ lastBlock.sealer.footprint }} g.CO₂\n        </v-card-subtitle>\n        <v-sparkline\n          auto-draw\n          type=\"bar\"\n          :auto-draw-duration=\"500\"\n          auto-line-width\n          :value=\"sealersReward\"\n          label-size=\"3\"\n          :gradient=\"['#42b3f4']\"\n          :padding=\"28\"\n        >\n          <template v-slot:label=\"item\">\n            {{\n              lastBlock.sealer.address == sealersAddress[item.index] ? \"[\" : \"\"\n            }}\n            {{ sealersAddress[item.index] }}\n            {{\n              lastBlock.sealer.address == sealersAddress[item.index] ? \"]\" : \"\"\n            }}\n            -\n            {{ Number.parseFloat(item.value).toFixed(2) }}\n          </template>\n        </v-sparkline>\n      </v-col> -->\n\n      <!-- <v-col cols=\"12\" class=\"pa-8\">\n        <v-card-title>CRC Creation by block </v-card-title>\n        <v-card-subtitle\n          >Last reward:\n          {{ rewardsByBlock[rewardsByBlock.length - 1].toFixed(4) }} CRC;\n          Average: {{ averageReward.toFixed(4) }} CRC; Last\n          {{ rewardsByBlock.length - 1 }} blocks</v-card-subtitle\n        >\n        <v-sparkline\n          auto-draw\n          type=\"trend\"\n          :auto-draw-duration=\"0\"\n          :line-width=\"0.3\"\n          :value=\"rewardsByBlock\"\n          label-size=\"3\"\n          :gradient=\"['#42b3f4']\"\n        ></v-sparkline>\n      </v-col> -->\n    </v-row>\n  </v-layout>\n</template>\n\n<script>\nimport { get, call } from \"vuex-pathify\";\n// import { handleMM } from '../lib/api';\nimport { gradientGreenToRed } from '../lib/colors'\nimport { to1000s } from '../lib/numbers'\nimport Explorer from \"../components/ExplorerRedirect.vue\";\nimport ClimateIndicator from \"../components/ClimateIndicator.vue\";\n\nexport default {\n  components: {Explorer, ClimateIndicator},\n  data: () => {\n    return {\n      nbBlocksToKeep: 100,\n      sealerMap: new Map(),\n      blocks: [],\n      sealersReward: [],\n      sealersHeaders: [\n      { text: \"Name\", value: \"name\", align:\"left\" },\n      { text: \"Env. Footprint\", value: \"footprint\" , align:\"right\"},\n      { text: \"Reward (₡)\", value: \"lastReward\" , align:\"right\"},\n      { text: \"Balance (₡)\", value: \"balance\" , align:\"right\"},\n      { text: \"Sealing ratio\", value: \"ratio\", align:\"center\"},\n      { text: \"Last\", value: \"lastSealer\" },\n    ],\n    };\n  },\n  async mounted() {\n    console.log(\"Dashboard mounted\");\n    try {\n      await this.fetchAllValues();\n      await this.fetchChainInformations();\n      await this.subscribeToChainUpdates();\n      await this.initBackupLoop();\n    } catch (error) {\n      console.error(\"Fail loading dashboard\", error);      \n    }\n\n  },\n  computed: {\n    ...get(\"nodes\", [\n      \"sealers\",\n      \"nbOfNodes\",\n      \"lastBlock\",\n      \"totalFootprint\",\n      \"totalCrypto\",\n      \"rewardsByBlock\",\n      \"averageReward\",\n      \"averageDelaySec\",\n      \"timeSinceLastBlock\"\n    ]),\n    sealersSorted() {\n      return [...this.sealers].filter(s=>s.footprint>0).sort( (a,b)=>a.footprint-b.footprint )\n    },\n    maxFootprint() {\n      return this.sealers.reduce( (max, s)=>s.footprint>max?s.footprint:max, 1 )\n    },\n    minFootprint() {\n      const max = this.maxFootprint;\n      const min = this.sealers.reduce( (min, s)=>s.footprint<min?s.footprint:min, max );\n      const delta = max-min;\n      return min - delta*0.05 ; // remove 5% to have a lower min\n    },\n    avgFootprint() {\n      const {nb, total} = this.sealers.reduce( ({nb, total}, s)=>s.footprint>0?({nb:nb+1, total: total+s.footprint}):{nb,total}, {nb:0, total:0} );\n      if (nb>0) return total / nb;\n      return 0;\n    },\n    sealersFootprint() {\n      return this.sealers.map((s) => s.footprint);\n    },\n    sealersAddress() {\n      return this.sealers.map((s) => s.address);\n    },\n    sealersLabels() {\n      return this.sealers.map((s) => s.vanity.custom);\n    },\n    totalSealedBlocks() {\n      return this.sealers.reduce( (total, s)=>total+s.sealedBlocks, 0);\n    },\n    lastBlockNoTurnSealing() {\n      return this.lastBlock && this.lastBlock.block.difficulty==1; // 1 means out of turn ; 2 means in turn\n    },\n  },\n  methods: {\n    gradientGreenToRed, to1000s,\n    ...call(\"nodes\", [\n      \"fetchAllValues\",\n      \"fetchChainInformations\",\n      \"subscribeToChainUpdates\",\n      \"initBackupLoop\"\n    ]),\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Dashboard.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Dashboard.page.vue?vue&type=template&id=24dcbd88&\"\nimport script from \"./Dashboard.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Dashboard.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-col',[_c('v-card',[_c('v-card-title',[_vm._v(\"Number of Auditors\")]),_c('v-card-text',[_vm._v(_vm._s(_vm.nbAuditors))])],1)],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Auditors\")]),_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.auditors,\"headers\":_vm.tableHeadersAuditors,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.status\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.isApproved ? \"Oui\" : \"Non\"))])]}},{key:\"item.votes\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.nbVotes)+\" / \"+_vm._s(item.minVotes)+\" avant \"+_vm._s(item.isApproved ? \"Révocation\" : \"Approbation\"))])]}},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-btn',{attrs:{\"color\":\"primary\",\"small\":\"\"},on:{\"click\":function($event){return _vm.nodeVote(item)}}},[_vm._v(\" \"+_vm._s(_vm.computeLabel(item))+\" \")])]}}])})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row>\n\n    <v-col>\n      <v-card>\n        <v-card-title>Number of Auditors</v-card-title>\n        <v-card-text>{{ nbAuditors }}</v-card-text>\n      </v-card>\n    </v-col>\n\n    <v-col cols=\"12\">\n      <v-card>\n        <v-card-title>Auditors</v-card-title>\n        <v-card-text>\n          <v-data-table\n              :items=\"auditors\"\n              :headers=\"tableHeadersAuditors\"\n              :items-per-page=\"-1\"\n              hide-default-footer\n          >\n            <template v-slot:item.status=\"{ item }\">\n              <div>{{ item.isApproved ? \"Oui\" : \"Non\" }}</div>\n            </template>\n            <template v-slot:item.votes=\"{ item }\">\n              <div>{{ item.nbVotes }} / {{ item.minVotes }} avant {{ item.isApproved ? \"Révocation\" : \"Approbation\" }}</div>\n            </template>\n            <template v-slot:item.actions=\"{ item }\">\n              <v-btn\n                  color=\"primary\"\n                  small\n                  @click=\"nodeVote(item)\"\n              >\n                {{ computeLabel(item) }}\n              </v-btn>\n            </template>\n          </v-data-table>\n        </v-card-text>\n      </v-card>\n    </v-col>\n\n  </v-row>\n</template>\n\n<script>\nimport { get, call } from \"vuex-pathify\";\n\nexport default {\n  data: () => ({\n    tableHeadersAuditors: [\n      { text: \"Auditor\", value: \"address\" },\n      { text: \"Approuvé\", value: \"status\" },\n      { text: \"Votes courants\", value: \"votes\" },\n      { text: \"Actions\", value: \"actions\", sortable: false },\n    ],\n    switchState: false,\n\n  }),\n  computed: {\n    ...get(\"nodeGovernance\", [\"nbAuditors\", \"auditors\"]),\n  },\n\n  async mounted() {\n    await this.fetchAllAuditorsValues();\n  },\n  methods: {\n    ...call(\"nodeGovernance\", [\"fetchAllAuditorsValues\", \"voteAuditor\"]),\n\n    computeLabel(item) {\n      // auditor is approved, vote for unapproved\n      if (item.isApproved) {\n        if (item.currentVote) {\n          return \"Voter pour révoquer\";\n        }\n        return \"Retirer mon vote de révocation\";\n      }\n      // auditor is not approved, vote for approved\n      if (item.currentVote) {\n        return \"Retirer mon vote d'approbation\";\n      }\n      return \"Voter pour approuver\";\n    },\n\n    async nodeVote(item) {\n      console.log(`address : ${item.address} / vote value : ${!item.currentVote}`);\n      try {\n        await this.voteAuditor({\n          auditorAddress: item.address,\n          accept: !item.currentVote\n        });\n        await this.fetchAllAuditorsValues();\n      } catch (error) {\n        console.log(error);\n        await this.fetchAllAuditorsValues();\n        throw error;\n      }\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auditors.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Auditors.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Auditors.page.vue?vue&type=template&id=66ef6459&\"\nimport script from \"./Auditors.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Auditors.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-col',[_c('v-card',[_c('v-card-title',[_vm._v(\"Number of Nodes\")]),_c('v-card-text',[_vm._v(_vm._s(_vm.nbOfNodes))])],1)],1),_c('v-col',[_c('v-card',[_c('v-card-title',[_vm._v(\"Total Environmental Footprint (EF)\")]),_c('v-card-text',[_c('climate-indicator',{attrs:{\"value\":_vm.totalFootprint}}),_vm._v(\" EF \")],1)],1)],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Nodes\")]),_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.sealers,\"headers\":_vm.tableHeaders,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.footprint\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('climate-indicator',{attrs:{\"value\":item.footprint}})]}},{key:\"item.vanity\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(\"Address: \"+_vm._s(item.address))]),_c('div',[_vm._v(\"Name: \"+_vm._s(item.vanity.custom))])]}},{key:\"item.actions\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-btn',{attrs:{\"color\":\"primary\",\"small\":\"\"},on:{\"click\":function($event){return _vm.openUpdateFootprintDialog(item)}}},[_vm._v(\" Update footprint \")])]}}])}),_c('v-dialog',{attrs:{\"width\":\"auto\"},model:{value:(_vm.footprintDialog),callback:function ($$v) {_vm.footprintDialog=$$v},expression:\"footprintDialog\"}},[(_vm.selectedSealer)?_c('v-card',[_c('v-card-title',[_vm._v(\" Update Environmental Footprint for sealer \"),_c('br'),_vm._v(\" \"+_vm._s(_vm.selectedSealer.address)+\" \")]),_c('v-card-text',[_c('v-row',[_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"6\"}},[_c('v-text-field',{attrs:{\"type\":\"number\",\"outlined\":\"\",\"dense\":\"\"},model:{value:(_vm.newFootprintValue),callback:function ($$v) {_vm.newFootprintValue=$$v},expression:\"newFootprintValue\"}})],1),_c('v-col',{staticClass:\"pb-0\"},[_c('v-btn',{on:{\"click\":function($event){_vm.footprintDialog = false}}},[_vm._v(\"Cancel\")])],1),_c('v-col',{staticClass:\"pb-0\"},[_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":_vm.submitNewFootprint}},[_vm._v(\" Submit \")])],1)],1),_vm._l((_vm.editingIndicators),function(ind){return _c('v-row',{key:ind.name,staticClass:\"flex align-center\",staticStyle:{\"border-top\":\"solid\"}},[_c('v-col',{attrs:{\"cols\":\"6\"}},[_vm._v(\" \"+_vm._s(ind.name)+\" \")]),_c('v-col',{attrs:{\"cols\":\"6\"}},[(ind.name==_vm.editingIndicator.name)?_c('v-text-field',{attrs:{\"type\":\"number\",\"label\":ind.unit,\"append-icon\":\"mdi-close\",\"append-outer-icon\":\"mdi-checkbox-marked-outline\"},on:{\"click:append\":_vm.cancelEditField,\"click:append-outer\":_vm.applyEditField},model:{value:(_vm.editingIndicator.valueEq),callback:function ($$v) {_vm.$set(_vm.editingIndicator, \"valueEq\", $$v)},expression:\"editingIndicator.valueEq\"}}):_c('div',{on:{\"click\":function($event){return _vm.editField(ind)}}},[_vm._v(\" \"+_vm._s(_vm.to1000s(ind.valueEq, 2))+\" \"+_vm._s(ind.unit)+\" \")])],1)],1)})],2)],1):_vm._e()],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row>\n    <v-col>\n      <v-card>\n        <v-card-title>Number of Nodes</v-card-title>\n        <v-card-text>{{ nbOfNodes }}</v-card-text>\n      </v-card>\n    </v-col>\n    <v-col>\n      <v-card>\n        <v-card-title>Total Environmental Footprint (EF)</v-card-title>\n        <v-card-text><climate-indicator :value=\"totalFootprint\"></climate-indicator> EF </v-card-text>\n      </v-card>\n    </v-col>\n    <v-col cols=\"12\">\n      <v-card>\n        <v-card-title>Nodes</v-card-title>\n        <v-card-text>\n          <v-data-table\n            :items=\"sealers\"\n            :headers=\"tableHeaders\"\n            :items-per-page=\"-1\"\n            hide-default-footer\n          >\n            <template v-slot:item.footprint=\"{ item }\">\n              <climate-indicator :value=\"item.footprint\"></climate-indicator>\n            </template>\n            <template v-slot:item.vanity=\"{ item }\">\n              <div>Address: {{ item.address }}</div>\n              <div>Name: {{ item.vanity.custom }}</div>\n            </template>\n\n            <template v-slot:item.actions=\"{ item }\">\n              <v-btn\n                color=\"primary\"\n                small\n                @click=\"openUpdateFootprintDialog(item)\"\n              >\n                Update footprint\n              </v-btn>\n            </template>\n          </v-data-table>\n\n          <v-dialog v-model=\"footprintDialog\" width=\"auto\">\n            <v-card v-if=\"selectedSealer\">\n              <v-card-title>\n                Update Environmental Footprint for sealer <br> {{ selectedSealer.address }}\n              </v-card-title>\n              <v-card-text>\n                <v-row>\n                  <v-col cols=\"6\" class=\"pb-0\">\n                    <v-text-field\n                      type=\"number\" \n                      outlined\n                      dense\n                      v-model=\"newFootprintValue\"\n                    ></v-text-field>\n                  </v-col>\n                  <v-col class=\"pb-0\">\n                    <v-btn @click=\"footprintDialog = false\">Cancel</v-btn>\n                  </v-col>\n                  <v-col class=\"pb-0\">\n                    <v-btn color=\"primary\" @click=\"submitNewFootprint\">\n                      Submit\n                    </v-btn>\n                  </v-col>\n                </v-row>\n                <v-row v-for=\"ind of editingIndicators\" :key=\"ind.name\"\n                      class=\"flex align-center\"\n                      style=\"border-top: solid;\"\n                >\n                  <v-col cols=\"6\">\n                    {{ind.name}}\n                  </v-col>\n                  <v-col cols=\"6\">\n                    <v-text-field v-if=\"ind.name==editingIndicator.name\" v-model=\"editingIndicator.valueEq\"\n                      type=\"number\"  :label=\"ind.unit\" append-icon=\"mdi-close\" append-outer-icon=\"mdi-checkbox-marked-outline\" \n                      @click:append=\"cancelEditField\" @click:append-outer=\"applyEditField\"\n                    ></v-text-field>\n                    <div v-else @click=\"editField(ind)\">\n                      {{ to1000s(ind.valueEq, 2) }} {{ind.unit}}\n                    </div>\n                  </v-col>\n                </v-row>\n              </v-card-text>\n            </v-card>\n          </v-dialog>\n        </v-card-text>\n      </v-card>\n    </v-col>\n  </v-row>\n</template>\n\n<script>\nimport ClimateIndicator from \"../components/ClimateIndicator.vue\";\nimport { get, call } from \"vuex-pathify\";\nimport { to1000s } from '../lib/numbers';\n\nexport default {\n  components: {ClimateIndicator},\n  data: () => ({\n    tableHeaders: [\n      { text: \"Node\", value: \"vanity\" },\n      { text: \"Env. Footprint\", value: \"footprint\", align: 'end' },\n      { text: \"Actions\", value: \"actions\", sortable: false },\n    ],\n    tableHeadersAuditors: [\n      { text: \"Auditor\", value: \"address\" },\n      { text: \"Votes courants\", value: \"votes\" },\n      { text: \"Mon Vote\", value: \"actions\", sortable: false },\n    ],\n    footprintDialog: false,\n    selectedSealer: null,\n    newFootprintValue: 0,\n    editingIndicator: {},\n    editingIndicators: [],\n  }),\n  computed: {\n    ...get(\"nodes\", [\"nbOfNodes\", \"totalFootprint\", \"sealers\"]),\n    ...get(\"climate\", [\"efDecimals\", \"fromSingleIndicator\", \"toSingleIndicator\"]),\n    newFootprintValueDisplay: {\n      get: function() { return Number(this.newFootprintValue).toFixed( this.efDecimals)},\n      set: function(v) { console.log(\"setting value\", v); this.newFootprintValue = Number(v); }\n    }\n  },\n\n  mounted() {\n    this.fetchAllValues();\n  },\n  methods: {\n    to1000s,\n    ...call(\"nodes\", [\"fetchAllValues\", \"updateFootprint\"]),\n    editField(indicator) {\n      this.editingIndicator = indicator;\n      this.editingIndicator.valueEq = 0;\n    },\n    applyEditField() {\n      const index = this.editingIndicators.findIndex( i=>i.name==this.editingIndicator.name )\n      if (index>=0) {\n        this.editingIndicators[index] = this.editingIndicator;\n      }\n      const values = this.editingIndicators.map( i=>Number(i.valueEq) )\n      this.newFootprintValue = this.toSingleIndicator(values)\n      this.editingIndicator = {};\n    },\n    cancelEditField() {\n      this.editingIndicator = {};\n    },\n    openUpdateFootprintDialog(sealer) {\n      this.selectedSealer = sealer;\n      this.newFootprintValue = sealer.footprint;\n      this.editingIndicator = {};\n      this.editingIndicators = this.fromSingleIndicator(this.newFootprintValue);\n      this.footprintDialog = true;\n    },\n\n    async submitNewFootprint() {\n      this.editingIndicator = {};\n      this.footprintDialog = false;\n      await this.updateFootprint({\n        sealerAddress: this.selectedSealer.address,\n        footprint: this.newFootprintValue,\n      });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Audit.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Audit.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Audit.page.vue?vue&type=template&id=73944dbd&\"\nimport script from \"./Audit.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Audit.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-tabs',{attrs:{\"centered\":\"\",\"slider-color\":\"primary\"},model:{value:(_vm.currentTab),callback:function ($$v) {_vm.currentTab=$$v},expression:\"currentTab\"}},[_c('v-tab',{attrs:{\"href\":\"#footprints\"}},[_vm._v(\" Footprints \")]),_c('v-tab',{attrs:{\"href\":\"#pledges\"}},[_vm._v(\" Pledges \")])],1),_c('v-tabs-items',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.currentTab),callback:function ($$v) {_vm.currentTab=$$v},expression:\"currentTab\"}},[_c('v-tab-item',{attrs:{\"value\":\"footprints\"}},[_c('v-card',[_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.footprintHistory,\"headers\":_vm.footprintTableHeaders,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.node\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.node))]),_c('div',[_vm._v(_vm._s(item.nodeName))])]}},{key:\"item.explorer\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('explorer',{attrs:{\"type\":\"tx\",\"id\":item.txHash}})]}}])})],1)],1)],1),_c('v-tab-item',{attrs:{\"value\":\"pledges\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Your pledge history\")]),_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.pledgeHistory,\"headers\":_vm.pledgeTableHeaders,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.explorer\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('explorer',{attrs:{\"type\":\"tx\",\"id\":item.txHash}})]}}])})],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row>\n    <v-tabs v-model=\"currentTab\" centered slider-color=\"primary\">\n      <v-tab href=\"#footprints\"> Footprints </v-tab>\n      <v-tab href=\"#pledges\"> Pledges </v-tab>\n    </v-tabs>\n\n    <v-tabs-items v-model=\"currentTab\" style=\"width: 100%\">\n      <v-tab-item value=\"footprints\">\n        <v-card>\n          <v-card-text>\n            <v-data-table\n              :items=\"footprintHistory\"\n              :headers=\"footprintTableHeaders\"\n              :items-per-page=\"-1\"\n              hide-default-footer\n            >\n              <template v-slot:item.node=\"{ item }\">\n                  <div>{{ item.node }}</div>\n                  <div>{{ item.nodeName }}</div>\n              </template>\n              <template v-slot:item.explorer=\"{ item }\">\n                  <explorer type=\"tx\" :id=\"item.txHash\"></explorer>\n              </template>\n            </v-data-table>\n          </v-card-text>\n        </v-card>\n      </v-tab-item>\n      <v-tab-item value=\"pledges\">\n        <v-card>\n          <v-card-title>Your pledge history</v-card-title>\n          <v-card-text>\n            <v-data-table\n              :items=\"pledgeHistory\"\n              :headers=\"pledgeTableHeaders\"\n              :items-per-page=\"-1\"\n              hide-default-footer\n            >\n              <template v-slot:item.explorer=\"{ item }\">\n                    <explorer type=\"tx\" :id=\"item.txHash\"></explorer>\n              </template>\n            </v-data-table>\n          </v-card-text>\n        </v-card>\n      </v-tab-item>\n    </v-tabs-items>\n  </v-row>\n</template>\n\n<script>\nimport { get, call } from \"vuex-pathify\";\nimport Explorer from \"../components/ExplorerRedirect.vue\";\n\nexport default {\n  components: {Explorer},\n  data: () => ({\n    currentTab: \"footprints\",\n    footprintTableHeaders: [\n      { text: \"Block N°\", value: \"blockNumber\" },\n      { text: \"Auditor\", value: \"auditorName\" },\n      { text: \"Node\", value: \"node\" },\n      { text: \"Assigned\", value: \"footprint\" },\n      { text: \"\", value: \"explorer\" },\n    ],\n    pledgeTableHeaders: [\n      { text: \"Block N°\", value: \"blockNumber\" },\n      // { text: \"Auditor address\", value: \"auditor\" },\n      { text: \"Pledge\", value: \"pledge\" },\n      { text: \"Total\", value: \"total\" },\n      { text: \"\", value: \"explorer\" },\n    ],\n  }),\n\n  computed: {\n    ...get(\"history\", [\"footprintHistory\", \"pledgeHistory\"]),\n  },\n\n  async mounted() {\n    this.fetchAllValues();\n  },\n\n  methods: {\n    ...call(\"history\", [\"fetchAllValues\"]),\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./History.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./History.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./History.page.vue?vue&type=template&id=3cf9b441&\"\nimport script from \"./History.page.vue?vue&type=script&lang=js&\"\nexport * from \"./History.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',{attrs:{\"wrap\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Current Wallet Balance\")]),_c('v-card-text',[_vm._v(\" \"+_vm._s(_vm.toEther(_vm.balance))+\" CRC \")])],1)],1),_c('v-col',{attrs:{\"cols\":\"8\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Pledge Informations\")]),_c('v-card-text',[_c('div',[_vm._v(\" Min pledge to start audit: \"+_vm._s(_vm.toEther(_vm.minPledgeAmount).toFixed(4))+\" CRC \")]),_c('div',[_vm._v(\"Current pledged amount: \"+_vm._s(_vm.pledgedAmount.toFixed(4))+\" CRC\")]),_c('v-btn',{attrs:{\"small\":\"\",\"disabled\":_vm.pledgedAmount === 0 || !_vm.redeemBool},on:{\"click\":_vm.redeemPledge}},[_vm._v(\"Redeem Pledge\")])],1)],1)],1),_c('v-col',[_c('v-card',[_c('v-card-title',[_vm._v(\"Pledge Actions\")]),_c('v-card-text',[_c('v-row',[_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"12\"}},[_c('v-text-field',{attrs:{\"dense\":\"\",\"hide-details\":\"\",\"outlined\":\"\",\"type\":\"number\",\"min\":0,\"placeholder\":\"Amount to add to the pledge\"},model:{value:(_vm.amountToAdd),callback:function ($$v) {_vm.amountToAdd=$$v},expression:\"amountToAdd\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-btn',{staticStyle:{\"width\":\"100%\"},attrs:{\"small\":\"\"},on:{\"click\":_vm.pledgeMore}},[_vm._v(\"Pledge more\")])],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row wrap>\n    <v-col cols=\"12\">\n      <v-card>\n        <v-card-title>Current Wallet Balance</v-card-title>\n        <v-card-text> {{ toEther(balance) }}&nbsp;CRC </v-card-text>\n      </v-card>\n    </v-col>\n    <v-col cols=\"8\">\n      <v-card>\n        <v-card-title>Pledge Informations</v-card-title>\n        <v-card-text>\n          <div>\n            Min pledge to start audit: {{ toEther(minPledgeAmount).toFixed(4) }}&nbsp;CRC\n          </div>\n          <div>Current pledged amount: {{ pledgedAmount.toFixed(4) }}&nbsp;CRC</div>\n          <v-btn\n            small\n            @click=\"redeemPledge\"\n            :disabled=\"pledgedAmount === 0 || !redeemBool\"\n            >Redeem Pledge</v-btn\n          >\n        </v-card-text>\n      </v-card>\n    </v-col>\n    <v-col>\n      <v-card>\n        <v-card-title>Pledge Actions</v-card-title>\n        <v-card-text>\n          <v-row>\n            <v-col cols=\"12\" class=\"pb-0\">\n              <v-text-field\n                v-model=\"amountToAdd\"\n                dense\n                hide-details\n                outlined\n                type=\"number\"\n                :min=\"0\"\n                placeholder=\"Amount to add to the pledge\"\n            /></v-col>\n            <v-col cols=\"12\">\n              <v-btn small style=\"width: 100%\" @click=\"pledgeMore\"\n                >Pledge more</v-btn\n              >\n            </v-col>\n          </v-row>\n        </v-card-text>\n      </v-card>\n    </v-col>\n  </v-row>\n</template>\n<script>\nimport { get, call } from \"vuex-pathify\";\nimport { toEther } from \"@/lib/numbers\";\n\nexport default {\n  data: () => ({\n    intervalId: null,\n    amountToAdd: 0,\n  }),\n  computed: {\n    ...get(\"pledge\", [\n      \"balance\",\n      \"minPledgeAmount\",\n      \"pledgedAmount\",\n      \"redeemBool\",\n    ]),\n  },\n  mounted() {\n    this.fetchAllValues();\n    this.intervalId = setInterval(this.fetchAllValues, 60 * 1000);\n  },\n  beforeRouteLeave(to, from, next) {\n    clearInterval(this.intervalId);\n    next();\n  },\n  methods: {\n    toEther,\n    ...call(\"pledge\", [\"fetchAllValues\", \"addToPledge\", \"redeemPledge\"]),\n    async pledgeMore() {\n      await this.addToPledge(this.amountToAdd);\n      this.amountToAdd = 0;\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pledge.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Pledge.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Pledge.page.vue?vue&type=template&id=579c75c3&\"\nimport script from \"./Pledge.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Pledge.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-card',{staticClass:\"pa-md-4 mx-lg-auto\"},[(_vm.walletRole != _vm.ROLES.VISITOR)?_c('v-card-title',[_vm._v(\" \"+_vm._s(_vm.walletRole)+\" \"+_vm._s(_vm.wallet)+\" \"),_c('explorer',{attrs:{\"type\":\"account\",\"id\":_vm.wallet}})],1):_c('v-card-title',[_vm._v(\" Visitor\")]),_c('v-card-subtitle',[_vm._v(\" \"+_vm._s(_vm.currentWalletBalanceEth)+\" CRC \")])],1),(_vm.isAuditor)?_c('v-card',{staticClass:\"pa-md-4 mx-lg-auto\"},[_c('v-card-title',[_vm._v(\" Status \")]),(_vm.registered && _vm.approved)?_c('v-card-subtitle',{staticStyle:{\"color\":\"Green\"}},[_vm._v(\" APPROVED \")]):_vm._e(),(_vm.registered && !_vm.approved)?_c('v-card-subtitle',{staticStyle:{\"color\":\"red\"}},[_vm._v(\" AWAITING APPROVAL \")]):_vm._e(),(_vm.registered && !_vm.approved)?_c('v-card-text',[_c('p',{staticStyle:{\"color\":\"black\"}},[_vm._v(\" You have the total vote of \"+_vm._s(_vm.approbationVotes)+\" \")])]):_vm._e()],1):_vm._e(),(_vm.walletRole == _vm.ROLES.USER_CONNECTED)?_c('v-card',{staticClass:\"pa-md-4 mx-lg-auto\"},[_c('v-card-text',[_c('p',[_vm._v(\" If you wish to become an auditor you must register here \"),_c('v-btn',{staticClass:\"mx-2\",attrs:{\"small\":\"\",\"disabled\":_vm.mmIsOpen},on:{\"click\":_vm.selfRegister}},[_vm._v(\" Self register \")])],1)]),_c('v-card-text',[_c('p',[_vm._v(\" If you need this wallet to acts as a delegate for your node, execute the following command from your node eth console \"),_c('code',[_vm._v(_vm._s(_vm.registerDelegateCommandLine))])])])],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n\n  <v-card class=\"pa-md-4 mx-lg-auto\">\n    <v-card-title v-if=\"walletRole != ROLES.VISITOR\"> {{walletRole}} {{wallet}} <explorer type=\"account\" :id=\"wallet\"></explorer></v-card-title>\n    <v-card-title v-else> Visitor</v-card-title>\n    <v-card-subtitle >\n      {{currentWalletBalanceEth}} CRC\n    </v-card-subtitle>  \n  </v-card>\n\n  <v-card class=\"pa-md-4 mx-lg-auto\" v-if=\"isAuditor\">\n    <v-card-title> Status </v-card-title>\n    <v-card-subtitle style=\"color: Green\" v-if=\"registered && approved\">\n      APPROVED\n    </v-card-subtitle>\n    <v-card-subtitle style=\"color: red\" v-if=\"registered && !approved\">\n      AWAITING APPROVAL\n    </v-card-subtitle>\n    <v-card-text v-if=\"registered && !approved\">\n      <p style=\"color: black\">\n        You have the total vote of {{ approbationVotes }}\n      </p>\n    </v-card-text>\n  </v-card>\n\n  <v-card class=\"pa-md-4 mx-lg-auto\" v-if=\"walletRole == ROLES.USER_CONNECTED\">\n    <v-card-text>\n      <p>\n        If you wish to become an auditor you must register here\n        <v-btn small class=\"mx-2\" @click=\"selfRegister\" :disabled=\"mmIsOpen\">\n          Self register\n        </v-btn>\n      </p>\n    </v-card-text>\n    <v-card-text>\n      <p>\n        If you need this wallet to acts as a delegate for your node, execute the following command from your node eth console\n        <code>{{registerDelegateCommandLine}}</code>\n      </p>\n    </v-card-text>\n  </v-card>\n  </div>\n</template>\n\n<script>\nimport { get, call } from \"vuex-pathify\";\nimport { toEther } from \"../lib/numbers\";\nimport { ROLES } from \"../lib/const\";\nimport { getCallData } from \"../lib/api\"\nimport Explorer from \"../components/ExplorerRedirect.vue\";\n\nexport default {\n  components: {Explorer},\n  data: ()=>({\n    registerDelegateCommandLine: \"\"\n  }),\n  computed: {\n    ROLES: ()=>ROLES,\n    mmIsOpen: get(\"mmIsOpen\"),\n    ...get(\"auth\", [\"registered\", \"walletRole\", \"wallet\"]),\n    ...get(\"status\", [\"approved\", \"approbationVotes\"]),\n    ...get(\"nodes\", [\"currentWalletBalanceWei\"]),\n    currentWalletBalanceEth() {\n      return toEther(this.currentWalletBalanceWei).toFixed(4);\n    },\n    isAuditor() {\n      return [ROLES.APPROVED_AUDITOR, ROLES.PENDING_AUDITOR].includes(this.walletRole);\n    },\n  },\n  async mounted() {\n    this.fetchIsRegistered();\n    this.fetchIsApproved();\n    this.fetchApprobationVotes();\n\n    this.registerDelegateCommandLine = await getCallData(\"allowDelegate\", this.wallet)\n  },\n  methods: {\n    ...call(\"auth\", [\"fetchIsRegistered\", \"selfRegister\"]),\n    ...call(\"status\", [\"fetchIsApproved\", \"fetchApprobationVotes\"]),\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Status.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Status.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Status.page.vue?vue&type=template&id=dfa8cca4&\"\nimport script from \"./Status.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Status.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('h2',[_vm._v(\"Manage the confiscated pledge of the auditors\")])]),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Total confiscated pledge\")]),_c('v-card-text',[_vm._v(_vm._s(_vm.totalPledge)+\" CRC\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row>\n    <v-col cols=\"12\">\n      <h2>Manage the confiscated pledge of the auditors</h2>  \n    </v-col>  \n    <v-col cols=\"12\">\n      <v-card>\n        <v-card-title>Total confiscated pledge</v-card-title>\n        <v-card-text>{{ totalPledge }} CRC</v-card-text>\n      </v-card>\n    </v-col>\n\n    \n  </v-row>\n</template>\n<script>\nimport { call } from \"vuex-pathify\";\n\nexport default {\n  data: ()=>({\n    totalPledge:0\n  }),\n\n  async mounted() {\n    this.totalPledge = await this.fetchConfiscatedPledge()\n  },\n\n  methods: {\n    ...call(\"nodeGovernance\", [\"fetchConfiscatedPledge\"])\n  }\n\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfiscatedPledge.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConfiscatedPledge.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConfiscatedPledge.page.vue?vue&type=template&id=7ecbdde9&\"\nimport script from \"./ConfiscatedPledge.page.vue?vue&type=script&lang=js&\"\nexport * from \"./ConfiscatedPledge.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',[_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"12\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Page to manage PoCR improvement proposals.\")])],1)],1),_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"12\"}},[(_vm.isConnected)?_c('v-card',{staticClass:\"pa-2\"},[_c('v-card-subtitle',[_vm._v(\"Create a new proposal.\")]),_c('v-card-text',[_vm._v(\" this action will be done with your connected wallet and will reserve the ID of the Climate awaReness Improvement Proposal that you must then create as a document in \"),_c('a',{attrs:{\"href\":_vm.CRIPsUrl}},[_vm._v(_vm._s(_vm.CRIPsUrl))])]),_c('v-card-actions',[(!_vm.lastCRIPCreated)?_c('v-btn',{attrs:{\"color\":\"primary\",\"small\":\"\"},on:{\"click\":_vm.reserveCRIP}},[_vm._v(\" Reserve the next CRIP id \")]):_c('v-card-text',[_vm._v(\" You have reserved the CRIP id \"),_c('code',[_vm._v(_vm._s(_vm.lastCRIPCreated))])])],1)],1):_vm._e()],1),_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"12\"}},[_c('v-card',{staticClass:\"pa-2\"},[_c('v-card-title',[_vm._v(\"List of the improvement proposals\")]),_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.CRIPS,\"headers\":_vm.cripsTableHeaders,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.createdBlock\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.createdBlock)+\" \"),_c('explorer',{attrs:{\"type\":\"block\",\"id\":item.createdBlock}})],1)]}},{key:\"item.documentation\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('a',{attrs:{\"href\":item.url}},[_vm._v(\"crip-\"+_vm._s(item.index)+\".md\")])]}},{key:\"item.voteFromBlock\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(_vm.voteFromContent(item.index)))]),_c('div',[_vm._v(\"at \"+_vm._s(item.voteFromBlock))])]}},{key:\"item.voteUntilBlock\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(_vm.voteUntilContent(item.index)))]),_c('div',[_vm._v(\"at \"+_vm._s(item.voteUntilBlock))])]}},{key:\"item.auditors\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(\"Pro: \"+_vm._s(item.auditorsFor))]),_c('div',[_vm._v(\"Cons: \"+_vm._s(item.auditorsAgainst))])]}},{key:\"item.nodes\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(\"Pro: \"+_vm._s(item.nodesFor))]),_c('div',[_vm._v(\"Cons: \"+_vm._s(item.nodesAgainst))])]}},{key:\"item.useraction\",fn:function(ref){\nvar item = ref.item;\nreturn [(_vm.canVote(item.index))?_c('v-radio-group',{on:{\"change\":function($event){return _vm.userVote(item)}},model:{value:(item.vote),callback:function ($$v) {_vm.$set(item, \"vote\", $$v)},expression:\"item.vote\"}},[_c('v-radio',{attrs:{\"label\":\"agree\",\"value\":true}}),_c('v-radio',{attrs:{\"label\":\"reject\",\"value\":false}})],1):_vm._e()]}}])})],1)],1)],1),_c('v-col',{staticClass:\"pb-0\",attrs:{\"cols\":\"12\"}},[_c('v-card',{staticClass:\"pa-2\"},[_c('v-card-title',[_vm._v(\"Your votes\")]),_c('v-card-text',[_c('v-data-table',{attrs:{\"items\":_vm.userVotes,\"headers\":_vm.votesTableHeaders,\"items-per-page\":-1,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.block\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('div',[_vm._v(_vm._s(item.block)+\" \"),_c('explorer',{attrs:{\"type\":\"tx\",\"id\":item.txHash}})],1)]}}])})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-row>\n    <v-col cols=\"12\" class=\"pb-0\">\n      <v-card>\n        <v-card-title>Page to manage PoCR improvement proposals.</v-card-title>\n      </v-card>\n    </v-col>\n    <v-col cols=\"12\" class=\"pb-0\">\n      <v-card class=\"pa-2\" v-if=\"isConnected\">\n        <v-card-subtitle>Create a new proposal.</v-card-subtitle>\n        <v-card-text>\n          this action will be done with your connected wallet and will reserve the ID of the Climate awaReness Improvement Proposal that you must then create as a document in \n          <a :href=\"CRIPsUrl\">{{CRIPsUrl}}</a>\n        </v-card-text>\n        <v-card-actions>\n          <v-btn\n            color=\"primary\"\n            small\n            v-if=\"!lastCRIPCreated\"\n            @click=\"reserveCRIP\"\n          >\n            Reserve the next CRIP id\n          </v-btn>\n          <v-card-text  v-else>\n            You have reserved the CRIP id <code>{{lastCRIPCreated}}</code>\n          </v-card-text>\n        </v-card-actions>\n      </v-card>\n    </v-col>\n    \n    <v-col cols=\"12\" class=\"pb-0\">\n      <v-card class=\"pa-2\">\n        <v-card-title>List of the improvement proposals</v-card-title>\n        <v-card-text>\n          <v-data-table\n            :items=\"CRIPS\"\n            :headers=\"cripsTableHeaders\"\n            :items-per-page=\"-1\"\n            hide-default-footer\n          >\n            <template v-slot:item.createdBlock=\"{ item }\">\n              <div>{{item.createdBlock}} <explorer type=\"block\" :id=\"item.createdBlock\"></explorer></div>\n            </template>\n            <template v-slot:item.documentation=\"{ item }\">\n              <a :href=\"item.url\">crip-{{item.index}}.md</a>\n            </template>\n            <template v-slot:item.voteFromBlock=\"{ item }\">\n              <div>{{voteFromContent(item.index)}}</div>\n              <div>at {{item.voteFromBlock}}</div>\n            </template>\n            <template v-slot:item.voteUntilBlock=\"{ item }\">\n              <div>{{voteUntilContent(item.index)}}</div>\n              <div>at {{item.voteUntilBlock}}</div>\n            </template>\n            <template v-slot:item.auditors=\"{ item }\">\n              <div>Pro: {{item.auditorsFor}}</div>\n              <div>Cons: {{item.auditorsAgainst}}</div>\n            </template>\n            <template v-slot:item.nodes=\"{ item }\">\n              <div>Pro: {{item.nodesFor}}</div>\n              <div>Cons: {{item.nodesAgainst}}</div>\n            </template>\n            <template v-slot:item.useraction=\"{ item }\">\n              <v-radio-group v-model=\"item.vote\" v-if=\"canVote(item.index)\" @change=\"userVote(item)\">\n                <v-radio label=\"agree\" :value=\"true\"></v-radio>\n                <v-radio label=\"reject\" :value=\"false\"></v-radio>\n              </v-radio-group>\n            </template>\n          </v-data-table>\n        </v-card-text>\n      </v-card>\n    </v-col>\n    \n    <v-col cols=\"12\" class=\"pb-0\">\n      <v-card class=\"pa-2\">\n        <v-card-title>Your votes</v-card-title>\n        <v-card-text>\n          <v-data-table\n            :items=\"userVotes\"\n            :headers=\"votesTableHeaders\"\n            :items-per-page=\"-1\"\n            hide-default-footer\n          >\n            <template v-slot:item.block=\"{ item }\">\n              <div>{{item.block}} <explorer type=\"tx\" :id=\"item.txHash\"></explorer></div>\n            </template>\n\n          </v-data-table>\n        </v-card-text>\n      </v-card>\n    </v-col>\n\n  </v-row>\n\n</template>\n<script>\nimport { CRIPBaseUrl, ROLES } from \"../lib/const\";\nimport { Web3FunctionProvider } from \"@saturn-chain/web3-functions\";\nimport $store from \"@/store\";\nimport { writeCallWithOptions, handleMMResponse, readOnlyCall } from \"../lib/api\";\nimport Explorer from \"../components/ExplorerRedirect.vue\";\n\nexport default {\n  components: {Explorer},\n  data: ()=>({\n    lastCRIPCreated: undefined,\n    CRIPS: [],\n    userVotes: [],\n    cripsTableHeaders: [\n      { text: \"Created on\", value: \"createdBlock\" },\n      { text: \"Doc\", value: \"documentation\" },\n      { text: \"Start in\", value: \"voteFromBlock\" },\n      { text: \"Auditors votes\", value: \"auditors\" },\n      { text: \"Nodes votes\", value: \"nodes\" },\n      { text: \"Closes on\", value: \"voteUntilBlock\" },\n      { text: \"Action\", value: \"useraction\" },\n    ],\n    votesTableHeaders: [\n      { text: \"Created on\", value: \"block\" },\n      { text: \"CRIP id\", value: \"index\" },\n      { text: \"Decision\", value: \"decision\" },\n    ],\n  }),\n  computed: {\n    blockNumber() {\n      return $store.get(\"nodes/currentBlockNumber\");\n    },\n    CRIPsUrl() {\n      return CRIPBaseUrl\n    },\n    isConnected() {\n      return !!$store.get(\"auth/wallet\")\n    },\n    isNode() {\n      return $store.get(\"auth/walletRole\") == ROLES.AUDITED_NODE\n    },\n    isAuditor() {\n      return $store.get(\"auth/walletRole\") == ROLES.APPROVED_AUDITOR\n    },\n  },\n\n  mounted() {\n    this.fetchCRIPS()\n    this.fetchUserVotes()\n  },\n\n  methods: {\n    async reserveCRIP() {\n      const prov = new Web3FunctionProvider($store.get(\"auth/provider\"), ()=>Promise.resolve($store.get(\"auth/wallet\")))\n      const contract = $store.get(\"auth/contract\");\n      const currentBlock = this.blockNumber;\n\n      await handleMMResponse(writeCallWithOptions(\"newProposal\", {maxGas: 100000}))\n      contract.events.IPChanged(prov.get({fromBlock: currentBlock}), {status: 0})\n      .once(\"log\", (log)=>{\n        this.lastCRIPCreated = log.returnValues.index;\n        this.fetchCRIPS();\n      })\n    },\n\n    async fetchCRIPS() {\n      const count = await readOnlyCall(\"nbImprovementProposals\");\n      const result = [];\n      for (let index = 0; index < count; index++) {\n        const crip = await readOnlyCall(\"getImprovementProposal\", index)\n        crip.index = Number.parseInt(crip.index)\n        crip.voteFromBlock = Number.parseInt(crip.voteFromBlock)\n        crip.voteUntilBlock = Number.parseInt(crip.voteUntilBlock)\n        const url = new URL(`${CRIPBaseUrl}/crip-${crip.index}.md`)\n        crip.url = url.href;\n        result.push(crip)\n      }\n      this.CRIPS = result\n    },\n\n    async fetchUserVotes() {\n      const wallet = $store.get(\"auth/delegatedWallet\") || $store.get(\"auth/wallet\");\n      const prov = new Web3FunctionProvider($store.get(\"auth/provider\"), ()=>Promise.resolve(wallet))\n      const contract = $store.get(\"auth/contract\");\n      this.userVotes = [];\n      contract.events.IPVote(prov.get({fromBlock: 1}), {voter: wallet})\n      .on(\"log\", (log)=>{\n        console.log(\"Vote log\", log);\n        this.userVotes.push({\n          index: Number.parseInt(log.returnValues.index),\n          approval: Number.parseInt(log.returnValues.vote)>0 ? true : false,\n          decision: Number.parseInt(log.returnValues.vote)>0 ? \"Accepted\" : \"Rejected\",\n          txHash: log.transactionHash,\n          block: log.blockNumber\n        });\n      })\n    },\n\n    canVote(index) {\n      const crip = this.CRIPS.find(c=>c.index == index);\n      if (!crip) return false;\n      const currentBlock = this.blockNumber;\n      const inVotingPeriod = crip.voteFromBlock <= currentBlock && crip.voteUntilBlock >= currentBlock\n      return inVotingPeriod && (this.isNode || this.isAuditor)\n    },\n    voteFromContent(index) {\n      const crip = this.CRIPS.find(c=>c.index == index);\n      if (!crip) return \"N/A\";\n      const nbBlocks = crip.voteFromBlock-this.blockNumber;\n      console.log(\"voteFromContent\", index, crip, nbBlocks);\n      if (nbBlocks<=0) return \"Opened\";\n      else return (nbBlocks*4/(3600*24)).toFixed(2) + \" days\";\n    },\n    voteUntilContent(index) {\n      const crip = this.CRIPS.find(c=>c.index == index);\n      if (!crip) return \"N/A\";\n      const nbBlocks = crip.voteUntilBlock-this.blockNumber;\n      console.log(\"voteFromContent\", index, crip, nbBlocks);\n      if (nbBlocks<=0) return \"Closed\";\n      else return (nbBlocks*4/(3600*24)).toFixed(2) + \" days\";\n    },\n\n    async userVote(crip) {\n      console.log(\"User vote\", crip.index, crip.vote);\n      if (typeof crip.vote !== \"boolean\") return;\n      const funct = crip.vote? \"voteForProposal\" : \"voteAgainstProposal\";\n      const response = await handleMMResponse(writeCallWithOptions(funct, {maxGas:100000}, crip.index));\n      if (response === null) crip.vote = null;\n      this.fetchCRIPS();\n      this.fetchUserVotes();\n    }\n  }\n\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Improvements.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Improvements.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Improvements.page.vue?vue&type=template&id=7b591e7e&\"\nimport script from \"./Improvements.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Improvements.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',_vm._l((_vm.logs),function(log){return _c('div',{key:log.key},[_c('v-chip',[_vm._v(_vm._s(log.type))]),_vm._v(\" \"+_vm._s(log.args.map(function (a){ return typeof a==\"object\"?\"OBJ\":a; }).join(' '))+\" \")],1)}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div v-for=\"log of logs\" :key=\"log.key\">\n      <v-chip>{{log.type}}</v-chip> {{log.args.map(a=>typeof a==\"object\"?\"OBJ\":a).join(' ')}}\n    </div>\n  </div>\n</template>\n\n<script>\nimport { get } from \"vuex-pathify\";\n\nexport default {\n  data: () => ({}),\n  computed: {\n    ...get([\"logs\"]),\n  },\n\n  mounted() {\n  },\n  methods: {\n    \n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Logger.page.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Logger.page.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Logger.page.vue?vue&type=template&id=3b633b5a&\"\nimport script from \"./Logger.page.vue?vue&type=script&lang=js&\"\nexport * from \"./Logger.page.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport VueRouter from \"vue-router\";\n\nimport InstallMetaMask from \"@/pages/InstallMetaMask.page.vue\";\nimport Auth from \"@/pages/Auth.page.vue\";\n\nimport Welcome from \"@/pages/Welcome.page.vue\";\nimport Dashboard from \"@/pages/Dashboard.page.vue\";\n\nimport Auditors from \"@/pages/Auditors.page.vue\";\n\nimport Audit from \"@/pages/Audit.page.vue\";\nimport History from \"@/pages/History.page.vue\";\nimport Pledge from \"@/pages/Pledge.page.vue\";\nimport Status from \"@/pages/Status.page.vue\";\nimport ConfiscatedPledge from \"@/pages/ConfiscatedPledge.page.vue\";\nimport Improvements from \"@/pages/Improvements.page.vue\";\nimport Logger from \"@/pages/Logger.page.vue\";\n\nimport { ROLES } from \"./lib/const\";\n\nVue.use(VueRouter);\n\n\n// const approvedAuditor = ({ store }) => store.state.status.approved;\n// const isNode = ({ store }) => store.state.auth.isNode;\n// const isNotNode = ({ store }) => !isNode({ store });\nconst walletIsntConnected = ({ store }) => !store.state.auth.wallet;\nconst hasRole = (role)=>{\n    return ({store}) => (store.get(\"auth/walletRole\") == role)\n} \nconst not = (f)=>{\n    return (opts)=>{\n        return !f(opts);\n    }\n}\n\nconst any = (...functions) => {\n    return (opts) => {\n        for (const f of functions) {\n            if (f(opts)) return true;\n        }\n        return false;\n    }\n}\n\n// The order actually matter because it will determine the order in the sidenav\nexport const routes = [\n    //Public\n    { name: \"welcome\", path: \"/welcome\", component: Welcome, meta: { hidden: ()=>true } },\n    { name: \"dashboard\", path: \"/dashboard\", component: Dashboard, meta: { displayInSidenav: \"\" } },\n    {\n        name: \"status\", path: \"/status\", component: Status, meta: {\n            displayInSidenav: \"\",\n            restricted: not(hasRole(ROLES.VISITOR)),\n            forceRedirectTo: \"dashboard\",\n            hidden: hasRole(ROLES.VISITOR)\n        }\n    }, \n    {\n        name: \"improvements\", path: \"/improvements\", component: Improvements, meta: {\n            displayInSidenav: \"\",\n            forceRedirectTo: \"dashboard\",\n        }\n    },\n\n       // Auth\n    { name: \"installMetaMask\", path: \"/installmetamask\", component: InstallMetaMask },\n    {\n        name: \"authentication\", path: \"/auth\", component: Auth, meta: {\n            displayInSidenav: \"\",\n            hidden: ({ store }) => !walletIsntConnected({ store })\n        }\n    },\n\n    // Node views\n    {\n        name: \"auditors\", path: \"/auditors\", component: Auditors, meta: {\n            displayInSidenav: \"Governance\",\n            restricted: any(hasRole(ROLES.AUDITED_NODE), hasRole(ROLES.NEW_NODE)),\n            forceRedirectTo: \"dashboard\",\n            hidden: not(any(hasRole(ROLES.AUDITED_NODE), hasRole(ROLES.NEW_NODE)))\n        }\n    },\n    {\n        name: \"confiscated-pledge\", path: \"/confiscated\", component: ConfiscatedPledge, meta: {\n            displayInSidenav: \"Governance\",\n            restricted: any(hasRole(ROLES.AUDITED_NODE), hasRole(ROLES.NEW_NODE)),\n            forceRedirectTo: \"dashboard\",\n            hidden: not(any(hasRole(ROLES.AUDITED_NODE), hasRole(ROLES.NEW_NODE)))\n        }\n    },\n    // Auditors views\n    {\n        name: \"pledge\", path: \"/pledge\", component: Pledge, meta: {\n            displayInSidenav: \"Audit\",\n            restricted: hasRole(ROLES.APPROVED_AUDITOR),\n            forceRedirectTo: \"status\",\n            hidden: not(any(hasRole(ROLES.PENDING_AUDITOR), hasRole(ROLES.APPROVED_AUDITOR)))\n        }\n    },\n    {\n        name: \"audit\", path: \"/audit\", component: Audit, meta: {\n            displayInSidenav: \"Audit\",\n            restricted: hasRole(ROLES.APPROVED_AUDITOR),\n            forceRedirectTo: \"status\",\n            hidden: not(any(hasRole(ROLES.PENDING_AUDITOR), hasRole(ROLES.APPROVED_AUDITOR)))\n        }\n    },\n    {\n        name: \"history\", path: \"/history\", component: History, meta: {\n            displayInSidenav: \"Audit\",\n            restricted: any(hasRole(ROLES.PENDING_AUDITOR), hasRole(ROLES.APPROVED_AUDITOR)),\n            forceRedirectTo: \"status\",\n            hidden: not(any(hasRole(ROLES.PENDING_AUDITOR), hasRole(ROLES.APPROVED_AUDITOR)))\n        }\n    },\n    {\n        name: \"logs\", path: \"/logs\", component: Logger, meta: {\n            displayInSidenav: \"\",\n            // restricted: any(hasRole(ROLES.PENDING_AUDITOR), hasRole(ROLES.APPROVED_AUDITOR)),\n            forceRedirectTo: \"status\",\n            hidden: ({config})=>!config?.activate_log\n        }\n    },\n    // GdC: For some unknown reason the redirection should not be 'authentication' directly but it works with dashboard\n    { path: \"*\", redirect: \"welcome\" }\n]\n\nconst router = new VueRouter({\n    routes,\n    base: \"\",\n    // mode: \"history\"\n})\n// implement a fix to avoid uncaught promise error caused by the navigation guard\nrouter.oldPush = router.push.bind(router)\nasync function push(to) {\n    try {\n        await this.oldPush(to)\n    } catch (error) {\n        console.log(\"Target page was not reached but this is normal\", error.to.name, \"--->\", this.currentRoute.name)\n    }\n}\nrouter.push = push.bind(router);\nexport default router;","<template>\n  <v-navigation-drawer v-model=\"drawer\" @input=\"drawerChange\" app clipped flat>\n    <v-divider></v-divider>\n    <v-list>\n      <v-list-item-group :value=\"$route.name\" mandatory color=\"primary\">\n        <template\n          v-for=\"(\n            { icon, label, route, disabled, subheader }, index\n          ) in sidenav\"\n        >\n          <v-divider\n            v-if=\"subheader && label !== '' && index !== 0\"\n            :key=\"`${label}-divider`\"\n          ></v-divider>\n          <v-subheader :key=\"label\" v-if=\"subheader && label !== ''\">{{\n            label\n          }}</v-subheader>\n          <v-list-item\n            v-else\n            :key=\"route\"\n            :value=\"route\"\n            @click=\"goTo(route)\"\n            :disabled=\"disabled()\"\n            link\n          >\n            <v-list-item-icon>\n              <v-icon>{{ icon }}</v-icon>\n            </v-list-item-icon>\n\n            <v-list-item-content>\n              <v-list-item-title>{{ label }}</v-list-item-title>\n            </v-list-item-content>\n          </v-list-item>\n        </template>\n      </v-list-item-group>\n    </v-list>\n    <v-spacer ></v-spacer>\n    <img src=\"PoCR_Logo.svg\" width=\"100%\" >\n  </v-navigation-drawer>\n</template>\n\n<script>\nimport { get } from \"vuex-pathify\";\nimport { routes } from \"@/router\";\n\nexport default {\n  props: {\n    value: Boolean,\n  },\n  data: () => ({\n    drawer: true,\n  }),\n  watch: {\n    value() {\n      this.drawer = this.value;\n    }\n  },\n  computed: {\n    ...get([\"mmIsOpen\", \"config\"]),\n    ...get(\"auth\", [\"registered\"]),\n    ...get(\"status\", [\"approved\"]),\n    sidenav() {\n      // Filter the routes to keep the ones that could appear in the sidenav,\n      // and map them to a more usable object\n      const list = routes\n        .filter((r) => r?.meta?.displayInSidenav !== undefined)\n        .map((r) => ({\n          icon: \"mdi-wallet\",\n          label: r.name.charAt(0).toUpperCase() + r.name.slice(1),\n          route: r.name,\n          meta: r.meta,\n          restricted: r.meta.restricted,\n          disabled: () =>\n            this.mmIsOpen ||\n            (r.meta.restricted && !r.meta.restricted({ store: this.$store })),\n          hidden: r.meta.hidden,\n        }));\n\n      const nav = [];\n      const categories = [];\n      \n      for (const el of list) {\n        if (el.hidden && el.hidden({ store: this.$store, config: this.config })) continue;\n        if (\n          el.meta &&\n          el.meta.displayInSidenav !== \"\" &&\n          !categories.includes(el.meta.displayInSidenav)\n        ) {\n          nav.push({ subheader: true, label: el.meta.displayInSidenav });\n          categories.push(el.meta.displayInSidenav);\n        }\n        nav.push(el);\n      }\n      return nav;\n    },\n  },\n\n  mounted() {\n    console.log(\"routes\", routes);\n  },\n\n  methods: {\n    drawerChange() {\n      // console.log(\"Drawer displayed changed\", this.value, this.drawer);\n      this.$emit(\"input\", this.drawer);\n    },\n    goTo(routeName) {\n      if (this.$route.name === routeName) return;\n      this.$router.push({ name: routeName });\n    },\n  },\n};\n</script>\n\n<style></style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppMenu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppMenu.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AppMenu.vue?vue&type=template&id=033c0d54&\"\nimport script from \"./AppMenu.vue?vue&type=script&lang=js&\"\nexport * from \"./AppMenu.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-dialog',{attrs:{\"width\":\"500\",\"persistent\":\"\"},model:{value:(_vm.display),callback:function ($$v) {_vm.display=$$v},expression:\"display\"}},[_c('v-card',[_c('v-card-title',[_vm._v(\"Transaction authentication\")]),_c('v-card-text',[_vm._v(\" Enter the password for the wallet \"+_vm._s(_vm.walletAddress)+\" : \"),_c('v-text-field',{attrs:{\"type\":\"password\"},model:{value:(_vm.walletPassword),callback:function ($$v) {_vm.walletPassword=$$v},expression:\"walletPassword\"}}),_c('div',{staticStyle:{\"color\":\"red\"}},[_vm._v(_vm._s(_vm.errorMessage))])],1),_c('v-card-actions',[_c('v-btn',{on:{\"click\":_vm.cancel}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"loading\":_vm.loading,\"disabled\":_vm.walletPassword === '' || _vm.loading},on:{\"click\":_vm.submit}},[_vm._v(\" Confirm \")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-dialog\n    v-model=\"display\"\n    width=\"500\"\n    persistent\n  >\n    <v-card>\n      <v-card-title>Transaction authentication</v-card-title>\n      <v-card-text>\n        Enter the password for the wallet {{ walletAddress }} :\n        <v-text-field type=\"password\" v-model=\"walletPassword\" />\n        <div style=\"color: red\">{{ errorMessage }}</div>\n      </v-card-text>\n      <v-card-actions>\n        <v-btn @click=\"cancel\">Cancel</v-btn>\n        <v-btn\n          @click=\"submit\"\n          :loading=\"loading\"\n          :disabled=\"walletPassword === '' || loading\"\n        >\n          Confirm\n        </v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n<script>\nexport default {\n\n  data: () => ({\n    walletAddress: null,\n    errorMessage: null,\n    display: false,\n    loading: false,\n    walletPassword: \"\",\n    // functions as a data fields to be called by the component\n    submit: ()=>{}, \n    cancel: ()=>{}\n  }),\n\n  methods: {\n    /** This method is to be registered in the central store to be passed into the \n     * new Web3CustodyFunctionProvider(provider, custody, wallet, <here>)\n     * to allow user to interact with the authentication process\n     */\n    async authenticate(address, api) {\n      if (!address || !api) throw new Error(\"Invalid call to the authenticate function, missing parameters\");\n      this.walletAddress = address;\n      this.display = true;\n\n      try {\n        // console.log(\"authenticate function with api\",address, api);\n        // create a promise to wait for the user interactions\n        // the body of the promise links two functions (submit and cancel) to the component to receive \n        // the click events\n        const token = await new Promise( (resolve, reject)=>{\n          // function to receive the submit click event\n          async function submit() {\n            if (this.walletAddress && this.walletPassword) {\n              this.loading = true;\n              try {\n                // calls the api to get the token\n                const token = await api.authenticate(this.walletAddress, this.walletPassword);\n                if (!token) throw new Error(\"Missing token from authenticate without real error\") // should not happen\n                // returns the authentication token\n                resolve(token);\n              } catch (error) {\n                this.errorMessage = error.message;\n              } finally {\n                this.loading = false;\n              }\n            } else {\n              reject(new Error(\"No wallet address or password\"))\n            }\n          }\n          // function to receive the cancel click event\n          function cancel() {\n            reject(new Error(\"Authentication cancelled by user\"));\n          }\n          // link the functions to the component (using data instead of methods works fine :-) )\n          this.submit = submit.bind(this);\n          this.cancel = cancel.bind(this);\n        });\n\n        // returns the token obtained from the promise\n        return token;\n      } finally {\n        // in case of exception, we should clear the fields and close the dialog\n        this.walletPassword = \"\";\n        this.errorMessage = null;\n        this.display = false;\n      }\n\n    }\n  },\n};\n</script>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WalletAuthenticationDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WalletAuthenticationDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./WalletAuthenticationDialog.vue?vue&type=template&id=424a8a38&\"\nimport script from \"./WalletAuthenticationDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./WalletAuthenticationDialog.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <v-app id=\"inspire\">\n    <v-container>\n      <app-menu v-model=\"drawerDisplayed\"></app-menu>\n      <v-app-bar app clipped-left flat color=\"teal lighten-2\">\n        <v-app-bar-nav-icon v-if=\"!drawerDisplayed\" @click=\"showDrawer\"></v-app-bar-nav-icon>\n        <v-toolbar-title @click=\"goTo('welcome')\">Proof of Climate awaReness</v-toolbar-title>\n        <v-spacer></v-spacer>\n        <v-chip\n          class=\"ma-2\"\n          color=\"blue\"\n          text-color=\"white\"\n        >\n          {{walletRole}}\n        </v-chip> \n        <v-chip\n          v-if=\"wallet\"\n          class=\"ma-2\"\n          color=\"blue\"\n          text-color=\"white\"\n        >\n          <v-icon @click=\"disconnect\" class=\"mr-1\">mdi-close</v-icon> {{wallet}}\n        </v-chip>\n        <v-chip\n          class=\"ma-2\"\n          color=\"blue\"\n          text-color=\"white\"\n        >\n          {{currentBlockNumber}}\n        </v-chip> \n        <v-chip\n          class=\"ma-2\"\n          color=\"blue\"\n          text-color=\"white\"\n        >\n          {{chainName}}\n        </v-chip> \n\n      </v-app-bar>\n\n      <v-main>\n        <v-container class=\"py-8\">\n          <router-view></router-view>\n        </v-container>\n      </v-main>\n    </v-container>\n    <v-overlay :value=\"mmIsOpen\">\n      <v-progress-circular indeterminate></v-progress-circular>\n    </v-overlay>\n    <v-overlay :value=\"mmConnecting\">\n      <v-card>\n        <v-card-title>Authorize the connection of the website to the browser wallet</v-card-title>\n        <v-card-actions>\n          <v-btn @click=\"cancelWalletConnection\">Cancel</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-overlay>\n    <v-snackbar\n      v-model=\"displaySnackbar\"\n      multi-line\n      :color=\"snackbarColor\"\n      right\n    >\n      {{ snackbarMessage }}\n    </v-snackbar>\n    <wallet-authentication-dialog\n      ref=\"walletAuthenticationDialog\"\n    ></wallet-authentication-dialog>\n  </v-app>\n</template>\n\n<script>\nimport AppMenu from \"./components/AppMenu.vue\";\nimport WalletAuthenticationDialog from \"./components/WalletAuthenticationDialog.vue\";\nimport { get, sync, call } from \"vuex-pathify\";\nimport $store from \"@/store/index\";\n\nexport default {\n  components: { AppMenu, WalletAuthenticationDialog },\n  data: () => ({\n    drawerDisplayed: true\n  }),\n\n  computed: {\n    ...sync([\"displaySnackbar\", \"snackbarMessage\", \"snackbarColor\"]),\n    ...get([\"mmIsOpen\"]),\n    ...get(\"auth\", [\"wallet\", \"walletRole\", \"chainName\", \"mmConnecting\"]),\n    ...get(\"nodes\", [\"currentBlockNumber\"]),\n  },\n\n  methods: {\n    ...call(\"auth\", [\"detectProvider\", \"disconnect\", \"cancelWalletConnection\"]),\n    showDrawer() {\n      this.drawerDisplayed = true;\n    },\n    goTo(routeName) {\n      if (this.$route.name === routeName) return;\n      this.$router.push({ name: routeName });\n    },\n  },\n\n  mounted() {\n    // record the authentication function to make it available in api.js\n    $store.set(\"auth/walletAuthenticationFunction\", this.$refs.walletAuthenticationDialog.authenticate);\n    // this.detectProvider();\n  }\n};\n</script>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=0d9e62e6&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport Vuetify from \"vuetify\";\nimport \"vuetify/dist/vuetify.min.css\";\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n    theme: {\n        themes: {\n            light: {\n                primary: \"#607d8b\",\n                secondary: \"#009688\",\n                accent: \"#4caf50\",\n                error: \"# e91e63\",\n                warning: \"#cddc39\",\n                info: \"#3f51b5\",\n                success: \"#8bc34\",\n            },\n        },\n    },\n});","\nexport function setupAuthNavigationGuard(router, store) {\n  router.beforeEach(async (to, from, next) => {\n    console.log(from.name,\"--->\", to.name , store.state.initialized, store.state.auth.providerModel)\n    if (to.name == \"welcome\") return next();\n    if (to.name == \"logs\") return next();\n    if (!store.state.initialized) return next({name:\"welcome\"})\n\n    \n    try {\n      if (to.name == \"installMetaMask\") return next();\n      // if (store.state.auth.providerModel == \"none\") return next({name:\"installMetaMask\"});\n      if (to.name == \"authentication\") return next();\n      if (store.state.auth.providerModel == \"both\") return next({name:\"authentication\"});\n      if (store.state.auth.providerModel == \"switchMetamask\") return next({name:\"installMetaMask\"});\n      \n      // You're going to a non-auth route, keep going.\n      if (!to.meta || typeof to.meta.restricted !== \"function\") return next();\n      // check that the current connected user has the right to go there\n      if (!to.meta.restricted({ store })) return next({ name: to.meta.forceRedirectTo || \"dashboard\" });\n\n      console.log(from.name,\"--->\", to.name, \"ends\") \n      return next()\n    } catch (error) {\n        console.error(\"Something happened when routing from \"+from.name+\" to \"+to.name, error.message)\n        return next({name:\"welcome\"})\n    }\n  })\n}\n","// AppInsights\nimport { ApplicationInsights } from '@microsoft/applicationinsights-web'\nconst appInsights = new ApplicationInsights({ config: {\n  connectionString: 'InstrumentationKey=5dbf6d49-a294-4cd9-96dd-892f4da7dd55;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com/;LiveEndpoint=https://westeurope.livediagnostics.monitor.azure.com/',\n  enableAutoRouteTracking: true\n  /* ...Other Configuration Options... */\n} });\nappInsights.loadAppInsights();\ntrackPageView(); // Manually call trackPageView to establish the current user/session/pageview\n\n\nwindow.addEventListener(\"unhandledrejection\", (event) => {\n  appInsights.trackException({exception: event.reason});\n});\n\nexport function trackPageView() {\n  if (window.location.hostname !== \"localhost\")\n    appInsights.trackPageView({uri: window.location.href});\n}\n\nexport function trackEvent(name, properties) {\n  if (window.location.hostname !== \"localhost\")\n    appInsights.trackEvent({name, properties});\n}","import Vue from 'vue'\nimport App from './App.vue'\nimport vuetify from './plugins/vuetify'\nimport 'roboto-fontface/css/roboto/roboto-fontface.css'\nimport '@mdi/font/css/materialdesignicons.css'\nimport '@mdi/js'\n\nimport store from \"./store/index\"\nimport router from './router'\nimport { setupAuthNavigationGuard } from '@/lib/initialization'\nimport { trackPageView } from '@/lib/track';\n\nVue.config.productionTip = false\n\nsetupAuthNavigationGuard(router, store);\ntrackPageView();\n\nnew Vue({\n  vuetify,\n  store,\n  router,\n  render: h => h(App)\n}).$mount('#app');"],"sourceRoot":""}