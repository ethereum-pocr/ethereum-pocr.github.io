(function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&p.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={index:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},16:function(e,t){},17:function(e,t){},18:function(e,t){},19:function(e,t){},2:function(e,t){},20:function(e,t){},21:function(e,t){},22:function(e,t){},23:function(e,t){},24:function(e,t){},3:function(e,t){},3062:function(e,t,n){(function(t){var r=n("970b").default,a=n("5bc3").default;n("d3b7"),n("25f0"),n("c19f"),n("5cc6"),n("907a"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("a630"),n("3ca3");var o="undefined"!==typeof t&&t.BigInt||"undefined"!==typeof window&&window.BigInt,i="function"===typeof o,s=n("7409"),c=function(e,t){switch(e){case"add":return function(e){return new u(t+e)};case"subtract":return function(e){return new u(t-e)};case"multiply":return function(e){return new u(t*e)};case"divide":return function(e){return new u(t/e)};case"remainder":return function(e){return new u(t%e)};case"pow":return function(e){return new u(Math.pow(t,e))};case"shiftLeft":return function(e){return new u(t<<e)};case"shiftRight":return function(e){return new u(t>>e)};case"and":return function(e){return new u(t&e)};case"or":return function(e){return new u(t|e)};case"xor":return function(e){return new u(t^e)};case"lt":return function(e){return t<e};case"gt":return function(e){return t>e};case"leq":return function(e){return t<=e};case"geq":return function(e){return t>=e};case"eq":return function(e){return t===e};case"neq":return function(e){return t!==e};case"negate":return function(){return new u(-t)};case"not":return function(){return new u(~t)};case"next":return function(){return new u(++t)};case"prev":return function(){return new u(--t)}}},u=function(){"use strict";function e(t){if(r(this,e),"bigint"===typeof t)this.value=t;else{if(t instanceof e)return t;this.value=new s(t)}return new Proxy(this,{get:function(e,t){return t in e?e[t]:"bigint"===typeof e.value?c(t,e.value):"bigint"!==typeof e.value&&t in e.value?e.value[t].bind(e.value):void 0}})}return a(e,[{key:"valueOf",value:function(){return"bigint"===typeof this.value?this.value:this}},{key:"equals",value:function(t){return"bigint"===typeof this.value?this.value===t.value:t instanceof e?"bigint"===typeof t.value?this.value.equals(new s(t.toString())):this.value.equals(new s(t.value)):this.value.equals(new s(t))}},{key:"toString",value:function(e){return this.value.toString(e)}},{key:"_toUint8ArrayNative",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=new ArrayBuffer(t),r=new DataView(n);return r.setBigUint64(0,this.value,e),new Uint8Array(n)}},{key:"_toUint8Array",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=new ArrayBuffer(t),r=new Uint8Array(n),a=this.value.toArray(Math.pow(2,8)).value;return e?r.set(a.reverse(),0):r.set(a,t-a.length),r}},{key:"toUint8Array",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return"bigint"===typeof this.value?this._toUint8ArrayNative(e,t):this._toUint8Array(e,t)}}],[{key:"fromUint8Array",value:function(t){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(i&&a){var o=new DataView(t.buffer);return new e(o.getBigUint64(0,r))}return n=r?Array.from(t).reverse():Array.from(t),new e(s.fromArray(n,Math.pow(2,8)))}}]),e}();e.exports=u}).call(this,n("c8ba"))},"382b":function(e,t,n){"use strict";n("c4d9")},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"inspire"}},[n("v-container",[n("app-menu",{model:{value:e.drawerDisplayed,callback:function(t){e.drawerDisplayed=t},expression:"drawerDisplayed"}}),n("v-app-bar",{attrs:{app:"","clipped-left":"",flat:"",color:"teal lighten-2"}},[e.drawerDisplayed?e._e():n("v-app-bar-nav-icon",{on:{click:e.showDrawer}}),n("v-toolbar-title",{on:{click:function(t){return e.goTo("welcome")}}},[e._v("Proof of Climate awaReness")]),n("v-spacer"),n("v-chip",{staticClass:"ma-2",attrs:{color:"blue","text-color":"white"}},[e._v(" "+e._s(e.walletRole)+" ")]),e.wallet?n("v-chip",{staticClass:"ma-2",attrs:{color:"blue","text-color":"white"}},[n("v-icon",{staticClass:"mr-1",on:{click:e.disconnect}},[e._v("mdi-close")]),e._v(" "+e._s(e.wallet)+" ")],1):e._e(),n("v-chip",{staticClass:"ma-2",attrs:{color:"blue","text-color":"white"}},[e._v(" "+e._s(e.currentBlockNumber)+" ")]),n("v-chip",{staticClass:"ma-2",attrs:{color:"blue","text-color":"white"}},[e._v(" "+e._s(e.chainName)+" ")])],1),n("v-main",[n("v-container",{staticClass:"py-8"},[n("router-view")],1)],1)],1),n("v-overlay",{attrs:{value:e.mmIsOpen}},[n("v-progress-circular",{attrs:{indeterminate:""}})],1),n("v-overlay",{attrs:{value:e.mmConnecting}},[n("v-card",[n("v-card-title",[e._v("Authorize the connection of the website to the browser wallet")]),n("v-card-actions",[n("v-btn",{on:{click:e.cancelWalletConnection}},[e._v("Cancel")])],1)],1)],1),n("v-snackbar",{attrs:{"multi-line":"",color:e.snackbarColor,right:""},model:{value:e.displaySnackbar,callback:function(t){e.displaySnackbar=t},expression:"displaySnackbar"}},[e._v(" "+e._s(e.snackbarMessage)+" ")]),n("wallet-authentication-dialog",{ref:"walletAuthenticationDialog"})],1)},o=[],i=n("5530"),s=(n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{attrs:{app:"",clipped:"",flat:""},on:{input:e.drawerChange},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-divider"),n("v-list",[n("v-list-item-group",{attrs:{value:e.$route.name,mandatory:"",color:"primary"}},[e._l(e.sidenav,(function(t,r){var a=t.icon,o=t.label,i=t.route,s=t.disabled,c=t.subheader;return[c&&""!==o&&0!==r?n("v-divider",{key:o+"-divider"}):e._e(),c&&""!==o?n("v-subheader",{key:o},[e._v(e._s(o))]):n("v-list-item",{key:i,attrs:{value:i,disabled:s(),link:""},on:{click:function(t){return e.goTo(i)}}},[n("v-list-item-icon",[n("v-icon",[e._v(e._s(a))])],1),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(o))])],1)],1)]}))],2)],1),n("v-spacer"),n("img",{attrs:{src:"PoCR_Logo.svg",width:"100%"}})],1)}),c=[],u=n("b85c"),l=(n("d81d"),n("4de4"),n("d3b7"),n("fb6a"),n("caad"),n("7ffd")),d=n("1da1"),p=(n("96cf"),n("8c4f")),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.providerMetamask?e._e():n("div",[n("div",[e._v("Install MetaMask and then reload this application.")]),e._m(0)]),e.providerMetamask?n("div",[n("v-row",e._l(e.networks,(function(t){return n("v-col",{key:t.chainId},[n("v-card",[n("v-card-title",[e._v(e._s(t.name))]),n("v-card-text",[n("div",[e._v(e._s(t.title))]),n("div",[e._v("chainID: "+e._s(t.chainId))])]),n("v-card-actions",[n("v-btn",{on:{click:function(n){return e.activateOrInstall(t)}}},[e._v("Activate")])],1)],1)],1)})),1)],1):e._e()])},v=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("Installation instructions available at "),n("a",{attrs:{href:"https://metamask.io/download/",target:"_blank"}},[e._v("https://metamask.io/download/")])])}],h=n("2909");n("d9e2"),n("25f0"),n("a9e3"),n("99af"),n("8a79"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("2532"),n("7db0");function m(e,t){if(t&&!Array.isArray(t)&&(t=[t]),t&&(t=t.map((function(e){return(e.endsWith(":")?e:e+":").toLowerCase()}))),e)try{var n=new URL(e);if(t&&!t.includes(n.protocol))return;return n}catch(r){return}}function b(e){return g.apply(this,arguments)}function g(){return g=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r in t.activate_log?t.activate_log=!0:t.activate_log=!1,Array.isArray(t.networks)||(t.networks=[]),n=t.explorers||{},n)a=n[r],m(a,["http","https"])||delete n[r];t.explorers=n,o=Object(u["a"])(t.networks);try{for(o.s();!(i=o.n()).done;)s=i.value,m(s.nodeUrl,["http","https","ws","wss"])||delete s.nodeUrl,m(s.walletCustodyAPIBaseUrl,["http","https"])||delete s.walletCustodyAPIBaseUrl,m(s.explorerUrl,["http","https"])||delete s.explorerUrl,s.explorerUrl||t.explorers[s.chainID]&&(s.explorerUrl=t.explorers[s.chainID])}catch(c){o.e(c)}finally{o.f()}return 0==t.networks.length&&t.networks.push({name:"No network defined in the configuration"}),e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function w(e){var t=e.networks.find((function(e){return e.default}));return!t&&e.networks.length>0&&(t=e.networks[0]),t}function k(e,t){var n,r=Object(u["a"])(e.networks);try{for(r.s();!(n=r.n()).done;){var a=n.value;a.nodeUrl==t?a.default=!0:a.default=!1}}catch(o){r.e(o)}finally{r.f()}return e}function x(e){return e.networks}function y(e,t){if(e){if(!t){var n=w(e);return n&&n.chainID?n.explorerUrl?n.explorerUrl:y(e,n.chainID):void 0}return e.explorers[t]?e.explorers[t]:void 0}}var _=n("53ca");n("ac1f"),n("00b4");function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mustBeMetaMask,n=void 0!==t&&t,r=e.silent,a=void 0!==r&&r,o=e.timeout,i=void 0===o?3e3:o;c();var s=!1;return new Promise((function(e){function t(){if(a||console.log("detectEthereumProvider - handleEthereum()",s),!s){s=!0,window.removeEventListener("ethereum#initialized",t);var r=window,o=r.ethereum;if(a||console.log("detectEthereumProvider - decide return value",o,n),!o||n&&!o.isMetaMask){var i=n&&o?"Non-MetaMask window.ethereum detected.":"Unable to detect window.ethereum.";!a&&console.error("detectEthereumProvider:",i),e(void 0)}else e(o)}}window.ethereum?t():(a||console.log("detectEthereumProvider - no ethereum yet - wait for event or timeout"),window.addEventListener("ethereum#initialized",t,{once:!0}),setTimeout((function(){t()}),i))}));function c(){if("boolean"!==typeof n)throw new Error("detectEthereumProvider: Expected option 'mustBeMetaMask' to be a boolean.");if("boolean"!==typeof a)throw new Error("detectEthereumProvider: Expected option 'silent' to be a boolean.");if("number"!==typeof i)throw new Error("detectEthereumProvider: Expected option 'timeout' to be a number.")}}function O(e){return A.apply(this,arguments)}function A(){return A=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{connected:!1});case 2:return e.next=4,t.request({method:"eth_chainId"});case 4:return n=e.sent,e.abrupt("return",{connected:t.isConnected(),chainId:Number(n),chainIdHex:"0x".concat(Number(n).toString(16)),networkVersion:Number(t.networkVersion)});case 6:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function j(e){return C.apply(this,arguments)}function C(){return C=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r=n.timeout,a=void 0===r?500:r,e.abrupt("return",new Promise((function(e){console.log("getEthereumProviderConnectedAccounts",a);var n=!1;setTimeout((function(){n||(console.log("getEthereumProviderConnectedAccounts Timed out"),n=!0,e([]))}),a),t.request({method:"eth_accounts"}).then((function(t){n||(console.log("getEthereumProviderConnectedAccounts got a result",t),n=!0,e(t))})).catch((function(){n||(n=!0,e([]))}))})));case 2:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function I(e){return"undefined"!==typeof e.message}function N(e,t,n){if(e){var r=e;if("string"==typeof r&&(r=new Error(r)),I(r)||(r=new Error(r)),Object(_["a"])(!r.code)&&"string"==typeof r.message)try{var a=JSON.parse(r.message);r.code=a.code,r.data=a.data,r.message=a.message}catch(e){r.code=t||0}return t&&(r.code=t),n&&(r.data=n),r}}function P(e,t){return E.apply(this,arguments)}function E(){return E=Object(d["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,r){var a=!1;n.once("cancel",(function(){a||(a=!0,r(N("Cancelled login",4001)))})),t.request({method:"eth_requestAccounts"}).then((function(t){a||(a=!0,e(t))})).catch((function(e){a||(a=!0,r(N(e)))}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function D(e,t,n){return S.apply(this,arguments)}function S(){return S=Object(d["a"])(regeneratorRuntime.mark((function e(t,n,r){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw N("missing a valid provider",-32602);case 2:if(n){e.next=4;break}throw N("missing the network parameter",-32602);case 4:if(/0x[0-9a-fA-F]+/.test(n.chainId)){e.next=6;break}throw N("missing the network chainId as an hex string (0x123)",-32602);case 6:return e.prev=6,e.next=9,t.request({method:"wallet_switchEthereumChain",params:[{chainId:n.chainId}]});case 9:e.next=29;break;case 11:if(e.prev=11,e.t0=e["catch"](6),a=N(e.t0),/wallet_addEthereumChain/.test(a.message)&&(a.code=4902),4902!=a.code){e.next=28;break}if(!r||!n.chainName){e.next=27;break}return e.prev=17,e.next=20,t.request({method:"wallet_addEthereumChain",params:[n,r]});case 20:e.next=25;break;case 22:throw e.prev=22,e.t1=e["catch"](17),N(e.t1);case 25:e.next=28;break;case 27:throw N("Cannot switch to the network because it does not exist and the call misses the network info and a valid account",-32602,n);case 28:throw a;case 29:case"end":return e.stop()}}),e,null,[[6,11],[17,22]])}))),S.apply(this,arguments)}var B={data:function(){return{}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(l["c"])(["config"])),Object(l["c"])("auth",["provider","providerModel","providerMetamask","wallet","chainsNetworks"])),{},{networks:function(){return this.chainsNetworks}}),mounted:function(){return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(l["a"])(["errorFlash"])),Object(l["a"])("auth",["detectProvider","openMetaMaskConnectionDialog","attemptToConnectWallet"])),{},{activateOrInstall:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.providerMetamask){n.next=2;break}throw new Error("metamask has not been installed");case 2:return r=t.providerMetamask.provider,a="0x"+Number(e.chainId).toString(16),o=y(t.config,e.chainId),n.prev=5,n.next=8,t.openMetaMaskConnectionDialog({noRedirect:!0});case 8:if(t.wallet){n.next=10;break}throw new Error("Could not find an account");case 10:return n.next=12,O(r);case 12:if(i=n.sent,i.chainId==e.chainId){n.next=18;break}return n.next=16,D(r,{chainId:a,chainName:e.name,rpcUrls:Object(h["a"])(e.rpc),nativeCurrency:e.nativeCurrency,blockExplorerUrls:e.explorers.filter((function(e){return"EIP3091"==e.standard})).map((function(e){return e.url})).concat(o)},t.wallet);case 16:n.next=19;break;case 18:t.attemptToConnectWallet();case 19:Lr.push({name:"dashboard"}),n.next=25;break;case 22:n.prev=22,n.t0=n["catch"](5),t.errorFlash("Fail adding the network:"+n.t0.message);case 25:case"end":return n.stop()}}),n,null,[[5,22]])})))()}})},F=B,M=n("2877"),U=Object(M["a"])(F,f,v,!1,null,null,null),T=U.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[e._v("Anonymous access:")]),n("v-row",e._l(e.chainsNetworks,(function(t){return n("v-col",{key:t.chainId},[n("v-btn",{staticClass:" mr-3",attrs:{color:"teal",dark:""},on:{click:function(n){return e.openWeb3DirectAnonymousConnection(t)}}},[e._v(e._s(t.name))]),n("div",{staticClass:"text-caption"},[e._v(e._s(t.title))])],1)})),1),n("br"),n("br"),e.hasProviderMetamask?n("div",[n("div",[e._v("Authenticated access via Metamask:")]),n("v-row",[n("v-col",[n("v-btn",{staticClass:" my-3",attrs:{color:"teal",dark:""},on:{click:e.prepareOpenMetaMaskConnectionDialog}},[e._v("Connect Metamask Wallet")])],1),n("v-col",[n("v-btn",{staticClass:"mx-3 my-3",attrs:{color:"teal",dark:""},on:{click:e.goToInstallMetamask}},[e._v("Switch / Install network")])],1)],1)],1):n("div",[n("div",[e._v("Install Metamask to authenticate and then reload this application.")]),e._m(0)]),n("br"),n("br"),e.hasProviderDirect?n("div",[n("div",[e._v("Authenticated access via wallet custody:")]),n("v-btn",{attrs:{color:"teal",dark:""},on:{click:e.prepareOpenWeb3DirectConnectionDialog}},[e._v("Connect with below configuration")]),e._v(" "),n("br"),n("br"),n("v-select",{attrs:{hint:"node: "+e.selectedNetwork.nodeUrl+"; custody: "+e.selectedNetwork.walletCustodyAPIBaseUrl,items:e.networks,"item-text":"name","item-value":"nodeUrl","persistent-hint":"","return-object":"","single-line":""},model:{value:e.selectedNetwork,callback:function(t){e.selectedNetwork=t},expression:"selectedNetwork"}}),e.hasCustodyApi?n("div",[n("br"),n("v-combobox",{attrs:{label:"Enter the wallet address",placeholder:"capture your wallet address",outlined:"",counter:"",clearable:"","search-input":e.wallet,items:e.wallets},on:{"update:search-input":e.updateWallet}}),n("v-text-field",{attrs:{label:"Enter the wallet password",placeholder:"capture your wallet password",outlined:"",type:e.show?"text":"password"},on:{"click:append":function(t){e.show=!e.show}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1):e._e()],1):e._e()],1)},W=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("Installation instructions available at "),n("a",{attrs:{href:"https://metamask.io/download/",target:"_blank"}},[e._v("https://metamask.io/download/")])])}],L=(n("33d1"),n("ea98"),n("b64b"),n("130f"),n("aff5"),n("1276"),n("e9c4"),n("a15b"),n("a434"),n("6062"),n("99e5")),H=n.n(L),$=n("3062"),G=n.n($),q=n("cde1"),z=n("a086"),J=n("602f"),Y=n("b955"),K=n.n(Y),X=n("2f62"),Q=l["b"];l["b"].options.mapping="simple";n("25eb"),n("c740"),n("c35a"),n("4c53");var Z=n("86b4"),ee={VISITOR:"Visitor",AUDITED_NODE:"Audited node",NEW_NODE:"New node",APPROVED_AUDITOR:"Approved auditor",PENDING_AUDITOR:"Auditor",USER_CONNECTED:"User"},te="https://github.com/ethereum-pocr/CRIPs/blob/main/CRIPS",ne="0x0000000000000000000000000000000000000100",re="0x0000000000000000000000000000000000000101",ae="GeneratedPocRTotal",oe=H.a.utils.keccak256(ae),ie=20,se=function(){return{chainId:0,nbOfNodes:0,totalFootprint:0,totalCrypto:0,sealers:[],chainUpdateSubscription:null,blocks:[],currentBlockNumber:0,currentWalletBalanceWei:0,backupLoop:null,timeSinceLastBlock:0}},ce=function(e){return e.reduce((function(e,t){return e+t}),0)/e.length},ue={rewardsByBlock:function(e){var t=e.blocks.map((function(e){return e.sealer.lastReward}));return t.unshift(0),t},averageReward:function(e){if(0===e.blocks.length)return 0;var t=e.blocks.map((function(e){return e.sealer.lastReward}));return ce(t)},averageDelaySec:function(e){if(e.blocks.length<2)return 0;for(var t=e.blocks.length-Math.min(e.blocks.length,11),n=[],r=e.blocks.length-1;r>t;r--){var a=e.blocks[r-1],o=e.blocks[r];n.push((o.receivedAt-a.receivedAt)/1e3)}return 0==n.length?0:n.reduce((function(e,t){return t+e}),0)/n.length},lastBlock:function(e){return 0===e.blocks.length?null:e.blocks[e.blocks.length-1]},lastBlockNumber:function(e,t){var n;return null===(n=t.lastBlock)||void 0===n?void 0:n.block.number}},le=l["d"].mutations(se);function de(e,t){return pe.apply(this,arguments)}function pe(){return pe=Object(d["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=wt.get("auth/contract"),a=Bt(t),e.t0=t.utils,e.next=5,t.eth.getBalance(n.address);case 5:return e.t1=e.sent,o=e.t0.toBN.call(e.t0,e.t1),i=Number.parseFloat(t.utils.fromWei(o,"ether")),e.next=10,r.footprint(a.call(),n.address);case 10:return s=e.sent,n.footprint=Number.parseFloat(s),n.balance=i,n.lastReward=0,e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)}))),pe.apply(this,arguments)}function fe(e,t){return ve.apply(this,arguments)}function ve(){return ve=Object(d["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s,c,u,l,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("ProcessBloc",n.number,(new Date).toTimeString()),r=Bt(wt.get("auth/provider")),a=wt.get("auth/contract"),o={block:n,sealer:void 0},e.prev=4,n.difficulty=Number(n.difficulty||1),i=Number(n.number||0),s=t.utils.toBN(0),c=t.utils.toBN(0),e.prev=9,e.t0=t.utils,e.next=13,t.eth.getStorageAt(re,oe,i-1);case 13:return e.t1=e.sent,s=e.t0.toBN.call(e.t0,e.t1),e.t2=t.utils,e.next=18,t.eth.getStorageAt(re,oe,i);case 18:e.t3=e.sent,c=e.t2.toBN.call(e.t2,e.t3),e.next=24;break;case 22:e.prev=22,e.t4=e["catch"](9);case 24:return o.sealer=Object(Z["poaBlockHashToSealerInfo"])(n),e.next=27,de(t,o.sealer);case 27:return o.sealer=e.sent,u=Number.parseFloat(t.utils.fromWei(c.sub(s),"ether")),o.sealer.lastReward=u,o.block.number=i,e.next=33,a.totalFootprint(r.call());case 33:return l=e.sent,e.next=36,a.nbNodes(r.call());case 36:d=e.sent,o.totalFootprint=Number.parseInt(l),o.totalCrypto=Number.parseFloat(t.utils.fromWei(c,"ether")),o.nbNodes=Number.parseInt(d),o.receivedAt=Date.now(),e.next=47;break;case 43:throw e.prev=43,e.t5=e["catch"](4),console.warn("Error in preparing block",e.t5),new Error("Fail processing block "+n.number);case 47:return e.abrupt("return",o);case 48:case"end":return e.stop()}}),e,null,[[4,43],[9,22]])}))),ve.apply(this,arguments)}function he(e,t,n,r){return me.apply(this,arguments)}function me(){return me=Object(d["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var o,i,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=function(){var e=n.pop();if(console.log("===> Removing",e.block.number,e.sealer.vanity.custom,e.block.hash),e&&e.sealer&&e.sealer.address){var t=r.findIndex((function(t){return t.address==e.sealer.address}));t>=0&&r[t].sealedBlocks--}},0!=n.length){e.next=3;break}return e.abrupt("return",{blocks:[],sealers:[]});case 3:if(i=n[n.length-1].block,i.hash!=a.hash){e.next=6;break}return e.abrupt("return",{blocks:n,sealers:r});case 6:if(i.hash!=a.parentHash){e.next=8;break}return e.abrupt("return",{blocks:n,sealers:r});case 8:if(i.parentHash!=a.parentHash){e.next=11;break}return o(),e.abrupt("return",{blocks:n,sealers:r});case 11:return o(),e.next=14,t.eth.getBlock(a.parentHash,!1);case 14:return s=e.sent,e.next=17,he(t,n,r,s);case 17:return c=e.sent,n=c.blocks,r=c.sealers,e.abrupt("return",{blocks:n,sealers:r});case 21:case"end":return e.stop()}}),e)}))),me.apply(this,arguments)}function be(e,t,n,r){return ge.apply(this,arguments)}function ge(){return ge=Object(d["a"])(regeneratorRuntime.mark((function e(t,n,r,a){var o,s,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(n.length>0&&n[n.length-1].block.hash==a.hash)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fe(t,a);case 4:o=e.sent,s=function(){var e=n.pop();if(e&&e.sealer&&e.sealer.address){var t=r.findIndex((function(t){return t.address==e.sealer.address}));t>=0&&r[t].sealedBlocks--}};while(n.length>0&&n[n.length-1].block.number>=a.number)s();n.push(o);while(n.length>ie)n.shift();return c=r.findIndex((function(e){return e.address==o.sealer.address})),c<0?(u=Object(i["a"])(Object(i["a"])({},o.sealer),{},{sealedBlocks:1}),console.log("Creating new sealer",u),r.push(u)):(l=Object(i["a"])(Object(i["a"])({},r[c]),o.sealer),l.sealedBlocks++,r[c]=l),e.abrupt("return",{blocks:n,sealers:r});case 12:case"end":return e.stop()}}),e)}))),ge.apply(this,arguments)}var we={fetchAllValues:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,t.next=3,n("fetchNumberOfNodes");case 3:return t.next=5,n("fetchTotalFootprint");case 5:return t.next=7,n("updateNodesStatus");case 7:case"end":return t.stop()}}),t)})))()},initBackupLoop:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.state,a=e.commit,o=e.dispatch,r.backupLoop&&clearInterval(t.backupLoop),a("timeSinceLastBlock",0),i=setInterval(Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=wt.get("nodes/lastBlock"),t){e.next=3;break}return e.abrupt("return");case 3:if(n=Date.now()-t.receivedAt,!(n>6e4)){e.next=19;break}return console.warn("No block update since more than 60 seconds. Force a subscription"),clearInterval(i),e.prev=7,e.next=10,o("unsubscribeToChainUpdates");case 10:return e.next=12,o("auth/disconnect",{},{root:!0});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](7),console.warn("Could not reinitialize the connection:",e.t0.message);case 17:return e.prev=17,e.finish(17);case 19:a("timeSinceLastBlock",n);case 20:case"end":return e.stop()}}),e,null,[[7,14,17,19]])}))),200),a("backupLoop",i);case 5:case"end":return n.stop()}}),n)})))()},fetchNumberOfNodes:function(){return Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,qt("nbNodes");case 2:t=e.sent,wt.set("nodes/nbOfNodes",Number.parseInt(t));case 4:case"end":return e.stop()}}),e)})))()},fetchTotalFootprint:function(){return Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,qt("totalFootprint");case 2:t=e.sent,wt.set("nodes/totalFootprint",Number.parseInt(t));case 4:case"end":return e.stop()}}),e)})))()},updateNodesStatus:function(){return Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=wt.get("nodes/sealers"),n=Object(u["a"])(t),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=12;break}return a=r.value,e.next=8,qt("isSealer",a.address);case 8:o=e.sent,a.isActive=o;case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](2),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:wt.set("nodes/sealers",t);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})))()},subscribeToChainUpdates:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i,s,c,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.state,r=e.rootState,a=e.dispatch,null!==n.chainUpdateSubscription&&(n.chainUpdateSubscription.unsubscribe(),wt.set("nodes/chainUpdateSubscription",null)),t.next=4,a("fetchChainInformations");case 4:o=r.auth.web3,i=n.blocks.length>0?n.blocks[n.blocks.length-1].block.number:void 0,s=Gt(o,{maxBlocks:ie,firstBlock:i}),c=!1,u=[],l=function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,void 0!=t.baseFeePerGas){e.next=5;break}return e.next=4,o.eth.getBlock(t.number);case 4:t=e.sent;case 5:return e.next=7,a("insertNewBlock",t);case 7:return e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e["catch"](0),console.warn("Error on receiving a new block",e.t0),u=[],e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),s.on("data",function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!c){e.next=4;break}u.push(t),e.next=18;break;case 4:return e.prev=4,c=!0,e.next=8,l(t);case 8:n=e.sent;case 9:if(!n||!(t=u.shift())){e.next=15;break}return e.next=12,l(t);case 12:n=e.sent,e.next=9;break;case 15:return e.prev=15,c=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[4,,15,18]])})));return function(t){return e.apply(this,arguments)}}()),wt.set("nodes/chainUpdateSubscription",s);case 12:case"end":return t.stop()}}),t)})))()},unsubscribeToChainUpdates:function(e){var t=e.commit,n=e.state;null!==n.chainUpdateSubscription&&(n.chainUpdateSubscription.unsubscribe(),t("chainUpdateSubscription",null))},insertNewBlock:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,c,u,l,d,p;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.state,a=e.rootState,o=e.commit,i=e.dispatch,s=wt.get("auth/web3"),o("currentBlockNumber",t.number),!a.auth.wallet){n.next=8;break}return n.next=6,At(a.auth.wallet);case 6:c=n.sent,o("currentWalletBalanceWei",c);case 8:return n.prev=8,n.next=11,he(s,Object(h["a"])(r.blocks),Object(h["a"])(r.sealers),t);case 11:return u=n.sent,l=u.blocks,d=u.sealers,n.next=16,be(s,l,d,t);case 16:p=n.sent,l=p.blocks,d=p.sealers,wt.set("nodes/blocks",l),wt.set("nodes/sealers",d),l.length>0&&wt.set("nodes/totalCrypto",l[l.length-1].totalCrypto),n.next=26;break;case 24:n.prev=24,n.t0=n["catch"](8);case 26:i("fetchAllValues");case 27:case"end":return n.stop()}}),n,null,[[8,24]])})))()},discoverNotRunningSealers:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i,s,c,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.rootState,r=e.state,a=n.auth.web3,o=n.auth.contract,i=new q["Web3FunctionProvider"](n.auth.provider,(function(){return Promise.resolve(o.deployedAt)})),s=Object(h["a"])(r.sealers),c=r.nbOfNodes,u=regeneratorRuntime.mark((function e(t){var n,r,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.sealers(i.call(),t);case 2:if(n=e.sent,r=s.find((function(e){return e.address.toLowerCase()==n.toLowerCase()})),r){e.next=13;break}return e.next=7,de(a,{address:n.toLowerCase(),vanity:{custom:"Unknown innactive node"},sealedBlocks:0});case 7:return c=e.sent,e.next=10,o.isSealer(i.call(),c.address);case 10:u=e.sent,r=s.find((function(e){return e.address.toLowerCase()==c.address})),u&&void 0===r&&(console.log("Adding an innactive sealer",c),s.push(c),setTimeout((function(){return wt.set("nodes/sealers",s)}),200));case 13:case"end":return e.stop()}}),e)})),l=0;case 8:if(!(l<c)){t.next=13;break}return t.delegateYield(u(l),"t0",10);case 10:l++,t.next=8;break;case 13:case"end":return t.stop()}}),t)})))()},discoverNotRunningSealersOld:function(e){var t=e.rootState,n=e.state,r=t.auth.web3,a=t.auth.contract,o=new q["Web3FunctionProvider"](t.auth.provider,(function(){return Promise.resolve(a.deployedAt)})),i=Object(h["a"])(n.sealers);a.events.CarbonFootprintUpdate(o.get({fromBlock:1}),{}).on("log",function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=i.find((function(e){return e.address.toLowerCase()==t.returnValues.node.toLowerCase()})),n){e.next=7;break}return e.next=4,de(r,{address:t.returnValues.node.toLowerCase(),vanity:{custom:"Unknown innactive node"},sealedBlocks:0});case 4:a=e.sent,n=i.find((function(e){return e.address.toLowerCase()==a.address})),a.footprint>0&&void 0===n&&(console.log("Adding an innactive sealer",a),i.push(a),setTimeout((function(){return wt.set("nodes/sealers",i)}),200));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},fetchChainInformations:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,c,l,d,p,f,v,m,b,g,w;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.rootState,a=e.dispatch,o=r.auth.web3,n.next=4,o.eth.getChainId();case 4:return i=n.sent,console.log("fetchChainInformations on",i),s=[],c=[],l=[],i==r.nodes.chainId?(s=Object(h["a"])(r.nodes.blocks||[]),c=Object(h["a"])(r.nodes.sealers||[])):(wt.set("nodes/blocks",s),wt.set("nodes/sealers",c)),wt.set("nodes/chainId",i),d=s.length>0?s[s.length-1].block.number:0,n.next=14,o.eth.getBlockNumber();case 14:for(p=n.sent,t.blockNumber=p,ie=Math.max(r.nodes.nbOfNodes+2,ie),f=Math.max(d+1,p-ie),console.log("From block",f,"to",p,"sealers count",c.length,"blocks count",s.length);f<p;f++)l.push(f);return n.next=22,Promise.all(l.map((function(e){return o.eth.getBlock(e,!1)})));case 22:v=n.sent,m=Object(u["a"])(v),n.prev=24,m.s();case 26:if((b=m.n()).done){n.next=40;break}return g=b.value,n.prev=28,n.next=31,be(o,s,c,g);case 31:w=n.sent,s=w.blocks,c=w.sealers,n.next=38;break;case 36:n.prev=36,n.t0=n["catch"](28);case 38:n.next=26;break;case 40:n.next=45;break;case 42:n.prev=42,n.t1=n["catch"](24),m.e(n.t1);case 45:return n.prev=45,m.f(),n.finish(45);case 48:return s.length>0&&wt.set("nodes/totalCrypto",s[s.length-1].totalCrypto),wt.set("nodes/blocks",s),wt.set("nodes/sealers",c),n.next=53,a("discoverNotRunningSealers");case 53:wt.dispatch("auth/fetchRole");case 54:case"end":return n.stop()}}),n,null,[[24,42,45,48],[28,36]])})))()},fetchOneNodeInfo:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.rootState,a=r.auth.web3,o=r.nodes.sealers||[],i=o.findIndex((function(e){return e.address==t.toLowerCase()})),!(i>=0)){n.next=12;break}return n.next=7,de(a,o[i]);case 7:return o[i]=n.sent,wt.set("nodes/sealers",o),n.abrupt("return",o[i]);case 12:return n.abrupt("return",void 0);case 13:case"end":return n.stop()}}),n)})))()},updateFootprint:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,a=t.sealerAddress,o=t.footprint,n.next=4,an(Kt("setFootprint",a,o));case 4:r("fetchOneNodeInfo",a),r("fetchAllValues");case 6:case"end":return n.stop()}}),n)})))()}},ke={state:se,getters:ue,mutations:le,actions:we,namespaced:!0},xe=(n("2ca0"),n("faa1")),ye=n.n(xe),_e=function(){return{web3:null,intf:null,chainsNetworks:[],provider:null,providerMetamask:null,providerDirect:null,providerAnonymous:null,providerModel:null,custodyModel:null,custodyApiUrl:null,wallet:null,delegatedWallet:null,contract:null,registered:!1,isNode:!1,isVoterNode:!1,isAuditor:!1,isAuditorApproved:!1,walletAuthenticationFunction:null,mmConnecting:!1,mmConnectionNotifier:new ye.a}},Re={walletRole:function(e){return e.wallet?e.isVoterNode?ee.AUDITED_NODE:e.isNode?ee.NEW_NODE:e.isAuditorApproved?ee.APPROVED_AUDITOR:e.isAuditor?ee.PENDING_AUDITOR:ee.USER_CONNECTED:ee.VISITOR},explorerUrl:function(e){return"metamask"==e.providerModel?e.providerMetamask.explorerUrl:"direct"==e.providerModel?e.providerDirect.explorerUrl:"anonymous"==e.providerModel?e.providerAnonymous.explorerUrl:void 0},chainName:function(e){var t=0;switch(e.providerModel){case"direct":t=e.providerDirect.chainID;break;case"metamask":t=e.providerMetamask.chainID;break}switch(t){case 1804:return"Kerleano";case 2606:return"PoCRNet"}return"Unknown"}},Oe=l["d"].mutations(_e);function Ae(){return je.apply(this,arguments)}function je(){return je=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=function(){window.location=new URL(window.location.pathname,window.location.origin).href},console.log("Entering detect Metamask"),t=wt.get("config"),n=void 0,e.prev=4,e.next=7,R({timeout:2e3});case 7:n=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](4),console.log("fail detectEthereumProvider");case 13:if(!n){e.next=25;break}return n.on("accountsChanged",(function(e){console.log("Account changed :",e)})),n.removeListener("chainChanged",r),n.on("chainChanged",r),e.next=19,O(n);case 19:return a=e.sent,o=y(t,a.chainId),console.log("Explorer url defined",o),e.abrupt("return",{providerModel:"metamask",provider:n,custodyModel:"metamask",custodyApiUrl:null,chainID:a.chainId,explorerUrl:o});case 25:return e.abrupt("return",void 0);case 26:case"end":return e.stop()}}),e,null,[[4,10]])}))),je.apply(this,arguments)}function Ce(){return Ie.apply(this,arguments)}function Ie(){return Ie=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=wt.get("config"),n=wt.state.auth.providerDirect,n&&n.provider&&n.provider.disconnect&&n.provider.connected&&n.provider.disconnect(3e3,"Not needed anymore"),r=w(t),!r.nodeUrl){e.next=10;break}return a={providerModel:"direct",provider:Ot(r.nodeUrl),custodyModel:null,custodyApiUrl:null,chainID:Number.parseInt(r.chainID),explorerUrl:y(t)},r.walletCustodyAPIBaseUrl?(a.custodyModel="api",a.custodyApiUrl=r.walletCustodyAPIBaseUrl):console.log("Note: No company's wallet custody configured"),e.abrupt("return",a);case 10:return console.log("Note: No direct web3 access configured"),e.abrupt("return",void 0);case 12:case"end":return e.stop()}}),e)}))),Ie.apply(this,arguments)}function Ne(e){var t=e.find((function(e){return 2606==e.chainId}));return t}function Pe(e){return Ee.apply(this,arguments)}function Ee(){return Ee=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t&&t.rpc){e.next=2;break}throw new Error("Invalid network config: "+JSON.stringify(t));case 2:if(n=wt.state.auth.providerDirect,n&&n.provider&&n.provider.disconnect&&n.provider.connected&&n.provider.disconnect(3e3,"Not needed anymore"),r=t.rpc.find((function(e){return e.startsWith("ws")})),a=t.explorers.find((function(e){return e.url})),!r){e.next=11;break}return o={providerModel:"anonymous",provider:Ot(r),custodyModel:null,custodyApiUrl:null,chainID:t.chainId,explorerUrl:a?a.url:void 0},e.abrupt("return",o);case 11:return console.log("Note: No direct anonymous web3 access possible"),e.abrupt("return",void 0);case 13:case"end":return e.stop()}}),e)}))),Ee.apply(this,arguments)}var De={checkNetworkProofOfCarbonReduction:function(){return Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=wt.get("auth/web3"),t){e.next=3;break}return e.abrupt("return","No web3 connection established yet");case 3:return n=wt.get("auth/contract"),console.log("checkNetworkProofOfCarbonReduction",t),e.prev=5,e.next=8,t.eth.getBlockNumber();case 8:return r=e.sent,e.next=11,t.eth.getBlock(r);case 11:return a=e.sent,"string"!==typeof a.difficulty||a.difficulty.startsWith("0x")||(a.difficulty=Number.parseInt(a.difficulty)),Object(Z["poaBlockHashToSealerInfo"])(a),e.next=16,n.nbNodes(Bt().call());case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e["catch"](5),console.error("Fail in checkNetworkProofOfCarbonReduction",e.t0),e.abrupt("return",e.t0.message);case 22:return e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e,null,[[5,18]])})))()},setWalletAttributes:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.dispatch,n("fetchIsRegistered"),n("status/fetchIsApproved",null,{root:!0}),n("fetchRole");case 4:case"end":return t.stop()}}),t)})))()},fetchRole:function(){return Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log("fetchRole called"),wt.set("auth/isAuditor",!1),wt.set("auth/isNode",!1),wt.set("auth/isVoterNode",!1),t=wt.get("auth/wallet"),!t){e.next=46;break}return e.next=8,qt("auditorRegistered",t);case 8:return n=e.sent,e.next=11,qt("auditorApproved",t);case 11:return r=e.sent,e.next=14,wt.dispatch("nodes/fetchOneNodeInfo",t);case 14:if(a=e.sent,a){e.next=27;break}return e.prev=16,e.next=19,qt("delegateOf",t);case 19:return o=e.sent,e.next=22,wt.dispatch("nodes/fetchOneNodeInfo",o);case 22:a=e.sent,e.next=27;break;case 25:e.prev=25,e.t0=e["catch"](16);case 27:if(!a){e.next=44;break}return wt.set("auth/isNode",!0),i=!1,e.prev=30,e.next=33,qt("canActAsSealerNode",t);case 33:i=e.sent,e.next=42;break;case 36:return e.prev=36,e.t1=e["catch"](30),e.next=40,qt("footprint",t);case 40:s=e.sent,i=s>0;case 42:wt.set("auth/isVoterNode",i),wt.set("auth/delegatedWallet",a.address);case 44:wt.set("auth/isAuditor",n),wt.set("auth/isAuditorApproved",r);case 46:case"end":return e.stop()}}),e,null,[[16,25],[30,36]])})))()},setConnection:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("Setting connection:",t.providerModel),wt.set("auth/provider",t.provider),wt.set("auth/providerModel",t.providerModel),"metamask"==t.providerModel&&wt.set("auth/providerMetamask",t),"direct"==t.providerModel&&wt.set("auth/providerDirect",t),n=new H.a(t.provider),n.eth.ens=null,wt.set("auth/web3",n),window.myWeb3=n,wt.set("auth/intf",null);case 10:case"end":return e.stop()}}),e)})))()},detectProvider:function(e){var t=arguments;return Object(d["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,c,u,l,d,p,f,v,h,m,b,g;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.dispatch,a=e.commit,o=e.state,i=e.rootState,s=t.length>1&&void 0!==t[1]?t[1]:{},c=s.renew,u=void 0!==c&&c,0!=o.chainsNetworks.length){n.next=10;break}return n.next=5,fetch("https://chainid.network/chains.json");case 5:return l=n.sent,n.next=8,l.json();case 8:d=n.sent,a("chainsNetworks",d.filter((function(e){return"CRC"==e.chain})));case 10:if(o.contract||a("contract",It()),console.log("Before detecting providers",u),p=wt.get("auth/providerModel"),!["metamask","direct","anonymous"].includes(p)&&u&&(u=!1),n.prev=14,i.config){n.next=18;break}return n.next=18,wt.dispatch("fetchConfig");case 18:if(f=0,v=void 0,h=void 0,m=void 0,u&&(!u||"metamask"!=p)){n.next=27;break}return n.next=25,Ae();case 25:v=n.sent,v&&f++;case 27:if(u&&(!u||"direct"!=p)){n.next=32;break}return n.next=30,Ce();case 30:h=n.sent,h&&f++;case 32:if(u&&(!u||"anonymous"!=p)){n.next=39;break}if(b=Ne(wt.get("auth/chainsNetworks")),!b){n.next=38;break}return n.next=37,Pe(b);case 37:m=n.sent;case 38:m&&f++;case 39:if(0!=f){n.next=42;break}return wt.set("auth/providerModel","none"),n.abrupt("return");case 42:if(wt.set("auth/providerMetamask",v),wt.set("auth/providerDirect",h),wt.set("auth/providerAnonymous",m),!(f>1)){n.next=49;break}wt.set("auth/providerModel","both"),n.next=52;break;case 49:return g=h||v||m,n.next=52,r("setConnection",g);case 52:n.next=57;break;case 54:n.prev=54,n.t0=n["catch"](14),console.error("Fail detecting a valid provider",n.t0.message);case 57:console.log("Finishing detecting providers");case 58:case"end":return n.stop()}}),n,null,[[14,54]])})))()},attemptToConnectWallet:function(){return Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=function(e){var t=wt.get("auth/providerModel");if("metamask"==t){var n=e[0];wt.set("auth/wallet",n)}},r=[],a=wt.get("auth/providerMetamask"),o=wt.get("auth/providerModel"),"metamask"!=o){e.next=10;break}return e.next=7,j(a.provider,{timeout:1e3});case 7:r=e.sent,a.provider.removeListener("accountsChanged",n),a.provider.on("accountsChanged",n);case 10:if("direct"!=o||0!=r.length){e.next=14;break}return e.next=13,Dt();case 13:r=e.sent;case 14:if((t=console).log.apply(t,["wallets found ["].concat(Object(h["a"])(r),["]"])),i=r.length>0?r[0]:null,i){e.next=18;break}return e.abrupt("return");case 18:return wt.set("auth/wallet",i),e.abrupt("return",i);case 20:case"end":return e.stop()}}),e)})))()},cancelWalletConnection:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.state,n.mmConnecting&&n.mmConnectionNotifier.emit("cancel");case 2:case"end":return t.stop()}}),t)})))()},openMetaMaskConnectionDialog:function(e){var t=arguments;return Object(d["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,c,u,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,a=e.state,o=e.commit,i=t.length>1&&void 0!==t[1]?t[1]:{},s=i.noRedirect,c=void 0!==s&&s,u=wt.get("auth/providerMetamask"),wt.set("auth/wallet",null),n.next=6,j(u.provider,{timeout:500});case 6:if(l=n.sent,0!=l.length){n.next=16;break}return n.prev=8,o("mmConnecting",!0),n.next=12,P(u.provider,a.mmConnectionNotifier);case 12:l=n.sent;case 13:return n.prev=13,o("mmConnecting",!1),n.finish(13);case 16:if(0!==l.length){n.next=18;break}return n.abrupt("return");case 18:if(wt.set("auth/wallet",l[0]),r("setConnection",u),c){n.next=24;break}return n.next=23,r("fetchRole");case 23:Lr.push({name:"dashboard"});case 24:case"end":return n.stop()}}),n,null,[[8,,13,16]])})))()},openWeb3DirectConnectionDialog:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,a=t.wallet,o=t.password,i=t.nodeUrl,wt.set("auth/wallet",null),s=wt.get("config"),s=k(s,i),wt.set("config",s),n.next=8,Ce();case 8:if(c=n.sent,r("setConnection",c),"api"!=c.custodyModel){n.next=15;break}return n.next=13,Pt(a,o);case 13:u=n.sent,u&&wt.set("auth/wallet",a);case 15:return n.next=17,r("fetchRole");case 17:Lr.push({name:"dashboard"});case 18:case"end":return n.stop()}}),n)})))()},openWeb3DirectAnonymousConnection:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,wt.set("auth/wallet",null),n.next=4,Pe(t);case 4:return a=n.sent,wt.set("auth/providerAnonymous",a),r("setConnection",a),n.next=9,r("fetchRole");case 9:Lr.push({name:"dashboard"});case 10:case"end":return n.stop()}}),n)})))()},disconnect:function(){return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Lr.push({name:"authentication"});case 2:wt.set("auth/wallet",null);case 3:case"end":return e.stop()}}),e)})))()},fetchIsRegistered:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.state,wt.set("auth/registered",!1),!n.wallet){t.next=7;break}return t.next=5,an(qt("auditorRegistered",n.wallet));case 5:r=t.sent,wt.set("auth/registered",r);case 7:case"end":return t.stop()}}),t)})))()},selfRegister:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,t.next=3,an(Zt("selfRegisterAuditor",{maxGas:2e5}));case 3:n("setWalletAttributes");case 4:case"end":return t.stop()}}),t)})))()}},Se={state:_e,getters:Re,mutations:Oe,actions:De,namespaced:!0},Be=n("901e"),Fe=Math.pow(10,9),Me=Math.pow(10,18);function Ue(e){return new Be["BigNumber"](e)}function Te(e){return Ue(e).div(Ue(Me))}function Ve(e,t){var n=Ue(e);return"ether"===t?n.multipliedBy(Me):"gwei"===t?n.multipliedBy(Fe):n}function We(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=Intl.NumberFormat(void 0,{style:"decimal",minimumFractionDigits:t,maximumFractionDigits:t});return n.format(e)}n("4dd0c");var Le=function(){return{pledgeHistory:[],footprintHistory:[]}},He={},$e=Object(i["a"])(Object(i["a"])({},l["d"].mutations(Le)),{},{appendFootprint:function(e,t){e.footprintHistory.push(t)},appendPledge:function(e,t){e.pledgeHistory.push(t)}}),Ge={fetchAllValues:function(e){var t=e.dispatch,n=new q["Web3FunctionProvider"](wt.get("auth/provider"),(function(){return Promise.resolve(wt.get("auth/wallet"))})),r=K.a.get("Governance").at(ne);t("fetchFootprintHistory",{contract:r,prov:n}),t("fetchPledgeHistory",{contract:r,prov:n})},fetchFootprintHistory:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.commit,a=e.rootState,o=t.contract,i=t.prov,s=wt.get("auth/web3"),c=a.nodes.sealers,u=a.auth.wallet,wt.set("history/footprintHistory",[]),o.events.CarbonFootprintUpdate(i.get({fromBlock:1}),{}).on("log",function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.eth.getTransaction(t.transactionHash);case 2:n=e.sent,a={blockNumber:t.blockNumber,auditor:n?n.from.toLowerCase():"no sealer!",node:t.returnValues.node.toLowerCase(),footprint:t.returnValues.footprint,txHash:t.transactionHash},o=c.find((function(e){return e.address==a.node})),a.nodeName=o?o.vanity.custom:"Not a node",a.auditor==u?a.auditorName="Me":a.auditorName=a.auditor,r("appendFootprint",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return n.stop()}}),n)})))()},fetchPledgeHistory:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=e.commit,a=e.rootState,o=t.contract,i=t.prov,s=a.auth.wallet,wt.set("history/pledgeHistory",[]),o.events.AmountPledged(i.get({fromBlock:1}),{from:s}).on("log",function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n={blockNumber:t.blockNumber,auditor:t.returnValues.from,pledge:Te(t.returnValues.amountAdded)-Te(t.returnValues.amountRemoved),total:Te(t.returnValues.total),txHash:t.transactionHash},r("appendPledge",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return n.stop()}}),n)})))()}},qe={state:Le,getters:He,mutations:$e,actions:Ge,namespaced:!0},ze=function(){return{balance:0,minPledgeAmount:0,pledgedAmount:0,redeemBool:!1}},Je={},Ye=l["d"].mutations(ze),Ke={fetchAllValues:function(e){var t=e.dispatch;t("fetchBalance"),t("fetchMinPledgeAmount"),t("fetchPledgedAmount"),t("fetchCanTransferPledge")},fetchBalance:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.rootState,t.next=3,At(n.auth.wallet);case 3:r=t.sent,wt.set("pledge/balance",r);case 5:case"end":return t.stop()}}),t)})))()},fetchCanTransferPledge:function(){return Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=wt.get("auth/wallet"),e.next=3,qt("canTransferPledge",t,"1");case 3:n=e.sent,console.log("just trying",n),wt.set("pledge/redeemBool",n);case 6:case"end":return e.stop()}}),e)})))()},fetchMinPledgeAmount:function(){return Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=wt.get("auth/wallet"),e.next=3,qt("minPledgeAmountToAuditNode",t);case 3:n=e.sent,wt.set("pledge/minPledgeAmount",n);case 5:case"end":return e.stop()}}),e)})))()},fetchPledgedAmount:function(){return Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=wt.get("auth/wallet"),e.next=3,qt("pledgedAmount",t);case 3:n=e.sent,wt.set("pledge/pledgedAmount",Te(n));case 5:case"end":return e.stop()}}),e)})))()},addToPledge:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,console.log("Pledging",t),n.next=4,an(Zt("pledge",{amount:Ve(t,"ether"),maxGas:3e5}));case 4:r("fetchPledgedAmount"),r("fetchBalance");case 6:case"end":return n.stop()}}),n)})))()},redeemPledge:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,t.next=3,an(Kt("getPledgeBack"));case 3:n("fetchPledgedAmount"),n("fetchBalance");case 5:case"end":return t.stop()}}),t)})))()}},Xe={state:ze,getters:Je,mutations:Ye,actions:Ke,namespaced:!0},Qe=function(){return{approved:!1,approbationVotes:0}},Ze={},et=l["d"].mutations(Qe),tt={fetchIsApproved:function(){return Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(wt.set("status/approved",!1),t=wt.get("auth/wallet"),!t){e.next=7;break}return e.next=5,qt("auditorApproved",t);case 5:n=e.sent,wt.set("status/approved",n);case 7:case"end":return e.stop()}}),e)})))()},fetchApprobationVotes:function(){return Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=wt.get("auth/wallet"),e.next=3,qt("auditorVotes",t);case 3:n=e.sent,wt.set("status/approbationVotes",Number(n));case 5:case"end":return e.stop()}}),e)})))()}},nt={state:Qe,getters:Ze,mutations:et,actions:tt,namespaced:!0},rt=function(){return{nbAuditors:0,auditors:[]}},at={},ot=l["d"].mutations(rt),it={fetchAllAuditorsValues:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,t.next=3,n("fetchNbAuditors");case 3:return t.next=5,n("fetchAuditorsInfos");case 5:case"end":return t.stop()}}),t)})))()},fetchNbAuditors:function(){return Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,qt("nbAuditors");case 2:t=e.sent,wt.set("nodeGovernance/nbAuditors",t);case 4:case"end":return e.stop()}}),e)})))()},fetchAuditorsInfos:function(){return Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,s,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,qt("nbAuditors");case 2:return t=e.sent,n=wt.get("auth/wallet"),e.t0=Math,e.next=7,qt("nbNodes");case 7:e.t1=e.sent,e.t2=e.t1/2,e.t3=e.t0.floor.call(e.t0,e.t2),r=e.t3+1,a=[],o=0;case 13:if(!(o<t)){e.next=30;break}return e.next=16,qt("auditorAddress",o);case 16:return i=e.sent,e.next=19,qt("auditorVotes",i);case 19:return s=e.sent,e.next=22,qt("currentAuditorVote",i,n);case 22:return c=e.sent,e.next=25,qt("auditorApproved",i);case 25:u=e.sent,a[o]={address:i,nbVotes:s,minVotes:r,currentVote:c,isApproved:u};case 27:o++,e.next=13;break;case 30:wt.set("nodeGovernance/auditors",a);case 31:case"end":return e.stop()}}),e)})))()},fetchConfiscatedPledge:function(){return Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,qt("confiscatedAmount");case 2:return t=e.sent,console.log("confiscated pledge",t,Object(_["a"])(t)),e.abrupt("return",Te(t));case 5:case"end":return e.stop()}}),e)})))()},voteAuditor:function(e,t){return Object(d["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.auditorAddress,r=t.accept,e.abrupt("return",an(Zt("voteAuditor",{maxGas:2e5},n,r)));case 2:case"end":return e.stop()}}),e)})))()}},st={state:rt,getters:at,mutations:ot,actions:it,namespaced:!0},ct=function(){return{indicators:[],totalWeight:1,efDecimals:6,functionalUnit:""}},ut={fromSingleIndicator:function(e){return function(t){return pt(t,e.indicators,e.totalWeight,e.efDecimals)}},toSingleIndicator:function(e){return function(t){return ft(t,e.indicators,e.totalWeight,e.efDecimals)}}},lt=l["d"].mutations(ct);function dt(e){if(!e)throw new Error("Invalid configuration");if(!Array.isArray(e.indicators))throw new Error("The indicators field is missing or is not an array");var t,n=[],r=Object(u["a"])(e.indicators);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push({name:a.name||"missing name",definition:a.definition||"missing definition",unit:a.unit||"missing unit",normalisationFactor:a.normalisationFactor||1,weight:a.weight||0})}}catch(i){r.e(i)}finally{r.f()}var o=n.reduce((function(e,t){return t.weight+e}),0);if(0==o)throw new Error("Cannot work with a set of indicators whose total weigth is zero");return{indicators:n,totalWeight:o,efDecimals:e.efDecimals||6,functionalUnit:e.functionalUnit||"Undefined FU"}}function pt(e,t,n,r){e/=Math.pow(10,r);var a=t.map((function(t){var n=e*t.normalisationFactor;return Object(i["a"])(Object(i["a"])({},t),{},{valueEq:n})}));return a}function ft(e,t,n,r){for(var a=0,o=0;o<t.length;o++){var i=t[o],s=i.weight/n,c=e.length>o?e[o]:0,u=c*s/i.normalisationFactor;a+=u}return a*Math.pow(10,r)}var vt={fetchIndicators:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.prev=1,r="./envirnonmental.json",a=new URL(window.location.href),a.searchParams.has("envirnonmental")&&(o=new URL(a.searchParams.get("envirnonmental")),r=o.href,a.searchParams.delete("envirnonmental")),t.next=7,fetch(r);case 7:if(i=t.sent,200!==i.status){t.next=17;break}return t.next=11,i.json();case 11:s=t.sent,c=dt(s),n("indicators",c.indicators),n("totalWeight",c.totalWeight),n("efDecimals",c.efDecimals),n("functionalUnit",c.functionalUnit);case 17:t.next=24;break;case 19:t.prev=19,t.t0=t["catch"](1),console.error("Could not process the environmental configuration",t.t0.message),n("indicators",[]),n("totalWeight",1);case 24:case"end":return t.stop()}}),t,null,[[1,19]])})))()}},ht={state:ct,getters:ut,mutations:lt,actions:vt,namespaced:!0};r["default"].use(X["a"]);var mt={initialized:!1,tryingToConnect:!1,mmIsOpen:!1,displaySnackbar:!1,snackbarMessage:"",snackbarColor:"error",config:void 0},bt=[],gt=new X["a"].Store({modules:{nodes:ke,auth:Se,history:qe,pledge:Xe,status:nt,nodeGovernance:st,climate:ht},plugins:[Q.plugin],state:mt,mutations:l["d"].mutations(mt),getters:{logs:function(){return bt}},actions:{errorFlash:function(e,t){var n=e.commit;n("snackbarMessage",t),n("snackbarColor","error"),n("displaySnackbar",!0)},fetchConfig:function(e){return Object(d["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,console.log("Inside fetchConfig"),t.prev=2,r="./config.json",a=new URL(window.location.href),a.searchParams.has("config")&&(o=new URL(a.searchParams.get("config")),r=o.href,a.searchParams.delete("config")),t.next=8,fetch(r);case 8:if(i=t.sent,200!==i.status){t.next=18;break}return t.next=12,i.json();case 12:return s=t.sent,t.t0=n,t.next=16,b(s);case 16:t.t1=t.sent,(0,t.t0)("config",t.t1);case 18:t.next=24;break;case 20:t.prev=20,t.t2=t["catch"](2),console.error("Could not process the config",t.t2.message),n("config",void 0);case 24:case"end":return t.stop()}}),t,null,[[2,20]])})))()},startInitialization:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){var r,a,o,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.state,o=e.dispatch,console.log("RootStore",t),n.prev=2,r("initialized",!1),n.next=6,o("climate/fetchIndicators");case 6:return console.log("Fetching config"),n.next=9,o("fetchConfig");case 9:return a.config.activate_log&&kt(),console.log("Fetching config - done"),gt.commit("auth/contract",It()),console.log("Detecting providers"),n.next=15,o("auth/detectProvider");case 15:if(console.log("Detected provider model",a.auth.providerModel),"metamask"!=a.auth.providerModel){n.next=21;break}return n.next=19,o("auth/checkNetworkProofOfCarbonReduction");case 19:i=n.sent,i&&(console.log("Verification of PoCR netowrk failed:",i),r("auth/providerModel","switchMetamask"));case 21:return t.watch((function(e){return e.auth.wallet}),(function(){console.log("wallet has been changed:",a.auth.wallet),o("auth/setWalletAttributes")})),n.next=24,o("auth/attemptToConnectWallet");case 24:r("initialized",!0),n.next=31;break;case 27:return n.prev=27,n.t0=n["catch"](2),n.next=31,o("errorFlash","Initialization failed - reload page: "+n.t0.message);case 31:case"end":return n.stop()}}),n,null,[[2,27]])})))()}}}),wt=gt;function kt(){var e=console.log,t=console.error,n=console.warn;function r(e){if(window.document){var t=window.document.getElementById("--logs--");if(!t){if(!document.body)return;t=document.createElement("div"),t.setAttribute("id","--logs--"),t.setAttribute("style","position: relative; z-index: 100;"),document.body.insertBefore(t,document.body.firstElementChild)}var n=document.createElement("pre");n.innerHTML="<b>".concat(e.type,"</b> : ").concat(e.args.map((function(e){return"object"==Object(_["a"])(e)?"Object":"undefined"==typeof e?"Undef":e})).join(", ")),t.appendChild(n)}}console.log=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];e.apply(void 0,n),r({type:"info",args:n})},console.warn=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];n.apply(void 0,t),r({type:"warn",args:t})},console.error=function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];t.apply(void 0,n),r({type:"error",args:n})}}var xt=n("d4ec"),yt=n("bee2"),_t=function(){function e(t){Object(xt["a"])(this,e),this.keyList=t||[]}return Object(yt["a"])(e,[{key:"getItem",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(this.keyList.includes(t)||this.keyList.push(t),n=window.localStorage.getItem(t),n){e.next=6;break}return e.abrupt("return",void 0);case 6:return e.abrupt("return",JSON.parse(n));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setItem",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return this.keyList.includes(t)||this.keyList.push(t),n?window.localStorage.setItem(t,JSON.stringify(n)):window.localStorage.removeItem(t),e.abrupt("return");case 5:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getAll",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={},n=Object(u["a"])(this.keyList),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=11;break}return a=r.value,e.next=8,this.getItem(a);case 8:t[a]=e.sent;case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](2),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}}),e,this,[[2,13,16,19]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"setAll",value:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=0,r=Object.keys(t);case 1:if(!(n<r.length)){e.next=8;break}return a=r[n],e.next=5,this.setItem(a,t[a]);case 5:n++,e.next=1;break;case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),Rt=new _t;function Ot(e){var t=new H.a(e);return t.currentProvider}function At(e){return jt.apply(this,arguments)}function jt(){return jt=Object(d["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,wt.get("auth/web3").eth.getBalance(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),jt.apply(this,arguments)}function Ct(e){var t=K.a.get(e),n=t.at(ne);return console.log("Instance",n),n}function It(){return Ct("Governance")}function Nt(){var e=wt.get("auth/providerDirect").custodyApiUrl,t=new J["WalletCustodyApiImpl"](e,"eth");return t}function Pt(e,t){return Et.apply(this,arguments)}function Et(){return Et=Object(d["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Rt.getItem("custody.wallets");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return r=e.t0,r.unshift(t),r=Object(h["a"])(new Set(r)),Rt.setItem("custody.wallets",r),a=Nt(),e.next=12,an(a.authenticate(t,n));case 12:return o=e.sent,e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)}))),Et.apply(this,arguments)}function Dt(){return St.apply(this,arguments)}function St(){return St=Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Rt.getItem("custody.wallets");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=[];case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),St.apply(this,arguments)}function Bt(e){var t=wt.get("auth/intf");if(t)return t;if(e||(e=wt.get("auth/provider")),!e)throw new Error("Should not be calling the api functions without a provider connected");var n=wt.get("auth/providerModel");if("metamask"==n){var r=wt.get("auth/web3");t=new q["Web3FunctionProvider"](r,(function(e){return Promise.resolve(e[0])}))}if("direct"==n||"anonymous"==n){var a=wt.get("auth/wallet");if(a){var o=Nt(),i=wt.state.auth.walletAuthenticationFunction;t=new z["Web3CustodyFunctionProvider"](e,o,a,i)}else t=new q["Web3FunctionProvider"](e,(function(){return Promise.resolve(ne)}))}if(t)return t.web3.eth.ens=null,wt.set("auth/intf",t),t;throw new Error("should not be calling the api functions without deciding the provider (metamask or direct or anonymous)")}var Ft={},Mt=1,Ut=0,Tt=0,Vt=function(){Tt=Date.now();for(var e=0,t=Object.keys(Ft);e<t.length;e++){var n=t[e],r=Ft[n];r.when<=Tt&&setImmediate(r.callback)}},Wt=function(){Ut>0&&clearInterval(Ut),Tt=Date.now(),Ut=setInterval(Vt,50)};function Lt(e,t){var n=Date.now();Mt=(Mt+1)%Number.MAX_SAFE_INTEGER;var r=Mt;return Ft[r]={when:n+t,callback:function(){delete Ft[r];try{e()}catch(t){console.log("timer callback failed - so what?",t)}}},r}function Ht(e){delete Ft[e]}["load","message","online","offline","pageshow"].forEach((function(e){return window.addEventListener(e,(function(){Date.now()-Tt>3e4&&(console.log("Setting the global timer"),Wt())}))}));var $t=1e3;function Gt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxBlocks,r=void 0===n?0:n,a=t.firstBlock,o=void 0===a?void 0:a;if(e||(e=wt.get("auth/web3")),!e)throw new Error("Should not be calling the api functions without a provider connected");var s=wt.get("auth/provider"),c=wt.get("auth/providerModel"),u="metamask"==c?function(e,t){s.sendAsync(Object(i["a"])(Object(i["a"])({},e),{},{skipCache:!0}),t)}:s.send.bind(s);function l(){return p.apply(this,arguments)}function p(){return p=Object(d["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,t){u({method:"eth_blockNumber",id:$t++,params:[]},(function(n,r){n?t(n):r.result?e(r.result):"string"==typeof r?e(r):t(new Error("No error or response!"))}))}));case 2:return t=e.sent,e.abrupt("return",Number(t));case 4:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function f(e){return v.apply(this,arguments)}function v(){return v=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,r,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],e.next=3,new Promise((function(e,r){u({method:"eth_getBlockByNumber",id:$t++,params:["0x".concat(Number(t).toString(16)),n]},(function(t,n){t?r(t):n.result?e(n.result):"string"==typeof n?e(n):r(new Error("No error or response!"))}))}));case 3:return r=e.sent,e.abrupt("return",Object(i["a"])(Object(i["a"])({},r),{},{number:Number(r.number)}));case 5:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}var h=new xe["EventEmitter"]({captureRejections:!0});h.unsubscribe=function(){h.timer&&(Ht(h.timer),h.timer=null)};var m=1e3;function b(){return g.apply(this,arguments)}function g(){return g=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,n,a,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,h.props){e.next=12;break}if(e.t0=o,e.t0){e.next=7;break}return e.next=6,l();case 6:e.t0=e.sent;case 7:e.t1=e.t0,e.t2=Date.now(),h.props={lastBlock:e.t1,lastCheck:e.t2},e.next=35;break;case 12:return e.next=14,l();case 14:if(t=e.sent,n=Date.now(),!(t>=h.props.lastBlock)){e.next=34;break}a=Math.max(Math.min(h.props.lastBlock+1,t),t-r),h.props.lastBlock+1<a&&console.log("Skipping blocks that are too old:",h.props.lastBlock+1,"...",a-1),i=a;case 20:if(!(i<=t)){e.next=34;break}return e.prev=21,e.next=24,f(i,!1);case 24:s=e.sent,h.emit("data",s),e.next=31;break;case 28:e.prev=28,e.t3=e["catch"](21),console.warn("Fail getting block "+i,e.t3.message);case 31:i++,e.next=20;break;case 34:h.props={lastBlock:t,lastCheck:n};case 35:e.next=40;break;case 37:e.prev=37,e.t4=e["catch"](0),console.warn("Something went wront when processing the loop. Ignoring.",e.t4.message);case 40:h.timer&&(h.timer=Lt(b,m));case 41:case"end":return e.stop()}}),e,null,[[0,37],[21,28]])}))),g.apply(this,arguments)}return h.timer=Lt(b,10),h}function qt(e){return zt.apply(this,arguments)}function zt(){return zt=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n=o.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=o[a];return e.abrupt("return",Jt.apply(void 0,[t,{maxGas:1e7}].concat(r)));case 2:case"end":return e.stop()}}),e)}))),zt.apply(this,arguments)}function Jt(e,t){return Yt.apply(this,arguments)}function Yt(){return Yt=Object(d["a"])(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,s,c=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=wt.get("auth/provider"),a=wt.get("auth/contract"),t in a){e.next=4;break}return e.abrupt("return",Promise.reject(new Error("Method ".concat(t," does not exists in contract"))));case 4:for(o=c.length,i=new Array(o>2?o-2:0),s=2;s<o;s++)i[s-2]=c[s];return e.abrupt("return",a[t].apply(a,[Qt(Bt(r).call(n))].concat(i)));case 6:case"end":return e.stop()}}),e)}))),Yt.apply(this,arguments)}function Kt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Zt.apply(void 0,[e,{}].concat(n))}function Xt(e){"string"!==typeof e&&(e='\n {"message":"invalid error message"}');var t=e.split("\n");1==t.length&&(t="\n ".concat(JSON.stringify({message:e})).split("\n"));try{var n=JSON.parse(t.splice(1).join(" "));return n}catch(r){return{message:e,comment:"invalid JSON message"}}}function Qt(e){return function(t,n){return e(t,n)}}function Zt(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];var o=wt.get("auth/wallet");if(!o)return Promise.reject(new Error("You are not authenticated with a wallet, you cannot update the blockchain"));var i=wt.get("auth/provider"),s=wt.get("auth/contract");return e in s?(t.amount&&(t.amount=new G.a(t.amount.toString(10))),new Promise((function(n,a){Jt.apply(void 0,[e,t].concat(r)).then(function(){var a=Object(d["a"])(regeneratorRuntime.mark((function a(o){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log("Tested call",t,o),a.t0=n,a.next=4,s[e].apply(s,[Qt(Bt(i).send(t))].concat(r));case 4:a.t1=a.sent,(0,a.t0)(a.t1);case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch((function(e){var t=Xt(e.message);a(t)}))}))):Promise.reject(new Error("Method ".concat(e," does not exists in contract")))}function en(e,t){return tn.apply(this,arguments)}function tn(){return tn=Object(d["a"])(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r='eth.sendTransaction({from: eth.coinbase, to:"'.concat(t,'", data:"').concat(n,'"})'),e.abrupt("return",{isTx:!0,result:r});case 2:case"end":return e.stop()}}),e)}))),tn.apply(this,arguments)}function nn(e){return rn.apply(this,arguments)}function rn(){return rn=Object(d["a"])(regeneratorRuntime.mark((function e(t){var n,r,a,o,i,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(n=wt.get("auth/contract"),r=s.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=s[o];return e.next=4,n[t].apply(n,[en].concat(a));case 4:return i=e.sent,console.log(i),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)}))),rn.apply(this,arguments)}function an(e,t){return on.apply(this,arguments)}function on(){return on=Object(d["a"])(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=null,e.prev=1,wt.set("mmIsOpen",!0),e.next=5,t;case 5:r=e.sent,e.next=15;break;case 8:e.prev=8,e.t0=e["catch"](1),a=e.t0.message,e.t0.blockHash&&e.t0.gasUsed&&0==e.t0.status&&(a="Not enough gas to complete the transaction: ".concat(e.t0.gasUsed," provided")),console.warn("Submitted transaction failed with error:",a),wt.dispatch("errorFlash",a),n&&n(e.t0);case 15:return e.prev=15,wt.set("mmIsOpen",!1),e.finish(15);case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,null,[[1,8,15,18]])}))),on.apply(this,arguments)}var sn={data:function(){return{wallet:void 0,wallets:[],networks:[],selectedNetwork:{name:"undefined"},password:void 0,show:!1}},mounted:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Dt();case 2:n=t.sent,n.length>0&&(e.wallet=n[0]),e.wallets=n,e.disconnect(),r=e.$store.get("config"),e.networks=x(r),e.selectedNetwork=w(r);case 9:case"end":return t.stop()}}),t)})))()},computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])("auth",["chainsNetworks"])),{},{hasProviderMetamask:function(){return!!this.$store.state.auth.providerMetamask},hasProviderDirect:function(){return!!this.$store.state.auth.providerDirect},hasCustodyApi:function(){return!(!this.$store.state.auth.providerDirect||"api"!=this.$store.state.auth.providerDirect.custodyModel)}}),methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(l["a"])(["errorFlash"])),Object(l["a"])("auth",["openMetaMaskConnectionDialog","openWeb3DirectConnectionDialog","openWeb3DirectAnonymousConnection","setConnection","checkNetworkProofOfCarbonReduction","disconnect"])),{},{updateWallet:function(e){this.wallet=e},prepareOpenMetaMaskConnectionDialog:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.$store.state.auth.providerMetamask,n){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.setConnection(n);case 5:return t.next=7,e.checkNetworkProofOfCarbonReduction();case 7:if(t.sent){t.next=20;break}return t.prev=8,t.next=11,e.openMetaMaskConnectionDialog();case 11:t.next=17;break;case 13:return t.prev=13,t.t0=t["catch"](8),e.errorFlash("Could not connect an account from the wallet: "+t.t0.message),t.abrupt("return");case 17:e.goToDashboard(),t.next=21;break;case 20:e.goToInstallMetamask();case 21:case"end":return t.stop()}}),t,null,[[8,13]])})))()},prepareOpenWeb3DirectConnectionDialog:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.openWeb3DirectConnectionDialog({wallet:e.wallet,password:e.password,nodeUrl:e.selectedNetwork.nodeUrl});case 2:return t.next=4,Dt();case 4:e.wallets=t.sent;case 5:case"end":return t.stop()}}),t)})))()},goToInstallMetamask:function(){this.$router.push({name:"installMetaMask"})},goToDashboard:function(){this.$router.push({name:"dashboard"})}})},cn=sn,un=Object(M["a"])(cn,V,W,!1,null,null,null),ln=un.exports,dn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h2",[e._v("Proof of Climate awaReness")]),n("div",[e._v("The consensus that incentivizes nodes to improving their environmental footprint by earning tokens (CRC / ₡)")]),n("img",{attrs:{src:"https://github.com/ethereum-pocr/.github/raw/main/profile/PoCR-Marketing.png",width:"90%"}}),n("v-divider",{staticClass:"my-4"}),e._m(0),n("v-divider",{staticClass:"my-4"}),n("div",[e._v("This application gives you a view on the network and the nodes in the "),n("a",{on:{click:function(t){return e.goTo("dashboard")}}},[n("u",[e._v("Dashboard")])])]),n("div",[n("a",{on:{click:function(t){return e.goTo("authentication")}}},[n("u",[e._v("Connect")])]),e._v(" with a wallet to operate as a node or as an auditor of carbon footprint ")]),e._m(1),n("v-divider",{staticClass:"my-4"}),e._m(2),n("v-divider",{staticClass:"my-4"})],1)},pn=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("To read the detail of this consensus and methodology go to the "),n("a",{attrs:{href:"https://github.com/ethereum-pocr/whitepaper",target:"_blank"}},[e._v("whitepaper")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("A basic block and transaction explorer is available "),n("a",{attrs:{href:"https://ethereum-pocr.github.io/explorer/",target:"_blank"}},[e._v("here")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v("This application is open sourced and its code is available in "),n("a",{attrs:{href:"https://github.com/ethereum-pocr/ethereum-pocr.github.io/tree/main/vue-auditor",target:"_blank"}},[e._v("github")])])}],fn={mounted:function(){this.startInitialization()},methods:Object(i["a"])(Object(i["a"])({},Object(l["a"])(["startInitialization"])),{},{goTo:function(e){this.$route.name!==e&&this.$router.push({name:e})}})},vn=fn,hn=Object(M["a"])(vn,dn,pn,!1,null,null,null),mn=hn.exports,bn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{col:"",wrap:""}},[n("v-card",{staticClass:"my-6 ma-auto",attrs:{height:"200",width:"300"}},[n("v-card-subtitle",[e._v("Block "),n("explorer",{attrs:{type:"block",id:e.lastBlock?e.lastBlock.block.number:0}})],1),n("v-card-title",{staticClass:"align-center"},[n("span",{staticClass:"text-h4 ma-auto",style:e.lastBlockNoTurnSealing?"color:red":""},[e._v(e._s(e.lastBlock&&e.to1000s(e.lastBlock.block.number)))])]),n("v-card-subtitle",[e._v("Total of "+e._s(e.to1000s(e.totalCrypto,2))+" ₡ created")]),n("v-card-subtitle",[e._v(e._s((e.timeSinceLastBlock/1e3).toFixed(2))+" sec. since last update")])],1),n("v-card",{staticClass:"my-6 ma-auto",attrs:{height:"200",width:"200"}},[n("v-card-subtitle",[e._v("Audited nodes")]),n("v-card-title",{staticClass:"align-center"},[n("span",{staticClass:"text-h2 ma-auto"},[e._v(e._s(e.nbOfNodes))])])],1),n("v-card",{staticClass:"my-6 ma-auto",attrs:{height:"200",width:"300"}},[n("v-card-subtitle",[e._v("Total environmental footprint (EF)")]),n("v-card-title",{staticClass:"align-center"},[n("span",{staticClass:"text-h4 ma-auto"},[n("climate-indicator",{attrs:{value:e.totalFootprint}})],1)]),n("v-card-subtitle",{staticClass:"mt-3"},[e._v("Average: "),n("climate-indicator",{attrs:{value:e.avgFootprint}}),e._v(" EF ")],1)],1),n("v-row",[e.lastBlock?n("v-col",{staticClass:"py-8",attrs:{cols:"12"}},[n("v-card",[n("v-card-title",[e._v("Environmental Footprint of the sealers")]),n("v-card-subtitle",[e._v(" Last block sealer: "+e._s(e.lastBlock.sealer.address)+" / "+e._s(e.lastBlock.sealer.vanity.custom)+". Footprint: "),n("climate-indicator",{attrs:{value:e.lastBlock.sealer.footprint}}),e._v(" EF ")],1),n("v-card-text",e._l(e.sealersSorted,(function(t){return n("v-progress-linear",{key:t.address,staticClass:"my-1",attrs:{height:"2em",value:(t.footprint-e.minFootprint)/(e.maxFootprint-e.minFootprint)*100,color:e.gradientGreenToRed((t.footprint-e.minFootprint)/(e.maxFootprint-e.minFootprint))},scopedSlots:e._u([{key:"default",fn:function(r){return[e._v(" "+e._s(t.vanity.custom)+" -   "),n("strong",[n("climate-indicator",{attrs:{value:t.footprint}})],1),e._v("   EF ")]}}],null,!0)})})),1)],1)],1):e._e(),e.lastBlock?n("v-col",{staticClass:"pb-8",attrs:{cols:"12"}},[n("v-card",[n("v-card-title",[e._v("Sealers")]),n("v-card-text",[n("v-data-table",{attrs:{items:e.sealers,headers:e.sealersHeaders,"items-per-page":-1,"hide-default-footer":""},scopedSlots:e._u([{key:"item.name",fn:function(t){var r=t.item;return[n("div",[n("v-icon",[e._v(e._s(r.isActive?"mdi-lock-open-check-outline":"mdi-lock-remove"))]),e._v(" "+e._s(r.vanity.custom))],1),n("div",[e._v(e._s(r.address))])]}},{key:"item.footprint",fn:function(t){var r=t.item;return[0==r.footprint?n("div",{staticClass:"text-caption"},[e._v("Pending audit")]):n("climate-indicator",{attrs:{value:r.footprint}})]}},{key:"item.ratio",fn:function(t){var r=t.item;return[n("div",[e._v(e._s((100*r.sealedBlocks/e.totalSealedBlocks).toFixed(2))+" %")]),n("div",[e._v(e._s(r.sealedBlocks)+" / "+e._s(e.totalSealedBlocks))])]}},{key:"item.balance",fn:function(t){var r=t.item;return[n("div",[e._v(e._s(e.to1000s(r.balance,4)))])]}},{key:"item.lastReward",fn:function(t){var r=t.item;return[n("div",[e._v(e._s(e.to1000s(r.lastReward,4)))])]}},{key:"item.lastSealer",fn:function(t){var r=t.item;return[r.address==e.lastBlock.sealer.address?n("v-icon",[e._v("mdi-seal")]):e._e()]}}],null,!1,164104628)})],1)],1)],1):e._e()],1)],1)},gn=[];n("4ec9"),n("4e82");function wn(e,t,n,r){var a=t,o=n,i=e;r&&(i*=2,i>=1&&(i-=1,a=n,o=r));var s=o.red-a.red,c=o.green-a.green,u=o.blue-a.blue,l={red:parseInt(Math.floor(a.red+s*i),10),green:parseInt(Math.floor(a.green+c*i),10),blue:parseInt(Math.floor(a.blue+u*i),10)};return"rgb("+l.red+","+l.green+","+l.blue+")"}var kn={red:217,green:83,blue:79},xn={red:240,green:173,blue:78},yn={red:92,green:184,blue:91};function _n(e){return wn(e,yn,xn,kn)}var Rn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-icon",{attrs:{small:"",color:"blue"},on:{click:function(t){return e.open(e.url)}}},[e._v("mdi-open-in-new")])},On=[],An={props:{id:[String,Number],type:{type:String,validator:function(e){return["block","tx","token","account"].includes(e)}}},computed:{url:function(){var e=wt.get("auth/explorerUrl");if(e){while(e.endsWith("/"))e=e.slice(0,e.length-1);var t=new URL("".concat(this.type,"/").concat(this.id),"".concat(e,"/"));return t.href}}},methods:{open:function(e){window.open(e,"POCR-EXPLORER")}}},jn=An,Cn=Object(M["a"])(jn,Rn,On,!1,null,null,null),In=Cn.exports,Nn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"helper",on:{click:function(t){e.displayed=!e.displayed}}},[e._v(" "+e._s(e.to1000s(e.value))+" "),n("v-dialog",{attrs:{width:"auto"},model:{value:e.displayed,callback:function(t){e.displayed=t},expression:"displayed"}},[n("v-card",[n("v-card-title",[e._v("Environmental footprint of "+e._s(e.to1000s(e.value))+"   "),n("span",{staticClass:"text-caption"},[e._v("1/"+e._s(e.to1000s(Math.pow(10,e.efDecimals)))+"th")]),e._v(" EF is equivalent to")]),n("v-card-text",[n("div",[n("i",[e._v("1 Environmental footprint (EF) is a normalized indicator of the impact of 1 human being. "),n("a",{attrs:{href:"https://eplca.jrc.ec.europa.eu/EnvironmentalFootprint.html",target:"_blank"}},[e._v("Source")]),e._v(".")])]),n("div",[n("i",[e._v("The table show equivalence of the environmental footprint in each of the indicators")])]),n("v-simple-table",[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[e._v(" Indicator ")]),n("th",{staticClass:"text-left"},[e._v(" "+e._s(e.to1000s(e.value/Math.pow(10,e.efDecimals),e.efDecimals))+" EF equivalent to ")])])]),n("tbody",e._l(e.fromSingleIndicator(e.value),(function(t){return n("tr",{key:t.name},[n("td",[e._v(e._s(t.name)+" "),n("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,a=t.attrs;return[n("v-icon",e._g(e._b({attrs:{color:"blue",dense:""}},"v-icon",a,!1),r),[e._v("mdi-information-outline")])]}}],null,!0)},[n("span",[e._v(e._s(t.definition))])])],1),n("td",[e._v(e._s(e.to1000s(t.valueEq,2))+" "+e._s(t.unit))])])})),0)]),n("div",[e._v("Measure of EF are for 1 F.U. as per LCA methodology (or multiple FU in the case of the whole network)")]),n("div",[e._v("Functional Unit: "),n("i",[e._v(e._s(e.functionalUnit))])])],1)],1)],1)],1)},Pn=[],En={props:{value:{type:Number}},data:function(){return{displayed:!1}},computed:Object(i["a"])({},Object(l["c"])("climate",["fromSingleIndicator","efDecimals","functionalUnit"])),methods:{to1000s:We}},Dn=En,Sn=(n("382b"),Object(M["a"])(Dn,Nn,Pn,!1,null,null,null)),Bn=Sn.exports,Fn={components:{Explorer:In,ClimateIndicator:Bn},data:function(){return{nbBlocksToKeep:100,sealerMap:new Map,blocks:[],sealersReward:[],sealersHeaders:[{text:"Name",value:"name",align:"left"},{text:"Env. Footprint",value:"footprint",align:"right"},{text:"Reward (₡)",value:"lastReward",align:"right"},{text:"Balance (₡)",value:"balance",align:"right"},{text:"Sealing ratio",value:"ratio",align:"center"},{text:"Last",value:"lastSealer"}]}},mounted:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("Dashboard mounted"),t.prev=1,t.next=4,e.fetchAllValues();case 4:return t.next=6,e.fetchChainInformations();case 6:return t.next=8,e.subscribeToChainUpdates();case 8:return t.next=10,e.initBackupLoop();case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](1),console.error("Fail loading dashboard",t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))()},computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])("nodes",["sealers","nbOfNodes","lastBlock","totalFootprint","totalCrypto","rewardsByBlock","averageReward","averageDelaySec","timeSinceLastBlock"])),{},{sealersSorted:function(){return Object(h["a"])(this.sealers).filter((function(e){return e.footprint>0})).sort((function(e,t){return e.footprint-t.footprint}))},maxFootprint:function(){return this.sealers.reduce((function(e,t){return t.footprint>e?t.footprint:e}),1)},minFootprint:function(){var e=this.maxFootprint,t=this.sealers.reduce((function(e,t){return t.footprint<e?t.footprint:e}),e),n=e-t;return t-.05*n},avgFootprint:function(){var e=this.sealers.reduce((function(e,t){var n=e.nb,r=e.total;return t.footprint>0?{nb:n+1,total:r+t.footprint}:{nb:n,total:r}}),{nb:0,total:0}),t=e.nb,n=e.total;return t>0?n/t:0},sealersFootprint:function(){return this.sealers.map((function(e){return e.footprint}))},sealersAddress:function(){return this.sealers.map((function(e){return e.address}))},sealersLabels:function(){return this.sealers.map((function(e){return e.vanity.custom}))},totalSealedBlocks:function(){return this.sealers.reduce((function(e,t){return e+t.sealedBlocks}),0)},lastBlockNoTurnSealing:function(){return this.lastBlock&&1==this.lastBlock.block.difficulty}}),methods:Object(i["a"])({gradientGreenToRed:_n,to1000s:We},Object(l["a"])("nodes",["fetchAllValues","fetchChainInformations","subscribeToChainUpdates","initBackupLoop"]))},Mn=Fn,Un=Object(M["a"])(Mn,bn,gn,!1,null,null,null),Tn=Un.exports,Vn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",[n("v-card",[n("v-card-title",[e._v("Number of Auditors")]),n("v-card-text",[e._v(e._s(e.nbAuditors))])],1)],1),n("v-col",{attrs:{cols:"12"}},[n("v-card",[n("v-card-title",[e._v("Auditors")]),n("v-card-text",[n("v-data-table",{attrs:{items:e.auditors,headers:e.tableHeadersAuditors,"items-per-page":-1,"hide-default-footer":""},scopedSlots:e._u([{key:"item.status",fn:function(t){var r=t.item;return[n("div",[e._v(e._s(r.isApproved?"Oui":"Non"))])]}},{key:"item.votes",fn:function(t){var r=t.item;return[n("div",[e._v(e._s(r.nbVotes)+" / "+e._s(r.minVotes)+" avant "+e._s(r.isApproved?"Révocation":"Approbation"))])]}},{key:"item.actions",fn:function(t){var r=t.item;return[n("v-btn",{attrs:{color:"primary",small:""},on:{click:function(t){return e.nodeVote(r)}}},[e._v(" "+e._s(e.computeLabel(r))+" ")])]}}])})],1)],1)],1)],1)},Wn=[],Ln={data:function(){return{tableHeadersAuditors:[{text:"Auditor",value:"address"},{text:"Approuvé",value:"status"},{text:"Votes courants",value:"votes"},{text:"Actions",value:"actions",sortable:!1}],switchState:!1}},computed:Object(i["a"])({},Object(l["c"])("nodeGovernance",["nbAuditors","auditors"])),mounted:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchAllAuditorsValues();case 2:case"end":return t.stop()}}),t)})))()},methods:Object(i["a"])(Object(i["a"])({},Object(l["a"])("nodeGovernance",["fetchAllAuditorsValues","voteAuditor"])),{},{computeLabel:function(e){return e.isApproved?e.currentVote?"Voter pour révoquer":"Retirer mon vote de révocation":e.currentVote?"Retirer mon vote d'approbation":"Voter pour approuver"},nodeVote:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log("address : ".concat(e.address," / vote value : ").concat(!e.currentVote)),n.prev=1,n.next=4,t.voteAuditor({auditorAddress:e.address,accept:!e.currentVote});case 4:return n.next=6,t.fetchAllAuditorsValues();case 6:n.next=14;break;case 8:return n.prev=8,n.t0=n["catch"](1),console.log(n.t0),n.next=13,t.fetchAllAuditorsValues();case 13:throw n.t0;case 14:case"end":return n.stop()}}),n,null,[[1,8]])})))()}})},Hn=Ln,$n=Object(M["a"])(Hn,Vn,Wn,!1,null,null,null),Gn=$n.exports,qn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",[n("v-card",[n("v-card-title",[e._v("Number of Nodes")]),n("v-card-text",[e._v(e._s(e.nbOfNodes))])],1)],1),n("v-col",[n("v-card",[n("v-card-title",[e._v("Total Environmental Footprint (EF)")]),n("v-card-text",[n("climate-indicator",{attrs:{value:e.totalFootprint}}),e._v(" EF ")],1)],1)],1),n("v-col",{attrs:{cols:"12"}},[n("v-card",[n("v-card-title",[e._v("Nodes")]),n("v-card-text",[n("v-data-table",{attrs:{items:e.sealers,headers:e.tableHeaders,"items-per-page":-1,"hide-default-footer":""},scopedSlots:e._u([{key:"item.footprint",fn:function(e){var t=e.item;return[n("climate-indicator",{attrs:{value:t.footprint}})]}},{key:"item.vanity",fn:function(t){var r=t.item;return[n("div",[e._v("Address: "+e._s(r.address))]),n("div",[e._v("Name: "+e._s(r.vanity.custom))])]}},{key:"item.actions",fn:function(t){var r=t.item;return[n("v-btn",{attrs:{color:"primary",small:""},on:{click:function(t){return e.openUpdateFootprintDialog(r)}}},[e._v(" Update footprint ")])]}}])}),n("v-dialog",{attrs:{width:"auto"},model:{value:e.footprintDialog,callback:function(t){e.footprintDialog=t},expression:"footprintDialog"}},[e.selectedSealer?n("v-card",[n("v-card-title",[e._v(" Update Environmental Footprint for sealer "),n("br"),e._v(" "+e._s(e.selectedSealer.address)+" ")]),n("v-card-text",[n("v-row",[n("v-col",{staticClass:"pb-0",attrs:{cols:"6"}},[n("v-text-field",{attrs:{type:"number",outlined:"",dense:""},model:{value:e.newFootprintValue,callback:function(t){e.newFootprintValue=t},expression:"newFootprintValue"}})],1),n("v-col",{staticClass:"pb-0"},[n("v-btn",{on:{click:function(t){e.footprintDialog=!1}}},[e._v("Cancel")])],1),n("v-col",{staticClass:"pb-0"},[n("v-btn",{attrs:{color:"primary"},on:{click:e.submitNewFootprint}},[e._v(" Submit ")])],1)],1),e._l(e.editingIndicators,(function(t){return n("v-row",{key:t.name,staticClass:"flex align-center",staticStyle:{"border-top":"solid"}},[n("v-col",{attrs:{cols:"6"}},[e._v(" "+e._s(t.name)+" ")]),n("v-col",{attrs:{cols:"6"}},[t.name==e.editingIndicator.name?n("v-text-field",{attrs:{type:"number",label:t.unit,"append-icon":"mdi-close","append-outer-icon":"mdi-checkbox-marked-outline"},on:{"click:append":e.cancelEditField,"click:append-outer":e.applyEditField},model:{value:e.editingIndicator.valueEq,callback:function(t){e.$set(e.editingIndicator,"valueEq",t)},expression:"editingIndicator.valueEq"}}):n("div",{on:{click:function(n){return e.editField(t)}}},[e._v(" "+e._s(e.to1000s(t.valueEq,2))+" "+e._s(t.unit)+" ")])],1)],1)}))],2)],1):e._e()],1)],1)],1)],1)],1)},zn=[],Jn=(n("b680"),{components:{ClimateIndicator:Bn},data:function(){return{tableHeaders:[{text:"Node",value:"vanity"},{text:"Env. Footprint",value:"footprint",align:"end"},{text:"Actions",value:"actions",sortable:!1}],tableHeadersAuditors:[{text:"Auditor",value:"address"},{text:"Votes courants",value:"votes"},{text:"Mon Vote",value:"actions",sortable:!1}],footprintDialog:!1,selectedSealer:null,newFootprintValue:0,editingIndicator:{},editingIndicators:[]}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(l["c"])("nodes",["nbOfNodes","totalFootprint","sealers"])),Object(l["c"])("climate",["efDecimals","fromSingleIndicator","toSingleIndicator"])),{},{newFootprintValueDisplay:{get:function(){return Number(this.newFootprintValue).toFixed(this.efDecimals)},set:function(e){console.log("setting value",e),this.newFootprintValue=Number(e)}}}),mounted:function(){this.fetchAllValues()},methods:Object(i["a"])(Object(i["a"])({to1000s:We},Object(l["a"])("nodes",["fetchAllValues","updateFootprint"])),{},{editField:function(e){this.editingIndicator=e,this.editingIndicator.valueEq=0},applyEditField:function(){var e=this,t=this.editingIndicators.findIndex((function(t){return t.name==e.editingIndicator.name}));t>=0&&(this.editingIndicators[t]=this.editingIndicator);var n=this.editingIndicators.map((function(e){return Number(e.valueEq)}));this.newFootprintValue=this.toSingleIndicator(n),this.editingIndicator={}},cancelEditField:function(){this.editingIndicator={}},openUpdateFootprintDialog:function(e){this.selectedSealer=e,this.newFootprintValue=e.footprint,this.editingIndicator={},this.editingIndicators=this.fromSingleIndicator(this.newFootprintValue),this.footprintDialog=!0},submitNewFootprint:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.editingIndicator={},e.footprintDialog=!1,t.next=4,e.updateFootprint({sealerAddress:e.selectedSealer.address,footprint:e.newFootprintValue});case 4:case"end":return t.stop()}}),t)})))()}})}),Yn=Jn,Kn=Object(M["a"])(Yn,qn,zn,!1,null,null,null),Xn=Kn.exports,Qn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-tabs",{attrs:{centered:"","slider-color":"primary"},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[n("v-tab",{attrs:{href:"#footprints"}},[e._v(" Footprints ")]),n("v-tab",{attrs:{href:"#pledges"}},[e._v(" Pledges ")])],1),n("v-tabs-items",{staticStyle:{width:"100%"},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[n("v-tab-item",{attrs:{value:"footprints"}},[n("v-card",[n("v-card-text",[n("v-data-table",{attrs:{items:e.footprintHistory,headers:e.footprintTableHeaders,"items-per-page":-1,"hide-default-footer":""},scopedSlots:e._u([{key:"item.node",fn:function(t){var r=t.item;return[n("div",[e._v(e._s(r.node))]),n("div",[e._v(e._s(r.nodeName))])]}},{key:"item.explorer",fn:function(e){var t=e.item;return[n("explorer",{attrs:{type:"tx",id:t.txHash}})]}}])})],1)],1)],1),n("v-tab-item",{attrs:{value:"pledges"}},[n("v-card",[n("v-card-title",[e._v("Your pledge history")]),n("v-card-text",[n("v-data-table",{attrs:{items:e.pledgeHistory,headers:e.pledgeTableHeaders,"items-per-page":-1,"hide-default-footer":""},scopedSlots:e._u([{key:"item.explorer",fn:function(e){var t=e.item;return[n("explorer",{attrs:{type:"tx",id:t.txHash}})]}}])})],1)],1)],1)],1)],1)},Zn=[],er={components:{Explorer:In},data:function(){return{currentTab:"footprints",footprintTableHeaders:[{text:"Block N°",value:"blockNumber"},{text:"Auditor",value:"auditorName"},{text:"Node",value:"node"},{text:"Assigned",value:"footprint"},{text:"",value:"explorer"}],pledgeTableHeaders:[{text:"Block N°",value:"blockNumber"},{text:"Pledge",value:"pledge"},{text:"Total",value:"total"},{text:"",value:"explorer"}]}},computed:Object(i["a"])({},Object(l["c"])("history",["footprintHistory","pledgeHistory"])),mounted:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.fetchAllValues();case 1:case"end":return t.stop()}}),t)})))()},methods:Object(i["a"])({},Object(l["a"])("history",["fetchAllValues"]))},tr=er,nr=Object(M["a"])(tr,Qn,Zn,!1,null,null,null),rr=nr.exports,ar=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{wrap:""}},[n("v-col",{attrs:{cols:"12"}},[n("v-card",[n("v-card-title",[e._v("Current Wallet Balance")]),n("v-card-text",[e._v(" "+e._s(e.toEther(e.balance))+" CRC ")])],1)],1),n("v-col",{attrs:{cols:"8"}},[n("v-card",[n("v-card-title",[e._v("Pledge Informations")]),n("v-card-text",[n("div",[e._v(" Min pledge to start audit: "+e._s(e.toEther(e.minPledgeAmount).toFixed(4))+" CRC ")]),n("div",[e._v("Current pledged amount: "+e._s(e.pledgedAmount.toFixed(4))+" CRC")]),n("v-btn",{attrs:{small:"",disabled:0===e.pledgedAmount||!e.redeemBool},on:{click:e.redeemPledge}},[e._v("Redeem Pledge")])],1)],1)],1),n("v-col",[n("v-card",[n("v-card-title",[e._v("Pledge Actions")]),n("v-card-text",[n("v-row",[n("v-col",{staticClass:"pb-0",attrs:{cols:"12"}},[n("v-text-field",{attrs:{dense:"","hide-details":"",outlined:"",type:"number",min:0,placeholder:"Amount to add to the pledge"},model:{value:e.amountToAdd,callback:function(t){e.amountToAdd=t},expression:"amountToAdd"}})],1),n("v-col",{attrs:{cols:"12"}},[n("v-btn",{staticStyle:{width:"100%"},attrs:{small:""},on:{click:e.pledgeMore}},[e._v("Pledge more")])],1)],1)],1)],1)],1)],1)},or=[],ir={data:function(){return{intervalId:null,amountToAdd:0}},computed:Object(i["a"])({},Object(l["c"])("pledge",["balance","minPledgeAmount","pledgedAmount","redeemBool"])),mounted:function(){this.fetchAllValues(),this.intervalId=setInterval(this.fetchAllValues,6e4)},beforeRouteLeave:function(e,t,n){clearInterval(this.intervalId),n()},methods:Object(i["a"])(Object(i["a"])({toEther:Te},Object(l["a"])("pledge",["fetchAllValues","addToPledge","redeemPledge"])),{},{pledgeMore:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.addToPledge(e.amountToAdd);case 2:e.amountToAdd=0;case 3:case"end":return t.stop()}}),t)})))()}})},sr=ir,cr=Object(M["a"])(sr,ar,or,!1,null,null,null),ur=cr.exports,lr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",{staticClass:"pa-md-4 mx-lg-auto"},[e.walletRole!=e.ROLES.VISITOR?n("v-card-title",[e._v(" "+e._s(e.walletRole)+" "+e._s(e.wallet)+" "),n("explorer",{attrs:{type:"account",id:e.wallet}})],1):n("v-card-title",[e._v(" Visitor")]),n("v-card-subtitle",[e._v(" "+e._s(e.currentWalletBalanceEth)+" CRC ")])],1),e.isAuditor?n("v-card",{staticClass:"pa-md-4 mx-lg-auto"},[n("v-card-title",[e._v(" Status ")]),e.registered&&e.approved?n("v-card-subtitle",{staticStyle:{color:"Green"}},[e._v(" APPROVED ")]):e._e(),e.registered&&!e.approved?n("v-card-subtitle",{staticStyle:{color:"red"}},[e._v(" AWAITING APPROVAL ")]):e._e(),e.registered&&!e.approved?n("v-card-text",[n("p",{staticStyle:{color:"black"}},[e._v(" You have the total vote of "+e._s(e.approbationVotes)+" ")])]):e._e()],1):e._e(),e.walletRole==e.ROLES.USER_CONNECTED?n("v-card",{staticClass:"pa-md-4 mx-lg-auto"},[n("v-card-text",[n("p",[e._v(" If you wish to become an auditor you must register here "),n("v-btn",{staticClass:"mx-2",attrs:{small:"",disabled:e.mmIsOpen},on:{click:e.selfRegister}},[e._v(" Self register ")])],1)]),n("v-card-text",[n("p",[e._v(" If you need this wallet to acts as a delegate for your node, execute the following command from your node eth console "),n("code",[e._v(e._s(e.registerDelegateCommandLine))])])])],1):e._e()],1)},dr=[],pr={components:{Explorer:In},data:function(){return{registerDelegateCommandLine:""}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({ROLES:function(){return ee},mmIsOpen:Object(l["c"])("mmIsOpen")},Object(l["c"])("auth",["registered","walletRole","wallet"])),Object(l["c"])("status",["approved","approbationVotes"])),Object(l["c"])("nodes",["currentWalletBalanceWei"])),{},{currentWalletBalanceEth:function(){return Te(this.currentWalletBalanceWei).toFixed(4)},isAuditor:function(){return[ee.APPROVED_AUDITOR,ee.PENDING_AUDITOR].includes(this.walletRole)}}),mounted:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.fetchIsRegistered(),e.fetchIsApproved(),e.fetchApprobationVotes(),t.next=5,nn("allowDelegate",e.wallet);case 5:e.registerDelegateCommandLine=t.sent;case 6:case"end":return t.stop()}}),t)})))()},methods:Object(i["a"])(Object(i["a"])({},Object(l["a"])("auth",["fetchIsRegistered","selfRegister"])),Object(l["a"])("status",["fetchIsApproved","fetchApprobationVotes"]))},fr=pr,vr=Object(M["a"])(fr,lr,dr,!1,null,null,null),hr=vr.exports,mr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("h2",[e._v("Manage the confiscated pledge of the auditors")])]),n("v-col",{attrs:{cols:"12"}},[n("v-card",[n("v-card-title",[e._v("Total confiscated pledge")]),n("v-card-text",[e._v(e._s(e.totalPledge)+" CRC")])],1)],1)],1)},br=[],gr={data:function(){return{totalPledge:0}},mounted:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchConfiscatedPledge();case 2:e.totalPledge=t.sent;case 3:case"end":return t.stop()}}),t)})))()},methods:Object(i["a"])({},Object(l["a"])("nodeGovernance",["fetchConfiscatedPledge"]))},wr=gr,kr=Object(M["a"])(wr,mr,br,!1,null,null,null),xr=kr.exports,yr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",[n("v-col",{staticClass:"pb-0",attrs:{cols:"12"}},[n("v-card",[n("v-card-title",[e._v("Page to manage PoCR improvement proposals.")])],1)],1),n("v-col",{staticClass:"pb-0",attrs:{cols:"12"}},[e.isConnected?n("v-card",{staticClass:"pa-2"},[n("v-card-subtitle",[e._v("Create a new proposal.")]),n("v-card-text",[e._v(" this action will be done with your connected wallet and will reserve the ID of the Climate awaReness Improvement Proposal that you must then create as a document in "),n("a",{attrs:{href:e.CRIPsUrl}},[e._v(e._s(e.CRIPsUrl))])]),n("v-card-actions",[e.lastCRIPCreated?n("v-card-text",[e._v(" You have reserved the CRIP id "),n("code",[e._v(e._s(e.lastCRIPCreated))])]):n("v-btn",{attrs:{color:"primary",small:""},on:{click:e.reserveCRIP}},[e._v(" Reserve the next CRIP id ")])],1)],1):e._e()],1),n("v-col",{staticClass:"pb-0",attrs:{cols:"12"}},[n("v-card",{staticClass:"pa-2"},[n("v-card-title",[e._v("List of the improvement proposals")]),n("v-card-text",[n("v-data-table",{attrs:{items:e.CRIPS,headers:e.cripsTableHeaders,"items-per-page":-1,"hide-default-footer":""},scopedSlots:e._u([{key:"item.createdBlock",fn:function(t){var r=t.item;return[n("div",[e._v(e._s(r.createdBlock)+" "),n("explorer",{attrs:{type:"block",id:r.createdBlock}})],1)]}},{key:"item.documentation",fn:function(t){var r=t.item;return[n("a",{attrs:{href:r.url}},[e._v("crip-"+e._s(r.index)+".md")])]}},{key:"item.voteFromBlock",fn:function(t){var r=t.item;return[n("div",[e._v(e._s(e.voteFromContent(r.index)))]),n("div",[e._v("at "+e._s(r.voteFromBlock))])]}},{key:"item.voteUntilBlock",fn:function(t){var r=t.item;return[n("div",[e._v(e._s(e.voteUntilContent(r.index)))]),n("div",[e._v("at "+e._s(r.voteUntilBlock))])]}},{key:"item.auditors",fn:function(t){var r=t.item;return[n("div",[e._v("Pro: "+e._s(r.auditorsFor))]),n("div",[e._v("Cons: "+e._s(r.auditorsAgainst))])]}},{key:"item.nodes",fn:function(t){var r=t.item;return[n("div",[e._v("Pro: "+e._s(r.nodesFor))]),n("div",[e._v("Cons: "+e._s(r.nodesAgainst))])]}},{key:"item.useraction",fn:function(t){var r=t.item;return[e.canVote(r.index)?n("v-radio-group",{on:{change:function(t){return e.userVote(r)}},model:{value:r.vote,callback:function(t){e.$set(r,"vote",t)},expression:"item.vote"}},[n("v-radio",{attrs:{label:"agree",value:!0}}),n("v-radio",{attrs:{label:"reject",value:!1}})],1):e._e()]}}])})],1)],1)],1),n("v-col",{staticClass:"pb-0",attrs:{cols:"12"}},[n("v-card",{staticClass:"pa-2"},[n("v-card-title",[e._v("Your votes")]),n("v-card-text",[n("v-data-table",{attrs:{items:e.userVotes,headers:e.votesTableHeaders,"items-per-page":-1,"hide-default-footer":""},scopedSlots:e._u([{key:"item.block",fn:function(t){var r=t.item;return[n("div",[e._v(e._s(r.block)+" "),n("explorer",{attrs:{type:"tx",id:r.txHash}})],1)]}}])})],1)],1)],1)],1)},_r=[],Rr={components:{Explorer:In},data:function(){return{lastCRIPCreated:void 0,CRIPS:[],userVotes:[],cripsTableHeaders:[{text:"Created on",value:"createdBlock"},{text:"Doc",value:"documentation"},{text:"Start in",value:"voteFromBlock"},{text:"Auditors votes",value:"auditors"},{text:"Nodes votes",value:"nodes"},{text:"Closes on",value:"voteUntilBlock"},{text:"Action",value:"useraction"}],votesTableHeaders:[{text:"Created on",value:"block"},{text:"CRIP id",value:"index"},{text:"Decision",value:"decision"}]}},computed:{blockNumber:function(){return wt.get("nodes/currentBlockNumber")},CRIPsUrl:function(){return te},isConnected:function(){return!!wt.get("auth/wallet")},isNode:function(){return wt.get("auth/walletRole")==ee.AUDITED_NODE},isAuditor:function(){return wt.get("auth/walletRole")==ee.APPROVED_AUDITOR}},mounted:function(){this.fetchCRIPS(),this.fetchUserVotes()},methods:{reserveCRIP:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=new q["Web3FunctionProvider"](wt.get("auth/provider"),(function(){return Promise.resolve(wt.get("auth/wallet"))})),r=wt.get("auth/contract"),a=e.blockNumber,t.next=5,an(Zt("newProposal",{maxGas:1e5}));case 5:r.events.IPChanged(n.get({fromBlock:a}),{status:0}).once("log",(function(t){e.lastCRIPCreated=t.returnValues.index,e.fetchCRIPS()}));case 6:case"end":return t.stop()}}),t)})))()},fetchCRIPS:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,qt("nbImprovementProposals");case 2:n=t.sent,r=[],a=0;case 5:if(!(a<n)){t.next=18;break}return t.next=8,qt("getImprovementProposal",a);case 8:o=t.sent,o.index=Number.parseInt(o.index),o.voteFromBlock=Number.parseInt(o.voteFromBlock),o.voteUntilBlock=Number.parseInt(o.voteUntilBlock),i=new URL("".concat(te,"/crip-").concat(o.index,".md")),o.url=i.href,r.push(o);case 15:a++,t.next=5;break;case 18:e.CRIPS=r;case 19:case"end":return t.stop()}}),t)})))()},fetchUserVotes:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=wt.get("auth/delegatedWallet")||wt.get("auth/wallet"),r=new q["Web3FunctionProvider"](wt.get("auth/provider"),(function(){return Promise.resolve(n)})),a=wt.get("auth/contract"),e.userVotes=[],a.events.IPVote(r.get({fromBlock:1}),{voter:n}).on("log",(function(t){console.log("Vote log",t),e.userVotes.push({index:Number.parseInt(t.returnValues.index),approval:Number.parseInt(t.returnValues.vote)>0,decision:Number.parseInt(t.returnValues.vote)>0?"Accepted":"Rejected",txHash:t.transactionHash,block:t.blockNumber})}));case 5:case"end":return t.stop()}}),t)})))()},canVote:function(e){var t=this.CRIPS.find((function(t){return t.index==e}));if(!t)return!1;var n=this.blockNumber,r=t.voteFromBlock<=n&&t.voteUntilBlock>=n;return r&&(this.isNode||this.isAuditor)},voteFromContent:function(e){var t=this.CRIPS.find((function(t){return t.index==e}));if(!t)return"N/A";var n=t.voteFromBlock-this.blockNumber;return console.log("voteFromContent",e,t,n),n<=0?"Opened":(4*n/86400).toFixed(2)+" days"},voteUntilContent:function(e){var t=this.CRIPS.find((function(t){return t.index==e}));if(!t)return"N/A";var n=t.voteUntilBlock-this.blockNumber;return console.log("voteFromContent",e,t,n),n<=0?"Closed":(4*n/86400).toFixed(2)+" days"},userVote:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log("User vote",e.index,e.vote),"boolean"===typeof e.vote){n.next=3;break}return n.abrupt("return");case 3:return r=e.vote?"voteForProposal":"voteAgainstProposal",n.next=6,an(Zt(r,{maxGas:1e5},e.index));case 6:a=n.sent,null===a&&(e.vote=null),t.fetchCRIPS(),t.fetchUserVotes();case 10:case"end":return n.stop()}}),n)})))()}}},Or=Rr,Ar=Object(M["a"])(Or,yr,_r,!1,null,null,null),jr=Ar.exports,Cr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.logs,(function(t){return n("div",{key:t.key},[n("v-chip",[e._v(e._s(t.type))]),e._v(" "+e._s(t.args.map((function(e){return"object"==typeof e?"OBJ":e})).join(" "))+" ")],1)})),0)},Ir=[],Nr={data:function(){return{}},computed:Object(i["a"])({},Object(l["c"])(["logs"])),mounted:function(){},methods:{}},Pr=Nr,Er=Object(M["a"])(Pr,Cr,Ir,!1,null,null,null),Dr=Er.exports;r["default"].use(p["a"]);var Sr=function(e){var t=e.store;return!t.state.auth.wallet},Br=function(e){return function(t){var n=t.store;return n.get("auth/walletRole")==e}},Fr=function(e){return function(t){return!e(t)}},Mr=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n,r=Object(u["a"])(t);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a(e))return!0}}catch(o){r.e(o)}finally{r.f()}return!1}},Ur=[{name:"welcome",path:"/welcome",component:mn,meta:{hidden:function(){return!0}}},{name:"dashboard",path:"/dashboard",component:Tn,meta:{displayInSidenav:""}},{name:"status",path:"/status",component:hr,meta:{displayInSidenav:"",restricted:Fr(Br(ee.VISITOR)),forceRedirectTo:"dashboard",hidden:Br(ee.VISITOR)}},{name:"improvements",path:"/improvements",component:jr,meta:{displayInSidenav:"",forceRedirectTo:"dashboard"}},{name:"installMetaMask",path:"/installmetamask",component:T},{name:"authentication",path:"/auth",component:ln,meta:{displayInSidenav:"",hidden:function(e){var t=e.store;return!Sr({store:t})}}},{name:"auditors",path:"/auditors",component:Gn,meta:{displayInSidenav:"Governance",restricted:Mr(Br(ee.AUDITED_NODE),Br(ee.NEW_NODE)),forceRedirectTo:"dashboard",hidden:Fr(Mr(Br(ee.AUDITED_NODE),Br(ee.NEW_NODE)))}},{name:"confiscated-pledge",path:"/confiscated",component:xr,meta:{displayInSidenav:"Governance",restricted:Mr(Br(ee.AUDITED_NODE),Br(ee.NEW_NODE)),forceRedirectTo:"dashboard",hidden:Fr(Mr(Br(ee.AUDITED_NODE),Br(ee.NEW_NODE)))}},{name:"pledge",path:"/pledge",component:ur,meta:{displayInSidenav:"Audit",restricted:Br(ee.APPROVED_AUDITOR),forceRedirectTo:"status",hidden:Fr(Mr(Br(ee.PENDING_AUDITOR),Br(ee.APPROVED_AUDITOR)))}},{name:"audit",path:"/audit",component:Xn,meta:{displayInSidenav:"Audit",restricted:Br(ee.APPROVED_AUDITOR),forceRedirectTo:"status",hidden:Fr(Mr(Br(ee.PENDING_AUDITOR),Br(ee.APPROVED_AUDITOR)))}},{name:"history",path:"/history",component:rr,meta:{displayInSidenav:"Audit",restricted:Mr(Br(ee.PENDING_AUDITOR),Br(ee.APPROVED_AUDITOR)),forceRedirectTo:"status",hidden:Fr(Mr(Br(ee.PENDING_AUDITOR),Br(ee.APPROVED_AUDITOR)))}},{name:"logs",path:"/logs",component:Dr,meta:{displayInSidenav:"",forceRedirectTo:"status",hidden:function(e){var t=e.config;return!(null!==t&&void 0!==t&&t.activate_log)}}},{path:"*",redirect:"welcome"}],Tr=new p["a"]({routes:Ur,base:""});function Vr(e){return Wr.apply(this,arguments)}function Wr(){return Wr=Object(d["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.oldPush(t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.log("Target page was not reached but this is normal",e.t0.to.name,"---\x3e",this.currentRoute.name);case 8:case"end":return e.stop()}}),e,this,[[0,5]])}))),Wr.apply(this,arguments)}Tr.oldPush=Tr.push.bind(Tr),Tr.push=Vr.bind(Tr);var Lr=Tr,Hr={props:{value:Boolean},data:function(){return{drawer:!0}},watch:{value:function(){this.drawer=this.value}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(l["c"])(["mmIsOpen","config"])),Object(l["c"])("auth",["registered"])),Object(l["c"])("status",["approved"])),{},{sidenav:function(){var e,t=this,n=Ur.filter((function(e){var t;return void 0!==(null===e||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.displayInSidenav)})).map((function(e){return{icon:"mdi-wallet",label:e.name.charAt(0).toUpperCase()+e.name.slice(1),route:e.name,meta:e.meta,restricted:e.meta.restricted,disabled:function(){return t.mmIsOpen||e.meta.restricted&&!e.meta.restricted({store:t.$store})},hidden:e.meta.hidden}})),r=[],a=[],o=Object(u["a"])(n);try{for(o.s();!(e=o.n()).done;){var i=e.value;i.hidden&&i.hidden({store:this.$store,config:this.config})||(i.meta&&""!==i.meta.displayInSidenav&&!a.includes(i.meta.displayInSidenav)&&(r.push({subheader:!0,label:i.meta.displayInSidenav}),a.push(i.meta.displayInSidenav)),r.push(i))}}catch(s){o.e(s)}finally{o.f()}return r}}),mounted:function(){console.log("routes",Ur)},methods:{drawerChange:function(){this.$emit("input",this.drawer)},goTo:function(e){this.$route.name!==e&&this.$router.push({name:e})}}},$r=Hr,Gr=Object(M["a"])($r,s,c,!1,null,null,null),qr=Gr.exports,zr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{width:"500",persistent:""},model:{value:e.display,callback:function(t){e.display=t},expression:"display"}},[n("v-card",[n("v-card-title",[e._v("Transaction authentication")]),n("v-card-text",[e._v(" Enter the password for the wallet "+e._s(e.walletAddress)+" : "),n("v-text-field",{attrs:{type:"password"},model:{value:e.walletPassword,callback:function(t){e.walletPassword=t},expression:"walletPassword"}}),n("div",{staticStyle:{color:"red"}},[e._v(e._s(e.errorMessage))])],1),n("v-card-actions",[n("v-btn",{on:{click:e.cancel}},[e._v("Cancel")]),n("v-btn",{attrs:{loading:e.loading,disabled:""===e.walletPassword||e.loading},on:{click:e.submit}},[e._v(" Confirm ")])],1)],1)],1)},Jr=[],Yr={data:function(){return{walletAddress:null,errorMessage:null,display:!1,loading:!1,walletPassword:"",submit:function(){},cancel:function(){}}},methods:{authenticate:function(e,t){var n=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e&&t){r.next=2;break}throw new Error("Invalid call to the authenticate function, missing parameters");case 2:return n.walletAddress=e,n.display=!0,r.prev=4,r.next=7,new Promise((function(e,r){function a(){return o.apply(this,arguments)}function o(){return o=Object(d["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!this.walletAddress||!this.walletPassword){n.next=19;break}return this.loading=!0,n.prev=2,n.next=5,t.authenticate(this.walletAddress,this.walletPassword);case 5:if(a=n.sent,a){n.next=8;break}throw new Error("Missing token from authenticate without real error");case 8:e(a),n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](2),this.errorMessage=n.t0.message;case 14:return n.prev=14,this.loading=!1,n.finish(14);case 17:n.next=20;break;case 19:r(new Error("No wallet address or password"));case 20:case"end":return n.stop()}}),n,this,[[2,11,14,17]])}))),o.apply(this,arguments)}function i(){r(new Error("Authentication cancelled by user"))}n.submit=a.bind(n),n.cancel=i.bind(n)}));case 7:return a=r.sent,r.abrupt("return",a);case 9:return r.prev=9,n.walletPassword="",n.errorMessage=null,n.display=!1,r.finish(9);case 14:case"end":return r.stop()}}),r,null,[[4,,9,14]])})))()}}},Kr=Yr,Xr=Object(M["a"])(Kr,zr,Jr,!1,null,null,null),Qr=Xr.exports,Zr={components:{AppMenu:qr,WalletAuthenticationDialog:Qr},data:function(){return{drawerDisplayed:!0}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(l["e"])(["displaySnackbar","snackbarMessage","snackbarColor"])),Object(l["c"])(["mmIsOpen"])),Object(l["c"])("auth",["wallet","walletRole","chainName","mmConnecting"])),Object(l["c"])("nodes",["currentBlockNumber"])),methods:Object(i["a"])(Object(i["a"])({},Object(l["a"])("auth",["detectProvider","disconnect","cancelWalletConnection"])),{},{showDrawer:function(){this.drawerDisplayed=!0},goTo:function(e){this.$route.name!==e&&this.$router.push({name:e})}}),mounted:function(){wt.set("auth/walletAuthenticationFunction",this.$refs.walletAuthenticationDialog.authenticate)}},ea=Zr,ta=Object(M["a"])(ea,a,o,!1,null,null,null),na=ta.exports,ra=n("ce5b"),aa=n.n(ra);n("bf40");r["default"].use(aa.a);var oa=new aa.a({theme:{themes:{light:{primary:"#607d8b",secondary:"#009688",accent:"#4caf50",error:"# e91e63",warning:"#cddc39",info:"#3f51b5",success:"#8bc34"}}}});n("d5e8"),n("5363");function ia(e,t){e.beforeEach(function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(n,r,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(r.name,"---\x3e",n.name,t.state.initialized,t.state.auth.providerModel),"welcome"!=n.name){e.next=3;break}return e.abrupt("return",a());case 3:if("logs"!=n.name){e.next=5;break}return e.abrupt("return",a());case 5:if(t.state.initialized){e.next=7;break}return e.abrupt("return",a({name:"welcome"}));case 7:if(e.prev=7,"installMetaMask"!=n.name){e.next=10;break}return e.abrupt("return",a());case 10:if("authentication"!=n.name){e.next=12;break}return e.abrupt("return",a());case 12:if("both"!=t.state.auth.providerModel){e.next=14;break}return e.abrupt("return",a({name:"authentication"}));case 14:if("switchMetamask"!=t.state.auth.providerModel){e.next=16;break}return e.abrupt("return",a({name:"installMetaMask"}));case 16:if(n.meta&&"function"===typeof n.meta.restricted){e.next=18;break}return e.abrupt("return",a());case 18:if(n.meta.restricted({store:t})){e.next=20;break}return e.abrupt("return",a({name:n.meta.forceRedirectTo||"dashboard"}));case 20:return console.log(r.name,"---\x3e",n.name,"ends"),e.abrupt("return",a());case 24:return e.prev=24,e.t0=e["catch"](7),console.error("Something happened when routing from "+r.name+" to "+n.name,e.t0.message),e.abrupt("return",a({name:"welcome"}));case 28:case"end":return e.stop()}}),e,null,[[7,24]])})));return function(t,n,r){return e.apply(this,arguments)}}())}var sa=n("1e7f"),ca=new sa["a"]({config:{connectionString:"InstrumentationKey=5dbf6d49-a294-4cd9-96dd-892f4da7dd55;IngestionEndpoint=https://westeurope-5.in.applicationinsights.azure.com/;LiveEndpoint=https://westeurope.livediagnostics.monitor.azure.com/",enableAutoRouteTracking:!0}});function ua(){"localhost"!==window.location.hostname&&ca.trackPageView({uri:window.location.href})}ca.loadAppInsights(),ua(),window.addEventListener("unhandledrejection",(function(e){ca.trackException({exception:e.reason})})),r["default"].config.productionTip=!1,ia(Lr,wt),ua(),new r["default"]({vuetify:oa,store:wt,router:Lr,render:function(e){return e(na)}}).$mount("#app")},6:function(e,t){},7:function(e,t){},8:function(e,t){},9:function(e,t){},c4d9:function(e,t,n){}});
//# sourceMappingURL=index.936c29ca.js.map